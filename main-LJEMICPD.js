var eF=Object.create;var Dy=Object.defineProperty,tF=Object.defineProperties,nF=Object.getOwnPropertyDescriptor,rF=Object.getOwnPropertyDescriptors,iF=Object.getOwnPropertyNames,UD=Object.getOwnPropertySymbols,BD=Object.getPrototypeOf,zD=Object.prototype.hasOwnProperty,oF=Object.prototype.propertyIsEnumerable,sF=Reflect.get;var jD=(n,e,t)=>e in n?Dy(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q=(n,e)=>{for(var t in e||={})zD.call(e,t)&&jD(n,t,e[t]);if(UD)for(var t of UD(e))oF.call(e,t)&&jD(n,t,e[t]);return n},we=(n,e)=>tF(n,rF(e));var aF=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var cF=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iF(e))!zD.call(n,i)&&i!==t&&Dy(n,i,{get:()=>e[i],enumerable:!(r=nF(e,i))||r.enumerable});return n};var $D=(n,e,t)=>(t=n!=null?eF(BD(n)):{},cF(e||!n||!n.__esModule?Dy(t,"default",{value:n,enumerable:!0}):t,n));var ts=(n,e,t)=>sF(BD(n),t,e);var T=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{u(t.next(l))}catch(f){i(f)}},a=l=>{try{u(t.throw(l))}catch(f){i(f)}},u=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,a);u((t=t.apply(n,e)).next())});var cD=aF((Qv,lL)=>{"use strict";(function(n,e){typeof Qv=="object"&&typeof lL<"u"?e(Qv):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(Qv,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var r=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function i(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function u(s,c,h){var p,_,w,S;return S=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(S,c),p=!0)},w}function l(s,c,h){var p=c[1],_=c[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function g(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return y(s).split(/\s+/)}function I(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?r(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function N(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var H=/\{ *([\w_ -]+) *\}/g;function F(s,c){return s.replace(H,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var W=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function oe(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var se="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function le(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Ye=0;function be(s){var c=+new Date,h=Math.max(0,16-(c-Ye));return Ye=c+h,window.setTimeout(s,h)}var R=window.requestAnimationFrame||le("RequestAnimationFrame")||be,C=window.cancelAnimationFrame||le("CancelAnimationFrame")||le("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,c,h){if(h&&R===be)s.call(c);else return R.call(window,i(s,c))}function x(s){s&&C.call(window,s)}var M={__proto__:null,extend:t,create:r,bind:i,get lastId(){return o},stamp:a,throttle:u,wrapNum:l,falseFn:f,formatNum:g,trim:y,splitWords:E,setOptions:I,getParamString:N,template:F,isArray:W,indexOf:oe,emptyImageUrl:se,requestFn:R,cancelFn:C,requestAnimFrame:D,cancelAnimFrame:x};function k(){}k.extend=function(s){var c=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=r(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&t(c,s.statics),s.includes&&(A(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?r(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,S=p._initHooks.length;w<S;w++)p._initHooks[w].call(this)}},c},k.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},k.mergeOptions=function(s){return t(this.prototype.options,s),this},k.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function A(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=W(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Dt={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var _=arguments.length===1,w=0,S=s.length;w<S;w++)_?this._off(s[w]):this._off(s[w],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var S=this._listens(s,c,h);if(S!==!1){var O=p[S];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(S,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,S=_.length;w<S;w++){var O=_[w],j=O.fn;O.once&&this.off(s,j,O.ctx),j.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var S in this._eventParents)if(this._eventParents[S].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Dt.addEventListener=Dt.on,Dt.removeEventListener=Dt.clearAllEventListeners=Dt.off,Dt.addOneTimeEventListener=Dt.once,Dt.fireEvent=Dt.fire,Dt.hasEventListeners=Dt.listens;var Lr=k.extend(Dt);function Ie(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var Bo=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Ie.prototype={clone:function(){return new Ie(this.x,this.y)},add:function(s){return this.clone()._add(pe(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(pe(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Ie(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Ie(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Bo(this.x),this.y=Bo(this.y),this},distanceTo:function(s){s=pe(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=pe(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=pe(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function pe(s,c,h){return s instanceof Ie?s:W(s)?new Ie(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Ie(s.x,s.y):new Ie(s,c,h)}function ut(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}ut.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof Ie||typeof s[0]=="number"||"x"in s)c=h=pe(s);else if(s=fn(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return pe(this.min.x,this.max.y)},getTopRight:function(){return pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof Ie?s=pe(s):s=fn(s),s instanceof ut?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=fn(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=c.x&&p.x<=h.x,S=_.y>=c.y&&p.y<=h.y;return w&&S},overlaps:function(s){s=fn(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>c.x&&p.x<h.x,S=_.y>c.y&&p.y<h.y;return w&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return fn(pe(c.x-p,c.y-_),pe(h.x+p,h.y+_))},equals:function(s){return s?(s=fn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function fn(s,c){return!s||s instanceof ut?s:new ut(s,c)}function bn(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}bn.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof ve)p=s,_=s;else if(s instanceof bn){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Ue(s)||rt(s)):this;return!c&&!h?(this._southWest=new ve(p.lat,p.lng),this._northEast=new ve(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new bn(new ve(c.lat-p,c.lng-_),new ve(h.lat+p,h.lng+_))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ve||"lat"in s?s=Ue(s):s=rt(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof bn?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=rt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=c.lat&&p.lat<=h.lat,S=_.lng>=c.lng&&p.lng<=h.lng;return w&&S},overlaps:function(s){s=rt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>c.lat&&p.lat<h.lat,S=_.lng>c.lng&&p.lng<h.lng;return w&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=rt(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function rt(s,c){return s instanceof bn?s:new bn(s,c)}function ve(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}ve.prototype={equals:function(s,c){if(!s)return!1;s=Ue(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return ci.distance(this,Ue(s))},wrap:function(){return ci.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return rt([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function Ue(s,c,h){return s instanceof ve?s:W(s)&&typeof s[0]!="object"?s.length===3?new ve(s[0],s[1],s[2]):s.length===2?new ve(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ve(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ve(s,c,h)}var kn={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new ut(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?l(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?l(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ve(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),S=s.getNorthEast(),O=new ve(w.lat-p,w.lng-_),j=new ve(S.lat-p,S.lng-_);return new bn(O,j)}},ci=t({},kn,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,w=Math.sin((c.lat-s.lat)*h/2),S=Math.sin((c.lng-s.lng)*h/2),O=w*w+Math.cos(p)*Math.cos(_)*S*S,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),zo=6378137,Fl={R:zo,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new Ie(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new ve((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=zo*Math.PI;return new ut([-s,-s],[s,s])})()};function Vl(s,c,h,p){if(W(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}Vl.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new Ie((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function ui(s,c,h,p){return new Vl(s,c,h,p)}var $o=t({},ci,{code:"EPSG:3857",projection:Fl,transformation:(function(){var s=.5/(Math.PI*Fl.R);return ui(s,.5,-s,.5)})()}),Ul=t({},$o,{code:"EPSG:900913"});function Ac(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function xc(s,c){var h="",p,_,w,S,O,j;for(p=0,w=s.length;p<w;p++){for(O=s[p],_=0,S=O.length;_<S;_++)j=O[_],h+=(_?"L":"M")+j.x+" "+j.y;h+=c?ce.svg?"z":"x":""}return h||"M0 0"}var ta=document.documentElement.style,na="ActiveXObject"in window,kf=na&&!document.addEventListener,Of="msLaunchUri"in navigator&&!("documentMode"in document),Rc=rr("webkit"),jl=rr("android"),Mc=rr("android 2")||rr("android 3"),Lf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_y=jl&&rr("Google")&&Lf<537&&!("AudioNode"in window),ra=!!window.opera,Pc=!Of&&rr("chrome"),Nc=rr("gecko")&&!Rc&&!ra&&!na,en=!Pc&&rr("safari"),tn=rr("phantom"),ia="OTransition"in ta,Ff=navigator.platform.indexOf("Win")===0,Bl=na&&"transition"in ta,zl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mc,Ho="MozPerspective"in ta,Vf=!window.L_DISABLE_3D&&(Bl||zl||Ho)&&!ia&&!tn,qo=typeof orientation<"u"||rr("mobile"),$l=qo&&Rc,vy=qo&&zl,Uf=!window.PointerEvent&&window.MSPointerEvent,kc=!!(window.PointerEvent||Uf),Hl="ontouchstart"in window||!!window.TouchEvent,jf=!window.L_NO_TOUCH&&(Hl||kc),oa=qo&&ra,ql=qo&&Nc,Wl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xi=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s})(),Bf=(function(){return!!document.createElement("canvas").getContext})(),Wo=!!(document.createElementNS&&Ac("svg").createSVGRect),zf=!!Wo&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),sa=!Wo&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),$f=navigator.platform.indexOf("Mac")===0,pn=navigator.platform.indexOf("Linux")===0;function rr(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ce={ie:na,ielt9:kf,edge:Of,webkit:Rc,android:jl,android23:Mc,androidStock:_y,opera:ra,chrome:Pc,gecko:Nc,safari:en,phantom:tn,opera12:ia,win:Ff,ie3d:Bl,webkit3d:zl,gecko3d:Ho,any3d:Vf,mobile:qo,mobileWebkit:$l,mobileWebkit3d:vy,msPointer:Uf,pointer:kc,touch:jf,touchNative:Hl,mobileOpera:oa,mobileGecko:ql,retina:Wl,passiveEvents:Xi,canvas:Bf,svg:Wo,vml:sa,inlineSvg:zf,mac:$f,linux:pn},Go=ce.msPointer?"MSPointerDown":"pointerdown",Hf=ce.msPointer?"MSPointerMove":"pointermove",qf=ce.msPointer?"MSPointerUp":"pointerup",eo=ce.msPointer?"MSPointerCancel":"pointercancel",Gl={touchstart:Go,touchmove:Hf,touchend:qf,touchcancel:eo},Wf={touchstart:Kf,touchmove:Ko,touchend:Ko,touchcancel:Ko},Fr={},Kl=!1;function Zl(s,c,h){return c==="touchstart"&&Yl(),Wf[c]?(h=Wf[c].bind(this,h),s.addEventListener(Gl[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Oc(s,c,h){if(!Gl[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Gl[c],h,!1)}function li(s){Fr[s.pointerId]=s}function Gf(s){Fr[s.pointerId]&&(Fr[s.pointerId]=s)}function Ql(s){delete Fr[s.pointerId]}function Yl(){Kl||(document.addEventListener(Go,li,!0),document.addEventListener(Hf,Gf,!0),document.addEventListener(qf,Ql,!0),document.addEventListener(eo,Ql,!0),Kl=!0)}function Ko(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Fr)c.touches.push(Fr[h]);c.changedTouches=[c],s(c)}}function Kf(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&At(c),Ko(s,c)}function Zf(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var yy=200;function Lc(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var S=sd(w);if(!(S.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!S.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-h<=yy?(p++,p===2&&c(Zf(w))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function Qf(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var aa=wr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vr=wr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),di=Vr==="webkitTransition"||Vr==="OTransition"?Vr+"End":"transitionend";function Fc(s){return typeof s=="string"?document.getElementById(s):s}function ca(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function $e(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function ht(s){var c=s.parentNode;c&&c.removeChild(s)}function ua(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function hi(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function fi(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Vc(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=la(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function xe(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!Vc(s,c)){var w=la(s);Jl(s,(w?w+" ":"")+c)}}function St(s,c){s.classList!==void 0?s.classList.remove(c):Jl(s,y((" "+la(s)+" ").replace(" "+c+" "," ")))}function Jl(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function la(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function On(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&wy(s,c)}function wy(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function wr(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function mn(s,c,h){var p=c||new Ie(0,0);s.style[aa]=(ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function pt(s,c){s._leaflet_pos=c,ce.any3d?mn(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Er(s){return s._leaflet_pos||new Ie(0,0)}var Zo,Je,Qo;if("onselectstart"in document)Zo=function(){ye(window,"selectstart",At)},Je=function(){it(window,"selectstart",At)};else{var Ur=wr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zo=function(){if(Ur){var s=document.documentElement.style;Qo=s[Ur],s[Ur]="none"}},Je=function(){Ur&&(document.documentElement.style[Ur]=Qo,Qo=void 0)}}function to(){ye(window,"dragstart",At)}function Xl(){it(window,"dragstart",At)}var da,ed;function td(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Uc(),da=s,ed=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",Uc))}function Uc(){da&&(da.style.outlineStyle=ed,da=void 0,ed=void 0,it(window,"keydown",Uc))}function Yf(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function no(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var pi={__proto__:null,TRANSFORM:aa,TRANSITION:Vr,TRANSITION_END:di,get:Fc,getStyle:ca,create:$e,remove:ht,empty:ua,toFront:hi,toBack:fi,hasClass:Vc,addClass:xe,removeClass:St,setClass:Jl,getClass:la,setOpacity:On,testProp:wr,setTransform:mn,setPosition:pt,getPosition:Er,get disableTextSelection(){return Zo},get enableTextSelection(){return Je},disableImageDrag:to,enableImageDrag:Xl,preventOutline:td,restoreOutline:Uc,getSizedParentNode:Yf,getScale:no};function ye(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)rd(s,_,c[_],h);else{c=E(c);for(var w=0,S=c.length;w<S;w++)rd(s,c[w],h,p)}return this}var ir="_leaflet_events";function it(s,c,h,p){if(arguments.length===1)ro(s),delete s[ir];else if(c&&typeof c=="object")for(var _ in c)id(s,_,c[_],h);else if(c=E(c),arguments.length===2)ro(s,function(O){return oe(c,O)!==-1});else for(var w=0,S=c.length;w<S;w++)id(s,c[w],h,p);return this}function ro(s,c){for(var h in s[ir]){var p=h.split(/\d/)[0];(!c||c(p))&&id(s,p,null,null,h)}}var nd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function rd(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[ir]&&s[ir][_])return this;var w=function(O){return h.call(p||s,O||window.event)},S=w;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?w=Zl(s,c,w):ce.touch&&c==="dblclick"?w=Lc(s,w):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(nd[c]||c,w,ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(w=function(O){O=O||window.event,pa(s,O)&&S(O)},s.addEventListener(nd[c],w,!1)):s.addEventListener(c,S,!1):s.attachEvent("on"+c,w),s[ir]=s[ir]||{},s[ir][_]=w}function id(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var w=s[ir]&&s[ir][_];if(!w)return this;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?Oc(s,c,w):ce.touch&&c==="dblclick"?Qf(s,w):"removeEventListener"in s?s.removeEventListener(nd[c]||c,w,!1):s.detachEvent("on"+c,w),s[ir][_]=null}function In(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function od(s){return rd(s,"wheel",In),this}function ha(s){return ye(s,"mousedown touchstart dblclick contextmenu",In),s._leaflet_disable_click=!0,this}function At(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function br(s){return At(s),In(s),this}function sd(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function Yo(s,c){if(!c)return new Ie(s.clientX,s.clientY);var h=no(c),p=h.boundingClientRect;return new Ie((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var fa=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ad(s){return ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/fa:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function pa(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var vt={__proto__:null,on:ye,off:it,stopPropagation:In,disableScrollPropagation:od,disableClickPropagation:ha,preventDefault:At,stop:br,getPropagationPath:sd,getMousePosition:Yo,getWheelDelta:ad,isExternalTarget:pa,addListener:ye,removeListener:it},Jf=Lr.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Er(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),pt(this._el,h),this.fire("step")},_complete:function(){x(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),je=Lr.extend({options:{crs:$o,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=I(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ue(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Vr&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,di,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(Ue(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),w=s instanceof Ie?s:this.latLngToContainerPoint(s),S=w.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(S));return this.setView(O,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():rt(s);var h=pe(c.paddingTopLeft||c.padding||[0,0]),p=pe(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),S=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),j=this.unproject(S.add(O).divideBy(2).add(w),_);return{center:j,zoom:_}},fitBounds:function(s,c){if(s=rt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=pe(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Jf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!ce.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),S=this._zoom;s=Ue(s),c=c===void 0?S:c;var O=Math.max(w.x,w.y),j=O*this.getZoomScale(S,c),K=_.distanceTo(p)||1,ne=1.42,ge=ne*ne;function Le(zt){var gp=zt?-1:1,QL=zt?j:O,YL=j*j-O*O+gp*ge*ge*K*K,JL=2*QL*ge*K,Cy=YL/JL,VD=Math.sqrt(Cy*Cy+1)-Cy,XL=VD<1e-9?-18:Math.log(VD);return XL}function Fn(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function rn(zt){return(Math.exp(zt)+Math.exp(-zt))/2}function Ir(zt){return Fn(zt)/rn(zt)}var Wn=Le(0);function Yc(zt){return O*(rn(Wn)/rn(Wn+ne*zt))}function WL(zt){return O*(rn(Wn)*Ir(Wn+ne*zt)-Fn(Wn))/ge}function GL(zt){return 1-Math.pow(1-zt,1.5)}var KL=Date.now(),LD=(Le(1)-Wn)/ne,ZL=h.duration?1e3*h.duration:1e3*LD*.8;function FD(){var zt=(Date.now()-KL)/ZL,gp=GL(zt)*LD;zt<=1?(this._flyToFrame=D(FD,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(WL(gp)/K)),S),this.getScaleZoom(O/Yc(gp),S),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),FD.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=rt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,rt(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=pe(c.paddingTopLeft||c.padding||[0,0]),p=pe(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),S=this.getPixelBounds(),O=fn([S.min.add(h),S.max.subtract(p)]),j=O.getSize();if(!O.contains(w)){this._enforcingBounds=!0;var K=w.subtract(O.getCenter()),ne=O.extend(w).getSize().subtract(j);_.x+=K.x<0?-ne.x:ne.x,_.y+=K.y<0?-ne.y:ne.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=i(this._handleGeolocationResponse,this),h=i(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new ve(c,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var S=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(S,w.maxZoom):S)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var j in s.coords)typeof s.coords[j]=="number"&&(O[j]=s.coords[j]);this.fire("locationfound",O)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ht(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(x(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)ht(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=$e("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new bn(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=rt(s),h=pe(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),S=s.getNorthWest(),O=s.getSouthEast(),j=this.getSize().subtract(h),K=fn(this.project(O,p),this.project(S,p)).getSize(),ne=ce.any3d?this.options.zoomSnap:1,ge=j.x/K.x,Le=j.y/K.y,Fn=c?Math.max(ge,Le):Math.min(ge,Le);return p=this.getScaleZoom(Fn,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=c?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new ut(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ue(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(pe(s),c)},layerPointToLatLng:function(s){var c=pe(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(Ue(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ue(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(rt(s))},distance:function(s,c){return this.options.crs.distance(Ue(s),Ue(c))},containerPointToLayerPoint:function(s){return pe(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return pe(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(pe(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ue(s)))},mouseEventToContainerPoint:function(s){return Yo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Fc(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,xe(s,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=ca(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pt(this._mapPane,new Ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(s.markerPane,"leaflet-zoom-hide"),xe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){pt(this._mapPane,new Ie(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return x(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){pt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?it:ye;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){x(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",w=s.target||s.srcElement,S=!1;w;){if(p=this._targets[a(w)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){S=!0;break}if(p&&p.listens(c,!0)&&(_&&!pa(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!S&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&td(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var w=[],S=0;S<h.length;S++)h[S].listens(c,!0)&&w.push(h[S]);_=w.concat(_)}if(_.length){c==="contextmenu"&&At(s);var O=_[0],j={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var K=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=K?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=K?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(S=0;S<_.length;S++)if(_[S].fire(c,j,!0),j.originalEvent._stopped||_[S].options.bubblingMouseEvents===!1&&oe(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Er(this._mapPane)||new Ie(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return fn([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),w=new ut(p.subtract(_),p.add(_)),S=this._getBoundsOffset(w,h,c);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?s:this.unproject(p.add(S),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new ut(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=fn(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),S=this._rebound(_.x,-w.x),O=this._rebound(_.y,-w.y);return new Ie(S,O)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){St(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=$e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=aa,p=this._proxy.style[h];mn(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ht(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();mn(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&St(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Xf(s,c){return new je(s,c)}var qn=k.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return xe(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ht(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Jo=function(s){return new qn(s)};je.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=$e("div",c+"control-container",this._container);function p(_,w){var S=c+_+" "+c+w;s[_+w]=$e("div",S,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)ht(this._controlCorners[s]);ht(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ma=qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){I(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return qn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):St(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return St(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=$e("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),ha(c),od(c);var p=this._section=$e("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ye(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=$e("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),ye(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){At(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=$e("div",s+"-base",p),this._separator=$e("div",s+"-separator",p),this._overlaysList=$e("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(i(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ua(this._baseLayersList),ua(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),ye(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");c.appendChild(w),w.appendChild(p),w.appendChild(_);var S=s.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)c=s[w],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",At),this.expand();var c=this;setTimeout(function(){it(s,"click",At),c._preventClick=!1})}}),ep=function(s,c,h){return new ma(s,c,h)},or=qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=$e("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var w=$e("a",h,p);return w.innerHTML=s,w.href="#",w.title=c,w.setAttribute("role","button"),w.setAttribute("aria-label",c),ha(w),ye(w,"click",br),ye(w,"click",_,this),ye(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";St(this._zoomInButton,c),St(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(xe(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(xe(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});je.mergeOptions({zoomControl:!0}),je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new or,this.addControl(this.zoomControl))});var tp=function(s){return new or(s)},np=qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=$e("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=$e("div",c,h)),s.imperial&&(this._iScale=$e("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),ga=function(s){return new np(s)},rp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_a=qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?rp+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=$e("div","leaflet-control-attribution"),ha(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});je.mergeOptions({attributionControl:!0}),je.addInitHook(function(){this.options.attributionControl&&new _a().addTo(this)});var jc=function(s){return new _a(s)};qn.Layers=ma,qn.Zoom=or,qn.Scale=np,qn.Attribution=_a,Jo.layers=ep,Jo.zoom=tp,Jo.scale=ga,Jo.attribution=jc;var sr=k.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sr.addTo=function(s,c){return s.addHandler(c,this),this};var Bc={Events:Dt},ip=ce.touch?"touchstart mousedown":"mousedown",jr=Lr.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){I(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(ye(this._dragStartTarget,ip,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(jr._dragging===this&&this.finishDrag(!0),it(this._dragStartTarget,ip,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Vc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){jr._dragging===this&&this.finishDrag();return}if(!(jr._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(jr._dragging=this,this._preventOutline&&td(this._element),to(),Zo(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=Yf(this._element);this._startPoint=new Ie(c.clientX,c.clientY),this._startPos=Er(this._element),this._parentScale=no(h);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Ie(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,At(s),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),pt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){St(document.body,"leaflet-dragging"),this._lastTarget&&(St(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),it(document,"mousemove touchmove",this._onMove,this),it(document,"mouseup touchend touchcancel",this._onUp,this),Xl(),Je();var c=this._moved&&this._moving;this._moving=!1,jr._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Xo(s,c,h){var p,_=[1,4,2,8],w,S,O,j,K,ne,ge,Le;for(w=0,ne=s.length;w<ne;w++)s[w]._code=mi(s[w],c);for(O=0;O<4;O++){for(ge=_[O],p=[],w=0,ne=s.length,S=ne-1;w<ne;S=w++)j=s[w],K=s[S],j._code&ge?K._code&ge||(Le=va(K,j,ge,c,h),Le._code=mi(Le,c),p.push(Le)):(K._code&ge&&(Le=va(K,j,ge,c,h),Le._code=mi(Le,c),p.push(Le)),p.push(j));s=p}return s}function cd(s,c){var h,p,_,w,S,O,j,K,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ge=Ue([0,0]),Le=rt(s),Fn=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());Fn<1700&&(ge=zc(s));var rn=s.length,Ir=[];for(h=0;h<rn;h++){var Wn=Ue(s[h]);Ir.push(c.project(Ue([Wn.lat-ge.lat,Wn.lng-ge.lng])))}for(O=j=K=0,h=0,p=rn-1;h<rn;p=h++)_=Ir[h],w=Ir[p],S=_.y*w.x-w.y*_.x,j+=(_.x+w.x)*S,K+=(_.y+w.y)*S,O+=S*3;O===0?ne=Ir[0]:ne=[j/O,K/O];var Yc=c.unproject(pe(ne));return Ue([Yc.lat+ge.lat,Yc.lng+ge.lng])}function zc(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var w=Ue(s[_]);c+=w.lat,h+=w.lng,p++}return Ue([c/p,h/p])}var ud={__proto__:null,clipPolygon:Xo,polygonCenter:cd,centroid:zc};function $c(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=io(s,h),s=op(s,h),s}function ld(s,c,h){return Math.sqrt(Yt(s,c,h,!0))}function Hc(s,c,h){return Yt(s,c,h)}function op(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,qc(s,_,c,0,h-1);var w,S=[];for(w=0;w<h;w++)_[w]&&S.push(s[w]);return S}function qc(s,c,h,p,_){var w=0,S,O,j;for(O=p+1;O<=_-1;O++)j=Yt(s[O],s[p],s[_],!0),j>w&&(S=O,w=j);w>h&&(c[S]=1,qc(s,c,h,p,S),qc(s,c,h,S,_))}function io(s,c){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)Wc(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var dd;function hd(s,c,h,p,_){var w=p?dd:mi(s,h),S=mi(c,h),O,j,K;for(dd=S;;){if(!(w|S))return[s,c];if(w&S)return!1;O=w||S,j=va(s,c,O,h,_),K=mi(j,h),O===w?(s=j,w=K):(c=j,S=K)}}function va(s,c,h,p,_){var w=c.x-s.x,S=c.y-s.y,O=p.min,j=p.max,K,ne;return h&8?(K=s.x+w*(j.y-s.y)/S,ne=j.y):h&4?(K=s.x+w*(O.y-s.y)/S,ne=O.y):h&2?(K=j.x,ne=s.y+S*(j.x-s.x)/w):h&1&&(K=O.x,ne=s.y+S*(O.x-s.x)/w),new Ie(K,ne,_)}function mi(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function Wc(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function Yt(s,c,h,p){var _=c.x,w=c.y,S=h.x-_,O=h.y-w,j=S*S+O*O,K;return j>0&&(K=((s.x-_)*S+(s.y-w)*O)/j,K>1?(_=h.x,w=h.y):K>0&&(_+=S*K,w+=O*K)),S=s.x-_,O=s.y-w,p?S*S+O*O:new Ie(_,w)}function Ln(s){return!W(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function fd(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(s)}function oo(s,c){var h,p,_,w,S,O,j,K;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=Ue([0,0]),ge=rt(s),Le=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());Le<1700&&(ne=zc(s));var Fn=s.length,rn=[];for(h=0;h<Fn;h++){var Ir=Ue(s[h]);rn.push(c.project(Ue([Ir.lat-ne.lat,Ir.lng-ne.lng])))}for(h=0,p=0;h<Fn-1;h++)p+=rn[h].distanceTo(rn[h+1])/2;if(p===0)K=rn[0];else for(h=0,w=0;h<Fn-1;h++)if(S=rn[h],O=rn[h+1],_=S.distanceTo(O),w+=_,w>p){j=(w-p)/_,K=[O.x-j*(O.x-S.x),O.y-j*(O.y-S.y)];break}var Wn=c.unproject(pe(K));return Ue([Wn.lat+ne.lat,Wn.lng+ne.lng])}var d={__proto__:null,simplify:$c,pointToSegmentDistance:ld,closestPointOnSegment:Hc,clipSegment:hd,_getEdgeIntersection:va,_getBitCode:mi,_sqClosestPointOnSegment:Yt,isFlat:Ln,_flat:fd,polylineCenter:oo},m={project:function(s){return new Ie(s.lng,s.lat)},unproject:function(s){return new ve(s.y,s.x)},bounds:new ut([-180,-90],[180,90])},v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ut([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),S=w*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-S)/(1+S),w/2);return p=-h*Math.log(Math.max(O,1e-10)),new Ie(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),S=Math.PI/2-2*Math.atan(w),O=0,j=.1,K;O<15&&Math.abs(j)>1e-7;O++)K=_*Math.sin(S),K=Math.pow((1-K)/(1+K),_/2),j=Math.PI/2-2*Math.atan(w*K)-S,S+=j;return new ve(S*c,s.x*c/h)}},b={__proto__:null,LonLat:m,Mercator:v,SphericalMercator:Fl},P=t({},ci,{code:"EPSG:3395",projection:v,transformation:(function(){var s=.5/(Math.PI*v.R);return ui(s,.5,-s,.5)})()}),B=t({},ci,{code:"EPSG:4326",projection:m,transformation:ui(1/180,1,-1/180,.5)}),J=t({},kn,{projection:m,transformation:ui(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});kn.Earth=ci,kn.EPSG3395=P,kn.EPSG3857=$o,kn.EPSG900913=Ul,kn.EPSG4326=B,kn.Simple=J;var ke=Lr.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});je.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?W(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yt=ke.extend({initialize:function(s,c){I(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),He=function(s,c){return new yt(s,c)},ft=yt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),yt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),yt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new bn;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),nn=function(s,c){return new ft(s,c)},ar=k.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=pe(p),w=pe(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function cr(s){return new ar(s)}var gi=ar.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof gi.imagePath!="string"&&(gi.imagePath=this._detectIconPath()),(this.options.imagePath||gi.imagePath)+ar.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=$e("div","leaflet-default-icon-path",document.body),c=ca(s,"background-image")||ca(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Gc=sr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new jr(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&St(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=Er(c._icon),S=h.getPixelBounds(),O=h.getPixelOrigin(),j=fn(S.min._subtract(O).add(_),S.max._subtract(O).subtract(_));if(!j.contains(w)){var K=pe((Math.max(j.max.x,w.x)-j.max.x)/(S.max.x-j.max.x)-(Math.min(j.min.x,w.x)-j.min.x)/(S.min.x-j.min.x),(Math.max(j.max.y,w.y)-j.max.y)/(S.max.y-j.max.y)-(Math.min(j.min.y,w.y)-j.min.y)/(S.min.y-j.min.y)).multiplyBy(p);h.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),pt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(x(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=Er(c._icon),_=c._map.layerPointToLatLng(p);h&&pt(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){x(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),sp=ke.extend({options:{icon:new gi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){I(this,c),this._latlng=Ue(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=Ue(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),xe(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(xe(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(this._icon,"focus",this._panOnFocus,this),ht(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ht(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&pt(this._icon,s),this._shadow&&pt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&On(this._icon,s),this._shadow&&On(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?pe(c.iconSize):pe(0,0),p=c.iconAnchor?pe(c.iconAnchor):pe(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function AL(s,c){return new sp(s,c)}var es=ke.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ap=es.extend({options:{fill:!0,radius:10},initialize:function(s,c){I(this,c),this._latlng=Ue(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=Ue(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return es.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new ut(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function xL(s,c){return new ap(s,c)}var Ey=ap.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),I(this,c),this._latlng=Ue(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new bn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:es.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===ci.distance){var _=Math.PI/180,w=this._mRadius/ci.R/_,S=h.project([c+w,s]),O=h.project([c-w,s]),j=S.add(O).divideBy(2),K=h.unproject(j).lat,ne=Math.acos((Math.cos(w*_)-Math.sin(c*_)*Math.sin(K*_))/(Math.cos(c*_)*Math.cos(K*_)))/_;(isNaN(ne)||ne===0)&&(ne=w/Math.cos(Math.PI/180*c)),this._point=j.subtract(h.getPixelOrigin()),this._radius=isNaN(ne)?0:j.x-h.project([K,s-ne]).x,this._radiusY=j.y-S.y}else{var ge=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(ge).x}this._updateBounds()}});function RL(s,c,h){return new Ey(s,c,h)}var so=es.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){I(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=Yt,_,w,S=0,O=this._parts.length;S<O;S++)for(var j=this._parts[S],K=1,ne=j.length;K<ne;K++){_=j[K-1],w=j[K];var ge=p(s,_,w,!0);ge<c&&(c=ge,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return oo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=Ue(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new bn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Ln(s),p=0,_=s.length;p<_;p++)h?(c[p]=Ue(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new ut;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new Ie(s,s);this._rawPxBounds&&(this._pxBounds=new ut([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof ve,_=s.length,w,S;if(p){for(S=[],w=0;w<_;w++)S[w]=this._map.latLngToLayerPoint(s[w]),h.extend(S[w]);c.push(S)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,w,S,O,j;for(h=0,_=0,w=this._rings.length;h<w;h++)for(j=this._rings[h],p=0,S=j.length;p<S-1;p++)O=hd(j[p],j[p+1],s,p,!0),O&&(c[_]=c[_]||[],c[_].push(O[0]),(O[1]!==j[p+1]||p===S-2)&&(c[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=$c(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,w,S,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(O=this._parts[h],p=0,S=O.length,_=S-1;p<S;_=p++)if(!(!c&&p===0)&&ld(s,O[_],O[p])<=j)return!0;return!1}});function ML(s,c){return new so(s,c)}so._flat=fd;var Kc=so.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return cd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=so.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof ve&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){so.prototype._setLatLngs.call(this,s),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new Ie(c,c);if(s=new ut(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=Xo(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,w,S,O,j,K;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,j=this._parts.length;w<j;w++)for(h=this._parts[w],S=0,K=h.length,O=K-1;S<K;O=S++)p=h[S],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||so.prototype._containsPoint.call(this,s,!0)}});function PL(s,c){return new Kc(s,c)}var ao=ft.extend({initialize:function(s,c){I(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=W(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var S=cp(s,w);return S?(S.feature=dp(s),S.defaultOptions=S.options,this.resetStyle(S),w.onEachFeature&&w.onEachFeature(s,S),this.addLayer(S)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function cp(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=c&&c.pointToLayer,S=c&&c.coordsToLatLng||by,O,j,K,ne;if(!p&&!h)return null;switch(h.type){case"Point":return O=S(p),vD(w,s,O,c);case"MultiPoint":for(K=0,ne=p.length;K<ne;K++)O=S(p[K]),_.push(vD(w,s,O,c));return new ft(_);case"LineString":case"MultiLineString":return j=up(p,h.type==="LineString"?0:1,S),new so(j,c);case"Polygon":case"MultiPolygon":return j=up(p,h.type==="Polygon"?1:2,S),new Kc(j,c);case"GeometryCollection":for(K=0,ne=h.geometries.length;K<ne;K++){var ge=cp({geometry:h.geometries[K],type:"Feature",properties:s.properties},c);ge&&_.push(ge)}return new ft(_);case"FeatureCollection":for(K=0,ne=h.features.length;K<ne;K++){var Le=cp(h.features[K],c);Le&&_.push(Le)}return new ft(_);default:throw new Error("Invalid GeoJSON object.")}}function vD(s,c,h,p){return s?s(c,h):new sp(h,p&&p.markersInheritOptions&&p)}function by(s){return new ve(s[1],s[0],s[2])}function up(s,c,h){for(var p=[],_=0,w=s.length,S;_<w;_++)S=c?up(s[_],c-1,h):(h||by)(s[_]),p.push(S);return p}function Iy(s,c){return s=Ue(s),s.alt!==void 0?[g(s.lng,c),g(s.lat,c),g(s.alt,c)]:[g(s.lng,c),g(s.lat,c)]}function lp(s,c,h,p){for(var _=[],w=0,S=s.length;w<S;w++)_.push(c?lp(s[w],Ln(s[w])?0:c-1,h,p):Iy(s[w],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function Zc(s,c){return s.feature?t({},s.feature,{geometry:c}):dp(c)}function dp(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ty={toGeoJSON:function(s){return Zc(this,{type:"Point",coordinates:Iy(this.getLatLng(),s)})}};sp.include(Ty),Ey.include(Ty),ap.include(Ty),so.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=lp(this._latlngs,c?1:0,!1,s);return Zc(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Kc.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=c&&!Ln(this._latlngs[0]),p=lp(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),Zc(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),yt.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),Zc(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var S=dp(w);S.type==="FeatureCollection"?p.push.apply(p,S.features):p.push(S)}}}),h?Zc(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function yD(s,c){return new ao(s,c)}var NL=yD,hp=ke.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=rt(c),I(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ht(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&hi(this._image),this},bringToBack:function(){return this._map&&fi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=rt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:$e("img");if(xe(c,"leaflet-image-layer"),this._zoomAnimated&&xe(c,"leaflet-zoom-animated"),this.options.className&&xe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=i(this.fire,this,"load"),c.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;mn(this._image,h,c)},_reset:function(){var s=this._image,c=new ut(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();pt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){On(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),kL=function(s,c,h){return new hp(s,c,h)},wD=hp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:$e("video");if(xe(c,"leaflet-image-layer"),this._zoomAnimated&&xe(c,"leaflet-zoom-animated"),this.options.className&&xe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=i(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}W(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var S=$e("source");S.src=this._url[w],c.appendChild(S)}}});function OL(s,c,h){return new wD(s,c,h)}var ED=hp.extend({_initImage:function(){var s=this._image=this._url;xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function LL(s,c,h){return new ED(s,c,h)}var _i=ke.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ve||W(s))?(this._latlng=Ue(s),I(this,c)):(I(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&On(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&On(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(On(this._container,0),this._removeTimeout=setTimeout(i(ht,void 0,this._container),200)):ht(this._container),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ue(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&hi(this._container),this},bringToBack:function(){return this._map&&fi(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof ft){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=pe(this.options.offset),h=this._getAnchor();this._zoomAnimated?pt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});je.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),ke.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(I(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var fp=_i.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,_i.prototype.openOn.call(this,s)},onAdd:function(s){_i.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof es||this._source.on("preclick",In))},onRemove:function(s){_i.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof es||this._source.off("preclick",In))},getEvents:function(){var s=_i.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=$e("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=$e("div",s+"-content-wrapper",c);if(this._contentNode=$e("div",s+"-content",h),ha(c),od(this._contentNode),ye(c,"contextmenu",In),this._tipContainer=$e("div",s+"-tip-container",c),this._tip=$e("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=$e("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(_){At(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",xe(s,w)):St(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();pt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(ca(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new Ie(this._containerLeft,-h-this._containerBottom);_._add(Er(this._container));var w=s.layerPointToContainerPoint(_),S=pe(this.options.autoPanPadding),O=pe(this.options.autoPanPaddingTopLeft||S),j=pe(this.options.autoPanPaddingBottomRight||S),K=s.getSize(),ne=0,ge=0;w.x+p+j.x>K.x&&(ne=w.x+p-K.x+j.x),w.x-ne-O.x<0&&(ne=w.x-O.x),w.y+h+j.y>K.y&&(ge=w.y+h-K.y+j.y),w.y-ge-O.y<0&&(ge=w.y-O.y),(ne||ge)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,ge]))}},_getAnchor:function(){return pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),FL=function(s,c){return new fp(s,c)};je.mergeOptions({closePopupOnClick:!0}),je.include({openPopup:function(s,c,h){return this._initOverlay(fp,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),ke.include({bindPopup:function(s,c){return this._popup=this._initOverlay(fp,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof ft||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){br(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof es)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var pp=_i.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){_i.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){_i.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=_i.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$e("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),S=p.layerPointToContainerPoint(s),O=this.options.direction,j=_.offsetWidth,K=_.offsetHeight,ne=pe(this.options.offset),ge=this._getAnchor();O==="top"?(c=j/2,h=K):O==="bottom"?(c=j/2,h=0):O==="center"?(c=j/2,h=K/2):O==="right"?(c=0,h=K/2):O==="left"?(c=j,h=K/2):S.x<w.x?(O="right",c=0,h=K/2):(O="left",c=j+(ne.x+ge.x)*2,h=K/2),s=s.subtract(pe(c,h,!0)).add(ne).add(ge),St(_,"leaflet-tooltip-right"),St(_,"leaflet-tooltip-left"),St(_,"leaflet-tooltip-top"),St(_,"leaflet-tooltip-bottom"),xe(_,"leaflet-tooltip-"+O),pt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&On(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),VL=function(s,c){return new pp(s,c)};je.include({openTooltip:function(s,c,h){return this._initOverlay(pp,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),ke.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(pp,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof ft||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(ye(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var bD=ar.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ua(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=pe(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function UL(s){return new bD(s)}ar.Default=gi;var pd=ke.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),ht(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(hi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(fi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Ie?s:new Ie(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,w;p<_;p++)w=c[p].style.zIndex,c[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){On(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);On(_.el,w),w<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=$e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(ht(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=$e("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)ht(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),w=Math.floor(c/2),S=h-1,O=new Ie(+_,+w);O.z=+S;var j=this._tileCoordsToKey(O),K=this._tiles[j];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),S>p?this._retainParent(_,w,S,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*c;w<2*c+2;w++){var S=new Ie(_,w);S.z=h+1;var O=this._tileCoordsToKey(S),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();ce.any3d?mn(s.el,_,p):pt(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),w=c.getSize().divideBy(p*2);return new ut(_.subtract(w),_.add(w))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),S=[],O=this.options.keepBuffer,j=new ut(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ne=this._tiles[K].coords;(ne.z!==this._tileZoom||!j.contains(new Ie(ne.x,ne.y)))&&(this._tiles[K].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var ge=_.min.y;ge<=_.max.y;ge++)for(var Le=_.min.x;Le<=_.max.x;Le++){var Fn=new Ie(Le,ge);if(Fn.z=this._tileZoom,!!this._isValidTile(Fn)){var rn=this._tiles[this._tileCoordsToKey(Fn)];rn?rn.current=!0:S.push(Fn)}}if(S.sort(function(Wn,Yc){return Wn.distanceTo(w)-Yc.distanceTo(w)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ir=document.createDocumentFragment();for(Le=0;Le<S.length;Le++)this._addTile(S[Le],Ir);this._level.el.appendChild(Ir)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return rt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=c.unproject(p,s.z),S=c.unproject(_,s.z);return[w,S]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new bn(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new Ie(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(ht(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){xe(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,ce.ielt9&&this.options.opacity<1&&On(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),i(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(i(this._tileReady,this,s,null,_)),pt(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(On(h.el,0),x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(xe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new Ie(this._wrapX?l(s.x,this._wrapX):s.x,this._wrapY?l(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new ut(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function jL(s){return new pd(s)}var Qc=pd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=I(this,c),c.detectRetina&&ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return ye(h,"load",i(this._tileOnLoad,this,c,h)),ye(h,"error",i(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return F(this._url,t(c,this.options))},_tileOnLoad:function(s,c){ce.ielt9?setTimeout(i(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=se;var h=this._tiles[s].coords;ht(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",se),pd.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===se))return pd.prototype._tileReady.call(this,s,c,h)}});function ID(s,c){return new Qc(s,c)}var TD=Qc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=I(this,c);var _=c.detectRetina&&ce.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Qc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=fn(h.project(c[0]),h.project(c[1])),_=p.min,w=p.max,S=(this._wmsVersion>=1.3&&this._crs===B?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),O=Qc.prototype.getTileUrl.call(this,s);return O+N(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function BL(s,c){return new TD(s,c)}Qc.WMS=TD,ID.wms=BL;var co=ke.extend({options:{padding:.1},initialize:function(s){I(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));ce.any3d?mn(this._container,w,h):pt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new ut(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),CD=co.extend({options:{tolerance:0},getEvents:function(){var s=co.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){co.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){x(this._redrawRequest),delete this._ctx,ht(this._container),it(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=ce.retina?2:1;pt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){co.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ut,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,w,S=s._parts,O=S.length,j=this._ctx;if(O){for(j.beginPath(),h=0;h<O;h++){for(p=0,_=S[h].length;p<_;p++)w=S[h][p],j[p?"lineTo":"moveTo"](w.x,w.y);c&&j.closePath()}this._fillStroke(j,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(St(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(xe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function DD(s){return ce.canvas?new CD(s):null}var md=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),zL={_initContainer:function(){this._container=$e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(co.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=md("shape");xe(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=md("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;ht(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=md("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=W(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=md("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){hi(s._container)},_bringToBack:function(s){fi(s._container)}},mp=ce.vml?md:Ac,gd=co.extend({_initContainer:function(){this._container=mp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=mp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ht(this._container),it(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){co.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),pt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=mp("path");s.options.className&&xe(c,s.options.className),s.options.interactive&&xe(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){ht(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,xc(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){hi(s._path)},_bringToBack:function(s){fi(s._path)}});ce.vml&&gd.include(zL);function SD(s){return ce.svg||ce.vml?new gd(s):null}je.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&DD(s)||SD(s)}});var AD=Kc.extend({initialize:function(s,c){Kc.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=rt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function $L(s,c){return new AD(s,c)}gd.create=mp,gd.pointsToPath=xc,ao.geometryToLayer=cp,ao.coordsToLatLng=by,ao.coordsToLatLngs=up,ao.latLngToCoords=Iy,ao.latLngsToCoords=lp,ao.getFeature=Zc,ao.asFeature=dp,je.mergeOptions({boxZoom:!0});var xD=sr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ht(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zo(),to(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=$e("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new ut(this._point,this._startPoint),h=c.getSize();pt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ht(this._box),St(this._container,"leaflet-crosshair")),Je(),Xl(),it(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var c=new bn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});je.addInitHook("addHandler","boxZoom",xD),je.mergeOptions({doubleClickZoom:!0});var RD=sr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});je.addInitHook("addHandler","doubleClickZoom",RD),je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var MD=sr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new jr(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){St(this._map._container,"leaflet-grab"),St(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=rt(this._map.options.maxBounds);this._offsetLimit=fn(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,w=(p+c+h)%s-c-h,S=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,S=h.easeLinearity,O=_.multiplyBy(S/w),j=O.distanceTo([0,0]),K=Math.min(h.inertiaMaxSpeed,j),ne=O.multiplyBy(K/j),ge=K/(h.inertiaDeceleration*S),Le=ne.multiplyBy(-ge/2).round();!Le.x&&!Le.y?c.fire("moveend"):(Le=c._limitOffset(Le,c.options.maxBounds),D(function(){c.panBy(Le,{duration:ge,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});je.addInitHook("addHandler","dragging",MD),je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var PD=sr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),it(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){it(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=pe(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(pe(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;br(s)}}});je.addInitHook("addHandler","keyboard",PD),je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ND=sr.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=ad(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),p),br(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,S=s._limitZoom(c+(this._delta>0?w:-w))-c;this._delta=0,this._startTime=null,S&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+S):s.setZoomAround(this._lastMousePos,c+S))}});je.addInitHook("addHandler","scrollWheelZoom",ND);var HL=600;je.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var kD=sr.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new Ie(c.clientX,c.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",At),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),HL),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){it(document,"touchend",At),it(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new Ie(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});je.addInitHook("addHandler","tapHold",kD),je.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var OD=sr.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){St(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),At(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),x(this._animRequest);var S=i(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(S,this,!0),At(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,x(this._animRequest),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});je.addInitHook("addHandler","touchZoom",OD),je.BoxZoom=xD,je.DoubleClickZoom=RD,je.Drag=MD,je.Keyboard=PD,je.ScrollWheelZoom=ND,je.TapHold=kD,je.TouchZoom=OD,n.Bounds=ut,n.Browser=ce,n.CRS=kn,n.Canvas=CD,n.Circle=Ey,n.CircleMarker=ap,n.Class=k,n.Control=qn,n.DivIcon=bD,n.DivOverlay=_i,n.DomEvent=vt,n.DomUtil=pi,n.Draggable=jr,n.Evented=Lr,n.FeatureGroup=ft,n.GeoJSON=ao,n.GridLayer=pd,n.Handler=sr,n.Icon=ar,n.ImageOverlay=hp,n.LatLng=ve,n.LatLngBounds=bn,n.Layer=ke,n.LayerGroup=yt,n.LineUtil=d,n.Map=je,n.Marker=sp,n.Mixin=Bc,n.Path=es,n.Point=Ie,n.PolyUtil=ud,n.Polygon=Kc,n.Polyline=so,n.Popup=fp,n.PosAnimation=Jf,n.Projection=b,n.Rectangle=AD,n.Renderer=co,n.SVG=gd,n.SVGOverlay=ED,n.TileLayer=Qc,n.Tooltip=pp,n.Transformation=Vl,n.Util=M,n.VideoOverlay=wD,n.bind=i,n.bounds=fn,n.canvas=DD,n.circle=RL,n.circleMarker=xL,n.control=Jo,n.divIcon=UL,n.extend=t,n.featureGroup=nn,n.geoJSON=yD,n.geoJson=NL,n.gridLayer=jL,n.icon=cr,n.imageOverlay=kL,n.latLng=Ue,n.latLngBounds=rt,n.layerGroup=He,n.map=Xf,n.marker=AL,n.point=pe,n.polygon=PL,n.polyline=ML,n.popup=FL,n.rectangle=$L,n.setOptions=I,n.stamp=a,n.svg=SD,n.svgOverlay=LL,n.tileLayer=ID,n.tooltip=VL,n.transformation=ui,n.version=e,n.videoOverlay=OL;var qL=window.L;n.noConflict=function(){return window.L=qL,this},window.L=n})});var Sy;function _p(){return Sy}function vi(n){let e=Sy;return Sy=n,e}var HD=Symbol("NotFound");function Jc(n){return n===HD||n?.name==="\u0275NotFound"}var Tn=null,vp=!1,Ay=1,uF=null,Cn=Symbol("SIGNAL");function Ne(n){let e=Tn;return Tn=n,e}function bp(){return Tn}var Xc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eu(n){if(vp)throw new Error("");if(Tn===null)return;Tn.consumerOnSignalRead(n);let e=Tn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Tn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Tn.producers,t!==void 0&&t.producer===n)){Tn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Tn&&(!r||dF(i,Tn)))return;let o=nu(Tn),a={producer:n,consumer:Tn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Tn.producersTail=a,e!==void 0?e.nextProducer=a:Tn.producers=a,o&&KD(n,a)}function qD(){Ay++}function Ip(n){if(!(nu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ay)){if(!n.producerMustRecompute(n)&&!yd(n)){Ep(n);return}n.producerRecomputeValue(n),Ep(n)}}function xy(n){if(n.consumers===void 0)return;let e=vp;vp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||lF(r)}}finally{vp=e}}function Ry(){return Tn?.consumerAllowSignalWrites!==!1}function lF(n){n.dirty=!0,xy(n),n.consumerMarkedDirty?.(n)}function Ep(n){n.dirty=!1,n.lastCleanEpoch=Ay}function tu(n){return n&&WD(n),Ne(n)}function WD(n){n.producersTail=void 0,n.recomputing=!0}function vd(n,e){Ne(e),n&&GD(n)}function GD(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(nu(n))do t=My(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function yd(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Ip(t),r!==t.version))return!0}return!1}function wd(n){if(nu(n)){let e=n.producers;for(;e!==void 0;)e=My(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function KD(n,e){let t=n.consumersTail,r=nu(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)KD(i.producer,i)}function My(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!nu(e)){let o=e.producers;for(;o!==void 0;)o=My(o)}return t}function nu(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Tp(n){uF?.(n)}function dF(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Cp(n,e){return Object.is(n,e)}function Dp(n,e){let t=Object.create(hF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Ip(t),eu(t),t.value===_d)throw t.error;return t.value};return r[Cn]=t,Tp(t),r}var yp=Symbol("UNSET"),wp=Symbol("COMPUTING"),_d=Symbol("ERRORED"),hF=we(Q({},Xc),{value:yp,dirty:!0,error:null,equal:Cp,kind:"computed",producerMustRecompute(n){return n.value===yp||n.value===wp},producerRecomputeValue(n){if(n.value===wp)throw new Error("");let e=n.value;n.value=wp;let t=tu(n),r,i=!1;try{r=n.computation(),Ne(null),i=e!==yp&&e!==_d&&r!==_d&&n.equal(e,r)}catch(o){r=_d,n.error=o}finally{vd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function fF(){throw new Error}var ZD=fF;function QD(n){ZD(n)}function Py(n){ZD=n}var pF=null;function Ny(n,e){let t=Object.create(Sp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>YD(t);return r[Cn]=t,Tp(t),[r,a=>ru(t,a),a=>ky(t,a)]}function YD(n){return eu(n),n.value}function ru(n,e){Ry()||QD(n),n.equal(n.value,e)||(n.value=e,mF(n))}function ky(n,e){Ry()||QD(n),ru(n,e(n.value))}var Sp=we(Q({},Xc),{equal:Cp,value:void 0,kind:"signal"});function mF(n){n.version++,qD(),xy(n),pF?.(n)}function Re(n){return typeof n=="function"}function iu(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Ap=iu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ya(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Re(r))try{r()}catch(o){e=o instanceof Ap?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{JD(o)}catch(a){e=e??[],a instanceof Ap?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Ap(e)}}add(e){var t;if(e&&e!==this)if(this.closed)JD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ya(t,e)}remove(e){let{_finalizers:t}=this;t&&ya(t,e),e instanceof n&&e._removeParent(this)}};Mt.EMPTY=(()=>{let n=new Mt;return n.closed=!0,n})();var Oy=Mt.EMPTY;function xp(n){return n instanceof Mt||n&&"closed"in n&&Re(n.remove)&&Re(n.add)&&Re(n.unsubscribe)}function JD(n){Re(n)?n():n.unsubscribe()}var Br={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ou={setTimeout(n,e,...t){let{delegate:r}=ou;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ou;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Rp(n){ou.setTimeout(()=>{let{onUnhandledError:e}=Br;if(e)e(n);else throw n})}function Ed(){}var XD=Ly("C",void 0,void 0);function eS(n){return Ly("E",void 0,n)}function tS(n){return Ly("N",n,void 0)}function Ly(n,e,t){return{kind:n,value:e,error:t}}var wa=null;function su(n){if(Br.useDeprecatedSynchronousErrorHandling){let e=!wa;if(e&&(wa={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=wa;if(wa=null,t)throw r}}else n()}function nS(n){Br.useDeprecatedSynchronousErrorHandling&&wa&&(wa.errorThrown=!0,wa.error=n)}var Ea=class extends Mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xp(e)&&e.add(this)):this.destination=vF}static create(e,t,r){return new au(e,t,r)}next(e){this.isStopped?Vy(tS(e),this):this._next(e)}error(e){this.isStopped?Vy(eS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Vy(XD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gF=Function.prototype.bind;function Fy(n,e){return gF.call(n,e)}var Uy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Mp(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Mp(r)}else Mp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Mp(t)}}},au=class extends Ea{constructor(e,t,r){super();let i;if(Re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Br.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Fy(e.next,o),error:e.error&&Fy(e.error,o),complete:e.complete&&Fy(e.complete,o)}):i=e}this.destination=new Uy(i)}};function Mp(n){Br.useDeprecatedSynchronousErrorHandling?nS(n):Rp(n)}function _F(n){throw n}function Vy(n,e){let{onStoppedNotification:t}=Br;t&&ou.setTimeout(()=>t(n,e))}var vF={closed:!0,next:Ed,error:_F,complete:Ed};var cu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ur(n){return n}function Pp(...n){return jy(n)}function jy(n){return n.length===0?ur:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Te=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=wF(t)?t:new au(t,r,i);return su(()=>{let{operator:a,source:u}=this;o.add(a?a.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=rS(r),new r((i,o)=>{let a=new au({next:u=>{try{t(u)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[cu](){return this}pipe(...t){return jy(t)(this)}toPromise(t){return t=rS(t),new t((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function rS(n){var e;return(e=n??Br.Promise)!==null&&e!==void 0?e:Promise}function yF(n){return n&&Re(n.next)&&Re(n.error)&&Re(n.complete)}function wF(n){return n&&n instanceof Ea||yF(n)&&xp(n)}function By(n){return Re(n?.lift)}function qe(n){return e=>{if(By(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(n,e,t,r,i){return new zy(n,e,t,r,i)}var zy=class extends Ea{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(u){try{t(u)}catch(l){e.error(l)}}:super._next,this._error=i?function(u){try{i(u)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function uu(){return qe((n,e)=>{let t=null;n._refCount++;let r=Be(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var lu=class extends Te{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,By(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mt;let t=this.getSubject();e.add(this.source.subscribe(Be(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mt.EMPTY)}return e}refCount(){return uu()(this)}};var iS=iu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $t=(()=>{class n extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Np(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new iS}next(t){su(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){su(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){su(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Oy:(this.currentObservers=null,o.push(t),new Mt(()=>{this.currentObservers=null,ya(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Te;return t.source=this,t}}return n.create=(e,t)=>new Np(e,t),n})(),Np=class extends $t{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Oy}};var gn=class extends $t{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var $y={now(){return($y.delegate||Date).now()},delegate:void 0};var kp=class extends Mt{constructor(e,t){super()}schedule(e,t=0){return this}};var bd={setInterval(n,e,...t){let{delegate:r}=bd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=bd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var du=class extends kp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return bd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&bd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ya(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var hu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};hu.now=$y.now;var fu=class extends hu{constructor(e,t=hu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Hy=new fu(du);var Op=class extends du{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Lp=class extends fu{};var qy=new Lp(Op);var Gn=new Te(n=>n.complete());function oS(n){return n&&Re(n.schedule)}function sS(n){return n[n.length-1]}function Fp(n){return Re(sS(n))?n.pop():void 0}function ns(n){return oS(sS(n))?n.pop():void 0}function Wy(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function cS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function u(g){try{f(r.next(g))}catch(y){a(y)}}function l(g){try{f(r.throw(g))}catch(y){a(y)}}function f(g){g.done?o(g.value):i(g.value).then(u,l)}f((r=r.apply(n,e||[])).next())})}function aS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ba(n){return this instanceof ba?(this.v=n,this):new ba(n)}function uS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(I){return function(N){return Promise.resolve(N).then(I,y)}}function u(I,N){r[I]&&(i[I]=function(H){return new Promise(function(F,W){o.push([I,H,F,W])>1||l(I,H)})},N&&(i[I]=N(i[I])))}function l(I,N){try{f(r[I](N))}catch(H){E(o[0][3],H)}}function f(I){I.value instanceof ba?Promise.resolve(I.value.v).then(g,y):E(o[0][2],I)}function g(I){l("next",I)}function y(I){l("throw",I)}function E(I,N){I(N),o.shift(),o.length&&l(o[0][0],o[0][1])}}function lS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof aS=="function"?aS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(u,l){a=n[o](a),i(u,l,a.done,a.value)})}}function i(o,a,u,l){Promise.resolve(l).then(function(f){o({value:f,done:u})},a)}}var Vp=n=>n&&typeof n.length=="number"&&typeof n!="function";function Up(n){return Re(n?.then)}function jp(n){return Re(n[cu])}function Bp(n){return Symbol.asyncIterator&&Re(n?.[Symbol.asyncIterator])}function zp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function EF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $p=EF();function Hp(n){return Re(n?.[$p])}function qp(n){return uS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ba(t.read());if(i)return yield ba(void 0);yield yield ba(r)}}finally{t.releaseLock()}})}function Wp(n){return Re(n?.getReader)}function Ht(n){if(n instanceof Te)return n;if(n!=null){if(jp(n))return bF(n);if(Vp(n))return IF(n);if(Up(n))return TF(n);if(Bp(n))return dS(n);if(Hp(n))return CF(n);if(Wp(n))return DF(n)}throw zp(n)}function bF(n){return new Te(e=>{let t=n[cu]();if(Re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IF(n){return new Te(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function TF(n){return new Te(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Rp)})}function CF(n){return new Te(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function dS(n){return new Te(e=>{SF(n,e).catch(t=>e.error(t))})}function DF(n){return dS(qp(n))}function SF(n,e){var t,r,i,o;return cS(this,void 0,void 0,function*(){try{for(t=lS(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Kn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function rs(n,e=0){return qe((t,r)=>{t.subscribe(Be(r,i=>Kn(r,n,()=>r.next(i),e),()=>Kn(r,n,()=>r.complete(),e),i=>Kn(r,n,()=>r.error(i),e)))})}function is(n,e=0){return qe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function hS(n,e){return Ht(n).pipe(is(e),rs(e))}function fS(n,e){return Ht(n).pipe(is(e),rs(e))}function pS(n,e){return new Te(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function mS(n,e){return new Te(t=>{let r;return Kn(t,e,()=>{r=n[$p](),Kn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){t.error(a);return}o?t.complete():t.next(i)},0,!0)}),()=>Re(r?.return)&&r.return()})}function Gp(n,e){if(!n)throw new Error("Iterable cannot be null");return new Te(t=>{Kn(t,e,()=>{let r=n[Symbol.asyncIterator]();Kn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function gS(n,e){return Gp(qp(n),e)}function _S(n,e){if(n!=null){if(jp(n))return hS(n,e);if(Vp(n))return pS(n,e);if(Up(n))return fS(n,e);if(Bp(n))return Gp(n,e);if(Hp(n))return mS(n,e);if(Wp(n))return gS(n,e)}throw zp(n)}function mt(n,e){return e?_S(n,e):Ht(n)}function fe(...n){let e=ns(n);return mt(n,e)}function pu(n,e){let t=Re(n)?n:()=>n,r=i=>i.error(t());return new Te(e?i=>e.schedule(r,0,i):r)}function Gy(n){return!!n&&(n instanceof Te||Re(n.lift)&&Re(n.subscribe))}var uo=iu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(n,e){return qe((t,r)=>{let i=0;t.subscribe(Be(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:AF}=Array;function xF(n,e){return AF(e)?n(...e):n(e)}function Kp(n){return Ce(e=>xF(n,e))}var{isArray:RF}=Array,{getPrototypeOf:MF,prototype:PF,keys:NF}=Object;function Zp(n){if(n.length===1){let e=n[0];if(RF(e))return{args:e,keys:null};if(kF(e)){let t=NF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function kF(n){return n&&typeof n=="object"&&MF(n)===PF}function Qp(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Id(...n){let e=ns(n),t=Fp(n),{args:r,keys:i}=Zp(n);if(r.length===0)return mt([],e);let o=new Te(OF(r,e,i?a=>Qp(i,a):ur));return t?o.pipe(Kp(t)):o}function OF(n,e,t=ur){return r=>{vS(e,()=>{let{length:i}=n,o=new Array(i),a=i,u=i;for(let l=0;l<i;l++)vS(e,()=>{let f=mt(n[l],e),g=!1;f.subscribe(Be(r,y=>{o[l]=y,g||(g=!0,u--),u||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function vS(n,e,t){n?Kn(t,n,e):e()}function yS(n,e,t,r,i,o,a,u){let l=[],f=0,g=0,y=!1,E=()=>{y&&!l.length&&!f&&e.complete()},I=H=>f<r?N(H):l.push(H),N=H=>{o&&e.next(H),f++;let F=!1;Ht(t(H,g++)).subscribe(Be(e,W=>{i?.(W),o?I(W):e.next(W)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;l.length&&f<r;){let W=l.shift();a?Kn(e,a,()=>N(W)):N(W)}E()}catch(W){e.error(W)}}))};return n.subscribe(Be(e,I,()=>{y=!0,E()})),()=>{u?.()}}function Lt(n,e,t=1/0){return Re(e)?Lt((r,i)=>Ce((o,a)=>e(r,o,i,a))(Ht(n(r,i))),t):(typeof e=="number"&&(t=e),qe((r,i)=>yS(r,i,n,t)))}function mu(n=1/0){return Lt(ur,n)}function wS(){return mu(1)}function gu(...n){return wS()(mt(n,ns(n)))}function Td(n){return new Te(e=>{Ht(n()).subscribe(e)})}function Ky(...n){let e=Fp(n),{args:t,keys:r}=Zp(n),i=new Te(o=>{let{length:a}=t;if(!a){o.complete();return}let u=new Array(a),l=a,f=a;for(let g=0;g<a;g++){let y=!1;Ht(t[g]).subscribe(Be(o,E=>{y||(y=!0,f--),u[g]=E},()=>l--,void 0,()=>{(!l||!y)&&(f||o.next(r?Qp(r,u):u),o.complete())}))}});return e?i.pipe(Kp(e)):i}function _n(n,e){return qe((t,r)=>{let i=0;t.subscribe(Be(r,o=>n.call(e,o,i++)&&r.next(o)))})}function lo(n){return qe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Be(t,void 0,void 0,a=>{o=Ht(n(a,lo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function ES(n,e,t,r,i){return(o,a)=>{let u=t,l=e,f=0;o.subscribe(Be(a,g=>{let y=f++;l=u?n(l,g,y):(u=!0,g),r&&a.next(l)},i&&(()=>{u&&a.next(l),a.complete()})))}}function yi(n,e){return Re(e)?Lt(n,e,1):Lt(n,1)}function os(n){return qe((e,t)=>{let r=!1;e.subscribe(Be(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ho(n){return n<=0?()=>Gn:qe((e,t)=>{let r=0;e.subscribe(Be(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Yp(n=LF){return qe((e,t)=>{let r=!1;e.subscribe(Be(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function LF(){return new uo}function ss(n){return qe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function fo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_n((i,o)=>n(i,o,r)):ur,ho(1),t?os(e):Yp(()=>new uo))}function _u(n){return n<=0?()=>Gn:qe((e,t)=>{let r=[];e.subscribe(Be(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Zy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_n((i,o)=>n(i,o,r)):ur,_u(1),t?os(e):Yp(()=>new uo))}function Jp(n,e){return qe(ES(n,e,arguments.length>=2,!0))}function Xp(...n){let e=ns(n);return qe((t,r)=>{(e?gu(n,t,e):gu(n,t)).subscribe(r)})}function vn(n,e){return qe((t,r)=>{let i=null,o=0,a=!1,u=()=>a&&!i&&r.complete();t.subscribe(Be(r,l=>{i?.unsubscribe();let f=0,g=o++;Ht(n(l,g)).subscribe(i=Be(r,y=>r.next(e?e(l,y,g,f++):y),()=>{i=null,u()}))},()=>{a=!0,u()}))})}function em(n){return qe((e,t)=>{Ht(n).subscribe(Be(t,()=>t.complete(),Ed)),!t.closed&&e.subscribe(t)})}function on(n,e,t){let r=Re(n)||e||t?{next:n,error:e,complete:t}:n;return r?qe((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let u=!0;i.subscribe(Be(o,l=>{var f;(f=r.next)===null||f===void 0||f.call(r,l),o.next(l)},()=>{var l;u=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var f;u=!1,(f=r.error)===null||f===void 0||f.call(r,l),o.error(l)},()=>{var l,f;u&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):ur}function bS(n){let e=Ne(null);try{return n()}finally{Ne(e)}}var as=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},cw=new as("20.3.14");var im="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(_o(e,t)),this.code=e}};function FF(n){return`NG0${Math.abs(n)}`}function _o(n,e){return`${FF(n)}${e?": "+e:""}`}var Ad=globalThis;function tt(n){for(let e in n)if(n[e]===tt)return e;throw Error("")}function CS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function mo(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(mo).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function uw(n,e){return n?e?`${n} ${e}`:n:e||""}var VF=tt({__forward_ref__:tt});function dr(n){return n.__forward_ref__=dr,n.toString=function(){return mo(this())},n}function yn(n){return lw(n)?n():n}function lw(n){return typeof n=="function"&&n.hasOwnProperty(VF)&&n.__forward_ref__===dr}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function hr(n){return{providers:n.providers||[],imports:n.imports||[]}}function xd(n){return UF(n,om)}function dw(n){return xd(n)!==null}function UF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function jF(n){let e=n?.[om]??null;return e||null}function Yy(n){return n&&n.hasOwnProperty(nm)?n[nm]:null}var om=tt({\u0275prov:tt}),nm=tt({\u0275inj:tt}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hw(n){return n&&!!n.\u0275providers}var fw=tt({\u0275cmp:tt}),pw=tt({\u0275dir:tt}),mw=tt({\u0275pipe:tt}),gw=tt({\u0275mod:tt}),Dd=tt({\u0275fac:tt}),Sa=tt({__NG_ELEMENT_ID__:tt}),IS=tt({__NG_ENV_ID__:tt});function wi(n){return typeof n=="string"?n:n==null?"":String(n)}function DS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wi(n)}var SS=tt({ngErrorCode:tt}),BF=tt({ngErrorMessage:tt}),zF=tt({ngTokenPath:tt});function _w(n,e){return AS("",-200,e)}function sm(n,e){throw new te(-201,!1)}function AS(n,e,t){let r=new te(e,n);return r[SS]=e,r[BF]=n,t&&(r[zF]=t),r}function $F(n){return n[SS]}var Jy;function xS(){return Jy}function Vn(n){let e=Jy;return Jy=n,e}function vw(n,e,t){let r=xd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;sm(n,"Injector")}var HF={},Ia=HF,Xy="__NG_DI_FLAG__",ew=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ta(t)||0;try{return this.injector.get(e,r&8?null:Ia,r)}catch(i){if(Jc(i))return i;throw i}}};function qF(n,e=0){let t=_p();if(t===void 0)throw new te(-203,!1);if(t===null)return vw(n,void 0,e);{let r=WF(e),i=t.retrieve(n,r);if(Jc(i)){if(r.optional)return null;throw i}return i}}function de(n,e=0){return(xS()||qF)(yn(n),e)}function $(n,e){return de(n,Ta(e))}function Ta(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function WF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function tw(n){let e=[];for(let t=0;t<n.length;t++){let r=yn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=0;for(let a=0;a<r.length;a++){let u=r[a],l=GF(u);typeof l=="number"?l===-1?i=u.token:o|=l:i=u}e.push(de(i,o))}else e.push(de(r))}return e}function RS(n,e){return n[Xy]=e,n.prototype[Xy]=e,n}function GF(n){return n[Xy]}function cs(n,e){let t=n.hasOwnProperty(Dd);return t?n[Dd]:null}function am(n,e){n.forEach(t=>Array.isArray(t)?am(t,e):e(t))}function yw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Rd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function MS(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function PS(n,e,t){let r=yu(n,e);return r>=0?n[r|1]=t:(r=~r,MS(n,r,e,t)),r}function cm(n,e){let t=yu(n,e);if(t>=0)return n[t|1]}function yu(n,e){return KF(n,e,1)}function KF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}var ls={},lr=[],ds=new X(""),ww=new X("",-1),Ew=new X(""),Sd=class{get(e,t=Ia){if(t===Ia){let i=AS("",-201);throw i.name="\u0275NotFound",i}return t}};function bw(n){return n[gw]||null}function vo(n){return n[fw]||null}function Iw(n){return n[pw]||null}function NS(n){return n[mw]||null}function Un(n){return{\u0275providers:n}}function kS(...n){return{\u0275providers:Tw(!0,n),\u0275fromNgModule:!0}}function Tw(n,...e){let t=[],r=new Set,i,o=a=>{t.push(a)};return am(e,a=>{let u=a;rm(u,o,[],r)&&(i||=[],i.push(u))}),i!==void 0&&OS(i,o),t}function OS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Cw(i,o=>{e(o,r)})}}function rm(n,e,t,r){if(n=yn(n),!n)return!1;let i=null,o=Yy(n),a=!o&&vo(n);if(!o&&!a){let l=n.ngModule;if(o=Yy(l),o)i=l;else return!1}else{if(a&&!a.standalone)return!1;i=n}let u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of l)rm(f,e,t,r)}}else if(o){if(o.imports!=null&&!u){r.add(i);let f;try{am(o.imports,g=>{rm(g,e,t,r)&&(f||=[],f.push(g))})}finally{}f!==void 0&&OS(f,e)}if(!u){let f=cs(i)||(()=>new i);e({provide:i,useFactory:f,deps:lr},i),e({provide:Ew,useValue:i,multi:!0},i),e({provide:ds,useValue:()=>de(i),multi:!0},i)}let l=o.providers;if(l!=null&&!u){let f=n;Cw(l,g=>{e(g,f)})}}else return!1;return i!==n&&n.providers!==void 0}function Cw(n,e){for(let t of n)hw(t)&&(t=t.\u0275providers),Array.isArray(t)?Cw(t,e):e(t)}var ZF=tt({provide:String,useValue:tt});function LS(n){return n!==null&&typeof n=="object"&&ZF in n}function QF(n){return!!(n&&n.useExisting)}function YF(n){return!!(n&&n.useFactory)}function Ca(n){return typeof n=="function"}function FS(n){return!!n.useClass}var Md=new X(""),tm={},TS={},Qy;function Pd(){return Qy===void 0&&(Qy=new Sd),Qy}var xt=class{},Da=class extends xt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,rw(e,a=>this.processProvider(a)),this.records.set(ww,vu(void 0,this)),i.has("environment")&&this.records.set(xt,vu(void 0,this));let o=this.records.get(Md);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ew,lr,{self:!0}))}retrieve(e,t){let r=Ta(t)||0;try{return this.get(e,Ia,r)}catch(i){if(Jc(i))return i;throw i}}destroy(){Cd(this),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return Cd(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Cd(this);let t=vi(this),r=Vn(void 0),i;try{return e()}finally{vi(t),Vn(r)}}get(e,t=Ia,r){if(Cd(this),e.hasOwnProperty(IS))return e[IS](this);let i=Ta(r),o,a=vi(this),u=Vn(void 0);try{if(!(i&4)){let f=this.records.get(e);if(f===void 0){let g=nV(e)&&xd(e);g&&this.injectableDefInScope(g)?f=vu(nw(e),tm):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,i)}let l=i&2?Pd():this.parent;return t=i&8&&t===Ia?null:t,l.get(e,t)}catch(l){let f=$F(l);throw f===-200||f===-201?new te(f,null):l}finally{Vn(u),vi(a)}}resolveInjectorInitializers(){let e=Ne(null),t=vi(this),r=Vn(void 0),i;try{let o=this.get(ds,lr,{self:!0});for(let a of o)a()}finally{vi(t),Vn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(mo(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yn(e);let t=Ca(e)?e:yn(e&&e.provide),r=XF(e);if(!Ca(e)&&e.multi===!0){let i=this.records.get(t);i||(i=vu(void 0,tm,!0),i.factory=()=>tw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ne(null);try{if(t.value===TS)throw _w(mo(e));return t.value===tm&&(t.value=TS,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&tV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=yn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function nw(n){let e=xd(n),t=e!==null?e.factory:cs(n);if(t!==null)return t;if(n instanceof X)throw new te(204,!1);if(n instanceof Function)return JF(n);throw new te(204,!1)}function JF(n){if(n.length>0)throw new te(204,!1);let t=jF(n);return t!==null?()=>t.factory(n):()=>new n}function XF(n){if(LS(n))return vu(void 0,n.useValue);{let e=Dw(n);return vu(e,tm)}}function Dw(n,e,t){let r;if(Ca(n)){let i=yn(n);return cs(i)||nw(i)}else if(LS(n))r=()=>yn(n.useValue);else if(YF(n))r=()=>n.useFactory(...tw(n.deps||[]));else if(QF(n))r=(i,o)=>de(yn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=yn(n&&(n.useClass||n.provide));if(eV(n))r=()=>new i(...tw(n.deps));else return cs(i)||nw(i)}return r}function Cd(n){if(n.destroyed)throw new te(205,!1)}function vu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function eV(n){return!!n.deps}function tV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function nV(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function rw(n,e){for(let t of n)Array.isArray(t)?rw(t,e):t&&hw(t)?rw(t.\u0275providers,e):e(t)}function Pt(n,e){let t;n instanceof Da?(Cd(n),t=n):t=new ew(n);let r,i=vi(t),o=Vn(void 0);try{return e()}finally{vi(i),Vn(o)}}function VS(){return xS()!==void 0||_p()!=null}var $r=0,Me=1,De=2,wn=3,Tr=4,Cr=5,Nd=6,wu=7,Dn=8,hs=9,Ei=10,Et=11,Eu=12,Sw=13,Aa=14,Dr=15,xa=16,Ra=17,Ma=18,kd=19,Aw=20,po=21,um=22,Od=23,fr=24,Pa=25,Ld=26,Sn=27,US=1;var fs=7,Fd=8,Vd=9,Zn=10;function bi(n){return Array.isArray(n)&&typeof n[US]=="object"}function Hr(n){return Array.isArray(n)&&n[US]===!0}function xw(n){return(n.flags&4)!==0}function ps(n){return n.componentOffset>-1}function Ud(n){return(n.flags&1)===1}function Ii(n){return!!n.template}function bu(n){return(n[De]&512)!==0}function Na(n){return(n[De]&256)===256}var jS="svg",BS="math";function Sr(n){for(;Array.isArray(n);)n=n[$r];return n}function Rw(n,e){return Sr(e[n])}function qr(n,e){return Sr(e[n.index])}function lm(n,e){return n.data[e]}function zS(n,e){return n[e]}function Mw(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ar(n,e){let t=e[n];return bi(t)?t:t[$r]}function dm(n){return(n[De]&128)===128}function $S(n){return Hr(n[wn])}function ka(n,e){return e==null?null:n[e]}function Pw(n){n[Ra]=0}function Nw(n){n[De]&1024||(n[De]|=1024,dm(n)&&Iu(n))}function HS(n,e){for(;n>0;)e=e[Aa],n--;return e}function jd(n){return!!(n[De]&9216||n[fr]?.dirty)}function hm(n){n[Ei].changeDetectionScheduler?.notify(8),n[De]&64&&(n[De]|=1024),jd(n)&&Iu(n)}function Iu(n){n[Ei].changeDetectionScheduler?.notify(0);let e=us(n);for(;e!==null&&!(e[De]&8192||(e[De]|=8192,!dm(e)));)e=us(e)}function kw(n,e){if(Na(n))throw new te(911,!1);n[po]===null&&(n[po]=[]),n[po].push(e)}function qS(n,e){if(n[po]===null)return;let t=n[po].indexOf(e);t!==-1&&n[po].splice(t,1)}function us(n){let e=n[wn];return Hr(e)?e[wn]:e}function WS(n){return n[wu]??=[]}function GS(n){return n.cleanup??=[]}var Fe={lFrame:aA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var iw=!1;function KS(){return Fe.lFrame.elementDepthCount}function ZS(){Fe.lFrame.elementDepthCount++}function Ow(){Fe.lFrame.elementDepthCount--}function Lw(){return Fe.bindingsEnabled}function QS(){return Fe.skipHydrationRootTNode!==null}function Fw(n){return Fe.skipHydrationRootTNode===n}function Vw(){Fe.skipHydrationRootTNode=null}function Ge(){return Fe.lFrame.lView}function An(){return Fe.lFrame.tView}function at(n){return Fe.lFrame.contextLView=n,n[Dn]}function ct(n){return Fe.lFrame.contextLView=null,n}function sn(){let n=Uw();for(;n!==null&&n.type===64;)n=n.parent;return n}function Uw(){return Fe.lFrame.currentTNode}function YS(){let n=Fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Tu(n,e){let t=Fe.lFrame;t.currentTNode=n,t.isParent=e}function jw(){return Fe.lFrame.isParent}function JS(){Fe.lFrame.isParent=!1}function Bw(){return iw}function zw(n){let e=iw;return iw=n,e}function XS(){let n=Fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function eA(){return Fe.lFrame.bindingIndex}function tA(n){return Fe.lFrame.bindingIndex=n}function Cu(){return Fe.lFrame.bindingIndex++}function $w(n){let e=Fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nA(){return Fe.lFrame.inI18n}function rA(n,e){let t=Fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,fm(e)}function iA(){return Fe.lFrame.currentDirectiveIndex}function fm(n){Fe.lFrame.currentDirectiveIndex=n}function oA(n){let e=Fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Hw(n){Fe.lFrame.currentQueryIndex=n}function rV(n){let e=n[Me];return e.type===2?e.declTNode:e.type===1?n[Cr]:null}function qw(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=rV(o),i===null||(o=o[Aa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Fe.lFrame=sA();return r.currentTNode=e,r.lView=n,!0}function pm(n){let e=sA(),t=n[Me];Fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sA(){let n=Fe.lFrame,e=n===null?null:n.child;return e===null?aA(n):e}function aA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function cA(){let n=Fe.lFrame;return Fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Ww=cA;function mm(){let n=cA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function uA(n){return(Fe.lFrame.contextLView=HS(n,Fe.lFrame.contextLView))[Dn]}function ms(){return Fe.lFrame.selectedIndex}function gs(n){Fe.lFrame.selectedIndex=n}function Bd(){let n=Fe.lFrame;return lm(n.tView,n.selectedIndex)}function lA(){return Fe.lFrame.currentNamespace}var dA=!0;function gm(){return dA}function _m(n){dA=n}function ow(n,e=null,t=null,r){let i=Gw(n,e,t,r);return i.resolveInjectorInitializers(),i}function Gw(n,e=null,t=null,r,i=new Set){let o=[t||lr,kS(n)];return r=r||(typeof n=="object"?void 0:mo(n)),new Da(o,e||Pd(),r||null,i)}var wt=class n{static THROW_IF_NOT_FOUND=Ia;static NULL=new Sd;static create(e,t){if(Array.isArray(e))return ow({name:""},t,e,"");{let r=e.name??"";return ow({name:r},e.parent,e.providers,r)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>de(ww)});static __NG_ELEMENT_ID__=-1},Nt=new X(""),Wr=(()=>{class n{static __NG_ELEMENT_ID__=iV;static __NG_ENV_ID__=t=>t}return n})(),sw=class extends Wr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Na(this._lView)}onDestroy(e){let t=this._lView;return kw(t,e),()=>qS(t,e)}};function iV(){return new sw(Ge())}var zr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Qn=new X("",{providedIn:"root",factory:()=>{let n=$(xt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(zr),e.handleError(t))}}}),hA={provide:ds,useValue:()=>void $(zr),multi:!0};function Kw(n){return typeof n=="function"&&n[Cn]!==void 0}function gt(n,e){let[t,r,i]=Ny(n,e?.equal),o=t,a=o[Cn];return o.set=r,o.update=i,o.asReadonly=fA.bind(o),o}function fA(){let n=this[Cn];if(n.readonlyFn===void 0){let e=()=>this();e[Cn]=n,n.readonlyFn=e}return n.readonlyFn}function Zw(n){return Kw(n)&&typeof n.set=="function"}var vm=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=oV}return n})();function oV(){return new vm(Ge(),sn())}var go=class{},ym=new X("",{providedIn:"root",factory:()=>!1});var Qw=new X(""),Yw=new X(""),Ti=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new gn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Te(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),yo=(()=>{class n{internalPendingTasks=$(Ti);scheduler=$(go);errorHandler=$(Qn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();function zd(...n){}var Jw=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new aw})}return n})(),aw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Pu(n){return{toString:n}.toString()}var wm="__parameters__";function fV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function pV(n,e,t){return Pu(()=>{let r=fV(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return u.annotation=a,u;function u(l,f,g){let y=l.hasOwnProperty(wm)?l[wm]:Object.defineProperty(l,wm,{value:[]})[wm];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(a),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var an=RS(pV("Optional"),8);function mV(n){return typeof n=="function"}var Sm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function qA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Eo=(()=>{let n=()=>WA;return n.ngInherit=!0,n})();function WA(n){return n.type.prototype.ngOnChanges&&(n.setInput=_V),gV}function gV(){let n=KA(this),e=n?.current;if(e){let t=n.previous;if(t===ls)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function _V(n,e,t,r,i){let o=this.declaredInputs[r],a=KA(n)||vV(n,{previous:ls,current:null}),u=a.current||(a.current={}),l=a.previous,f=l[o];u[o]=new Sm(f&&f.currentValue,t,l===ls),qA(n,e,i,t)}var GA="__ngSimpleChanges__";function KA(n){return n[GA]||null}function vV(n,e){return n[GA]=e}var pA=[];var ot=function(n,e=null,t){for(let r=0;r<pA.length;r++){let i=pA[r];i(n,e,t)}};function yV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=WA(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function ZA(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:l,ngAfterViewChecked:f,ngOnDestroy:g}=o;a&&(n.contentHooks??=[]).push(-t,a),u&&((n.contentHooks??=[]).push(t,u),(n.contentCheckHooks??=[]).push(t,u)),l&&(n.viewHooks??=[]).push(-t,l),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function Im(n,e,t){QA(n,e,3,t)}function Tm(n,e,t,r){(n[De]&3)===t&&QA(n,e,t,r)}function Xw(n,e){let t=n[De];(t&3)===e&&(t&=16383,t+=1,n[De]=t)}function QA(n,e,t,r){let i=r!==void 0?n[Ra]&65535:0,o=r??-1,a=e.length-1,u=0;for(let l=i;l<a;l++)if(typeof e[l+1]=="number"){if(u=e[l],r!=null&&u>=r)break}else e[l]<0&&(n[Ra]+=65536),(u<o||o==-1)&&(wV(n,t,e,l),n[Ra]=(n[Ra]&4294901760)+l+2),l++}function mA(n,e){ot(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),ot(5,n,e)}}function wV(n,e,t,r){let i=t[r]<0,o=t[r+1],a=i?-t[r]:t[r],u=n[a];i?n[De]>>14<n[Ra]>>16&&(n[De]&3)===e&&(n[De]+=16384,mA(u,o)):mA(u,o)}var Su=-1,La=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function EV(n){return(n.flags&8)!==0}function bV(n){return(n.flags&16)!==0}function IV(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],a=t[r++],u=t[r++];n.setAttribute(e,a,u,o)}else{let o=i,a=t[++r];TV(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function YA(n){return n===3||n===4||n===6}function TV(n){return n.charCodeAt(0)===64}function Au(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?gA(n,t,i,null,e[++r]):gA(n,t,i,null,null))}}return n}function gA(n,e,t,r,i){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let u=n[o++];if(typeof u=="number"){if(u===e){a=-1;break}else if(u>e){a=o-1;break}}}for(;o<n.length;){let u=n[o];if(typeof u=="number")break;if(u===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function JA(n){return n!==Su}function Am(n){return n&32767}function CV(n){return n>>16}function xm(n,e){let t=CV(n),r=e;for(;t>0;)r=r[Aa],t--;return r}var cE=!0;function Rm(n){let e=cE;return cE=n,e}var DV=256,XA=DV-1,ex=5,SV=0,Ci={};function AV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Sa)&&(r=t[Sa]),r==null&&(r=t[Sa]=SV++);let i=r&XA,o=1<<i;e.data[n+(i>>ex)]|=o}function Mm(n,e){let t=tx(n,e);if(t!==-1)return t;let r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,eE(r.data,n),eE(e,null),eE(r.blueprint,null));let i=SE(n,e),o=n.injectorIndex;if(JA(i)){let a=Am(i),u=xm(i,e),l=u[Me].data;for(let f=0;f<8;f++)e[o+f]=u[a+f]|l[a+f]}return e[o+8]=i,o}function eE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function tx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function SE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=sx(i),r===null)return Su;if(t++,i=i[Aa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Su}function uE(n,e,t){AV(n,e,t)}function xV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(YA(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function nx(n,e,t){if(t&8||n!==void 0)return n;sm(e,"NodeInjector")}function rx(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[hs],o=Vn(void 0);try{return i?i.get(e,r,t&8):vw(e,r,t&8)}finally{Vn(o)}}return nx(r,e,t)}function ix(n,e,t,r=0,i){if(n!==null){if(e[De]&2048&&!(r&2)){let a=kV(n,e,t,r,Ci);if(a!==Ci)return a}let o=ox(n,e,t,r,Ci);if(o!==Ci)return o}return rx(e,t,r,i)}function ox(n,e,t,r,i){let o=PV(t);if(typeof o=="function"){if(!qw(e,n,r))return r&1?nx(i,t,r):rx(e,t,r,i);try{let a;if(a=o(r),a==null&&!(r&8))sm(t);else return a}finally{Ww()}}else if(typeof o=="number"){let a=null,u=tx(n,e),l=Su,f=r&1?e[Dr][Cr]:null;for((u===-1||r&4)&&(l=u===-1?SE(n,e):e[u+8],l===Su||!vA(r,!1)?u=-1:(a=e[Me],u=Am(l),e=xm(l,e)));u!==-1;){let g=e[Me];if(_A(o,u,g.data)){let y=RV(u,e,t,a,r,f);if(y!==Ci)return y}l=e[u+8],l!==Su&&vA(r,e[Me].data[u+8]===f)&&_A(o,u,e)?(a=g,u=Am(l),e=xm(l,e)):u=-1}}return i}function RV(n,e,t,r,i,o){let a=e[Me],u=a.data[n+8],l=r==null?ps(u)&&cE:r!=a&&(u.type&3)!==0,f=i&1&&o===u,g=MV(u,a,t,l,f);return g!==null?Pm(e,a,g,u,i):Ci}function MV(n,e,t,r,i){let o=n.providerIndexes,a=e.data,u=o&1048575,l=n.directiveStart,f=n.directiveEnd,g=o>>20,y=r?u:u+g,E=i?u+g:f;for(let I=y;I<E;I++){let N=a[I];if(I<l&&t===N||I>=l&&N.type===t)return I}if(i){let I=a[l];if(I&&Ii(I)&&I.type===t)return l}return null}function Pm(n,e,t,r,i){let o=n[t],a=e.data;if(o instanceof La){let u=o;if(u.resolving){let I=DS(a[t]);throw _w(I)}let l=Rm(u.canSeeViewProviders);u.resolving=!0;let f=a[t].type||a[t],g,y=u.injectImpl?Vn(u.injectImpl):null,E=qw(n,r,0);try{o=n[t]=u.factory(void 0,i,a,n,r),e.firstCreatePass&&t>=r.directiveStart&&yV(t,a[t],e)}finally{y!==null&&Vn(y),Rm(l),u.resolving=!1,Ww()}}return o}function PV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Sa)?n[Sa]:void 0;return typeof e=="number"?e>=0?e&XA:NV:e}function _A(n,e,t){let r=1<<n;return!!(t[e+(n>>ex)]&r)}function vA(n,e){return!(n&2)&&!(n&1&&e)}var Oa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ix(this._tNode,this._lView,e,Ta(r),t)}};function NV(){return new Oa(sn(),Ge())}function Kr(n){return Pu(()=>{let e=n.prototype.constructor,t=e[Dd]||lE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Dd]||lE(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function lE(n){return lw(n)?()=>{let e=lE(yn(n));return e&&e()}:cs(n)}function kV(n,e,t,r,i){let o=n,a=e;for(;o!==null&&a!==null&&a[De]&2048&&!bu(a);){let u=ox(o,a,t,r|2,Ci);if(u!==Ci)return u;let l=o.parent;if(!l){let f=a[Aw];if(f){let g=f.get(t,Ci,r);if(g!==Ci)return g}l=sx(a),a=a[Aa]}o=l}return i}function sx(n){let e=n[Me],t=e.type;return t===2?e.declTNode:t===1?n[Cr]:null}function Kd(n){return xV(sn(),n)}function OV(){return qm(sn(),Ge())}function qm(n,e){return new bo(qr(n,e))}var bo=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=OV}return n})();function ax(n){return(n.flags&128)===128}var AE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(AE||{}),cx=new Map,LV=0;function FV(){return LV++}function VV(n){cx.set(n[kd],n)}function dE(n){cx.delete(n[kd])}var yA="__ngContext__";function xu(n,e){bi(e)?(n[yA]=e[kd],VV(e)):n[yA]=e}function ux(n){return dx(n[Eu])}function lx(n){return dx(n[Tr])}function dx(n){for(;n!==null&&!Hr(n);)n=n[Tr];return n}var hE;function xE(n){hE=n}function hx(){if(hE!==void 0)return hE;if(typeof document<"u")return document;throw new te(210,!1)}var Wm=new X("",{providedIn:"root",factory:()=>UV}),UV="ng",Gm=new X(""),Ba=new X("",{providedIn:"platform",factory:()=>"unknown"});var Km=new X("",{providedIn:"root",factory:()=>hx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var jV="h",BV="b";var fx=!1,px=new X("",{providedIn:"root",factory:()=>fx});var RE=new X("");var zV=(n,e,t,r)=>{};function $V(n,e,t,r){zV(n,e,t,r)}function ME(n){return(n.flags&32)===32}var HV=()=>null;function mx(n,e,t=!1){return HV(n,e,t)}function gx(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a!==-1){let u=n.data[a];Hw(o),u.contentQueries(2,e[a],a)}}}finally{Ne(r)}}}function fE(n,e,t){Hw(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function _x(n,e,t){if(xw(e)){let r=Ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let u=n.data[a];if(u.contentQueries){let l=t[a];u.contentQueries(1,l,a)}}}finally{Ne(r)}}}var wo=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(wo||{});var Em;function qV(){if(Em===void 0&&(Em=null,Ad.trustedTypes))try{Em=Ad.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Em}function wA(n){return qV()?.createScriptURL(n)||n}var Nm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${im})`}};function Zd(n){return n instanceof Nm?n.changingThisBreaksApplicationSecurity:n}function PE(n,e){let t=vx(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${im})`)}return t===e}function vx(n){return n instanceof Nm&&n.getTypeName()||null}var WV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yx(n){return n=String(n),n.match(WV)?n:"unsafe:"+n}var Zm=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Zm||{});function wx(n){let e=bx();return e?e.sanitize(Zm.URL,n)||"":PE(n,"URL")?Zd(n):yx(wi(n))}function Ex(n){let e=bx();if(e)return wA(e.sanitize(Zm.RESOURCE_URL,n)||"");if(PE(n,"ResourceURL"))return wA(Zd(n));throw new te(904,!1)}function GV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Ex:wx}function NE(n,e,t){return GV(e,t)(n)}function bx(){let n=Ge();return n&&n[Ei].sanitizer}function Ix(n){return n instanceof Function?n():n}function KV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Tx="ng-template";function ZV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&KV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(kE(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function kE(n){return n.type===4&&n.value!==Tx}function QV(n,e,t){let r=n.type===4&&!t?Tx:n.value;return e===r}function YV(n,e,t){let r=4,i=n.attrs,o=i!==null?e2(i):0,a=!1;for(let u=0;u<e.length;u++){let l=e[u];if(typeof l=="number"){if(!a&&!Gr(r)&&!Gr(l))return!1;if(a&&Gr(l))continue;a=!1,r=l|r&1;continue}if(!a)if(r&4){if(r=2|r&1,l!==""&&!QV(n,l,t)||l===""&&e.length===1){if(Gr(r))return!1;a=!0}}else if(r&8){if(i===null||!ZV(n,i,l,t)){if(Gr(r))return!1;a=!0}}else{let f=e[++u],g=JV(l,i,kE(n),t);if(g===-1){if(Gr(r))return!1;a=!0;continue}if(f!==""){let y;if(g>o?y="":y=i[g+1].toLowerCase(),r&2&&f!==y){if(Gr(r))return!1;a=!0}}}}return Gr(r)||a}function Gr(n){return(n&1)===0}function JV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let u=e[++i];for(;typeof u=="string";)u=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return t2(e,n)}function XV(n,e,t=!1){for(let r=0;r<e.length;r++)if(YV(n,e[r],t))return!0;return!1}function e2(n){for(let e=0;e<n.length;e++){let t=n[e];if(YA(t))return e}return n.length}function t2(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function EA(n,e){return n?":not("+e.trim()+")":e}function n2(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let u=n[++t];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!Gr(a)&&(e+=EA(o,i),i=""),r=a,o=o||!Gr(r);t++}return i!==""&&(e+=EA(o,i)),e}function r2(n){return n.map(n2).join(",")}function i2(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Gr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Zr={};function o2(n,e){return n.createText(e)}function s2(n,e,t){n.setValue(e,t)}function Cx(n,e,t){return n.createElement(e,t)}function km(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Dx(n,e,t){n.appendChild(e,t)}function bA(n,e,t,r,i){r!==null?km(n,e,t,r,i):Dx(n,e,t)}function a2(n,e,t,r){n.removeChild(null,e,t,r)}function c2(n,e,t){n.setAttribute(e,"style",t)}function u2(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Sx(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&IV(n,e,r),i!==null&&u2(n,e,i),o!==null&&c2(n,e,o)}function OE(n,e,t,r,i,o,a,u,l,f,g){let y=Sn+r,E=y+i,I=l2(y,E),N=typeof f=="function"?f():f;return I[Me]={type:n,blueprint:I,template:t,queries:null,viewQuery:u,declTNode:e,data:I.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:N,incompleteFirstPass:!1,ssrId:g}}function l2(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Zr);return t}function d2(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=OE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function LE(n,e,t,r,i,o,a,u,l,f,g){let y=e.blueprint.slice();return y[$r]=i,y[De]=r|4|128|8|64|1024,(f!==null||n&&n[De]&2048)&&(y[De]|=2048),Pw(y),y[wn]=y[Aa]=n,y[Dn]=t,y[Ei]=a||n&&n[Ei],y[Et]=u||n&&n[Et],y[hs]=l||n&&n[hs]||null,y[Cr]=o,y[kd]=FV(),y[Nd]=g,y[Aw]=f,y[Dr]=e.type==2?n[Dr]:y,y}function h2(n,e,t){let r=qr(e,n),i=d2(t),o=n[Ei].rendererFactory,a=FE(n,LE(n,i,null,Ax(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=a}function Ax(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function xx(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function FE(n,e){return n[Eu]?n[Sw][Tr]=e:n[Eu]=e,n[Sw]=e,e}function Y(n=1){Rx(An(),Ge(),ms()+n,!1)}function Rx(n,e,t,r){if(!r)if((e[De]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Im(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Tm(e,o,0,t)}gs(t)}var Qm=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Qm||{});function pE(n,e,t,r){let i=Ne(null);try{let[o,a,u]=n.inputs[t],l=null;(a&Qm.SignalBased)!==0&&(l=e[o][Cn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):u!==null&&(r=u.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):qA(e,l,o,r)}finally{Ne(i)}}var Di=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Di||{}),f2;function VE(n,e){return f2(n,e)}var Ru=new Set,Ym=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ym||{}),za=new X(""),IA=new Set;function Nu(n){IA.has(n)||(IA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Mx=!1,mE=class extends $t{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,VS()&&(this.destroyRef=$(Wr,{optional:!0})??void 0,this.pendingTasks=$(Ti,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let u=super.subscribe({next:i,error:o,complete:a});return e instanceof Mt&&e.add(u),u}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},qt=mE;function Px(n){let e,t;function r(){n=zd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function TA(n){return queueMicrotask(()=>n()),()=>{n=zd}}var UE="isAngularZone",Om=UE+"_ID",p2=0,Ke=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new qt(!1);onMicrotaskEmpty=new qt(!1);onStable=new qt(!1);onError=new qt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Mx}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,_2(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(UE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,m2,zd,zd);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},m2={};function jE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function g2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Px(()=>{n.callbackScheduled=!1,gE(n),n.isCheckStableRunning=!0,jE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),gE(n)}function _2(n){let e=()=>{g2(n)},t=p2++;n._inner=n._inner.fork({name:"angular",properties:{[UE]:!0,[Om]:t,[Om+t]:!0},onInvokeTask:(r,i,o,a,u,l)=>{if(v2(l))return r.invokeTask(o,a,u,l);try{return CA(n),r.invokeTask(o,a,u,l)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),DA(n)}},onInvoke:(r,i,o,a,u,l,f)=>{try{return CA(n),r.invoke(o,a,u,l,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!y2(l)&&e(),DA(n)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,gE(n),jE(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function gE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function CA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function DA(n){n._nesting--,jE(n)}var Lm=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new qt;onMicrotaskEmpty=new qt;onStable=new qt;onError=new qt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function v2(n){return Nx(n,"__ignore_ng_zone__")}function y2(n){return Nx(n,"__scheduler_tick__")}function Nx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var BE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),kx=[0,1,2,3],Ox=(()=>{class n{ngZone=$(Ke);scheduler=$(go);errorHandler=$(zr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){$(za,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ot(16),this.executing=!0;for(let r of kx)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ot(17)}register(t){let{view:r}=t;r!==void 0?((r[Pa]??=[]).push(t),Iu(r),r[De]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ym.AFTER_NEXT_RENDER,t):t()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),Fm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,a=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Pa];e&&(this.view[Pa]=e.filter(t=>t!==this))}};function Jm(n,e){let t=e?.injector??$(wt);return Nu("NgAfterNextRender"),E2(n,t,e,!0)}function w2(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function E2(n,e,t,r){let i=e.get(BE);i.impl??=e.get(Ox);let o=e.get(za,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(Wr):null,u=e.get(vm,null,{optional:!0}),l=new Fm(i.impl,w2(n),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var b2=new X("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Lx(n,e,t){let r=n.get(b2);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function I2(n,e){for(let[t,r]of e)Lx(n,r.animateFns)}function SA(n,e,t,r){let i=n?.[Ld]?.enter;e!==null&&i&&i.has(t.index)&&I2(r,i)}function Du(n,e,t,r,i,o,a,u){if(i!=null){let l,f=!1;Hr(i)?l=i:bi(i)&&(f=!0,i=i[$r]);let g=Sr(i);n===0&&r!==null?(SA(u,r,o,t),a==null?Dx(e,r,g):km(e,r,g,a||null,!0)):n===1&&r!==null?(SA(u,r,o,t),km(e,r,g,a||null,!0)):n===2?AA(u,o,t,y=>{a2(e,g,f,y)}):n===3&&AA(u,o,t,()=>{e.destroyNode(g)}),l!=null&&L2(e,n,t,l,o,r,a)}}function T2(n,e){Fx(n,e),e[$r]=null,e[Cr]=null}function C2(n,e,t,r,i,o){r[$r]=i,r[Cr]=e,Xm(n,r,t,1,i,o)}function Fx(n,e){e[Ei].changeDetectionScheduler?.notify(9),Xm(n,e,e[Et],2,null,null)}function D2(n){let e=n[Eu];if(!e)return tE(n[Me],n);for(;e;){let t=null;if(bi(e))t=e[Eu];else{let r=e[Zn];r&&(t=r)}if(!t){for(;e&&!e[Tr]&&e!==n;)bi(e)&&tE(e[Me],e),e=e[wn];e===null&&(e=n),bi(e)&&tE(e[Me],e),t=e&&e[Tr]}e=t}}function zE(n,e){let t=n[Vd],r=t.indexOf(e);t.splice(r,1)}function Vx(n,e){if(Na(e))return;let t=e[Et];t.destroyNode&&Xm(n,e,t,3,null,null),D2(e)}function tE(n,e){if(Na(e))return;let t=Ne(null);try{e[De]&=-129,e[De]|=256,e[fr]&&wd(e[fr]),x2(n,e),A2(n,e),e[Me].type===1&&e[Et].destroy();let r=e[xa];if(r!==null&&Hr(e[wn])){r!==e[wn]&&zE(r,e);let i=e[Ma];i!==null&&i.detachView(n)}dE(e)}finally{Ne(t)}}function AA(n,e,t,r){let i=n?.[Ld];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Ru.add(n),Lx(t,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),u=[];if(a){for(let l=0;l<a.animateFns.length;l++){let f=a.animateFns[l],{promise:g}=f();u.push(g)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(u),S2(n,r)}else n&&Ru.delete(n),r(!1)},i)}function S2(n,e){let t=n[Ld]?.running;if(t){t.then(()=>{n[Ld].running=void 0,Ru.delete(n),e(!0)});return}e(!1)}function A2(n,e){let t=n.cleanup,r=e[wu];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let u=t[a+3];u>=0?r[u]():r[-u].unsubscribe(),a+=2}else{let u=r[t[a+1]];t[a].call(u)}r!==null&&(e[wu]=null);let i=e[po];if(i!==null){e[po]=null;for(let a=0;a<i.length;a++){let u=i[a];u()}}let o=e[Od];if(o!==null){e[Od]=null;for(let a of o)a.destroy()}}function x2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof La)){let o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let u=i[o[a]],l=o[a+1];ot(4,u,l);try{l.call(u)}finally{ot(5,u,l)}}else{ot(4,i,o);try{o.call(i)}finally{ot(5,i,o)}}}}}function R2(n,e,t){return M2(n,e.parent,t)}function M2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[$r];if(ps(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===wo.None||i===wo.Emulated)return null}return qr(r,t)}function P2(n,e,t){return k2(n,e,t)}function N2(n,e,t){return n.type&40?qr(n,t):null}var k2=N2,xA;function $E(n,e,t,r){let i=R2(n,r,e),o=e[Et],a=r.parent||e[Cr],u=P2(a,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)bA(o,i,t[l],u,!1);else bA(o,i,t,u,!1);xA!==void 0&&xA(o,r,e,t,i)}function $d(n,e){if(e!==null){let t=e.type;if(t&3)return qr(e,n);if(t&4)return _E(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return $d(n,r);{let i=n[e.index];return Hr(i)?_E(-1,i):Sr(i)}}else{if(t&128)return $d(n,e.next);if(t&32)return VE(e,n)()||Sr(n[e.index]);{let r=Ux(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=us(n[Dr]);return $d(i,r)}else return $d(n,e.next)}}}return null}function Ux(n,e){if(e!==null){let r=n[Dr][Cr],i=e.projection;return r.projection[i]}return null}function _E(n,e){let t=Zn+n+1;if(t<e.length){let r=e[t],i=r[Me].firstChild;if(i!==null)return $d(r,i)}return e[fs]}function HE(n,e,t,r,i,o,a){for(;t!=null;){let u=r[hs];if(t.type===128){t=t.next;continue}let l=r[t.index],f=t.type;if(a&&e===0&&(l&&xu(Sr(l),r),t.flags|=2),!ME(t))if(f&8)HE(n,e,t.child,r,i,o,!1),Du(e,n,u,i,l,t,o,r);else if(f&32){let g=VE(t,r),y;for(;y=g();)Du(e,n,u,i,y,t,o,r);Du(e,n,u,i,l,t,o,r)}else f&16?O2(n,e,r,t,i,o):Du(e,n,u,i,l,t,o,r);t=a?t.projectionNext:t.next}}function Xm(n,e,t,r,i,o){HE(t,r,n.firstChild,e,i,o,!1)}function O2(n,e,t,r,i,o){let a=t[Dr],l=a[Cr].projection[r.projection];if(Array.isArray(l))for(let f=0;f<l.length;f++){let g=l[f];Du(e,n,t[hs],i,g,r,o,t)}else{let f=l,g=a[wn];ax(r)&&(f.flags|=128),HE(n,e,f,g,i,o,!0)}}function L2(n,e,t,r,i,o,a){let u=r[fs],l=Sr(r);u!==l&&Du(e,n,t,o,u,i,a);for(let f=Zn;f<r.length;f++){let g=r[f];Xm(g[Me],g,n,e,o,u)}}function F2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Di.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Di.Important),n.setStyle(t,r,i,o))}}function jx(n,e,t,r,i){let o=ms(),a=r&2;try{gs(-1),a&&e.length>Sn&&Rx(n,e,Sn,!1),ot(a?2:0,i,t),t(r,i)}finally{gs(o),ot(a?3:1,i,t)}}function qE(n,e,t){$2(n,e,t),(t.flags&64)===64&&H2(n,e,t)}function WE(n,e,t=qr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],u=a===-1?t(e,n):n[a];n[i++]=u}}}function V2(n,e,t,r){let o=r.get(px,fx)||t===wo.ShadowDom,a=n.selectRootElement(e,o);return U2(a),a}function U2(n){j2(n)}var j2=()=>null;function B2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Bx(n,e,t,r,i,o){let a=e[Me];if(GE(n,a,e,t,r)){ps(n)&&z2(e,n.index);return}n.type&3&&(t=B2(t)),zx(n,e,t,r,i,o)}function zx(n,e,t,r,i,o){if(n.type&3){let a=qr(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(a,t,r)}else n.type&12}function z2(n,e){let t=Ar(e,n);t[De]&16||(t[De]|=64)}function $2(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ps(t)&&h2(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Mm(t,e);let o=t.initialInputs;for(let a=r;a<i;a++){let u=n.data[a],l=Pm(e,n,a,t);if(xu(l,e),o!==null&&K2(e,a-r,l,u,t,o),Ii(u)){let f=Ar(t.index,e);f[Dn]=Pm(e,n,a,t)}}}function H2(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,a=iA();try{gs(o);for(let u=r;u<i;u++){let l=n.data[u],f=e[u];fm(u),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&q2(l,f)}}finally{gs(-1),fm(a)}}function q2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $x(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];XV(e,o.selectors,!1)&&(r??=[],Ii(o)?r.unshift(o):r.push(o))}return r}function W2(n,e,t,r,i,o){let a=qr(n,e);G2(e[Et],a,o,n.value,t,r,i)}function G2(n,e,t,r,i,o,a){if(o==null)n.removeAttribute(e,i,t);else{let u=a==null?wi(o):a(o,r||"",i);n.setAttribute(e,i,u,t)}}function K2(n,e,t,r,i,o){let a=o[e];if(a!==null)for(let u=0;u<a.length;u+=2){let l=a[u],f=a[u+1];pE(r,t,l,f)}}function Hx(n,e,t,r,i){let o=Sn+t,a=e[Me],u=i(a,e,n,r,t);e[o]=u,Tu(n,!0);let l=n.type===2;return l?(Sx(e[Et],u,n),(KS()===0||Ud(n))&&xu(u,e),ZS()):xu(u,e),gm()&&(!l||!ME(n))&&$E(a,e,u,n),n}function qx(n){let e=n;return jw()?JS():(e=e.parent,Tu(e,!1)),e}function Z2(n,e){let t=n[hs];if(!t)return;let r;try{r=t.get(Qn,null)}catch{r=null}r?.(e)}function GE(n,e,t,r,i){let o=n.inputs?.[r],a=n.hostDirectiveInputs?.[r],u=!1;if(a)for(let l=0;l<a.length;l+=2){let f=a[l],g=a[l+1],y=e.data[f];pE(y,t[f],g,i),u=!0}if(o)for(let l of o){let f=t[l],g=e.data[l];pE(g,f,r,i),u=!0}return u}function Q2(n,e){let t=Ar(e,n),r=t[Me];Y2(r,t);let i=t[$r];i!==null&&t[Nd]===null&&(t[Nd]=mx(i,t[hs])),ot(18),KE(r,t,t[Dn]),ot(19,t[Dn])}function Y2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function KE(n,e,t){pm(e);try{let r=n.viewQuery;r!==null&&fE(1,r,t);let i=n.template;i!==null&&jx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ma]?.finishViewCreation(n),n.staticContentQueries&&gx(n,e),n.staticViewQueries&&fE(2,n.viewQuery,t);let o=n.components;o!==null&&J2(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[De]&=-5,mm()}}function J2(n,e){for(let t=0;t<e.length;t++)Q2(n,e[t])}function X2(n,e,t,r){let i=Ne(null);try{let o=e.tView,u=n[De]&4096?4096:16,l=LE(n,o,t,u,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=n[e.index];l[xa]=f;let g=n[Ma];return g!==null&&(l[Ma]=g.createEmbeddedView(o)),KE(o,l,t),l}finally{Ne(i)}}function RA(n,e){return!e||e.firstChild===null||ax(n)}function qd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Sr(o)),Hr(o)&&Wx(o,r);let a=t.type;if(a&8)qd(n,e,t.child,r);else if(a&32){let u=VE(t,e),l;for(;l=u();)r.push(l)}else if(a&16){let u=Ux(e,t);if(Array.isArray(u))r.push(...u);else{let l=us(e[Dr]);qd(l[Me],l,u,r,!0)}}t=i?t.projectionNext:t.next}return r}function Wx(n,e){for(let t=Zn;t<n.length;t++){let r=n[t],i=r[Me].firstChild;i!==null&&qd(r[Me],r,i,e)}n[fs]!==n[$r]&&e.push(n[fs])}function Gx(n){if(n[Pa]!==null){for(let e of n[Pa])e.impl.addSequence(e);n[Pa].length=0}}var Kx=[];function eU(n){return n[fr]??tU(n)}function tU(n){let e=Kx.pop()??Object.create(rU);return e.lView=n,e}function nU(n){n.lView[fr]!==n&&(n.lView=null,Kx.push(n))}var rU=we(Q({},Xc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Iu(n.lView)},consumerOnSignalRead(){this.lView[fr]=this}});function iU(n){let e=n[fr]??Object.create(oU);return e.lView=n,e}var oU=we(Q({},Xc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=us(n.lView);for(;e&&!Zx(e[Me]);)e=us(e);e&&Nw(e)},consumerOnSignalRead(){this.lView[fr]=this}});function Zx(n){return n.type!==2}function Qx(n){if(n[Od]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Od])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[De]&8192)}}var sU=100;function Yx(n,e=0){let r=n[Ei].rendererFactory,i=!1;i||r.begin?.();try{aU(n,e)}finally{i||r.end?.()}}function aU(n,e){let t=Bw();try{zw(!0),vE(n,e);let r=0;for(;jd(n);){if(r===sU)throw new te(103,!1);r++,vE(n,1)}}finally{zw(t)}}function cU(n,e,t,r){if(Na(e))return;let i=e[De],o=!1,a=!1;pm(e);let u=!0,l=null,f=null;o||(Zx(n)?(f=eU(e),l=tu(f)):bp()===null?(u=!1,f=iU(e),l=tu(f)):e[fr]&&(wd(e[fr]),e[fr]=null));try{Pw(e),tA(n.bindingStartIndex),t!==null&&jx(n,e,t,2,r);let g=(i&3)===3;if(!o)if(g){let I=n.preOrderCheckHooks;I!==null&&Im(e,I,null)}else{let I=n.preOrderHooks;I!==null&&Tm(e,I,0,null),Xw(e,0)}if(a||uU(e),Qx(e),Jx(e,0),n.contentQueries!==null&&gx(n,e),!o)if(g){let I=n.contentCheckHooks;I!==null&&Im(e,I)}else{let I=n.contentHooks;I!==null&&Tm(e,I,1),Xw(e,1)}dU(n,e);let y=n.components;y!==null&&eR(e,y,0);let E=n.viewQuery;if(E!==null&&fE(2,E,r),!o)if(g){let I=n.viewCheckHooks;I!==null&&Im(e,I)}else{let I=n.viewHooks;I!==null&&Tm(e,I,2),Xw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[um]){for(let I of e[um])I();e[um]=null}o||(Gx(e),e[De]&=-73)}catch(g){throw o||Iu(e),g}finally{f!==null&&(vd(f,l),u&&nU(f)),mm()}}function Jx(n,e){for(let t=ux(n);t!==null;t=lx(t))for(let r=Zn;r<t.length;r++){let i=t[r];Xx(i,e)}}function uU(n){for(let e=ux(n);e!==null;e=lx(e)){if(!(e[De]&2))continue;let t=e[Vd];for(let r=0;r<t.length;r++){let i=t[r];Nw(i)}}}function lU(n,e,t){ot(18);let r=Ar(e,n);Xx(r,t),ot(19,r[Dn])}function Xx(n,e){dm(n)&&vE(n,e)}function vE(n,e){let r=n[Me],i=n[De],o=n[fr],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&yd(o)),a||=!1,o&&(o.dirty=!1),n[De]&=-9217,a)cU(r,n,r.template,n[Dn]);else if(i&8192){let u=Ne(null);try{Qx(n),Jx(n,1);let l=r.components;l!==null&&eR(n,l,1),Gx(n)}finally{Ne(u)}}}function eR(n,e,t){for(let r=0;r<e.length;r++)lU(n,e[r],t)}function dU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)gs(~i);else{let o=i,a=t[++r],u=t[++r];rA(a,o);let l=e[o];ot(24,l),u(2,l),ot(25,l)}}}finally{gs(-1)}}function ZE(n,e){let t=Bw()?64:1088;for(n[Ei].changeDetectionScheduler?.notify(e);n;){n[De]|=t;let r=us(n);if(bu(n)&&!r)return n;n=r}return null}function tR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function hU(n,e,t,r=!0){let i=e[Me];if(fU(i,e,n,t),r){let a=_E(t,n),u=e[Et],l=u.parentNode(n[fs]);l!==null&&C2(i,n[Cr],u,e,l,a)}let o=e[Nd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function yE(n,e){if(n.length<=Zn)return;let t=Zn+e,r=n[t];if(r){let i=r[xa];i!==null&&i!==n&&zE(i,r),e>0&&(n[t-1][Tr]=r[Tr]);let o=Rd(n,Zn+e);T2(r[Me],r);let a=o[Ma];a!==null&&a.detachView(o[Me]),r[wn]=null,r[Tr]=null,r[De]&=-129}return r}function fU(n,e,t,r){let i=Zn+r,o=t.length;r>0&&(t[i-1][Tr]=e),r<o-Zn?(e[Tr]=t[i],yw(t,Zn+r,e)):(t.push(e),e[Tr]=null),e[wn]=t;let a=e[xa];a!==null&&t!==a&&nR(a,e);let u=e[Ma];u!==null&&u.insertView(n),hm(e),e[De]|=128}function nR(n,e){let t=n[Vd],r=e[wn];if(bi(r))n[De]|=2;else{let i=r[wn][Dr];e[Dr]!==i&&(n[De]|=2)}t===null?n[Vd]=[e]:t.push(e)}var _s=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Me];return qd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Dn]}set context(e){this._lView[Dn]=e}get destroyed(){return Na(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wn];if(Hr(e)){let t=e[Fd],r=t?t.indexOf(this):-1;r>-1&&(yE(e,r),Rd(t,r))}this._attachedToViewContainer=!1}Vx(this._lView[Me],this._lView)}onDestroy(e){kw(this._lView,e)}markForCheck(){ZE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[De]&=-129}reattach(){hm(this._lView),this._lView[De]|=128}detectChanges(){this._lView[De]|=1024,Yx(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=bu(this._lView),t=this._lView[xa];t!==null&&!e&&zE(t,this._lView),Fx(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=bu(this._lView),r=this._lView[xa];r!==null&&!t&&nR(r,this._lView),hm(this._lView)}};var Qd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=pU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=X2(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new _s(o)}}return n})();function pU(){return mU(sn(),Ge())}function mU(n,e){return n.type&4?new Qd(e,n,qm(n,e)):null}function eg(n,e,t,r,i){let o=n.data[e];if(o===null)o=gU(n,e,t,r,i),nA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let a=YS();o.injectorIndex=a===null?-1:a.injectorIndex}return Tu(o,!0),o}function gU(n,e,t,r,i){let o=Uw(),a=jw(),u=a?o:o&&o.parent,l=n.data[e]=vU(n,u,t,e,r,i);return _U(n,l,o,a),l}function _U(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function vU(n,e,t,r,i,o){let a=e?e.injectorIndex:-1,u=0;return QS()&&(u|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var xX=new RegExp(`^(\\d+)*(${BV}|${jV})*(.*)`);var yU=()=>null;function MA(n,e){return yU(n,e)}var rR=class{},tg=class{},wE=class{resolveComponentFactory(e){throw new te(917,!1)}},Yd=class{static NULL=new wE},Fa=class{},vs=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>wU()}return n})();function wU(){let n=Ge(),e=sn(),t=Ar(e.index,n);return(bi(t)?t:n)[Et]}var iR=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var Cm={},EE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Cm,r);return i!==Cm||t===Cm?i:this.parentInjector.get(e,t,r)}};function Vm(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number")o=u;else if(o==1)i=uw(i,u);else if(o==2){let l=u,f=e[++a];r=uw(r,l+": "+f+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ue(n,e=0){let t=Ge();if(t===null)return de(n,e);let r=sn();return ix(r,t,yn(n),e)}function QE(){let n="invalid";throw new Error(n)}function oR(n,e,t,r,i){let o=r===null?null:{"":-1},a=i(n,t);if(a!==null){let u=a,l=null,f=null;for(let g of a)if(g.resolveHostDirectives!==null){[u,l,f]=g.resolveHostDirectives(a);break}IU(n,e,t,u,o,l,f)}o!==null&&r!==null&&EU(t,r,o)}function EU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}function bU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function IU(n,e,t,r,i,o,a){let u=r.length,l=!1;for(let E=0;E<u;E++){let I=r[E];!l&&Ii(I)&&(l=!0,bU(n,t,E)),uE(Mm(t,e),n,I.type)}xU(t,n.data.length,u);for(let E=0;E<u;E++){let I=r[E];I.providersResolver&&I.providersResolver(I)}let f=!1,g=!1,y=xx(n,e,u,null);u>0&&(t.directiveToIndex=new Map);for(let E=0;E<u;E++){let I=r[E];if(t.mergedAttrs=Au(t.mergedAttrs,I.hostAttrs),CU(n,t,e,y,I),AU(y,I,i),a!==null&&a.has(I)){let[H,F]=a.get(I);t.directiveToIndex.set(I.type,[y,H+t.directiveStart,F+t.directiveStart])}else(o===null||!o.has(I))&&t.directiveToIndex.set(I.type,y);I.contentQueries!==null&&(t.flags|=4),(I.hostBindings!==null||I.hostAttrs!==null||I.hostVars!==0)&&(t.flags|=64);let N=I.type.prototype;!f&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!g&&(N.ngOnChanges||N.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),g=!0),y++}TU(n,t,o)}function TU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))PA(0,e,i,r),PA(1,e,i,r),kA(e,r,!1);else{let o=t.get(i);NA(0,e,o,r),NA(1,e,o,r),kA(e,r,!0)}}}function PA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(r),sR(e,o)}}function NA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o],u;n===0?u=e.hostDirectiveInputs??={}:u=e.hostDirectiveOutputs??={},u[a]??=[],u[a].push(r,o),sR(e,a)}}function sR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function kA(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||kE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,u=0;for(;u<r.length;){let l=r[u];if(l===0){u+=4;continue}else if(l===5){u+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let f=i[l];for(let g of f)if(g===e){a??=[],a.push(l,r[u+1]);break}}else if(t&&o.hasOwnProperty(l)){let f=o[l];for(let g=0;g<f.length;g+=2)if(f[g]===e){a??=[],a.push(f[g+1],r[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(a)}function CU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=cs(i.type,!0)),a=new La(o,Ii(i),ue,null);n.blueprint[r]=a,t[r]=a,DU(n,e,r,xx(n,t,i.hostVars,Zr),i)}function DU(n,e,t,r,i){let o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let u=~e.index;SU(a)!=u&&a.push(u),a.push(t,r,o)}}function SU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function AU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ii(e)&&(t[""]=n)}}function xU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function aR(n,e,t,r,i,o,a,u){let l=e[Me],f=l.consts,g=ka(f,a),y=eg(l,n,t,r,g);return o&&oR(l,e,y,ka(f,u),i),y.mergedAttrs=Au(y.mergedAttrs,y.attrs),y.attrs!==null&&Vm(y,y.attrs,!1),y.mergedAttrs!==null&&Vm(y,y.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,y),y}function cR(n,e){ZA(n,e),xw(e)&&n.queries.elementEnd(e)}function RU(n,e,t,r,i,o){let a=e.consts,u=ka(a,i),l=eg(e,n,t,r,u);if(l.mergedAttrs=Au(l.mergedAttrs,l.attrs),o!=null){let f=ka(a,o);l.localNames=[];for(let g=0;g<f.length;g+=2)l.localNames.push(f[g],-1)}return l.attrs!==null&&Vm(l,l.attrs,!1),l.mergedAttrs!==null&&Vm(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function YE(n){return lR(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function uR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function lR(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function MU(n,e,t){return n[e]=t}function Si(n,e,t){if(t===Zr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function OA(n,e,t,r){let i=Si(n,e,t);return Si(n,e+1,r)||i}function PU(n,e,t,r,i,o){let a=OA(n,e,t,r);return OA(n,e+2,i,o)||a}function Dm(n,e,t){return function r(i){let o=ps(n)?Ar(n.index,e):e;ZE(o,5);let a=e[Dn],u=LA(e,a,t,i),l=r.__ngNextListenerFn__;for(;l;)u=LA(e,a,l,i)&&u,l=l.__ngNextListenerFn__;return u}}function LA(n,e,t,r){let i=Ne(null);try{return ot(6,e,t),t(r)!==!1}catch(o){return Z2(n,o),!1}finally{ot(7,e,t),Ne(i)}}function dR(n,e,t,r,i,o,a,u){let l=Ud(n),f=!1,g=null;if(!r&&l&&(g=kU(e,t,o,n.index)),g!==null){let y=g.__ngLastListenerFn__||g;y.__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,f=!0}else{let y=qr(n,t),E=r?r(y):y;$V(t,E,o,u);let I=i.listen(E,o,u);if(!NU(o)){let N=r?H=>r(Sr(H[n.index])):n.index;hR(N,e,t,o,u,I,!1)}}return f}function NU(n){return n.startsWith("animation")||n.startsWith("transition")}function kU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===t&&i[o+1]===r){let u=e[wu],l=i[o+2];return u&&u.length>l?u[l]:null}typeof a=="string"&&(o+=2)}return null}function hR(n,e,t,r,i,o,a){let u=e.firstCreatePass?GS(e):null,l=WS(t),f=l.length;l.push(i,o),u&&u.push(r,n,f,(f+1)*(a?-1:1))}function FA(n,e,t,r,i,o){let a=e[t],u=e[Me],f=u.data[t].outputs[r],y=a[f].subscribe(o);hR(n.index,u,e,i,o,y,!0)}var bE=Symbol("BINDING");var Um=class extends Yd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=vo(e);return new Va(t,this.ngModule)}};function OU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Qm.SignalBased)!==0};return i&&(o.transform=i),o})}function LU(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function FU(n,e,t){let r=e instanceof xt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new EE(t,r):t}function VU(n){let e=n.get(Fa,null);if(e===null)throw new te(407,!1);let t=n.get(iR,null),r=n.get(go,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function UU(n,e){let t=fR(n);return Cx(e,t,t==="svg"?jS:t==="math"?BS:null)}function fR(n){return(n.selectors[0][0]||"div").toLowerCase()}var Va=class extends tg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=OU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=LU(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=r2(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,a){ot(22);let u=Ne(null);try{let l=this.componentDef,f=jU(r,l,a,o),g=FU(l,i||this.ngModule,e),y=VU(g),E=y.rendererFactory.createRenderer(null,l),I=r?V2(E,r,l.encapsulation,g):UU(l,E),N=a?.some(VA)||o?.some(W=>typeof W!="function"&&W.bindings.some(VA)),H=LE(null,f,null,512|Ax(l),null,null,y,E,g,null,mx(I,g,!0));H[Sn]=I,pm(H);let F=null;try{let W=aR(Sn,H,2,"#host",()=>f.directiveRegistry,!0,0);Sx(E,I,W),xu(I,H),qE(f,H,W),_x(f,W,H),cR(f,W),t!==void 0&&zU(W,this.ngContentSelectors,t),F=Ar(W.index,H),H[Dn]=F[Dn],KE(f,H,null)}catch(W){throw F!==null&&dE(F),dE(H),W}finally{ot(23),mm()}return new jm(this.componentType,H,!!N)}finally{Ne(u)}}};function jU(n,e,t,r){let i=n?["ng-version","20.3.14"]:i2(e.selectors[0]),o=null,a=null,u=0;if(t)for(let g of t)u+=g[bE].requiredVars,g.create&&(g.targetIdx=0,(o??=[]).push(g)),g.update&&(g.targetIdx=0,(a??=[]).push(g));if(r)for(let g=0;g<r.length;g++){let y=r[g];if(typeof y!="function")for(let E of y.bindings){u+=E[bE].requiredVars;let I=g+1;E.create&&(E.targetIdx=I,(o??=[]).push(E)),E.update&&(E.targetIdx=I,(a??=[]).push(E))}}let l=[e];if(r)for(let g of r){let y=typeof g=="function"?g:g.type,E=Iw(y);l.push(E)}return OE(0,null,BU(o,a),1,u,l,null,null,null,[i],null)}function BU(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function VA(n){let e=n[bE].kind;return e==="input"||e==="twoWay"}var jm=class extends rR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=lm(t[Me],Sn),this.location=qm(this._tNode,t),this.instance=Ar(this._tNode.index,t)[Dn],this.hostView=this.changeDetectorRef=new _s(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=GE(r,i[Me],i,e,t);this.previousInputValues.set(e,t);let a=Ar(r.index,i);ZE(a,1)}get injector(){return new Oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $a=(()=>{class n{static __NG_ELEMENT_ID__=$U}return n})();function $U(){let n=sn();return qU(n,Ge())}var HU=$a,pR=class extends HU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return qm(this._hostTNode,this._hostLView)}get injector(){return new Oa(this._hostTNode,this._hostLView)}get parentInjector(){let e=SE(this._hostTNode,this._hostLView);if(JA(e)){let t=xm(e,this._hostLView),r=Am(e),i=t[Me].data[r+8];return new Oa(i,t)}else return new Oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=UA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Zn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=MA(this._lContainer,e.ssrId),u=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(u,i,RA(this._hostTNode,a)),u}createComponent(e,t,r,i,o,a,u){let l=e&&!mV(e),f;if(l)f=t;else{let F=t||{};f=F.index,r=F.injector,i=F.projectableNodes,o=F.environmentInjector||F.ngModuleRef,a=F.directives,u=F.bindings}let g=l?e:new Va(vo(e)),y=r||this.parentInjector;if(!o&&g.ngModule==null){let W=(l?y:this.parentInjector).get(xt,null);W&&(o=W)}let E=vo(g.componentType??{}),I=MA(this._lContainer,E?.id??null),N=I?.firstChild??null,H=g.create(y,i,N,o,a,u);return this.insertImpl(H.hostView,f,RA(this._hostTNode,I)),H}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if($S(i)){let u=this.indexOf(e);if(u!==-1)this.detach(u);else{let l=i[wn],f=new pR(l,l[Cr],l[wn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return hU(a,i,o,r),e.attachToViewContainerRef(),yw(nE(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=UA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=yE(this._lContainer,t);r&&(Rd(nE(this._lContainer),t),Vx(r[Me],r))}detach(e){let t=this._adjustIndex(e,-1),r=yE(this._lContainer,t);return r&&Rd(nE(this._lContainer),t)!=null?new _s(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function UA(n){return n[Fd]}function nE(n){return n[Fd]||(n[Fd]=[])}function qU(n,e){let t,r=e[n.index];return Hr(r)?t=r:(t=tR(r,e,null,n),e[n.index]=t,FE(e,t)),GU(t,e,n,r),new pR(t,n,e)}function WU(n,e){let t=n[Et],r=t.createComment(""),i=qr(e,n),o=t.parentNode(i);return km(t,o,r,t.nextSibling(i),!1),r}var GU=QU,KU=()=>!1;function ZU(n,e,t){return KU(n,e,t)}function QU(n,e,t,r){if(n[fs])return;let i;t.type&8?i=Sr(r):i=WU(e,t),n[fs]=i}var Ua=class{},ng=class{};var Bm=class extends Ua{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Um(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=bw(e);this._bootstrapComponents=Ix(o.bootstrap),this._r3Injector=Gw(e,t,[{provide:Ua,useValue:this},{provide:Yd,useValue:this.componentFactoryResolver},...r],mo(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},zm=class extends ng{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Bm(this.moduleType,e,[])}};var Wd=class extends Ua{injector;componentFactoryResolver=new Um(this);instance=null;constructor(e){super();let t=new Da([...e.providers,{provide:Ua,useValue:this},{provide:Yd,useValue:this.componentFactoryResolver}],e.parent||Pd(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ku(n,e,t=null){return new Wd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var YU=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Tw(!1,t.type),i=r.length>0?ku([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(de(xt))})}return n})();function Ft(n){return Pu(()=>{let e=mR(n),t=we(Q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===AE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(YU).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wo.Emulated,styles:n.styles||lr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Nu("NgStandalone"),gR(t);let r=n.dependencies;return t.directiveDefs=jA(r,JU),t.pipeDefs=jA(r,NS),t.id=tj(t),t})}function JU(n){return vo(n)||Iw(n)}function xr(n){return Pu(()=>({type:n.type,bootstrap:n.bootstrap||lr,declarations:n.declarations||lr,imports:n.imports||lr,exports:n.exports||lr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function XU(n,e){if(n==null)return ls;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,a,u,l;Array.isArray(i)?(u=i[0],o=i[1],a=i[2]??o,l=i[3]||null):(o=i,a=i,u=Qm.None,l=null),t[o]=[r,u,l],e[o]=a}return t}function ej(n){if(n==null)return ls;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Rt(n){return Pu(()=>{let e=mR(n);return gR(e),e})}function JE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function mR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ls,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||lr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:XU(n.inputs,e),outputs:ej(n.outputs),debugInfo:null}}function gR(n){n.features?.forEach(e=>e(n))}function jA(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function tj(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nj(n){return Object.getPrototypeOf(n.prototype).constructor}function Yn(n){let e=nj(n.type),t=!0,r=[n];for(;e;){let i;if(Ii(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=rE(n.inputs),a.declaredInputs=rE(n.declaredInputs),a.outputs=rE(n.outputs);let u=i.hostBindings;u&&aj(n,u);let l=i.viewQuery,f=i.contentQueries;if(l&&oj(n,l),f&&sj(n,f),rj(n,i),CS(n.outputs,i.outputs),Ii(i)&&i.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let u=o[a];u&&u.ngInherit&&u(n),u===Yn&&(t=!1)}}e=Object.getPrototypeOf(e)}ij(r)}function rj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function ij(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Au(i.hostAttrs,t=Au(t,i.hostAttrs))}}function rE(n){return n===ls?{}:n===lr?[]:n}function oj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function sj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function aj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function cj(n,e,t,r,i,o,a,u){if(t.firstCreatePass){n.mergedAttrs=Au(n.mergedAttrs,n.attrs);let g=n.tView=OE(2,n,i,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),g.queries=t.queries.embeddedTView(n))}u&&(n.flags|=u),Tu(n,!1);let l=lj(t,e,n,r);gm()&&$E(t,e,l,n),xu(l,e);let f=tR(l,e,l,n);e[r+Sn]=f,FE(e,f),ZU(f,n,e)}function uj(n,e,t,r,i,o,a,u,l,f,g){let y=t+Sn,E;return e.firstCreatePass?(E=eg(e,y,4,a||null,u||null),Lw()&&oR(e,n,E,ka(e.consts,f),$x),ZA(e,E)):E=e.data[y],cj(E,n,e,t,r,i,o,l),Ud(E)&&qE(e,n,E),f!=null&&WE(n,E,g),E}function kt(n,e,t,r,i,o,a,u){let l=Ge(),f=An(),g=ka(f.consts,o);return uj(l,f,n,e,t,r,i,g,void 0,a,u),kt}var lj=dj;function dj(n,e,t,r){return _m(!0),e[Et].createComment("")}var XE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var eb=new X("");function ys(n){return!!n&&typeof n.then=="function"}function tb(n){return!!n&&typeof n.subscribe=="function"}var nb=new X("");function rg(n){return Un([{provide:nb,multi:!0,useValue:n}])}var rb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=$(nb,{optional:!0})??[];injector=$(wt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Pt(this.injector,i);if(ys(o))t.push(o);else if(tb(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jd=new X("");function _R(){Py(()=>{let n="";throw new te(600,n)})}function vR(n){return n.isBoundToModule}var hj=10;var ws=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$(Qn);afterRenderManager=$(BE);zonelessEnabled=$(ym);rootEffectScheduler=$(Jw);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new $t;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=$(Ti);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ce(t=>!t))}constructor(){$(za,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=$(xt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=wt.NULL){return this._injector.get(Ke).run(()=>{ot(10);let a=t instanceof tg;if(!this._injector.get(rb).done){let N="";throw new te(405,N)}let l;a?l=t:l=this._injector.get(Yd).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let f=vR(l)?void 0:this._injector.get(Ua),g=r||l.selector,y=l.create(i,[],g,f),E=y.location.nativeElement,I=y.injector.get(eb,null);return I?.registerApplication(E),y.onDestroy(()=>{this.detachView(y.hostView),Hd(this.components,y),I?.unregisterApplication(E)}),this._loadComponent(y),ot(11,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ot(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ym.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new te(101,!1);let t=Ne(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ne(t),this.afterTick.next(),ot(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Fa,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<hj;)ot(14),this.synchronizeOnce(),ot(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!jd(i))continue;let o=r&&!this.zonelessEnabled?0:1;Yx(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>jd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Hd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Jd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Hd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Hd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Es(n,e,t,r){let i=Ge(),o=Cu();if(Si(i,o,e)){let a=An(),u=Bd();W2(u,i,n,e,t,r)}return Es}var LX=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function st(n,e,t){let r=Ge(),i=Cu();if(Si(r,i,e)){let o=An(),a=Bd();Bx(a,r,n,e,r[Et],t)}return st}function BA(n,e,t,r,i){GE(e,n,t,i?"class":"style",r)}function V(n,e,t,r){let i=Ge(),o=i[Me],a=n+Sn,u=o.firstCreatePass?aR(a,i,2,e,$x,Lw(),t,r):o.data[a];if(Hx(u,i,n,e,yR),Ud(u)){let l=i[Me];qE(l,i,u),_x(l,u,i)}return r!=null&&WE(i,u),V}function U(){let n=An(),e=sn(),t=qx(e);return n.firstCreatePass&&cR(n,t),Fw(t)&&Vw(),Ow(),t.classesWithoutHost!=null&&EV(t)&&BA(n,t,Ge(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&bV(t)&&BA(n,t,Ge(),t.stylesWithoutHost,!1),U}function Vt(n,e,t,r){return V(n,e,t,r),U(),Vt}function Qr(n,e,t,r){let i=Ge(),o=i[Me],a=n+Sn,u=o.firstCreatePass?RU(a,o,2,e,t,r):o.data[a];return Hx(u,i,n,e,yR),r!=null&&WE(i,u),Qr}function Ai(){let n=sn(),e=qx(n);return Fw(e)&&Vw(),Ow(),Ai}function ig(n,e,t,r){return Qr(n,e,t,r),Ai(),ig}var yR=(n,e,t,r,i)=>(_m(!0),Cx(e[Et],r,lA()));function Rr(){return Ge()}function Ou(n,e,t){let r=Ge(),i=Cu();if(Si(r,i,e)){let o=An(),a=Bd();zx(a,r,n,e,r[Et],t)}return Ou}var Xd="en-US";var fj=Xd;function wR(n){typeof n=="string"&&(fj=n.toLowerCase().replace(/_/g,"-"))}function ae(n,e,t){let r=Ge(),i=An(),o=sn();return ER(i,r,r[Et],o,n,e,t),ae}function Ha(n,e,t){let r=Ge(),i=An(),o=sn();return(o.type&3||t)&&dR(o,i,r,t,r[Et],n,e,Dm(o,r,e)),Ha}function ER(n,e,t,r,i,o,a){let u=!0,l=null;if((r.type&3||a)&&(l??=Dm(r,e,o),dR(r,n,e,a,t,i,o,l)&&(u=!1)),u){let f=r.outputs?.[i],g=r.hostDirectiveOutputs?.[i];if(g&&g.length)for(let y=0;y<g.length;y+=2){let E=g[y],I=g[y+1];l??=Dm(r,e,o),FA(r,e,E,I,i,l)}if(f&&f.length)for(let y of f)l??=Dm(r,e,o),FA(r,e,y,i,i,l)}}function Ee(n=1){return uA(n)}function bm(n,e){return n<<17|e<<2}function ja(n){return n>>17&32767}function pj(n){return(n&2)==2}function mj(n,e){return n&131071|e<<17}function IE(n){return n|2}function Mu(n){return(n&131068)>>2}function iE(n,e){return n&-131069|e<<2}function gj(n){return(n&1)===1}function TE(n){return n|1}function _j(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,u=ja(a),l=Mu(a);n[r]=t;let f=!1,g;if(Array.isArray(t)){let y=t;g=y[1],(g===null||yu(y,g)>0)&&(f=!0)}else g=t;if(i)if(l!==0){let E=ja(n[u+1]);n[r+1]=bm(E,u),E!==0&&(n[E+1]=iE(n[E+1],r)),n[u+1]=mj(n[u+1],r)}else n[r+1]=bm(u,0),u!==0&&(n[u+1]=iE(n[u+1],r)),u=r;else n[r+1]=bm(l,0),u===0?u=r:n[l+1]=iE(n[l+1],r),l=r;f&&(n[r+1]=IE(n[r+1])),zA(n,g,r,!0),zA(n,g,r,!1),vj(e,g,n,r,o),a=bm(u,l),o?e.classBindings=a:e.styleBindings=a}function vj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&yu(o,e)>=0&&(t[r+1]=TE(t[r+1]))}function zA(n,e,t,r){let i=n[t+1],o=e===null,a=r?ja(i):Mu(i),u=!1;for(;a!==0&&(u===!1||o);){let l=n[a],f=n[a+1];yj(l,e)&&(u=!0,n[a+1]=r?TE(f):IE(f)),a=r?ja(f):Mu(f)}u&&(n[t+1]=r?IE(i):TE(i))}function yj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?yu(n,e)>=0:!1}function jn(n,e){return wj(n,e,null,!0),jn}function wj(n,e,t,r){let i=Ge(),o=An(),a=$w(2);if(o.firstUpdatePass&&bj(o,n,a,r),e!==Zr&&Si(i,a,e)){let u=o.data[ms()];Sj(o,u,i,i[Et],n,i[a+1]=Aj(e,t),r,a)}}function Ej(n,e){return e>=n.expandoStartIndex}function bj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ms()],a=Ej(n,t);xj(o,r)&&e===null&&!a&&(e=!1),e=Ij(i,o,e,r),_j(i,o,e,t,a,r)}}function Ij(n,e,t,r){let i=oA(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=oE(null,n,e,t,r),t=Gd(t,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=oE(i,n,e,t,r),o===null){let l=Tj(n,e,r);l!==void 0&&Array.isArray(l)&&(l=oE(null,n,e,l[1],r),l=Gd(l,e.attrs,r),Cj(n,e,r,l))}else o=Dj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Tj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Mu(r)!==0)return n[ja(r)]}function Cj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ja(i)]=r}function Dj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=n[o].hostAttrs;r=Gd(r,a,t)}return Gd(r,e.attrs,t)}function oE(n,e,t,r,i){let o=null,a=t.directiveEnd,u=t.directiveStylingLast;for(u===-1?u=t.directiveStart:u++;u<a&&(o=e[u],r=Gd(r,o.hostAttrs,i),o!==n);)u++;return n!==null&&(t.directiveStylingLast=u),r}function Gd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),PS(n,a,t?!0:e[++o]))}return n===void 0?null:n}function Sj(n,e,t,r,i,o,a,u){if(!(e.type&3))return;let l=n.data,f=l[u+1],g=gj(f)?$A(l,e,t,i,Mu(f),a):void 0;if(!$m(g)){$m(o)||pj(f)&&(o=$A(l,null,t,i,u,a));let y=Rw(ms(),t);F2(r,a,y,i,o)}}function $A(n,e,t,r,i,o){let a=e===null,u;for(;i>0;){let l=n[i],f=Array.isArray(l),g=f?l[1]:l,y=g===null,E=t[i+1];E===Zr&&(E=y?lr:void 0);let I=y?cm(E,r):g===r?E:void 0;if(f&&!$m(I)&&(I=cm(l,r)),$m(I)&&(u=I,a))return u;let N=n[i+1];i=a?ja(N):Mu(N)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(u=cm(l,r))}return u}function $m(n){return n!==void 0}function Aj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=mo(Zd(n)))),n}function xj(n,e){return(n.flags&(e?8:16))!==0}function q(n,e=""){let t=Ge(),r=An(),i=n+Sn,o=r.firstCreatePass?eg(r,i,1,e,null):r.data[i],a=Rj(r,t,o,e,n);t[i]=a,gm()&&$E(r,t,a,o),Tu(o,!1)}var Rj=(n,e,t,r,i)=>(_m(!0),o2(e[Et],r));function Mj(n,e,t,r=""){return Si(n,Cu(),t)?e+wi(t)+r:Zr}function Pj(n,e,t,r,i,o,a,u,l,f,g,y=""){let E=eA(),I=PU(n,E,t,i,a,l);return I=Si(n,E+4,g)||I,$w(5),I?e+wi(t)+r+wi(i)+o+wi(a)+u+wi(l)+f+wi(g)+y:Zr}function cn(n){return Ut("",n),cn}function Ut(n,e,t){let r=Ge(),i=Mj(r,n,e,t);return i!==Zr&&bR(r,ms(),i),Ut}function og(n,e,t,r,i,o,a,u,l,f,g){let y=Ge(),E=Pj(y,n,e,t,r,i,o,a,u,l,f,g);return E!==Zr&&bR(y,ms(),E),og}function bR(n,e,t){let r=Rw(e,n);s2(n[Et],r,t)}function Ze(n,e,t){Zw(e)&&(e=e());let r=Ge(),i=Cu();if(Si(r,i,e)){let o=An(),a=Bd();Bx(a,r,n,e,r[Et],t)}return Ze}function Xe(n,e){let t=Zw(n);return t&&n.set(e),t}function Qe(n,e){let t=Ge(),r=An(),i=sn();return ER(r,t,t[Et],i,n,e),Qe}function Nj(n,e,t){let r=An();if(r.firstCreatePass){let i=Ii(n);CE(t,r.data,r.blueprint,i,!0),CE(e,r.data,r.blueprint,i,!1)}}function CE(n,e,t,r,i){if(n=yn(n),Array.isArray(n))for(let o=0;o<n.length;o++)CE(n[o],e,t,r,i);else{let o=An(),a=Ge(),u=sn(),l=Ca(n)?n:yn(n.provide),f=Dw(n),g=u.providerIndexes&1048575,y=u.directiveStart,E=u.providerIndexes>>20;if(Ca(n)||!n.multi){let I=new La(f,i,ue,null),N=aE(l,e,i?g:g+E,y);N===-1?(uE(Mm(u,a),o,l),sE(o,n,e.length),e.push(l),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(I),a.push(I)):(t[N]=I,a[N]=I)}else{let I=aE(l,e,g+E,y),N=aE(l,e,g,g+E),H=I>=0&&t[I],F=N>=0&&t[N];if(i&&!F||!i&&!H){uE(Mm(u,a),o,l);let W=Lj(i?Oj:kj,t.length,i,r,f,n);!i&&F&&(t[N].providerFactory=W),sE(o,n,e.length,0),e.push(l),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(W),a.push(W)}else{let W=IR(t[i?N:I],f,!i&&r);sE(o,n,I>-1?I:N,W)}!i&&r&&F&&t[N].componentProviders++}}}function sE(n,e,t,r){let i=Ca(e),o=FS(e);if(i||o){let l=(o?yn(e.useClass):e).prototype.ngOnDestroy;if(l){let f=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let g=f.indexOf(t);g===-1?f.push(t,[r,l]):f[g+1].push(r,l)}else f.push(t,l)}}}function IR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function aE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function kj(n,e,t,r,i){return DE(this.multi,[])}function Oj(n,e,t,r,i){let o=this.multi,a;if(this.providerFactory){let u=this.providerFactory.componentProviders,l=Pm(r,r[Me],this.providerFactory.index,i);a=l.slice(0,u),DE(o,a);for(let f=u;f<l.length;f++)a.push(l[f])}else a=[],DE(o,a);return a}function DE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Lj(n,e,t,r,i,o){let a=new La(n,t,ue,null);return a.multi=[],a.index=e,a.componentProviders=0,IR(a,i,r&&!t),a}function xi(n,e=[]){return t=>{t.providersResolver=(r,i)=>Nj(r,i?i(n):n,e)}}function Fj(n,e){let t=n[e];return t===Zr?void 0:t}function Vj(n,e,t,r,i,o){let a=e+t;return Si(n,a,i)?MU(n,a+1,o?r.call(o,i):r(i)):Fj(n,a+1)}function ib(n,e){let t=An(),r,i=n+Sn;t.firstCreatePass?(r=Uj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=cs(r.type,!0)),a,u=Vn(ue);try{let l=Rm(!1),f=o();return Rm(l),Mw(t,Ge(),i,f),f}finally{Vn(u)}}function Uj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function ob(n,e,t){let r=n+Sn,i=Ge(),o=zS(i,r);return jj(i,r)?Vj(i,XS(),e,o.transform,t,o):o.transform(t)}function jj(n,e){return n[Me].data[e].pure}var Hm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sb=(()=>{class n{compileModuleSync(t){return new zm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=bw(t),o=Ix(i.declarations).reduce((a,u)=>{let l=vo(u);return l&&a.push(new Va(l)),a},[]);return new Hm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Bj=(()=>{class n{zone=$(Ke);changeDetectionScheduler=$(go);applicationRef=$(ws);applicationErrorHandler=$(Qn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ke(we(Q({},CR()),{scheduleInRootZone:t})),[{provide:Ke,useFactory:n},{provide:ds,multi:!0,useFactory:()=>{let r=$(Bj,{optional:!0});return()=>r.initialize()}},{provide:ds,multi:!0,useFactory:()=>{let r=$(zj);return()=>{r.initialize()}}},e===!0?{provide:Qw,useValue:!0}:[],{provide:Yw,useValue:t??Mx},{provide:Qn,useFactory:()=>{let r=$(Ke),i=$(xt),o;return a=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw a}):(o??=i.get(zr),o.handleError(a))})}}}]}function CR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var zj=(()=>{class n{subscription=new Mt;initialized=!1;zone=$(Ke);pendingTasks=$(Ti);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ke.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ke.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DR=(()=>{class n{applicationErrorHandler=$(Qn);appRef=$(ws);taskService=$(Ti);ngZone=$(Ke);zonelessEnabled=$(ym);tracing=$(za,{optional:!0});disableScheduling=$(Qw,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Om):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(Yw,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lm||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?TA:Px;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Om+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,TA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function $j(){return typeof $localize<"u"&&$localize.locale||Xd}var sg=new X("",{providedIn:"root",factory:()=>$(sg,{optional:!0,skipSelf:!0})||$j()});function un(n){return bS(n)}function Lu(n,e){return Dp(n,e?.equal)}var SR=class{[Cn];constructor(e){this[Cn]=e}destroy(){this[Cn].destroy()}};var PR=Symbol("InputSignalNode#UNSET"),sB=we(Q({},Sp),{transformFn:void 0,applyValueToInputSignal(n,e){ru(n,e)}});function NR(n,e){let t=Object.create(sB);t.value=n,t.transformFn=e?.transform;function r(){if(eu(t),t.value===PR){let i=null;throw new te(-950,i)}return t.value}return r[Cn]=t,r}var cg=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Kd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},aB=new X("");aB.__NG_ELEMENT_ID__=n=>{let e=sn();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new te(204,!1)};function AR(n,e){return NR(n,e)}function cB(n){return NR(PR,n)}var kR=(AR.required=cB,AR);var ab=new X(""),uB=new X("");function eh(n){return!n.moduleRef}function lB(n){let e=eh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ke);return t.run(()=>{eh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),eh(n)){let o=()=>e.destroy(),a=n.platformInjector.get(ab);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(ab);a.add(o),n.moduleRef.onDestroy(()=>{Hd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(o)})}return hB(r,t,()=>{let o=e.get(Ti),a=o.add(),u=e.get(rb);return u.runInitializers(),u.donePromise.then(()=>{let l=e.get(sg,Xd);if(wR(l||Xd),!e.get(uB,!0))return eh(n)?e.get(ws):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(eh(n)){let g=e.get(ws);return n.rootComponent!==void 0&&g.bootstrap(n.rootComponent),g}else return dB?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(a))})})}var dB;function hB(n,e,t){try{let r=t();return ys(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var ag=null;function fB(n=[],e){return wt.create({name:e,providers:[{provide:Md,useValue:"platform"},{provide:ab,useValue:new Set([()=>ag=null])},...n]})}function pB(n=[]){if(ag)return ag;let e=fB(n);return ag=e,_R(),mB(e),e}function mB(n){let e=n.get(Gm,null);Pt(n,()=>{e?.forEach(t=>t())})}function hb(){return!1}var qa=(()=>{class n{static __NG_ELEMENT_ID__=gB}return n})();function gB(n){return _B(sn(),Ge(),(n&16)===16)}function _B(n,e,t){if(ps(n)&&!t){let r=Ar(n.index,e);return new _s(r,r)}else if(n.type&175){let r=e[Dr];return new _s(r,e)}return null}var cb=class{constructor(){}supports(e){return YE(e)}create(e){return new ub(e)}},vB=(n,e)=>e,ub=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||vB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let a=!r||t&&t.currentIndex<xR(r,i,o)?t:r,u=xR(a,i,o),l=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{o||(o=[]);let f=u-i,g=l-i;if(f!=g){for(let E=0;E<f;E++){let I=E<o.length?o[E]:o[E]=0,N=I+E;g<=N&&N<f&&(o[E]=I+1)}let y=a.previousIndex;o[y]=g-f}}u!==l&&e(a,u,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!YE(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)o=e[u],a=this._trackByFn(u,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,u),r=!0):(r&&(t=this._verifyReinsertion(t,o,a,u)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,uR(e,u=>{a=this._trackByFn(i,u),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,u,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,u,a,i)),Object.is(t.item,u)||this._addIdentityChange(t,u)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new lb(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ug),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ug),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},db=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ug=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new db,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function RR(){return new fb([new cb])}var fb=(()=>{class n{factories;static \u0275prov=re({token:n,providedIn:"root",factory:RR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=$(n,{optional:!0,skipSelf:!0});return n.create(t,r||RR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();function OR(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ot(8);try{let o=i?.injector??pB(r),a=[TR({}),{provide:go,useExisting:DR},hA,...t||[]],u=new Wd({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return lB({r3Injector:u.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ot(9)}}function bs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function LR(n){let e=vo(n);if(!e)return null;let t=new Va(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var UR=null;function Mr(){return UR}function pb(n){UR??=n}var th=class{},nh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(jR),providedIn:"platform"})}return n})(),mb=new X(""),jR=(()=>{class n extends nh{_location;_history;_doc=$(Nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mr().getBaseHref(this._doc)}onPopState(t){let r=Mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function lg(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function FR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Yr(n){return n&&n[0]!=="?"?`?${n}`:n}var Jr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(hg),providedIn:"root"})}return n})(),dg=new X(""),hg=(()=>{class n extends Jr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return lg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Yr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Yr(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Yr(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(nh),de(dg,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Is=(()=>{class n{_subject=new $t;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=EB(FR(VR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Yr(r))}normalize(t){return n.stripTrailingSlash(wB(this._basePath,VR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Yr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Yr;static joinWithSlash=lg;static stripTrailingSlash=FR;static \u0275fac=function(r){return new(r||n)(de(Jr))};static \u0275prov=re({token:n,factory:()=>yB(),providedIn:"root"})}return n})();function yB(){return new Is(de(Jr))}function wB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function VR(n){return n.replace(/\/index.html$/,"")}function EB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var gb=(()=>{class n extends Jr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=lg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Yr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Yr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(nh),de(dg,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var fg=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ts=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new fg(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let u=r.get(o);r.move(u,a),BR(u,i)}});for(let i=0,o=r.length;i<o;i++){let u=r.get(i).context;u.index=i,u.count=o,u.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);BR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue($a),ue(Qd),ue(fb))};static \u0275dir=Rt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function BR(n,e){n.context.$implicit=e.item}var Wa=(()=>{class n{_viewContainer;_context=new pg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){zR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){zR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue($a),ue(Qd))};static \u0275dir=Rt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),pg=class{$implicit=null;ngIf=null};function zR(n,e){if(n&&!n.createEmbeddedView)throw new te(2020,!1)}function bB(n,e){return new te(2100,!1)}var _b=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw bB(n,t);return t.toUpperCase()}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=JE({name:"uppercase",type:n,pure:!0})}return n})();var xn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({})}return n})();function rh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ga=class{};var $R="browser";var HR=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new vb($(Nt),window)})}return n})(),vb=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(we(Q({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=IB(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(_o(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(we(Q({},t),{left:i-a[0],top:o-a[1]}))}};function IB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}var oh=class{_doc;constructor(e){this._doc=e}manager},mg=(()=>{class n extends oh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(de(Nt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),_g=new X(""),Ib=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});let i=t.filter(a=>!(a instanceof mg));this._plugins=i.slice().reverse();let o=t.find(a=>a instanceof mg);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(_g),de(Ke))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),yb="ng-app-id";function qR(n){for(let e of n)e.remove()}function WR(n,e){let t=e.createElement("style");return t.textContent=n,t}function TB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${yb}="${e}"],link[${yb}="${e}"]`);if(i)for(let o of i)o.removeAttribute(yb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Eb(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Tb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,TB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,WR);r?.forEach(i=>this.addUsage(i,this.external,Eb))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(qR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])qR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,WR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Eb(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de(Nt),de(Wm),de(Km,8),de(Ba))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),wb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Cb=/%COMP%/g;var KR="%COMP%",CB=`_nghost-${KR}`,DB=`_ngcontent-${KR}`,SB=!0,AB=new X("",{providedIn:"root",factory:()=>SB});function xB(n){return DB.replace(Cb,n)}function RB(n){return CB.replace(Cb,n)}function ZR(n,e){return e.map(t=>t.replace(Cb,n))}var Db=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,a,u,l=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new sh(t,a,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof gg?i.applyToHost(t):i instanceof ah&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer,E=this.tracingService;switch(r.encapsulation){case wo.Emulated:o=new gg(l,f,r,this.appId,g,a,u,y,E);break;case wo.ShadowDom:return new bb(l,f,t,r,a,u,this.nonce,y,E);default:o=new ah(l,f,r,g,a,u,y,E);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(Ib),de(Tb),de(Wm),de(AB),de(Nt),de(Ke),de(Km),de(za,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),sh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(wb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(GR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(GR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=wb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=wb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Di.DashCase|Di.Important)?e.style.setProperty(t,r,i&Di.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Di.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Mr().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function GR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var bb=class extends sh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,a,u,l,f){super(e,o,a,l,f),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=i.styles;g=ZR(i.id,g);for(let E of g){let I=document.createElement("style");u&&I.setAttribute("nonce",u),I.textContent=E,this.shadowRoot.appendChild(I)}let y=i.getExternalStyles?.();if(y)for(let E of y){let I=Eb(E,o);u&&I.setAttribute("nonce",u),this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ah=class extends sh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,a,u,l,f){super(e,o,a,u,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let g=r.styles;this.styles=f?ZR(f,g):g,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ru.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},gg=class extends ah{contentAttr;hostAttr;constructor(e,t,r,i,o,a,u,l,f){let g=i+"-"+r.id;super(e,t,r,o,a,u,l,f,g),this.contentAttr=xB(g),this.hostAttr=RB(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var vg=class n extends th{supportsDOMEvents=!0;static makeCurrent(){pb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=MB();return t==null?null:PB(t)}resetBaseElement(){ch=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rh(document.cookie,e)}},ch=null;function MB(){return ch=ch||document.head.querySelector("base"),ch?ch.getAttribute("href"):null}function PB(n){return new URL(n,document.baseURI).pathname}var NB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),QR=["alt","control","meta","shift"],kB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},YR=(()=>{class n extends oh{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mr().onAndCancel(t,a.domEventName,u,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),QR.forEach(f=>{let g=r.indexOf(f);g>-1&&(r.splice(g,1),a+=f+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let i=kB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),QR.forEach(a=>{if(a!==i){let u=OB[a];u(t)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de(Nt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function Sb(n,e,t){let r=Q({rootComponent:n,platformRef:t?.platformRef},LB(e));return OR(r)}function LB(n){return{appProviders:[...BB,...n?.providers??[]],platformProviders:jB}}function FB(){vg.makeCurrent()}function VB(){return new zr}function UB(){return xE(document),document}var jB=[{provide:Ba,useValue:$R},{provide:Gm,useValue:FB,multi:!0},{provide:Nt,useFactory:UB}];var BB=[{provide:Md,useValue:"root"},{provide:zr,useFactory:VB},{provide:_g,useClass:mg,multi:!0,deps:[Nt]},{provide:_g,useClass:YR,multi:!0,deps:[Nt]},Db,Tb,Ib,{provide:Fa,useExisting:Db},{provide:Ga,useClass:NB},[]];var Uu=class{},uh=class{},Cs=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(u=>o.indexOf(u)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var wg=class{encodeKey(e){return JR(e)}encodeValue(e){return JR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function zB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,u]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(a)||[];l.push(u),t.set(a,l)}),t}var $B=/%(\d[a-f0-9])/gi,HB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JR(n){return encodeURIComponent(n).replace($B,(e,t)=>HB[t]??e)}function yg(n){return`${n}`}var To=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new wg,e.fromString){if(e.fromObject)throw new te(2805,!1);this.map=zB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(yg):[yg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(yg(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(yg(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Eg=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function qB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function XR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function eM(n){return typeof Blob<"u"&&n instanceof Blob}function tM(n){return typeof FormData<"u"&&n instanceof FormData}function WB(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var nM="Content-Type",rM="Accept",oM="X-Request-URL",sM="text/plain",aM="application/json",GB=`${aM}, ${sM}, */*`,Fu=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(qB(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new te(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Cs,this.context??=new Eg,!this.params)this.params=new To,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let u=t.indexOf("?"),l=u===-1?"?":u<t.length-1?"&":"";this.urlWithParams=t+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||XR(this.body)||eM(this.body)||tM(this.body)||WB(this.body)?this.body:this.body instanceof To?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||tM(this.body)?null:eM(this.body)?this.body.type||null:XR(this.body)?null:typeof this.body=="string"?sM:this.body instanceof To?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?aM:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,a=e.priority||this.priority,u=e.cache||this.cache,l=e.mode||this.mode,f=e.redirect||this.redirect,g=e.credentials||this.credentials,y=e.referrer||this.referrer,E=e.integrity||this.integrity,I=e.transferCache??this.transferCache,N=e.timeout??this.timeout,H=e.body!==void 0?e.body:this.body,F=e.withCredentials??this.withCredentials,W=e.reportProgress??this.reportProgress,oe=e.headers||this.headers,se=e.params||this.params,le=e.context??this.context;return e.setHeaders!==void 0&&(oe=Object.keys(e.setHeaders).reduce((Ye,be)=>Ye.set(be,e.setHeaders[be]),oe)),e.setParams&&(se=Object.keys(e.setParams).reduce((Ye,be)=>Ye.set(be,e.setParams[be]),se)),new n(t,r,H,{params:se,headers:oe,context:le,reportProgress:W,responseType:i,withCredentials:F,transferCache:I,keepalive:o,cache:u,priority:a,timeout:N,mode:l,redirect:f,credentials:g,referrer:y,integrity:E})}},Ka=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Ka||{}),ju=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Cs,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},bg=class n extends ju{constructor(e={}){super(e)}type=Ka.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},lh=class n extends ju{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Ka.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Vu=class extends ju{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},KB=200,ZB=204;function Ab(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var Tg=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Fu)o=t;else{let l;i.headers instanceof Cs?l=i.headers:l=new Cs(i.headers);let f;i.params&&(i.params instanceof To?f=i.params:f=new To({fromObject:i.params})),o=new Fu(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:f,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let a=fe(o).pipe(yi(l=>this.handler.handle(l)));if(t instanceof Fu||i.observe==="events")return a;let u=a.pipe(_n(l=>l instanceof lh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(Ce(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new te(2806,!1);return l.body}));case"blob":return u.pipe(Ce(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new te(2807,!1);return l.body}));case"text":return u.pipe(Ce(l=>{if(l.body!==null&&typeof l.body!="string")throw new te(2808,!1);return l.body}));case"json":default:return u.pipe(Ce(l=>l.body))}case"response":return u;default:throw new te(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new To().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ab(i,r))}post(t,r,i={}){return this.request("POST",t,Ab(i,r))}put(t,r,i={}){return this.request("PUT",t,Ab(i,r))}static \u0275fac=function(r){return new(r||n)(de(Uu))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var QB=new X("");function cM(n,e){return e(n)}function YB(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function JB(n,e,t){return(r,i)=>Pt(t,()=>e(r,o=>n(o,i)))}var uM=new X(""),Rb=new X(""),lM=new X(""),Mb=new X("",{providedIn:"root",factory:()=>!0});function XB(){let n=null;return(e,t)=>{n===null&&(n=($(uM,{optional:!0})??[]).reduceRight(YB,cM));let r=$(yo);if($(Mb)){let o=r.add();return n(e,t).pipe(ss(o))}else return n(e,t)}}var Ig=(()=>{class n extends Uu{backend;injector;chain=null;pendingTasks=$(yo);contributeToStability=$(Mb);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Rb),...this.injector.get(lM,[])]));this.chain=r.reduceRight((i,o)=>JB(i,o,this.injector),cM)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ss(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(de(uh),de(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var e3=/^\)\]\}',?\n/,t3=RegExp(`^${oM}:`,"m");function n3(n){return"responseURL"in n&&n.responseURL?n.responseURL:t3.test(n.getAllResponseHeaders())?n.getResponseHeader(oM):null}var xb=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new te(-2800,!1);let r=this.xhrFactory;return fe(null).pipe(vn(()=>new Te(o=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((F,W)=>a.setRequestHeader(F,W.join(","))),t.headers.has(rM)||a.setRequestHeader(rM,GB),!t.headers.has(nM)){let F=t.detectContentTypeHeader();F!==null&&a.setRequestHeader(nM,F)}if(t.timeout&&(a.timeout=t.timeout),t.responseType){let F=t.responseType.toLowerCase();a.responseType=F!=="json"?F:"text"}let u=t.serializeBody(),l=null,f=()=>{if(l!==null)return l;let F=a.statusText||"OK",W=new Cs(a.getAllResponseHeaders()),oe=n3(a)||t.url;return l=new bg({headers:W,status:a.status,statusText:F,url:oe}),l},g=()=>{let{headers:F,status:W,statusText:oe,url:se}=f(),le=null;W!==ZB&&(le=typeof a.response>"u"?a.responseText:a.response),W===0&&(W=le?KB:0);let Ye=W>=200&&W<300;if(t.responseType==="json"&&typeof le=="string"){let be=le;le=le.replace(e3,"");try{le=le!==""?JSON.parse(le):null}catch(R){le=be,Ye&&(Ye=!1,le={error:R,text:le})}}Ye?(o.next(new lh({body:le,headers:F,status:W,statusText:oe,url:se||void 0})),o.complete()):o.error(new Vu({error:le,headers:F,status:W,statusText:oe,url:se||void 0}))},y=F=>{let{url:W}=f(),oe=new Vu({error:F,status:a.status||0,statusText:a.statusText||"Unknown Error",url:W||void 0});o.error(oe)},E=y;t.timeout&&(E=F=>{let{url:W}=f(),oe=new Vu({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:W||void 0});o.error(oe)});let I=!1,N=F=>{I||(o.next(f()),I=!0);let W={type:Ka.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(W.total=F.total),t.responseType==="text"&&a.responseText&&(W.partialText=a.responseText),o.next(W)},H=F=>{let W={type:Ka.UploadProgress,loaded:F.loaded};F.lengthComputable&&(W.total=F.total),o.next(W)};return a.addEventListener("load",g),a.addEventListener("error",y),a.addEventListener("timeout",E),a.addEventListener("abort",y),t.reportProgress&&(a.addEventListener("progress",N),u!==null&&a.upload&&a.upload.addEventListener("progress",H)),a.send(u),o.next({type:Ka.Sent}),()=>{a.removeEventListener("error",y),a.removeEventListener("abort",y),a.removeEventListener("load",g),a.removeEventListener("timeout",E),t.reportProgress&&(a.removeEventListener("progress",N),u!==null&&a.upload&&a.upload.removeEventListener("progress",H)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(r){return new(r||n)(de(Ga))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),dM=new X(""),r3="XSRF-TOKEN",i3=new X("",{providedIn:"root",factory:()=>r3}),o3="X-XSRF-TOKEN",s3=new X("",{providedIn:"root",factory:()=>o3}),dh=class{},a3=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=rh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(de(Nt),de(i3))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),c3=/^(?:https?:)?\/\//i;function u3(n,e){if(!$(dM)||n.method==="GET"||n.method==="HEAD"||c3.test(n.url))return e(n);let t=$(dh).getToken(),r=$(s3);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}var Pb=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(Pb||{});function l3(n,e){return{\u0275kind:n,\u0275providers:e}}function hM(...n){let e=[Tg,xb,Ig,{provide:Uu,useExisting:Ig},{provide:uh,useFactory:()=>$(QB,{optional:!0})??$(xb)},{provide:Rb,useValue:u3,multi:!0},{provide:dM,useValue:!0},{provide:dh,useClass:a3}];for(let t of n)e.push(...t.\u0275providers);return Un(e)}var iM=new X("");function fM(){return l3(Pb.LegacyInterceptors,[{provide:iM,useFactory:XB},{provide:Rb,useExisting:iM,multi:!0}])}var Nb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({providers:[hM(fM())]})}return n})();var pM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(de(Nt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Se="primary",Th=Symbol("RouteTitle"),Vb=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ya(n){return new Vb(n)}function bM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],u=n[o];if(a[0]===":")i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function f3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ri(n[t],e[t]))return!1;return!0}function Ri(n,e){let t=n?Ub(n):void 0,r=e?Ub(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!IM(n[i],e[i]))return!1;return!0}function Ub(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function IM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function TM(n){return n.length>0?n[n.length-1]:null}function Co(n){return Gy(n)?n:ys(n)?mt(Promise.resolve(n)):fe(n)}var p3={exact:DM,subset:SM},CM={exact:m3,subset:g3,ignored:()=>!0};function mM(n,e,t){return p3[t.paths](n.root,e.root,t.matrixParams)&&CM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function m3(n,e){return Ri(n,e)}function DM(n,e,t){if(!Za(n.segments,e.segments)||!Sg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DM(n.children[r],e.children[r],t))return!1;return!0}function g3(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>IM(n[t],e[t]))}function SM(n,e,t){return AM(n,e,e.segments,t)}function AM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Za(i,t)||e.hasChildren()||!Sg(i,t,r))}else if(n.segments.length===t.length){if(!Za(n.segments,t)||!Sg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!SM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Za(n.segments,i)||!Sg(n.segments,i,r)||!n.children[Se]?!1:AM(n.children[Se],e,o,r)}}function Sg(n,e,t){return e.every((r,i)=>CM[t](n[i].parameters,r.parameters))}var Pi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new et([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ya(this.queryParams),this._queryParamMap}toString(){return y3.serialize(this)}},et=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ag(this)}},Ds=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ya(this.parameters),this._parameterMap}toString(){return RM(this)}};function _3(n,e){return Za(n,e)&&n.every((t,r)=>Ri(t.parameters,e[r].parameters))}function Za(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function v3(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Se&&(t=t.concat(e(i,r)))}),t}var Ja=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new Ss,providedIn:"root"})}return n})(),Ss=class{parse(e){let t=new Bb(e);return new Pi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${hh(e.root,!0)}`,r=b3(e.queryParams),i=typeof e.fragment=="string"?`#${w3(e.fragment)}`:"";return`${t}${r}${i}`}},y3=new Ss;function Ag(n){return n.segments.map(e=>RM(e)).join("/")}function hh(n,e){if(!n.hasChildren())return Ag(n);if(e){let t=n.children[Se]?hh(n.children[Se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Se&&r.push(`${i}:${hh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=v3(n,(r,i)=>i===Se?[hh(n.children[Se],!1)]:[`${i}:${hh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Se]!=null?`${Ag(n)}/${t[0]}`:`${Ag(n)}/(${t.join("//")})`}}function xM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cg(n){return xM(n).replace(/%3B/gi,";")}function w3(n){return encodeURI(n)}function jb(n){return xM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xg(n){return decodeURIComponent(n)}function gM(n){return xg(n.replace(/\+/g,"%20"))}function RM(n){return`${jb(n.path)}${E3(n.parameters)}`}function E3(n){return Object.entries(n).map(([e,t])=>`;${jb(e)}=${jb(t)}`).join("")}function b3(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Cg(t)}=${Cg(i)}`).join("&"):`${Cg(t)}=${Cg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var I3=/^[^\/()?;#]+/;function kb(n){let e=n.match(I3);return e?e[0]:""}var T3=/^[^\/()?;=#]+/;function C3(n){let e=n.match(T3);return e?e[0]:""}var D3=/^[^=?&#]+/;function S3(n){let e=n.match(D3);return e?e[0]:""}var A3=/^[^&#]+/;function x3(n){let e=n.match(A3);return e?e[0]:""}var Bb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Se]=new et(e,t)),r}parseSegment(){let e=kb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Ds(xg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=C3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=kb(this.remaining);i&&(r=i,this.capture(r))}e[xg(t)]=xg(r)}parseQueryParam(e){let t=S3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=x3(this.remaining);a&&(r=a,this.capture(r))}let i=gM(t),o=gM(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=kb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Se);let a=this.parseChildren();t[o??Se]=Object.keys(a).length===1&&a[Se]?a[Se]:new et([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function MM(n){return n.segments.length>0?new et([],{[Se]:n}):n}function PM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=PM(i);if(r===Se&&o.segments.length===0&&o.hasChildren())for(let[a,u]of Object.entries(o.children))e[a]=u;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new et(n.segments,e);return R3(t)}function R3(n){if(n.numberOfChildren===1&&n.children[Se]){let e=n.children[Se];return new et(n.segments.concat(e.segments),e.children)}return n}function As(n){return n instanceof Pi}function NM(n,e,t=null,r=null){let i=kM(n);return OM(i,e,t,r)}function kM(n){let e;function t(o){let a={};for(let l of o.children){let f=t(l);a[l.outlet]=f}let u=new et(o.url,a);return o===n&&(e=u),u}let r=t(n.root),i=MM(r);return e??i}function OM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Ob(i,i,i,t,r);let o=M3(e);if(o.toRoot())return Ob(i,i,new et([],{}),t,r);let a=P3(o,i,n),u=a.processChildren?ph(a.segmentGroup,a.index,o.commands):FM(a.segmentGroup,a.index,o.commands);return Ob(i,a.segmentGroup,u,t,r)}function Rg(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gh(n){return typeof n=="object"&&n!=null&&n.outlets}function Ob(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,f])=>{o[l]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let a;n===e?a=t:a=LM(n,e,t);let u=MM(PM(a));return new Pi(u,o,i)}function LM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=LM(o,e,t)}),new et(n.segments,r)}var Mg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rg(r[0]))throw new te(4003,!1);let i=r.find(gh);if(i&&i!==TM(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function M3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Mg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let u={};return Object.entries(o.outlets).forEach(([l,f])=>{u[l]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((u,l)=>{l==0&&u==="."||(l==0&&u===""?t=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,o]},[]);return new Mg(t,e,r)}var $u=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function P3(n,e,t){if(n.isAbsolute)return new $u(e,!0,0);if(!t)return new $u(e,!1,NaN);if(t.parent===null)return new $u(t,!0,0);let r=Rg(n.commands[0])?0:1,i=t.segments.length-1+r;return N3(t,i,n.numberOfDoubleDots)}function N3(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new $u(r,!1,i-o)}function k3(n){return gh(n[0])?n[0].outlets:{[Se]:n}}function FM(n,e,t){if(n??=new et([],{}),n.segments.length===0&&n.hasChildren())return ph(n,e,t);let r=O3(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new et(n.segments.slice(0,r.pathIndex),{});return o.children[Se]=new et(n.segments.slice(r.pathIndex),n.children),ph(o,0,i)}else return r.match&&i.length===0?new et(n.segments,{}):r.match&&!n.hasChildren()?zb(n,e,t):r.match?ph(n,0,i):zb(n,e,t)}function ph(n,e,t){if(t.length===0)return new et(n.segments,{});{let r=k3(t),i={};if(Object.keys(r).some(o=>o!==Se)&&n.children[Se]&&n.numberOfChildren===1&&n.children[Se].segments.length===0){let o=ph(n.children[Se],e,t);return new et(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=FM(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new et(n.segments,i)}}function O3(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let a=n.segments[i],u=t[r];if(gh(u))break;let l=`${u}`,f=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&f&&typeof f=="object"&&f.outlets===void 0){if(!vM(l,f,a))return o;r+=2}else{if(!vM(l,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function zb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(gh(o)){let l=L3(o.outlets);return new et(r,l)}if(i===0&&Rg(t[0])){let l=n.segments[e];r.push(new Ds(l.path,_M(t[0]))),i++;continue}let a=gh(o)?o.outlets[Se]:`${o}`,u=i<t.length-1?t[i+1]:null;a&&u&&Rg(u)?(r.push(new Ds(a,_M(u))),i+=2):(r.push(new Ds(a,{})),i++)}return new et(r,{})}function L3(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=zb(new et([],{}),0,r))}),e}function _M(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vM(n,e,t){return n==t.path&&Ri(e,t.parameters)}var Hu="imperative",Jt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Jt||{}),mr=class{id;url;constructor(e,t){this.id=e,this.url=t}},xs=class extends mr{type=Jt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pr=class extends mr{urlAfterRedirects;type=Jt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Bn||{}),Wu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Wu||{}),Mi=class extends mr{reason;code;type=Jt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ni=class extends mr{reason;code;type=Jt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Gu=class extends mr{error;target;type=Jt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_h=class extends mr{urlAfterRedirects;state;type=Jt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pg=class extends mr{urlAfterRedirects;state;type=Jt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ng=class extends mr{urlAfterRedirects;state;shouldActivate;type=Jt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},kg=class extends mr{urlAfterRedirects;state;type=Jt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Og=class extends mr{urlAfterRedirects;state;type=Jt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lg=class{route;type=Jt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Fg=class{route;type=Jt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vg=class{snapshot;type=Jt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ug=class{snapshot;type=Jt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jg=class{snapshot;type=Jt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bg=class{snapshot;type=Jt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ku=class{routerEvent;position;anchor;type=Jt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vh=class{},Zu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function F3(n){return!(n instanceof vh)&&!(n instanceof Zu)}function V3(n,e){return n.providers&&!n._injector&&(n._injector=ku(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xr(n){return n.outlet||Se}function U3(n,e){let t=n.filter(r=>Xr(r)===e);return t.push(...n.filter(r=>Xr(r)!==e)),t}function Ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var zg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ju(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Xa(this.rootInjector)}},Xa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new zg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(de(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),$g=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$b(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$b(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hb(e,this._root).map(t=>t.value)}};function $b(n,e){if(n===e.value)return e;for(let t of e.children){let r=$b(n,t);if(r)return r}return null}function Hb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Hb(n,t);if(r.length)return r.unshift(e),r}return[]}var pr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function zu(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var yh=class extends $g{snapshot;constructor(e,t){super(e),this.snapshot=t,Jb(this,e)}toString(){return this.snapshot.toString()}};function VM(n){let e=j3(n),t=new gn([new Ds("",{})]),r=new gn({}),i=new gn({}),o=new gn({}),a=new gn(""),u=new ki(t,r,o,a,i,Se,n,e.root);return u.snapshot=e.root,new yh(new pr(u,[]),e)}function j3(n){let e={},t={},r={},o=new Qa([],e,r,"",t,Se,n,null,{});return new wh("",new pr(o,[]))}var ki=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,a,u,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=u,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ce(f=>f[Th]))??fe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>Ya(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>Ya(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Q(Q({},e.params),n.params),data:Q(Q({},e.data),n.data),resolve:Q(Q(Q(Q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Q({},n.params),data:Q({},n.data),resolve:Q(Q({},n.data),n._resolvedData??{})},i&&jM(i)&&(r.resolve[Th]=i.title),r}var Qa=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Th]}constructor(e,t,r,i,o,a,u,l,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=l,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ya(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ya(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wh=class extends $g{url;constructor(e,t){super(t),this.url=e,Jb(this,t)}toString(){return UM(this._root)}};function Jb(n,e){e.value._routerState=n,e.children.forEach(t=>Jb(n,t))}function UM(n){let e=n.children.length>0?` { ${n.children.map(UM).join(", ")} } `:"";return`${n.value}${e}`}function Lb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ri(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ri(e.params,t.params)||n.paramsSubject.next(t.params),f3(e.url,t.url)||n.urlSubject.next(t.url),Ri(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qb(n,e){let t=Ri(n.params,e.params)&&_3(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||qb(n.parent,e.parent))}function jM(n){return typeof n.title=="string"||n.title===null}var BM=new X(""),Ch=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Se;activateEvents=new qt;deactivateEvents=new qt;attachEvents=new qt;detachEvents=new qt;routerOutletData=kR();parentContexts=$(Xa);location=$($a);changeDetector=$(qa);inputBinder=$(Dh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Wb(t,u,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Eo]})}return n})(),Wb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===ki?this.route:e===Xa?this.childContexts:e===BM?this.outletData:this.parent.get(e,t)}},Dh=new X(""),Xb=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Id([r.queryParams,r.params,r.data]).pipe(vn(([o,a,u],l)=>(u=Q(Q(Q({},o),a),u),l===0?fe(u):Promise.resolve(u)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=LR(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:u}of a.inputs)t.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),eI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ft({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Vt(0,"router-outlet")},dependencies:[Ch],encapsulation:2})}return n})();function tI(n){let e=n.children&&n.children.map(tI),t=e?we(Q({},n),{children:e}):Q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Se&&(t.component=eI),t}function B3(n,e,t){let r=Eh(n,e._root,t?t._root:void 0);return new yh(r,e)}function Eh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=z3(n,e,t);return new pr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(u=>Eh(n,u)),a}}let r=$3(e.value),i=e.children.map(o=>Eh(n,o));return new pr(r,i)}}function z3(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Eh(n,r,i);return Eh(n,r)})}function $3(n){return new ki(new gn(n.url),new gn(n.params),new gn(n.queryParams),new gn(n.fragment),new gn(n.data),n.outlet,n.component,n)}var Qu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},zM="ngNavigationCancelingError";function qg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=As(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$M(!1,Bn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function $M(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[zM]=!0,t.cancellationCode=e,t}function H3(n){return HM(n)&&As(n.url)}function HM(n){return!!n&&n[zM]}var q3=(n,e,t,r)=>Ce(i=>(new Gb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Gb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Lb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=zu(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zu(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=zu(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Bg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ug(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Lb(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),Lb(u.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Wg=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function W3(n,e,t){let r=n._root,i=e?e._root:null;return fh(r,i,t,[r.value])}function G3(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xu(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!dw(n)?n:e.get(n):r}function fh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=zu(e);return n.children.forEach(a=>{K3(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,u])=>mh(u,t.getContext(a),i)),i}function K3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=Z3(a,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Wg(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?fh(n,e,u?u.children:null,r,i):fh(n,e,t,r,i),l&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new qu(u.outlet.component,a))}else a&&mh(e,u,i),i.canActivateChecks.push(new Wg(r)),o.component?fh(n,null,u?u.children:null,r,i):fh(n,null,t,r,i);return i}function Z3(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Za(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Za(n.url,e.url)||!Ri(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qb(n,e)||!Ri(n.queryParams,e.queryParams);case"paramsChange":default:return!qb(n,e)}}function mh(n,e,t){let r=zu(n),i=n.value;Object.entries(r).forEach(([o,a])=>{i.component?e?mh(a,e.children.getContext(o),t):mh(a,null,t):mh(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new qu(e.outlet.component,i)):t.canDeactivateChecks.push(new qu(null,i)):t.canDeactivateChecks.push(new qu(null,i))}function Sh(n){return typeof n=="function"}function Q3(n){return typeof n=="boolean"}function Y3(n){return n&&Sh(n.canLoad)}function J3(n){return n&&Sh(n.canActivate)}function X3(n){return n&&Sh(n.canActivateChild)}function ez(n){return n&&Sh(n.canDeactivate)}function tz(n){return n&&Sh(n.canMatch)}function qM(n){return n instanceof uo||n?.name==="EmptyError"}var Dg=Symbol("INITIAL_VALUE");function Yu(){return vn(n=>Id(n.map(e=>e.pipe(ho(1),Xp(Dg)))).pipe(Ce(e=>{for(let t of e)if(t!==!0){if(t===Dg)return Dg;if(t===!1||nz(t))return t}return!0}),_n(e=>e!==Dg),ho(1)))}function nz(n){return As(n)||n instanceof Qu}function rz(n,e){return Lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?fe(we(Q({},t),{guardsResult:!0})):iz(a,r,i,n).pipe(Lt(u=>u&&Q3(u)?oz(r,o,n,e):fe(u)),Ce(u=>we(Q({},t),{guardsResult:u})))})}function iz(n,e,t,r){return mt(n).pipe(Lt(i=>lz(i.component,i.route,t,e,r)),fo(i=>i!==!0,!0))}function oz(n,e,t,r){return mt(e).pipe(yi(i=>gu(az(i.route.parent,r),sz(i.route,r),uz(n,i.path,t),cz(n,i.route,t))),fo(i=>i!==!0,!0))}function sz(n,e){return n!==null&&e&&e(new jg(n)),fe(!0)}function az(n,e){return n!==null&&e&&e(new Vg(n)),fe(!0)}function cz(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return fe(!0);let i=r.map(o=>Td(()=>{let a=Ju(e)??t,u=Xu(o,a),l=J3(u)?u.canActivate(e,n):Pt(a,()=>u(e,n));return Co(l).pipe(fo())}));return fe(i).pipe(Yu())}function uz(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>G3(a)).filter(a=>a!==null).map(a=>Td(()=>{let u=a.guards.map(l=>{let f=Ju(a.node)??t,g=Xu(l,f),y=X3(g)?g.canActivateChild(r,n):Pt(f,()=>g(r,n));return Co(y).pipe(fo())});return fe(u).pipe(Yu())}));return fe(o).pipe(Yu())}function lz(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return fe(!0);let a=o.map(u=>{let l=Ju(e)??i,f=Xu(u,l),g=ez(f)?f.canDeactivate(n,e,t,r):Pt(l,()=>f(n,e,t,r));return Co(g).pipe(fo())});return fe(a).pipe(Yu())}function dz(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return fe(!0);let o=i.map(a=>{let u=Xu(a,n),l=Y3(u)?u.canLoad(e,t):Pt(n,()=>u(e,t));return Co(l)});return fe(o).pipe(Yu(),WM(r))}function WM(n){return Pp(on(e=>{if(typeof e!="boolean")throw qg(n,e)}),Ce(e=>e===!0))}function hz(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return fe(!0);let o=i.map(a=>{let u=Xu(a,n),l=tz(u)?u.canMatch(e,t):Pt(n,()=>u(e,t));return Co(l)});return fe(o).pipe(Yu(),WM(r))}var bh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ih=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Bu(n){return pu(new bh(n))}function fz(n){return pu(new te(4e3,!1))}function pz(n){return pu($M(!1,Bn.GuardRejected))}var Kb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return fe(r);if(i.numberOfChildren>1||!i.children[Se])return fz(`${e.redirectTo}`);i=i.children[Se]}}applyRedirectCommands(e,t,r,i,o){return mz(t,i,o).pipe(Ce(a=>{if(a instanceof Pi)throw new Ih(a);let u=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new Ih(u);return u}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Pi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let u=o.substring(1);r[i]=t[u]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([u,l])=>{a[u]=this.createSegmentGroup(e,l,r,i)}),new et(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function mz(n,e,t){if(typeof n=="string")return fe(n);let r=n,{queryParams:i,fragment:o,routeConfig:a,url:u,outlet:l,params:f,data:g,title:y}=e;return Co(Pt(t,()=>r({params:f,data:g,queryParams:i,fragment:o,routeConfig:a,url:u,outlet:l,title:y})))}var Zb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gz(n,e,t,r,i){let o=GM(n,e,t);return o.matched?(r=V3(e,r),hz(r,e,t,i).pipe(Ce(a=>a===!0?o:Q({},Zb)))):fe(o)}function GM(n,e,t){if(e.path==="**")return _z(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Q({},Zb):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bM)(t,n,e);if(!i)return Q({},Zb);let o={};Object.entries(i.posParams??{}).forEach(([u,l])=>{o[u]=l.path});let a=i.consumed.length>0?Q(Q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function _z(n){return{matched:!0,parameters:n.length>0?TM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yM(n,e,t,r){return t.length>0&&wz(n,t,r)?{segmentGroup:new et(e,yz(r,new et(t,n.children))),slicedSegments:[]}:t.length===0&&Ez(n,t,r)?{segmentGroup:new et(n.segments,vz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new et(n.segments,n.children),slicedSegments:t}}function vz(n,e,t,r){let i={};for(let o of t)if(Kg(n,e,o)&&!r[Xr(o)]){let a=new et([],{});i[Xr(o)]=a}return Q(Q({},r),i)}function yz(n,e){let t={};t[Se]=e;for(let r of n)if(r.path===""&&Xr(r)!==Se){let i=new et([],{});t[Xr(r)]=i}return t}function wz(n,e,t){return t.some(r=>Kg(n,e,r)&&Xr(r)!==Se)}function Ez(n,e,t){return t.some(r=>Kg(n,e,r))}function Kg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function bz(n,e,t){return e.length===0&&!n.children[t]}var Qb=class{};function Iz(n,e,t,r,i,o,a="emptyOnly"){return new Yb(n,e,t,r,i,a,o).recognize()}var Tz=31,Yb=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=u,this.applyRedirects=new Kb(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=yM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:t,rootSnapshot:r})=>{let i=new pr(r,t),o=new wh("",i),a=NM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Qa([],Object.freeze({}),Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Se,t).pipe(Ce(r=>({children:r,rootSnapshot:t})),lo(r=>{if(r instanceof Ih)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof bh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ce(a=>a instanceof pr?[a]:[]))}processChildren(e,t,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return mt(o).pipe(yi(a=>{let u=r.children[a],l=U3(t,a);return this.processSegmentGroup(e,l,u,a,i)}),Jp((a,u)=>(a.push(...u),a)),os(null),Zy(),Lt(a=>{if(a===null)return Bu(r);let u=KM(a);return Cz(u),fe(u)}))}processSegment(e,t,r,i,o,a,u){return mt(t).pipe(yi(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,a,u).pipe(lo(f=>{if(f instanceof bh)return fe(null);throw f}))),fo(l=>!!l),lo(l=>{if(qM(l))return bz(r,i,o)?fe(new Qb):Bu(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,a,u,l){return Xr(r)!==a&&(a===Se||!Kg(i,o,r))?Bu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,l):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a,l):Bu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a,u){let{matched:l,parameters:f,consumedSegments:g,positionalParamSegments:y,remainingSegments:E}=GM(t,i,o);if(!l)return Bu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Tz&&(this.allowRedirects=!1));let I=new Qa(o,f,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,wM(i),Xr(i),i.component??i._loadedComponent??null,i,EM(i)),N=Hg(I,u,this.paramsInheritanceStrategy);return I.params=Object.freeze(N.params),I.data=Object.freeze(N.data),this.applyRedirects.applyRedirectCommands(g,i.redirectTo,y,I,e).pipe(vn(F=>this.applyRedirects.lineralizeSegments(i,F)),Lt(F=>this.processSegment(e,r,t,F.concat(E),a,!1,u)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let u=gz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),u.pipe(vn(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(vn(({routes:f})=>{let g=r._loadedInjector??e,{parameters:y,consumedSegments:E,remainingSegments:I}=l,N=new Qa(E,y,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,wM(r),Xr(r),r.component??r._loadedComponent??null,r,EM(r)),H=Hg(N,a,this.paramsInheritanceStrategy);N.params=Object.freeze(H.params),N.data=Object.freeze(H.data);let{segmentGroup:F,slicedSegments:W}=yM(t,E,I,f);if(W.length===0&&F.hasChildren())return this.processChildren(g,f,F,N).pipe(Ce(se=>new pr(N,se)));if(f.length===0&&W.length===0)return fe(new pr(N,[]));let oe=Xr(r)===o;return this.processSegment(g,f,F,W,oe?Se:o,!0,N).pipe(Ce(se=>new pr(N,se instanceof pr?[se]:[])))}))):Bu(t)))}getChildConfig(e,t,r){return t.children?fe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?fe({routes:t._loadedRoutes,injector:t._loadedInjector}):dz(e,t,r,this.urlSerializer).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(on(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):pz(t))):fe({routes:[],injector:e})}};function Cz(n){n.sort((e,t)=>e.value.outlet===Se?-1:t.value.outlet===Se?1:e.value.outlet.localeCompare(t.value.outlet))}function Dz(n){let e=n.value.routeConfig;return e&&e.path===""}function KM(n){let e=[],t=new Set;for(let r of n){if(!Dz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=KM(r.children);e.push(new pr(r.value,i))}return e.filter(r=>!t.has(r))}function wM(n){return n.data||{}}function EM(n){return n.resolve||{}}function Sz(n,e,t,r,i,o){return Lt(a=>Iz(n,e,t,r,a.extractedUrl,i,o).pipe(Ce(({state:u,tree:l})=>we(Q({},a),{targetSnapshot:u,urlAfterRedirects:l}))))}function Az(n,e){return Lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return fe(t);let o=new Set(i.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let f of ZM(l))a.add(f);let u=0;return mt(a).pipe(yi(l=>o.has(l)?xz(l,r,n,e):(l.data=Hg(l,l.parent,n).resolve,fe(void 0))),on(()=>u++),_u(1),Lt(l=>u===a.size?fe(t):Gn))})}function ZM(n){let e=n.children.map(t=>ZM(t)).flat();return[n,...e]}function xz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!jM(i)&&(o[Th]=i.title),Td(()=>(n.data=Hg(n,n.parent,t).resolve,Rz(o,n,e,r).pipe(Ce(a=>(n._resolvedData=a,n.data=Q(Q({},n.data),a),null)))))}function Rz(n,e,t,r){let i=Ub(n);if(i.length===0)return fe({});let o={};return mt(i).pipe(Lt(a=>Mz(n[a],e,t,r).pipe(fo(),on(u=>{if(u instanceof Qu)throw qg(new Ss,u);o[a]=u}))),_u(1),Ce(()=>o),lo(a=>qM(a)?Gn:pu(a)))}function Mz(n,e,t,r){let i=Ju(e)??r,o=Xu(n,i),a=o.resolve?o.resolve(e,t):Pt(i,()=>o(e,t));return Co(a)}function Fb(n){return vn(e=>{let t=n(e);return t?mt(t).pipe(Ce(()=>e)):fe(e)})}var nI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Se);return r}getResolvedTitleForRoute(t){return t.data[Th]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(QM),providedIn:"root"})}return n})(),QM=(()=>{class n extends nI{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(de(pM))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Rs=new X("",{providedIn:"root",factory:()=>({})}),ec=new X(""),Zg=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$(sb);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return fe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Co(Pt(t,()=>r.loadComponent())).pipe(Ce(JM),vn(XM),on(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),ss(()=>{this.componentLoaders.delete(r)})),o=new lu(i,()=>new $t).pipe(uu());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=YM(r,this.compiler,t,this.onLoadEndListener).pipe(ss(()=>{this.childrenLoaders.delete(r)})),a=new lu(o,()=>new $t).pipe(uu());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YM(n,e,t,r){return Co(Pt(t,()=>n.loadChildren())).pipe(Ce(JM),vn(XM),Lt(i=>i instanceof ng||Array.isArray(i)?fe(i):mt(e.compileModuleAsync(i))),Ce(i=>{r&&r(n);let o,a,u=!1;return Array.isArray(i)?(a=i,u=!0):(o=i.create(t).injector,a=o.get(ec,[],{optional:!0,self:!0}).flat()),{routes:a.map(tI),injector:o}}))}function Pz(n){return n&&typeof n=="object"&&"default"in n}function JM(n){return Pz(n)?n.default:n}function XM(n){return fe(n)}var Qg=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(Nz),providedIn:"root"})}return n})(),Nz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rI=new X(""),iI=new X("");function eP(n,e,t){let r=n.get(iI),i=n.get(Nt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),u=i.startViewTransition(()=>(o(),kz(n)));u.ready.catch(f=>{});let{onViewTransitionCreated:l}=r;return l&&Pt(n,()=>l({transition:u,from:e,to:t})),a}function kz(n){return new Promise(e=>{Jm({read:()=>setTimeout(e)},{injector:n})})}var oI=new X(""),Yg=(()=>{class n{currentNavigation=gt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new $t;transitionAbortWithErrorSubject=new $t;configLoader=$(Zg);environmentInjector=$(xt);destroyRef=$(Wr);urlSerializer=$(Ja);rootContexts=$(Xa);location=$(Is);inputBindingEnabled=$(Dh,{optional:!0})!==null;titleStrategy=$(nI);options=$(Rs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$(Qg);createViewTransition=$(rI,{optional:!0});navigationErrorHandler=$(oI,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Lg(i)),r=i=>this.events.next(new Fg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;un(()=>{this.transitions?.next(we(Q({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new gn(null),this.transitions.pipe(_n(r=>r!==null),vn(r=>{let i=!1;return fe(r).pipe(vn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Bn.SupersededByNewNavigation),Gn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?we(Q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload")return this.events.next(new Ni(o.id,this.urlSerializer.serialize(o.rawUrl),"",Wu.IgnoredSameUrlNavigation)),o.resolve(!1),Gn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return fe(o).pipe(vn(l=>(this.events.next(new xs(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Gn:Promise.resolve(l))),Sz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),on(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=l.urlAfterRedirects,g));let f=new _h(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:f,source:g,restoredState:y,extras:E}=o,I=new xs(l,this.urlSerializer.serialize(f),g,y);this.events.next(I);let N=VM(this.rootComponentType).snapshot;return this.currentTransition=r=we(Q({},o),{targetSnapshot:N,urlAfterRedirects:f,extras:we(Q({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(H=>(H.finalUrl=f,H)),fe(r)}else return this.events.next(new Ni(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Wu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Gn}),on(o=>{let a=new Pg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ce(o=>(this.currentTransition=r=we(Q({},o),{guards:W3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),rz(this.environmentInjector,o=>this.events.next(o)),on(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw qg(this.urlSerializer,o.guardsResult);let a=new Ng(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),_n(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Bn.GuardRejected),!1)),Fb(o=>{if(o.guards.canActivateChecks.length!==0)return fe(o).pipe(on(a=>{let u=new kg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),vn(a=>{let u=!1;return fe(a).pipe(Az(this.paramsInheritanceStrategy,this.environmentInjector),on({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Bn.NoDataFromResolver)}}))}),on(a=>{let u=new Og(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Fb(o=>{let a=u=>{let l=[];if(u.routeConfig?.loadComponent){let f=Ju(u)??this.environmentInjector;l.push(this.configLoader.loadComponent(f,u.routeConfig).pipe(on(g=>{u.component=g}),Ce(()=>{})))}for(let f of u.children)l.push(...a(f));return l};return Id(a(o.targetSnapshot.root)).pipe(os(null),ho(1))}),Fb(()=>this.afterPreactivation()),vn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?mt(u).pipe(Ce(()=>r)):fe(r)}),Ce(o=>{let a=B3(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=we(Q({},o),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),on(()=>{this.events.next(new vh)}),q3(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ho(1),em(new Te(o=>{let a=r.abortController.signal,u=()=>o.next();return a.addEventListener("abort",u),()=>a.removeEventListener("abort",u)}).pipe(_n(()=>!i&&!r.targetRouterState),on(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Bn.Aborted)}))),on({next:o=>{i=!0,this.lastSuccessfulNavigation=un(this.currentNavigation),this.events.next(new Pr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),em(this.transitionAbortWithErrorSubject.pipe(on(o=>{throw o}))),ss(()=>{i||this.cancelNavigationTransition(r,"",Bn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),lo(o=>{if(this.destroyed)return r.resolve(!1),Gn;if(i=!0,HM(o))this.events.next(new Mi(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),H3(o)?this.events.next(new Zu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Gu(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let u=Pt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Qu){let{message:l,cancellationCode:f}=qg(this.urlSerializer,u);this.events.next(new Mi(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new Zu(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Gn}))}))}cancelNavigationTransition(t,r,i){let o=new Mi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=un(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oz(n){return n!==Hu}var tP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(Lz),providedIn:"root"})}return n})(),Gg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Lz=(()=>{class n extends Gg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nP=(()=>{class n{urlSerializer=$(Ja);options=$(Rs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=$(Is);urlHandlingStrategy=$(Qg);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Pi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,a=i??o;return a instanceof Pi?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=VM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(Fz),providedIn:"root"})}return n})(),Fz=(()=>{class n extends nP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof xs?this.updateStateMemento():t instanceof Ni?this.commitTransition(r):t instanceof _h?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof vh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Mi&&t.code!==Bn.SupersededByNewNavigation&&t.code!==Bn.Redirect?this.restoreHistory(r):t instanceof Gu?this.restoreHistory(r,!0):t instanceof Pr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||o){let u=this.browserPageId,l=Q(Q({},a),this.generateNgRouterState(i,u));this.location.replaceState(t,"",l)}else{let u=Q(Q({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",u)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Jg(n,e){n.events.pipe(_n(t=>t instanceof Pr||t instanceof Mi||t instanceof Gu||t instanceof Ni),Ce(t=>t instanceof Pr||t instanceof Ni?0:(t instanceof Mi?t.code===Bn.Redirect||t.code===Bn.SupersededByNewNavigation:!1)?2:1),_n(t=>t!==2),ho(1)).subscribe(()=>{e()})}var Vz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Uz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$(XE);stateManager=$(nP);options=$(Rs,{optional:!0})||{};pendingTasks=$(Ti);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$(Yg);urlSerializer=$(Ja);location=$(Is);urlHandlingStrategy=$(Qg);injector=$(xt);_events=new $t;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$(tP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$(ec,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$(Dh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=un(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Mi&&r.code!==Bn.Redirect&&r.code!==Bn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pr)this.navigated=!0;else if(r instanceof Zu){let a=r.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=Q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Oz(i.source)},a);this.scheduleNavigation(u,Hu,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}F3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=Q({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(t);this.scheduleNavigation(u,r,a,o).catch(l=>{this.disposed||this.injector.get(Qn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return un(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=r,f=l?this.currentUrlTree.fragment:a,g=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":g=Q(Q({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let y;try{let E=i?i.snapshot:this.routerState.snapshot.root;y=kM(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return OM(y,t,g,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=As(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Hu,null,r)}navigate(t,r={skipLocationChange:!1}){return jz(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(_o(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Q({},Vz):r===!1?i=Q({},Uz):i=r,As(t))return mM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return mM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,f;a?(u=a.resolve,l=a.reject,f=a.promise):f=new Promise((y,E)=>{u=y,l=E});let g=this.pendingTasks.add();return Jg(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:u,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}var Oi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=gt(null);get href(){return un(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new $t;applicationErrorHandler=$(Qn);options=$(Rs,{optional:!0});constructor(t,r,i,o,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=u,this.reactiveHref.set($(new cg("href"),{optional:!0}));let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Pr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(As(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(t!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:As(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ue(bt),ue(ki),Kd("tabindex"),ue(vs),ue(bo),ue(Jr))};static \u0275dir=Rt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ae("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Es("href",i.reactiveHref(),NE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",bs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",bs],replaceUrl:[2,"replaceUrl","replaceUrl",bs],routerLink:"routerLink"},features:[Eo]})}return n})();var Ah=class{};var rP=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_n(t=>t instanceof Pr),yi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=ku(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(u,o.children??o._loadedRoutes))}return mt(i).pipe(mu())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=fe(null);let o=i.pipe(Lt(a=>a===null?fe(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(t,r);return mt([o,a]).pipe(mu())}else return o})}static \u0275fac=function(r){return new(r||n)(de(bt),de(xt),de(Ah),de(Zg))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iP=new X(""),Bz=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Hu;restoredId=0;store={};constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ni&&t.code===Wu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Ku))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>T(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ku(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){QE()};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function aI(n,...e){return Un([{provide:ec,multi:!0,useValue:n},[],{provide:ki,useFactory:oP,deps:[bt]},{provide:Jd,multi:!0,useFactory:sP},e.map(t=>t.\u0275providers)])}function oP(n){return n.routerState.root}function xh(n,e){return{\u0275kind:n,\u0275providers:e}}function sP(){let n=$(wt);return e=>{let t=n.get(ws);if(e!==t.components[0])return;let r=n.get(bt),i=n.get(aP);n.get(cI)===1&&r.initialNavigation(),n.get(lP,null,{optional:!0})?.setUpPreloading(),n.get(iP,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var aP=new X("",{factory:()=>new $t}),cI=new X("",{providedIn:"root",factory:()=>1});function cP(){let n=[{provide:RE,useValue:!0},{provide:cI,useValue:0},rg(()=>{let e=$(wt);return e.get(mb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(bt),o=e.get(aP);Jg(i,()=>{r(!0)}),e.get(Yg).afterPreactivation=()=>(r(!0),o.closed?fe(void 0):o),i.initialNavigation()}))})];return xh(2,n)}function uP(){let n=[rg(()=>{$(bt).setUpLocationChangeListener()}),{provide:cI,useValue:2}];return xh(3,n)}var lP=new X("");function dP(n){return xh(0,[{provide:lP,useExisting:rP},{provide:Ah,useExisting:n}])}function hP(){return xh(8,[Xb,{provide:Dh,useExisting:Xb}])}function fP(n){Nu("NgRouterViewTransitions");let e=[{provide:rI,useValue:eP},{provide:iI,useValue:Q({skipNextTransition:!!n?.skipInitialTransition},n)}];return xh(9,e)}var pP=[Is,{provide:Ja,useClass:Ss},bt,Xa,{provide:ki,useFactory:oP,deps:[bt]},Zg,[]],tc=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[pP,[],{provide:ec,multi:!0,useValue:t},[],r?.errorHandler?{provide:oI,useValue:r.errorHandler}:[],{provide:Rs,useValue:r||{}},r?.useHash?$z():Hz(),zz(),r?.preloadingStrategy?dP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?qz(r):[],r?.bindToComponentInputs?hP().\u0275providers:[],r?.enableViewTransitions?fP().\u0275providers:[],Wz()]}}static forChild(t){return{ngModule:n,providers:[{provide:ec,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({})}return n})();function zz(){return{provide:iP,useFactory:()=>{let n=$(HR),e=$(Ke),t=$(Rs),r=$(Yg),i=$(Ja);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Bz(i,r,n,e,t)}}}function $z(){return{provide:Jr,useClass:gb}}function Hz(){return{provide:Jr,useClass:hg}}function qz(n){return[n.initialNavigation==="disabled"?uP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?cP().\u0275providers:[]]}var sI=new X("");function Wz(){return[{provide:sI,useFactory:sP},{provide:Jd,multi:!0,useExisting:sI}]}var IP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ue(vs),ue(bo))};static \u0275dir=Rt({type:n})}return n})(),dI=(()=>{class n extends IP{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Rt({type:n,features:[Yn]})}return n})(),a_=new X("");var Gz={provide:a_,useExisting:dr(()=>Jn),multi:!0};function Kz(){let n=Mr()?Mr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Zz=new X(""),Jn=(()=>{class n extends IP{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!Kz())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ue(vs),ue(bo),ue(Zz,8))};static \u0275dir=Rt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ae("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[xi([Gz]),Yn]})}return n})();function Qz(n){return n==null||Yz(n)===0}function Yz(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Lh=new X(""),TP=new X("");function Jz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Xz(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function e$(n){return Qz(n.value)?{required:!0}:null}function mP(n){return null}function CP(n){return n!=null}function DP(n){return ys(n)?mt(n):n}function SP(n){let e={};return n.forEach(t=>{e=t!=null?Q(Q({},e),t):e}),Object.keys(e).length===0?null:e}function AP(n,e){return e.map(t=>t(n))}function t$(n){return!n.validate}function xP(n){return n.map(e=>t$(e)?e:t=>e.validate(t))}function n$(n){if(!n)return null;let e=n.filter(CP);return e.length==0?null:function(t){return SP(AP(t,e))}}function hI(n){return n!=null?n$(xP(n)):null}function r$(n){if(!n)return null;let e=n.filter(CP);return e.length==0?null:function(t){let r=AP(t,e).map(DP);return Ky(r).pipe(Ce(SP))}}function fI(n){return n!=null?r$(xP(n)):null}function gP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function i$(n){return n._rawValidators}function o$(n){return n._rawAsyncValidators}function uI(n){return n?Array.isArray(n)?n:[n]:[]}function e_(n,e){return Array.isArray(n)?n.includes(e):n===e}function _P(n,e){let t=uI(e);return uI(n).forEach(i=>{e_(t,i)||t.push(i)}),t}function vP(n,e){return uI(e).filter(t=>!e_(n,t))}var t_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},nl=class extends t_{name;get formDirective(){return null}get path(){return null}},Oh=class extends t_{_parent=null;name=null;valueAccessor=null},n_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},s$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Yue=we(Q({},s$),{"[class.ng-submitted]":"isSubmitted"}),Nr=(()=>{class n extends n_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(Oh,2))};static \u0275dir=Rt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&jn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Yn]})}return n})(),RP=(()=>{class n extends n_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(nl,10))};static \u0275dir=Rt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&jn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Yn]})}return n})();var Rh="VALID",Xg="INVALID",el="PENDING",Mh="DISABLED",Ms=class{},r_=class extends Ms{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Nh=class extends Ms{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},kh=class extends Ms{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},tl=class extends Ms{status;source;constructor(e,t){super(),this.status=e,this.source=t}},lI=class extends Ms{source;constructor(e){super(),this.source=e}},i_=class extends Ms{source;constructor(e){super(),this.source=e}};function MP(n){return(c_(n)?n.validators:n)||null}function a$(n){return Array.isArray(n)?hI(n):n||null}function PP(n,e){return(c_(e)?e.asyncValidators:n)||null}function c$(n){return Array.isArray(n)?fI(n):n||null}function c_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function u$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function l$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var o_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return un(this.statusReactive)}set status(e){un(()=>this.statusReactive.set(e))}_status=Lu(()=>this.statusReactive());statusReactive=gt(void 0);get valid(){return this.status===Rh}get invalid(){return this.status===Xg}get pending(){return this.status==el}get disabled(){return this.status===Mh}get enabled(){return this.status!==Mh}errors;get pristine(){return un(this.pristineReactive)}set pristine(e){un(()=>this.pristineReactive.set(e))}_pristine=Lu(()=>this.pristineReactive());pristineReactive=gt(!0);get dirty(){return!this.pristine}get touched(){return un(this.touchedReactive)}set touched(e){un(()=>this.touchedReactive.set(e))}_touched=Lu(()=>this.touchedReactive());touchedReactive=gt(!1);get untouched(){return!this.touched}_events=new $t;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_P(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_P(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vP(e,this._rawAsyncValidators))}hasValidator(e){return e_(this._rawValidators,e)}hasAsyncValidator(e){return e_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(we(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new kh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(we(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Nh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Nh(!0,r))}markAsPending(e={}){this.status=el;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new tl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(we(Q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mh,this.errors=null,this._forEachChild(i=>{i.disable(we(Q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new r_(this.value,r)),this._events.next(new tl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rh,this._forEachChild(r=>{r.enable(we(Q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rh||this.status===el)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new r_(this.value,t)),this._events.next(new tl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(we(Q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mh:Rh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=el,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=DP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new tl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new qt,this.statusChanges=new qt}_calculateStatus(){return this._allControlsDisabled()?Mh:this.errors?Xg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(el)?el:this._anyControlsHaveStatus(Xg)?Xg:Rh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Nh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new kh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){c_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=a$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=c$(this._rawAsyncValidators)}},s_=class extends o_{constructor(e,t,r){super(MP(t),PP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){l$(this,!0,e),Object.keys(e).forEach(r=>{u$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new i_(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pI=new X("",{providedIn:"root",factory:()=>mI}),mI="always";function d$(n,e){return[...e.path,n]}function NP(n,e,t=mI){kP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),f$(n,e),m$(n,e),p$(n,e),h$(n,e)}function yP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function h$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kP(n,e){let t=i$(n);e.validator!==null?n.setValidators(gP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=o$(n);e.asyncValidator!==null?n.setAsyncValidators(gP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();yP(e._rawValidators,i),yP(e._rawAsyncValidators,i)}function f$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OP(n,e)})}function p$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function m$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function g$(n,e){n==null,kP(n,e)}function _$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function v$(n){return Object.getPrototypeOf(n.constructor)===dI}function y$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function w$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Jn?t=o:v$(o)?r=o:i=o}),i||r||t||null}var E$={provide:nl,useExisting:dr(()=>gI)},Ph=Promise.resolve(),gI=(()=>{class n extends nl{callSetDisabledState;get submitted(){return un(this.submittedReactive)}_submitted=Lu(()=>this.submittedReactive());submittedReactive=gt(!1);_directives=new Set;form;ngSubmit=new qt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new s_({},hI(t),fI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ph.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),NP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ph.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ph.then(()=>{let r=this._findContainer(t.path),i=new s_({});g$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ph.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Ph.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),y$(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new lI(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ue(Lh,10),ue(TP,10),ue(pI,8))};static \u0275dir=Rt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ae("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xi([E$]),Yn]})}return n})();function wP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function EP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var b$=class extends o_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(MP(t),PP(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),c_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(EP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new i_(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){EP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var I$={provide:Oh,useExisting:dr(()=>gr)},bP=Promise.resolve(),gr=(()=>{class n extends Oh{_changeDetectorRef;callSetDisabledState;control=new b$;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new qt;constructor(t,r,i,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=w$(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){NP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){bP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&bs(r);bP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?d$(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ue(nl,9),ue(Lh,10),ue(TP,10),ue(a_,10),ue(qa,8),ue(pI,8))};static \u0275dir=Rt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[xi([I$]),Yn,Eo]})}return n})();var LP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),T$={provide:a_,useExisting:dr(()=>Fh),multi:!0},Fh=(()=>{class n extends dI{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ae("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[xi([T$]),Yn]})}return n})();var C$={provide:a_,useExisting:dr(()=>_I),multi:!0},_I=(()=>{class n extends dI{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&ae("change",function(a){return i.onChange(a.target.value)})("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[xi([C$]),Yn]})}return n})();function FP(n){return typeof n=="number"?n:parseFloat(n)}var vI=(()=>{class n{_validator=mP;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):mP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,features:[Eo]})}return n})(),D$={provide:Lh,useExisting:dr(()=>yI),multi:!0},yI=(()=>{class n extends vI{max;inputName="max";normalizeInput=t=>FP(t);createValidator=t=>Xz(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Es("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[xi([D$]),Yn]})}return n})(),S$={provide:Lh,useExisting:dr(()=>Vh),multi:!0},Vh=(()=>{class n extends vI{min;inputName="min";normalizeInput=t=>FP(t);createValidator=t=>Jz(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Es("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[xi([S$]),Yn]})}return n})(),A$={provide:Lh,useExisting:dr(()=>wI),multi:!0};var wI=(()=>{class n extends vI{required;inputName="required";normalizeInput=bs;createValidator=t=>e$;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Kr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Es("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[xi([A$]),Yn]})}return n})();var x$=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({})}return n})();var Xn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:pI,useValue:t.callSetDisabledState??mI}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({imports:[x$]})}return n})();var VP=()=>{};var BP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},R$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},u_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,l=i+2<n.length,f=l?n[i+2]:0,g=o>>2,y=(o&3)<<4|u>>4,E=(u&15)<<2|f>>6,I=f&63;l||(I=64,a||(E=64)),r.push(t[g],t[y],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):R$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new bI;let E=o<<2|u>>4;if(r.push(E),f!==64){let I=u<<4&240|f>>2;if(r.push(I),y!==64){let N=f<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},bI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},M$=function(n){let e=BP(n);return u_.encodeByteArray(e,!0)},jh=function(n){return M$(n).replace(/\./g,"")},l_=function(n){try{return u_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var P$=()=>TI().__FIREBASE_DEFAULTS__,N$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&l_(n[1]);return e&&JSON.parse(e)},d_=()=>{try{return VP()||P$()||N$()||k$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},CI=n=>{var e,t;return(t=(e=d_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},h_=n=>{let e=CI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},DI=()=>{var n;return(n=d_())===null||n===void 0?void 0:n.config},SI=n=>{var e;return(e=d_())===null||e===void 0?void 0:e[`_${n}`]};var rc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Li(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function il(n){return T(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function f_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jh(JSON.stringify(t)),jh(JSON.stringify(a)),""].join(".")}var Uh={};function O$(){let n={prod:[],emulator:[]};for(let e of Object.keys(Uh))Uh[e]?n.emulator.push(e):n.prod.push(e);return n}function L$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var UP=!1;function ol(n,e){if(typeof window>"u"||typeof document>"u"||!Li(window.location.host)||Uh[n]===e||Uh[n]||UP)return;Uh[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",o=O$().prod.length>0;function a(){let E=document.getElementById(r);E&&E.remove()}function u(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function l(E,I){E.setAttribute("width","24"),E.setAttribute("id",I),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{UP=!0,a()},E}function g(E,I){E.setAttribute("id",I),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function y(){let E=L$(r),I=t("text"),N=document.getElementById(I)||document.createElement("span"),H=t("learnmore"),F=document.getElementById(H)||document.createElement("a"),W=t("preprendIcon"),oe=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let se=E.element;u(se),g(F,H);let le=f();l(oe,W),se.append(oe,N,F,le),document.body.appendChild(se)}o?(N.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function F$(){var n;let e=(n=d_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $P(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function qP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WP(){let n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GP(){return!F$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bh(){try{return typeof indexedDB=="object"}catch{return!1}}function KP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var V$="FirebaseError",zn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=V$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ei.prototype.create)}},ei=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?U$(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new zn(i,u,r)}};function U$(n,e){return n.replace(j$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var j$=/\{\$([^}]+)}/g;function ZP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Fi(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(jP(o)&&jP(a)){if(!Fi(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function jP(n){return n!==null&&typeof n=="object"}function zh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sl(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function al(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function QP(n,e){let t=new II(n,e);return t.subscribe.bind(t)}var II=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");B$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=EI),i.error===void 0&&(i.error=EI),i.complete===void 0&&(i.complete=EI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function B$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function EI(){}var nle=14400*1e3;function It(n){return n&&n._delegate?n._delegate:n}var En=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ic="[DEFAULT]";var AI=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new rc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($$(e))try{this.getOrInitializeService({instanceIdentifier:ic})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ic){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ic){return this.instances.has(e)}getOptions(e=ic){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:z$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ic){return this.component?this.component.multipleInstances?e:ic:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function z$(n){return n===ic?void 0:n}function $$(n){return n.instantiationMode==="EAGER"}var p_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new AI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var H$=[],Ve=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ve||{}),q$={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},W$=Ve.INFO,G$={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},K$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=G$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Vi=class{constructor(e){this.name=e,this._logLevel=W$,this._logHandler=K$,this._userLogHandler=null,H$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}};var Z$=(n,e)=>e.some(t=>n instanceof t),YP,JP;function Q$(){return YP||(YP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y$(){return JP||(JP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var XP=new WeakMap,RI=new WeakMap,eN=new WeakMap,xI=new WeakMap,PI=new WeakMap;function J$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Ui(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&XP.set(t,n)}).catch(()=>{}),PI.set(e,n),e}function X$(n){if(RI.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});RI.set(n,e)}var MI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return RI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||eN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ui(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function tN(n){MI=n(MI)}function e4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(m_(this),e,...t);return eN.set(r,e.sort?e.sort():[e]),Ui(r)}:Y$().includes(n)?function(...e){return n.apply(m_(this),e),Ui(XP.get(this))}:function(...e){return Ui(n.apply(m_(this),e))}}function t4(n){return typeof n=="function"?e4(n):(n instanceof IDBTransaction&&X$(n),Z$(n,Q$())?new Proxy(n,MI):n)}function Ui(n){if(n instanceof IDBRequest)return J$(n);if(xI.has(n))return xI.get(n);let e=t4(n);return e!==n&&(xI.set(n,e),PI.set(e,n)),e}var m_=n=>PI.get(n);function rN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=Ui(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Ui(a.result),l.oldVersion,l.newVersion,Ui(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),u.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}var n4=["get","getKey","getAll","getAllKeys","count"],r4=["put","add","delete","clear"],NI=new Map;function nN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(NI.get(e))return NI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=r4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||n4.includes(t)))return;let o=function(a,...u){return T(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),f=l.store;return r&&(f=f.index(u.shift())),(yield Promise.all([f[t](...u),i&&l.done]))[0]})};return NI.set(e,o),o}tN(n=>we(Q({},n),{get:(e,t,r)=>nN(e,t)||n.get(e,t,r),has:(e,t)=>!!nN(e,t)||n.has(e,t)}));var OI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(i4(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function i4(n){let e=n.getComponent();return e?.type==="VERSION"}var LI="@firebase/app",iN="0.13.2";var Do=new Vi("@firebase/app"),o4="@firebase/app-compat",s4="@firebase/analytics-compat",a4="@firebase/analytics",c4="@firebase/app-check-compat",u4="@firebase/app-check",l4="@firebase/auth",d4="@firebase/auth-compat",h4="@firebase/database",f4="@firebase/data-connect",p4="@firebase/database-compat",m4="@firebase/functions",g4="@firebase/functions-compat",_4="@firebase/installations",v4="@firebase/installations-compat",y4="@firebase/messaging",w4="@firebase/messaging-compat",E4="@firebase/performance",b4="@firebase/performance-compat",I4="@firebase/remote-config",T4="@firebase/remote-config-compat",C4="@firebase/storage",D4="@firebase/storage-compat",S4="@firebase/firestore",A4="@firebase/ai",x4="@firebase/firestore-compat",R4="firebase",M4="11.10.0";var FI="[DEFAULT]",P4={[LI]:"fire-core",[o4]:"fire-core-compat",[a4]:"fire-analytics",[s4]:"fire-analytics-compat",[u4]:"fire-app-check",[c4]:"fire-app-check-compat",[l4]:"fire-auth",[d4]:"fire-auth-compat",[h4]:"fire-rtdb",[f4]:"fire-data-connect",[p4]:"fire-rtdb-compat",[m4]:"fire-fn",[g4]:"fire-fn-compat",[_4]:"fire-iid",[v4]:"fire-iid-compat",[y4]:"fire-fcm",[w4]:"fire-fcm-compat",[E4]:"fire-perf",[b4]:"fire-perf-compat",[I4]:"fire-rc",[T4]:"fire-rc-compat",[C4]:"fire-gcs",[D4]:"fire-gcs-compat",[S4]:"fire-fst",[x4]:"fire-fst-compat",[A4]:"fire-vertex","fire-js":"fire-js",[R4]:"fire-js-all"};var $h=new Map,N4=new Map,VI=new Map;function oN(n,e){try{n.container.addComponent(e)}catch(t){Do.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _r(n){let e=n.name;if(VI.has(e))return Do.debug(`There were multiple attempts to register component ${e}.`),!1;VI.set(e,n);for(let t of $h.values())oN(t,n);for(let t of N4.values())oN(t,n);return!0}function Ns(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Rn(n){return n==null?!1:n.settings!==void 0}var k4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new ei("app","Firebase",k4);var UI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}};var ji=M4;function zI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:FI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ps.create("bad-app-name",{appName:String(i)});if(t||(t=DI()),!t)throw Ps.create("no-options");let o=$h.get(i);if(o){if(Fi(t,o.options)&&Fi(r,o.config))return o;throw Ps.create("duplicate-app",{appName:i})}let a=new p_(i);for(let l of VI.values())a.addComponent(l);let u=new UI(t,r,a);return $h.set(i,u),u}function So(n=FI){let e=$h.get(n);if(!e&&n===FI&&DI())return zI();if(!e)throw Ps.create("no-app",{appName:n});return e}function g_(){return Array.from($h.values())}function lt(n,e,t){var r;let i=(r=P4[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Do.warn(u.join(" "));return}_r(new En(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var O4="firebase-heartbeat-database",L4=1,Hh="firebase-heartbeat-store",kI=null;function uN(){return kI||(kI=rN(O4,L4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Hh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),kI}function F4(n){return T(this,null,function*(){try{let t=(yield uN()).transaction(Hh),r=yield t.objectStore(Hh).get(lN(n));return yield t.done,r}catch(e){if(e instanceof zn)Do.warn(e.message);else{let t=Ps.create("idb-get",{originalErrorMessage:e?.message});Do.warn(t.message)}}})}function sN(n,e){return T(this,null,function*(){try{let r=(yield uN()).transaction(Hh,"readwrite");yield r.objectStore(Hh).put(e,lN(n)),yield r.done}catch(t){if(t instanceof zn)Do.warn(t.message);else{let r=Ps.create("idb-set",{originalErrorMessage:t?.message});Do.warn(r.message)}}})}function lN(n){return`${n.name}!${n.options.appId}`}var V4=1024,U4=30,jI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new BI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=aN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>U4){let a=B4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Do.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=aN(),{heartbeatsToSend:r,unsentEntries:i}=j4(this._heartbeatsCache.heartbeats),o=jh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Do.warn(t),""}})}};function aN(){return new Date().toISOString().substring(0,10)}function j4(n,e=V4){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),cN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),cN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var BI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return Bh()?KP().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield F4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return sN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function cN(n){return jh(JSON.stringify({version:2,heartbeats:n})).length}function B4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function z4(n){_r(new En("platform-logger",e=>new OI(e),"PRIVATE")),_r(new En("heartbeat",e=>new jI(e),"PRIVATE")),lt(LI,iN,n),lt(LI,iN,"esm2017"),lt("fire-js","")}z4("");var $4="firebase",H4="11.10.0";lt($4,H4,"app");function dN(n){n===void 0&&(n=$(wt));let e=n.get(yo);return t=>new Te(r=>{let i=e.add(),o=!1;function a(){o||(i(),o=!0)}let u=t.subscribe({next:l=>{r.next(l),a()},complete:()=>{r.complete(),a()},error:l=>{r.error(l),a()}});return u.add(()=>{r.unsubscribe(),a()}),u})}var Bi=new as("ANGULARFIRE2_VERSION");function sc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var ks=(n,e)=>{let t=e?[e]:g_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},cl=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(cl||{}),hN=hb()&&typeof Zone<"u"?cl.WARN:cl.SILENT;var __=class{zone;delegate;constructor(e,t=qy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,r)}},zi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=$(Ke);this.outsideAngular=t.runOutsideAngular(()=>new __(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new __(typeof Zone>"u"?void 0:Zone.current,Hy))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fN=!1;function q4(n,e){!fN&&(hN>cl.SILENT||hb())&&(fN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),hN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function W4(n){let e=$(Ke,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function oc(n){let e=$(Ke,{optional:!0});return e?e.run(()=>n()):n()}var G4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Pt(t,()=>oc(()=>n.apply(void 0,r)))),_t=(n,e,t)=>(t||=e?cl.WARN:cl.VERBOSE,function(){let r,i=arguments,o,a,u;try{o=$(zi),a=$(yo),u=$(xt)}catch{return q4(n,t),n.apply(this,i)}for(let f=0;f<arguments.length;f++)typeof i[f]=="function"&&(e&&(r||=oc(()=>a.add())),i[f]=G4(i[f],r,u));let l=W4(()=>n.apply(this,i));return e?l instanceof Te?l.pipe(is(o.outsideAngular),rs(o.insideAngular),dN(u)):l instanceof Promise?oc(()=>{let f=a.add();return new Promise((g,y)=>{l.then(E=>Pt(u,()=>oc(()=>g(E))),E=>Pt(u,()=>oc(()=>y(E)))).finally(f)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:oc(()=>l):l instanceof Te?l.pipe(is(o.outsideAngular),rs(o.insideAngular)):oc(()=>l)});var ti=class{constructor(e){return e}},Ao=class{constructor(){return g_()}};function K4(n){return n&&n.length===1?n[0]:new ti(So())}var $I=new X("angularfire2._apps"),Z4={provide:ti,useFactory:K4,deps:[[new an,$I]]},Q4={provide:Ao,deps:[[new an,$I]]};function Y4(n){return(e,t)=>{let r=t.get(Ba);lt("angularfire",Bi.full,"core"),lt("angularfire",Bi.full,"app"),lt("angular",cw.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ti(i)}}function pN(n,...e){return Un([Z4,Q4,{provide:$I,useFactory:Y4(n),multi:!0,deps:[Ke,wt,zi,...e]}])}var mN=_t(zI,!0);var J4=new Map,X4={activated:!1,tokenObservers:[]},eH={initialized:!1,enabled:!1};function ni(n){return J4.get(n)||Object.assign({},X4)}function yN(){return eH}var tH="https://content-firebaseappcheck.googleapis.com/v1";var nH="exchangeDebugToken",gN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},ode=1440*60*1e3;var WI=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new rc,this.pending.promise.catch(t=>{}),yield rH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new rc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function rH(n){return new Promise(e=>{setTimeout(e,n)})}var iH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Os=new ei("appCheck","AppCheck",iH);function wN(n){if(!ni(n).activated)throw Os.create("use-before-activation",{appName:n.name})}function EN(r,i){return T(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let I=yield a.getHeartbeatsHeader();I&&(o["X-Firebase-Client"]=I)}let u={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,u)}catch(I){throw Os.create("fetch-network-error",{originalErrorMessage:I?.message})}if(l.status!==200)throw Os.create("fetch-status-error",{httpStatus:l.status});let f;try{f=yield l.json()}catch(I){throw Os.create("fetch-parse-error",{originalErrorMessage:I?.message})}let g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw Os.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let y=Number(g[1])*1e3,E=Date.now();return{token:f.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}})}function bN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${tH}/projects/${t}/apps/${r}:${nH}?key=${i}`,body:{debug_token:e}}}var oH="firebase-app-check-database",sH=1,GI="firebase-app-check-store";var v_=null;function aH(){return v_||(v_=new Promise((n,e)=>{try{let t=indexedDB.open(oH,sH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Os.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(GI,{keyPath:"compositeKey"})}}}catch(t){e(Os.create("storage-open",{originalErrorMessage:t?.message}))}}),v_)}function cH(n,e){return uH(lH(n),e)}function uH(n,e){return T(this,null,function*(){let r=(yield aH()).transaction(GI,"readwrite"),o=r.objectStore(GI).put({compositeKey:n,value:e});return new Promise((a,u)=>{o.onsuccess=l=>{a()},r.onerror=l=>{var f;u(Os.create("storage-set",{originalErrorMessage:(f=l.target.error)===null||f===void 0?void 0:f.message}))}})})}function lH(n){return`${n.options.appId}-${n.name}`}var qh=new Vi("@firebase/app-check");function HI(n,e){return Bh()?cH(n,e).catch(t=>{qh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function IN(){return yN().enabled}function TN(){return T(this,null,function*(){let n=yN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var dH={error:"UNKNOWN_ERROR"};function hH(n){return u_.encodeString(JSON.stringify(n),!1)}function KI(n,e=!1,t=!1){return T(this,null,function*(){let r=n.app;wN(r);let i=ni(r),o=i.token,a;if(o&&!Wh(o)&&(i.token=void 0,o=void 0),!o){let f=yield i.cachedTokenPromise;f&&(Wh(f)?o=f:yield HI(r,void 0))}if(!e&&o&&Wh(o))return{token:o.token};let u=!1;if(IN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=EN(bN(r,yield TN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);let f=yield i.exchangeTokenPromise;return yield HI(r,f),i.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?qh.warn(f.message):t&&qh.error(f),qI(f)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),o=yield ni(r).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?qh.warn(f.message):t&&qh.error(f),a=f}let l;return o?a?Wh(o)?l={token:o.token,internalError:a}:l=qI(a):(l={token:o.token},i.token=o,yield HI(r,o)):l=qI(a),u&&gH(r,l),l})}function fH(n){return T(this,null,function*(){let e=n.app;wN(e);let{provider:t}=ni(e);if(IN()){let r=yield TN(),{token:i}=yield EN(bN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function pH(n,e,t,r){let{app:i}=n,o=ni(i),a={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&Wh(o.token)){let u=o.token;Promise.resolve().then(()=>{t({token:u.token}),_N(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>_N(n))}function CN(n,e){let t=ni(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _N(n){let{app:e}=n,t=ni(e),r=t.tokenRefresher;r||(r=mH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mH(n){let{app:e}=n;return new WI(()=>T(null,null,function*(){let t=ni(e),r;if(t.token?r=yield KI(n,!0):r=yield KI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ni(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},gN.RETRIAL_MIN_WAIT,gN.RETRIAL_MAX_WAIT)}function gH(n,e){let t=ni(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Wh(n){return n.expireTimeMillis-Date.now()>0}function qI(n){return{token:hH(dH),error:n}}var ZI=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ni(this.app);for(let t of e)CN(this.app,t.next);return Promise.resolve()}};function _H(n,e){return new ZI(n,e)}function vH(n){return{getToken:e=>KI(n,e),getLimitedUseToken:()=>fH(n),addTokenListener:e=>pH(n,"INTERNAL",e),removeTokenListener:e=>CN(n.app,e)}}var yH="@firebase/app-check",wH="0.10.1";var EH="app-check",vN="app-check-internal";function bH(){_r(new En(EH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return _H(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vN).initialize()})),_r(new En(vN,n=>{let e=n.getProvider("app-check").getImmediate();return vH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lt(yH,wH)}bH();var IH="app-check";var Ls=class{constructor(){return ks(IH)}};var TH=["localhost","0.0.0.0","127.0.0.1"],vde=typeof window<"u"&&TH.includes(window.location.hostname);function BN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var zN=BN,$N=new ei("auth","Firebase",BN());var T_=new Vi("@firebase/auth");function CH(n,...e){T_.logLevel<=Ve.WARN&&T_.warn(`Auth (${ji}): ${n}`,...e)}function w_(n,...e){T_.logLevel<=Ve.ERROR&&T_.error(`Auth (${ji}): ${n}`,...e)}function Hi(n,...e){throw w0(n,...e)}function ac(n,...e){return w0(n,...e)}function HN(n,e,t){let r=Object.assign(Object.assign({},zN()),{[e]:t});return new ei("auth","Firebase",r).create(e,{appName:n.name})}function Mo(n){return HN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function w0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return $N.create(n,...e)}function _e(n,e,...t){if(!n)throw w0(e,...t)}function xo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw w_(e),new Error(e)}function Us(n,e){n||xo(e)}function XI(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DH(){return DN()==="http:"||DN()==="https:"}function DN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function SH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DH()||HP()||"connection"in navigator)?navigator.onLine:!0}function AH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var cc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Us(t>e,"Short delay should be less than long delay!"),this.isMobile=zP()||qP()}get(){return SH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function E0(n,e){Us(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var C_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var xH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MH=new cc(3e4,6e4);function js(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Bs(o,a,u,l){return T(this,arguments,function*(n,e,t,r,i={}){return qN(n,i,()=>T(null,null,function*(){let f={},g={};r&&(e==="GET"?g=r:f={body:JSON.stringify(r)});let y=zh(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:E},f);return $P()||(I.referrerPolicy="no-referrer"),n.emulatorConfig&&Li(n.emulatorConfig.host)&&(I.credentials="include"),C_.fetch()(yield WN(n,n.config.apiHost,t,y),I)}))})}function qN(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},xH),e);try{let i=new e0(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw y_(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[l,f]=u.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw y_(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw y_(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw y_(n,"user-disabled",a);let g=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw HN(n,g,f);Hi(n,g)}}catch(i){if(i instanceof zn)throw i;Hi(n,"network-request-failed",{message:String(i)})}})}function tf(o,a,u,l){return T(this,arguments,function*(n,e,t,r,i={}){let f=yield Bs(n,e,t,r,i);return"mfaPendingCredential"in f&&Hi(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function WN(n,e,t,r){return T(this,null,function*(){let i=`${e}${t}?${r}`,o=n,a=o.config.emulator?E0(n.config,i):`${n.config.apiScheme}://${i}`;return RH.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}function PH(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var e0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ac(this.auth,"network-request-failed")),MH.get())})}};function y_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ac(n,e,r);return i.customData._tokenResponse=t,i}function SN(n){return n!==void 0&&n.enterprise!==void 0}var t0=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return PH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function NH(n,e){return T(this,null,function*(){return Bs(n,"GET","/v2/recaptchaConfig",js(n,e))})}function kH(n,e){return T(this,null,function*(){return Bs(n,"POST","/v1/accounts:delete",e)})}function D_(n,e){return T(this,null,function*(){return Bs(n,"POST","/v1/accounts:lookup",e)})}function Kh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function b0(n,e=!1){return T(this,null,function*(){let t=It(n),r=yield t.getIdToken(e),i=I0(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Kh(QI(i.auth_time)),issuedAtTime:Kh(QI(i.iat)),expirationTime:Kh(QI(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function QI(n){return Number(n)*1e3}function I0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return w_("JWT malformed, contained fewer than 3 sections"),null;try{let i=l_(t);return i?JSON.parse(i):(w_("Failed to decode base64 JWT payload"),null)}catch(i){return w_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function AN(n){let e=I0(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qh(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof zn&&OH(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function OH({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var n0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Kh(this.lastLoginAt),this.creationTime=Kh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function S_(n){return T(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Qh(n,D_(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?GN(o.providerUserInfo):[],u=LH(n.providerData,a),l=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!u?.length,g=l?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Yh(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,y)})}function T0(n){return T(this,null,function*(){let e=It(n);yield S_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function LH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GN(n){return n.map(e=>{var{providerId:t}=e,r=Wy(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function FH(n,e){return T(this,null,function*(){let t=yield qN(n,{},()=>T(null,null,function*(){let r=zh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=yield WN(n,i,"/v1/token",`key=${o}`),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:u,body:r};return n.emulatorConfig&&Li(n.emulatorConfig.host)&&(l.credentials="include"),C_.fetch()(a,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function VH(n,e){return T(this,null,function*(){return Bs(n,"POST","/v2/accounts:revokeToken",js(n,e))})}var Zh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=AN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield FH(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return xo("not implemented")}};function Fs(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Vs=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Wy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield Qh(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return b0(this,e)}reload(){return T0(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield S_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(Rn(this.auth.app))return Promise.reject(Mo(this.auth));let e=yield this.getIdToken();return yield Qh(this,kH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,u,l,f,g;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,H=(u=t.tenantId)!==null&&u!==void 0?u:void 0,F=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,W=(f=t.createdAt)!==null&&f!==void 0?f:void 0,oe=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:se,emailVerified:le,isAnonymous:Ye,providerData:be,stsTokenManager:R}=t;_e(se&&R,e,"internal-error");let C=Zh.fromJSON(this.name,R);_e(typeof se=="string",e,"internal-error"),Fs(y,e.name),Fs(E,e.name),_e(typeof le=="boolean",e,"internal-error"),_e(typeof Ye=="boolean",e,"internal-error"),Fs(I,e.name),Fs(N,e.name),Fs(H,e.name),Fs(F,e.name),Fs(W,e.name),Fs(oe,e.name);let D=new n({uid:se,auth:e,email:E,emailVerified:le,displayName:y,isAnonymous:Ye,photoURL:N,phoneNumber:I,tenantId:H,stsTokenManager:C,createdAt:W,lastLoginAt:oe});return be&&Array.isArray(be)&&(D.providerData=be.map(x=>Object.assign({},x))),F&&(D._redirectEventId=F),D}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new Zh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield S_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?GN(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new Zh;u.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Yh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,f),l})}};var xN=new Map;function Ro(n){Us(n instanceof Function,"Expected a class definition");let e=xN.get(n);return e?(Us(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,xN.set(n,e),e)}var UH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),r0=UH;function E_(n,e,t){return`firebase:${n}:${e}:${t}`}var A_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=E_(this.userKey,i.apiKey,o),this.fullPersistenceKey=E_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield D_(this.auth,{idToken:e}).catch(()=>{});return t?Vs._fromGetAccountInfoResponse(this.auth,t,e):null}return Vs._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(Ro(r0),e,r);let i=(yield Promise.all(t.map(f=>T(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||Ro(r0),a=E_(r,e.config.apiKey,e.name),u=null;for(let f of t)try{let g=yield f._get(a);if(g){let y;if(typeof g=="string"){let E=yield D_(e,{idToken:g}).catch(()=>{});if(!E)break;y=yield Vs._fromGetAccountInfoResponse(e,E,g)}else y=Vs._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}let l=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],u&&(yield o._set(a,u.toJSON())),yield Promise.all(t.map(f=>T(null,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,r))})}};function RN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XN(e))return"Blackberry";if(e1(e))return"Webos";if(ZN(e))return"Safari";if((e.includes("chrome/")||QN(e))&&!e.includes("edge/"))return"Chrome";if(JN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function KN(n=ln()){return/firefox\//i.test(n)}function ZN(n=ln()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QN(n=ln()){return/crios\//i.test(n)}function YN(n=ln()){return/iemobile/i.test(n)}function JN(n=ln()){return/android/i.test(n)}function XN(n=ln()){return/blackberry/i.test(n)}function e1(n=ln()){return/webos/i.test(n)}function C0(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jH(n=ln()){var e;return C0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BH(){return WP()&&document.documentMode===10}function t1(n=ln()){return C0(n)||JN(n)||e1(n)||XN(n)||/windows phone/i.test(n)||YN(n)}function n1(n,e=[]){let t;switch(n){case"Browser":t=RN(ln());break;case"Worker":t=`${RN(ln())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ji}/${r}`}var i0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,u)=>{try{let l=e(o);a(l)}catch(l){u(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function zH(t){return T(this,arguments,function*(n,e={}){return Bs(n,"GET","/v2/passwordPolicy",js(n,e))})}var $H=6,o0=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:$H,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,u;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(u=l.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var s0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x_(this),this.idTokenSubscription=new x_(this),this.beforeStateQueue=new i0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$N,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ro(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield A_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield D_(this,{idToken:e}),r=yield Vs._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(Rn(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield S_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=AH()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(Rn(this.app))return Promise.reject(Mo(this));let t=e?It(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return Rn(this.app)?Promise.reject(Mo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Rn(this.app)?Promise.reject(Mo(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Ro(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield zH(this),t=new o0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ei("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield VH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ro(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=yield A_.create(this,[Ro(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=n1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return T(this,null,function*(){var e;if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&CH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function lc(n){return It(n)}var x_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=QP(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var L_={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HH(n){L_=n}function r1(n){return L_.loadJS(n)}function qH(){return L_.recaptchaEnterpriseScript}function WH(){return L_.gapiScript}function i1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var a0=class{constructor(){this.enterprise=new c0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},c0=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var GH="recaptcha-enterprise",o1="NO_RECAPTCHA",u0=class{constructor(e){this.type=GH,this.auth=lc(e)}verify(e="verify",t=!1){return T(this,null,function*(){function r(o){return T(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,u)=>T(null,null,function*(){NH(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let f=new t0(l);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(l=>{u(l)})}))})}function i(o,a,u){let l=window.grecaptcha;SN(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(o1)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new a0().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(u=>{if(!t&&SN(window.grecaptcha))i(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=qH();l.length!==0&&(l+=u),r1(l).then(()=>{i(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})})}};function Gh(n,e,t,r=!1,i=!1){return T(this,null,function*(){let o=new u0(n),a;if(i)a=o1;else try{a=yield o.verify(t)}catch{a=yield o.verify(t,!0)}let u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){let l=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){let l=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u})}function l0(n,e,t,r,i){return T(this,null,function*(){var o,a;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let u=yield Gh(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(u=>T(null,null,function*(){if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let l=yield Gh(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(u)}));else if(i==="PHONE_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){let u=yield Gh(n,e,t);return r(n,u).catch(l=>T(null,null,function*(){var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let g=yield Gh(n,e,t,!1,!0);return r(n,g)}return Promise.reject(l)}))}else{let u=yield Gh(n,e,t,!1,!0);return r(n,u)}else return Promise.reject(i+" provider is not supported.")})}function D0(n,e){let t=Ns(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Fi(o,e??{}))return i;Hi(i,"already-initialized")}return t.initialize({options:e})}function KH(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ro);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function S0(n,e,t){let r=lc(n);_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=s1(e),{host:a,port:u}=ZH(e),l=u===null?"":`:${u}`,f={url:`${o}//${a}${l}/`},g=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){_e(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_e(Fi(f,r.config.emulator)&&Fi(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Li(a)?(il(`${o}//${a}${l}`),ol("Auth",!0)):i||QH()}function s1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ZH(n){let e=s1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:MN(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:MN(a)}}}function MN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function QH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Jh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xo("not implemented")}_getIdTokenResponse(e){return xo("not implemented")}_linkToIdToken(e,t){return xo("not implemented")}_getReauthenticationResolver(e){return xo("not implemented")}};function YH(n,e){return T(this,null,function*(){return Bs(n,"POST","/v1/accounts:signUp",e)})}function JH(n,e){return T(this,null,function*(){return tf(n,"POST","/v1/accounts:signInWithPassword",js(n,e))})}function XH(n,e){return T(this,null,function*(){return tf(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))})}function e6(n,e){return T(this,null,function*(){return tf(n,"POST","/v1/accounts:signInWithEmailLink",js(n,e))})}var Xh=class n extends Jh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return T(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l0(e,t,"signInWithPassword",JH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XH(e,{email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}})}_linkToIdToken(e,t){return T(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l0(e,r,"signUpPassword",YH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return e6(e,{idToken:t,email:this._email,oobCode:this._password});default:Hi(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function YI(n,e){return T(this,null,function*(){return tf(n,"POST","/v1/accounts:signInWithIdp",js(n,e))})}function t6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n6(n){let e=sl(al(n)).link,t=e?sl(al(e)).deep_link_id:null,r=sl(al(n)).deep_link_id;return(r?sl(al(r)).link:null)||r||t||e||n}var R_=class n{constructor(e){var t,r,i,o,a,u;let l=sl(al(e)),f=(t=l.apiKey)!==null&&t!==void 0?t:null,g=(r=l.oobCode)!==null&&r!==void 0?r:null,y=t6((i=l.mode)!==null&&i!==void 0?i:null);_e(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=l.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=l.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){let t=n6(e);try{return new n(t)}catch{return null}}};var a1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Xh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=R_.parseLink(r);return _e(i,"argument-error"),Xh._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),M_=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var d0=class extends M_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function r6(n,e){return T(this,null,function*(){return tf(n,"POST","/v1/accounts:signUp",js(n,e))})}var ul=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return T(this,null,function*(){let o=yield Vs._fromIdTokenResponse(e,r,i),a=PN(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return T(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=PN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function PN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var h0=class n extends zn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function c1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?h0._fromErrorAndOperation(n,o,e,r):o})}function i6(n,e,t=!1){return T(this,null,function*(){let r=yield Qh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ul._forOperation(n,"link",r)})}function o6(n,e,t=!1){return T(this,null,function*(){let{auth:r}=n;if(Rn(r.app))return Promise.reject(Mo(r));let i="reauthenticate";try{let o=yield Qh(n,c1(r,i,e,n),t);_e(o.idToken,r,"internal-error");let a=I0(o.idToken);_e(a,r,"internal-error");let{sub:u}=a;return _e(n.uid===u,r,"user-mismatch"),ul._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Hi(r,"user-mismatch"),o}})}function u1(n,e,t=!1){return T(this,null,function*(){if(Rn(n.app))return Promise.reject(Mo(n));let r="signIn",i=yield c1(n,r,e),o=yield ul._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function A0(n,e){return T(this,null,function*(){return u1(lc(n),e)})}function l1(n){return T(this,null,function*(){let e=lc(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function x0(n,e,t){return T(this,null,function*(){if(Rn(n.app))return Promise.reject(Mo(n));let r=lc(n),a=yield l0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r6,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&l1(n),l}),u=yield ul._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(u.user),u})}function R0(n,e,t){return Rn(n.app)?Promise.reject(Mo(n)):A0(It(n),a1.credential(e,t)).catch(r=>T(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&l1(n),r}))}function M0(n,e){return It(n).setPersistence(e)}function P0(n,e,t,r){return It(n).onIdTokenChanged(e,t,r)}function N0(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function k0(n,e,t,r){return It(n).onAuthStateChanged(e,t,r)}var P_="__sak";var N_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(P_,"1"),this.storage.removeItem(P_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var s6=1e3,a6=10,c6=(()=>{class n extends N_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,l,f)=>{this.notifyListeners(u,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);BH()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,a6):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},s6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return T(this,null,function*(){yield ts(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return T(this,null,function*(){let r=yield ts(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return T(this,null,function*(){yield ts(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),F_=c6;var u6=(()=>{class n extends N_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),O0=u6;function l6(n){return Promise.all(n.map(e=>T(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var d6=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,u=this.handlersMap[o];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(u).map(g=>T(this,null,function*(){return g(r.origin,a)})),f=yield l6(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function d1(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var f0=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return T(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,l)=>{let f=d1("",20);i.port1.start();let g=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let E=y;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(g),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function $i(){return window}function h6(n){$i().location.href=n}function h1(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}function f6(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function p6(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function m6(){return h1()?self:null}var f1="firebaseLocalStorageDb",g6=1,k_="firebaseLocalStorage",p1="fbase_key",uc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function V_(n,e){return n.transaction([k_],e?"readwrite":"readonly").objectStore(k_)}function _6(){let n=indexedDB.deleteDatabase(f1);return new uc(n).toPromise()}function p0(){let n=indexedDB.open(f1,g6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(k_,{keyPath:p1})}catch(i){t(i)}}),n.addEventListener("success",()=>T(null,null,function*(){let r=n.result;r.objectStoreNames.contains(k_)?e(r):(r.close(),yield _6(),e(yield p0()))}))})}function NN(n,e,t){return T(this,null,function*(){let r=V_(n,!0).put({[p1]:e,value:t});return new uc(r).toPromise()})}function v6(n,e){return T(this,null,function*(){let t=V_(n,!1).get(e),r=yield new uc(t).toPromise();return r===void 0?null:r.value})}function kN(n,e){let t=V_(n,!0).delete(e);return new uc(t).toPromise()}var y6=800,w6=3,E6=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield p0(),this.db)})}_withRetries(t){return T(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>w6)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return h1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=d6._getInstance(m6()),this.receiver._subscribe("keyChanged",(t,r)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,r;if(this.activeServiceWorker=yield f6(),!this.activeServiceWorker)return;this.sender=new f0(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||p6()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield p0();return yield NN(t,P_,"1"),yield kN(t,P_),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>NN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let r=yield this._withRetries(i=>v6(i,t));return this.localCache[t]=r,r})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>kN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let a=V_(o,!1).getAll();return new uc(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),y6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),m1=E6;var Dde=i1("rcb"),Sde=new cc(3e4,6e4);function b6(n,e){return e?Ro(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var ef=class extends Jh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return YI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return YI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return YI(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function I6(n){return u1(n.auth,new ef(n),n.bypassAuthState)}function T6(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),o6(t,new ef(n),n.bypassAuthState)}function C6(n){return T(this,null,function*(){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),i6(t,new ef(n),n.bypassAuthState)})}var m0=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(l))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I6;case"linkViaPopup":case"linkViaRedirect":return C6;case"reauthViaPopup":case"reauthViaRedirect":return T6;default:Hi(this.auth,"internal-error")}}resolve(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Ade=new cc(2e3,1e4);var D6="pendingRedirect",b_=new Map,g0=class n extends m0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return T(this,null,function*(){let e=b_.get(this.auth._key());if(!e){try{let r=(yield S6(this.resolver,this.auth))?yield ts(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}b_.set(this.auth._key(),e)}return this.bypassAuthState||b_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return ts(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ts(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function S6(n,e){return T(this,null,function*(){let t=R6(e),r=x6(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function A6(n,e){b_.set(n._key(),e)}function x6(n){return Ro(n._redirectPersistence)}function R6(n){return E_(D6,n.config.apiKey,n.name)}function M6(n,e,t=!1){return T(this,null,function*(){if(Rn(n.app))return Promise.reject(Mo(n));let r=lc(n),i=b6(r,e),a=yield new g0(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var P6=600*1e3,_0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!g1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ac(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P6&&this.cachedEventUids.clear(),this.cachedEventUids.has(ON(e))}saveEventToCache(e){this.cachedEventUids.add(ON(e)),this.lastProcessedEventTime=Date.now()}};function ON(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function g1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function N6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g1(n);default:return!1}}function k6(t){return T(this,arguments,function*(n,e={}){return Bs(n,"GET","/v1/projects",e)})}var O6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L6=/^https?/;function F6(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield k6(n);for(let t of e)try{if(V6(t))return}catch{}Hi(n,"unauthorized-domain")})}function V6(n){let e=XI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!L6.test(t))return!1;if(O6.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var U6=new cc(3e4,6e4);function LN(){let n=$i().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function j6(n){return new Promise((e,t)=>{var r,i,o;function a(){LN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LN(),t(ac(n,"network-request-failed"))},timeout:U6.get()})}if(!((i=(r=$i().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=$i().gapi)===null||o===void 0)&&o.load)a();else{let u=i1("iframefcb");return $i()[u]=()=>{gapi.load?a():t(ac(n,"network-request-failed"))},r1(`${WH()}?onload=${u}`).catch(l=>t(l))}}).catch(e=>{throw I_=null,e})}var I_=null;function B6(n){return I_=I_||j6(n),I_}var z6=new cc(5e3,15e3),$6="__/auth/iframe",H6="emulator/auth/iframe",q6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G6(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?E0(e,H6):`https://${n.config.authDomain}/${$6}`,r={apiKey:e.apiKey,appName:n.name,v:ji},i=W6.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${zh(r).slice(1)}`}function K6(n){return T(this,null,function*(){let e=yield B6(n),t=$i().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:G6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q6,dontclear:!0},r=>new Promise((i,o)=>T(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=ac(n,"network-request-failed"),u=$i().setTimeout(()=>{o(a)},z6.get());function l(){$i().clearTimeout(u),i(r)}r.ping(l).then(l,()=>{o(a)})})))})}var Z6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q6=500,Y6=600,J6="_blank",X6="http://localhost",O_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function e5(n,e,t,r=Q6,i=Y6){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",l=Object.assign(Object.assign({},Z6),{width:r.toString(),height:i.toString(),top:o,left:a}),f=ln().toLowerCase();t&&(u=QN(f)?J6:t),KN(f)&&(e=e||X6,l.scrollbars="yes");let g=Object.entries(l).reduce((E,[I,N])=>`${E}${I}=${N},`,"");if(jH(f)&&u!=="_self")return t5(e||"",u),new O_(null);let y=window.open(e||"",u,g);_e(y,n,"popup-blocked");try{y.focus()}catch{}return new O_(y)}function t5(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var n5="__/auth/handler",r5="emulator/auth/handler",i5=encodeURIComponent("fac");function FN(n,e,t,r,i,o){return T(this,null,function*(){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ji,eventId:i};if(e instanceof M_){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",ZP(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,y]of Object.entries(o||{}))a[g]=y}if(e instanceof d0){let g=e.getScopes().filter(y=>y!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let g of Object.keys(u))u[g]===void 0&&delete u[g];let l=yield n._getAppCheckToken(),f=l?`#${i5}=${encodeURIComponent(l)}`:"";return`${o5(n)}?${zh(u).slice(1)}${f}`})}function o5({config:n}){return n.emulator?E0(n,r5):`https://${n.authDomain}/${n5}`}var JI="webStorageSupport",v0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O0,this._completeRedirectFn=M6,this._overrideRedirectResult=A6}_openPopup(e,t,r,i){return T(this,null,function*(){var o;Us((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield FN(e,t,r,XI(),i);return e5(e,a,d1())})}_openRedirect(e,t,r,i){return T(this,null,function*(){yield this._originValidation(e);let o=yield FN(e,t,r,XI(),i);return h6(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Us(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return T(this,null,function*(){let t=yield K6(e),r=new _0(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(JI,{type:JI},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[JI];a!==void 0&&t(!!a),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=F6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return t1()||ZN()||C0()}},_1=v0;var VN="@firebase/auth",UN="1.10.8";var y0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function s5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function a5(n){_r(new En("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;_e(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:n1(n)},f=new s0(r,i,o,l);return KH(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_r(new En("auth-internal",e=>{let t=lc(e.getProvider("auth").getImmediate());return(r=>new y0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),lt(VN,UN,s5(n)),lt(VN,UN,"esm2017")}var c5=300,u5=SI("authIdTokenMaxAge")||c5,jN=null,l5=n=>e=>T(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>u5)return;let i=t?.token;jN!==i&&(jN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function L0(n=So()){let e=Ns(n,"auth");if(e.isInitialized())return e.getImmediate();let t=D0(n,{popupRedirectResolver:_1,persistence:[m1,F_,O0]}),r=SI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=l5(o.toString());N0(t,a,()=>a(t.currentUser)),P0(t,u=>a(u))}}let i=CI("auth");return i&&S0(t,`http://${i}`),t}function d5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}HH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ac("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",d5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});a5("Browser");var v1="auth",Bt=class{constructor(e){return e}},dc=class{constructor(){return ks(v1)}};var F0=new X("angularfire2.auth-instances");function X5(n,e){let t=sc(v1,n,e);return t&&new Bt(t)}function e8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bt(r)}}var t8={provide:dc,deps:[[new an,F0]]},n8={provide:Bt,useFactory:X5,deps:[[new an,F0],ti]};function y1(n,...e){return lt("angularfire",Bi.full,"auth"),Un([n8,t8,{provide:F0,useFactory:e8(n),multi:!0,deps:[Ke,wt,zi,Ao,[new an,Ls],...e]}])}var U_=_t(x0,!0,2);var w1=_t(L0,!0);var zs=_t(k0,!0);var E1=_t(M0,!0);var b1=_t(R0,!0,2);var I1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T1={};var Po,V0;(function(){var n;function e(R,C){function D(){}D.prototype=C.prototype,R.D=C.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(x,M,k){for(var A=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)A[Dt-2]=arguments[Dt];return C.prototype[M].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,C,D){D||(D=0);var x=Array(16);if(typeof C=="string")for(var M=0;16>M;++M)x[M]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(M=0;16>M;++M)x[M]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=R.g[0],D=R.g[1],M=R.g[2];var k=R.g[3],A=C+(k^D&(M^k))+x[0]+3614090360&4294967295;C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[1]+3905402710&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[2]+606105819&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[3]+3250441966&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+x[4]+4118548399&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[5]+1200080426&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[6]+2821735955&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[7]+4249261313&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+x[8]+1770035416&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[9]+2336552879&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[10]+4294925233&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[11]+2304563134&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+x[12]+1804603682&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[13]+4254626195&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[14]+2792965006&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[15]+1236535329&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(M^k&(D^M))+x[1]+4129170786&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[6]+3225465664&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[11]+643717713&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[0]+3921069994&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+x[5]+3593408605&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[10]+38016083&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[15]+3634488961&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[4]+3889429448&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+x[9]+568446438&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[14]+3275163606&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[3]+4107603335&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[8]+1163531501&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+x[13]+2850285829&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[2]+4243563512&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[7]+1735328473&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[12]+2368359562&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(D^M^k)+x[5]+4294588738&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[8]+2272392833&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[11]+1839030562&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[14]+4259657740&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+x[1]+2763975236&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[4]+1272893353&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[7]+4139469664&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[10]+3200236656&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+x[13]+681279174&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[0]+3936430074&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[3]+3572445317&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[6]+76029189&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+x[9]+3654602809&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[12]+3873151461&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[15]+530742520&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[2]+3299628645&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(M^(D|~k))+x[0]+4096336452&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[7]+1126891415&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[14]+2878612391&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[5]+4237533241&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+x[12]+1700485571&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[3]+2399980690&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[10]+4293915773&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[1]+2240044497&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+x[8]+1873313359&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[15]+4264355552&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[6]+2734768916&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[13]+1309151649&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+x[4]+4149444226&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[11]+3174756917&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[2]+718787259&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+k&4294967295}r.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var D=C-this.blockSize,x=this.B,M=this.h,k=0;k<C;){if(M==0)for(;k<=D;)i(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<C;)if(x[M++]=R.charCodeAt(k++),M==this.blockSize){i(this,x),M=0;break}}else for(;k<C;)if(x[M++]=R[k++],M==this.blockSize){i(this,x),M=0;break}}this.h=M,this.o+=C},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var D=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=D&255,D/=256;for(this.u(R),R=Array(16),C=D=0;4>C;++C)for(var x=0;32>x;x+=8)R[D++]=this.g[C]>>>x&255;return R};function o(R,C){var D=u;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=C(R)}function a(R,C){this.h=C;for(var D=[],x=!0,M=R.length-1;0<=M;M--){var k=R[M]|0;x&&k==C||(D[M]=k,x=!1)}this.g=D}var u={};function l(R){return-128<=R&&128>R?o(R,function(C){return new a([C|0],0>C?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return F(f(-R));for(var C=[],D=1,x=0;R>=D;x++)C[x]=R/D|0,D*=4294967296;return new a(C,0)}function g(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return F(g(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(C,8)),x=y,M=0;M<R.length;M+=8){var k=Math.min(8,R.length-M),A=parseInt(R.substring(M,M+k),C);8>k?(k=f(Math.pow(C,k)),x=x.j(k).add(f(A))):(x=x.j(D),x=x.add(f(A)))}return x}var y=l(0),E=l(1),I=l(16777216);n=a.prototype,n.m=function(){if(H(this))return-F(this).m();for(var R=0,C=1,D=0;D<this.g.length;D++){var x=this.i(D);R+=(0<=x?x:4294967296+x)*C,C*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(H(this))return"-"+F(this).toString(R);for(var C=f(Math.pow(R,6)),D=this,x="";;){var M=le(D,C).g;D=W(D,M.j(C));var k=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=M,N(D))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function H(R){return R.h==-1}n.l=function(R){return R=W(this,R),H(R)?-1:N(R)?0:1};function F(R){for(var C=R.g.length,D=[],x=0;x<C;x++)D[x]=~R.g[x];return new a(D,~R.h).add(E)}n.abs=function(){return H(this)?F(this):this},n.add=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0,M=0;M<=C;M++){var k=x+(this.i(M)&65535)+(R.i(M)&65535),A=(k>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);x=A>>>16,k&=65535,A&=65535,D[M]=A<<16|k}return new a(D,D[D.length-1]&-2147483648?-1:0)};function W(R,C){return R.add(F(C))}n.j=function(R){if(N(this)||N(R))return y;if(H(this))return H(R)?F(this).j(F(R)):F(F(this).j(R));if(H(R))return F(this.j(F(R)));if(0>this.l(I)&&0>R.l(I))return f(this.m()*R.m());for(var C=this.g.length+R.g.length,D=[],x=0;x<2*C;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<R.g.length;M++){var k=this.i(x)>>>16,A=this.i(x)&65535,Dt=R.i(M)>>>16,Lr=R.i(M)&65535;D[2*x+2*M]+=A*Lr,oe(D,2*x+2*M),D[2*x+2*M+1]+=k*Lr,oe(D,2*x+2*M+1),D[2*x+2*M+1]+=A*Dt,oe(D,2*x+2*M+1),D[2*x+2*M+2]+=k*Dt,oe(D,2*x+2*M+2)}for(x=0;x<C;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=C;x<2*C;x++)D[x]=0;return new a(D,0)};function oe(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function se(R,C){this.g=R,this.h=C}function le(R,C){if(N(C))throw Error("division by zero");if(N(R))return new se(y,y);if(H(R))return C=le(F(R),C),new se(F(C.g),F(C.h));if(H(C))return C=le(R,F(C)),new se(F(C.g),C.h);if(30<R.g.length){if(H(R)||H(C))throw Error("slowDivide_ only works with positive integers.");for(var D=E,x=C;0>=x.l(R);)D=Ye(D),x=Ye(x);var M=be(D,1),k=be(x,1);for(x=be(x,2),D=be(D,2);!N(x);){var A=k.add(x);0>=A.l(R)&&(M=M.add(D),k=A),x=be(x,1),D=be(D,1)}return C=W(R,M.j(C)),new se(M,C)}for(M=y;0<=R.l(C);){for(D=Math.max(1,Math.floor(R.m()/C.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=f(D),A=k.j(C);H(A)||0<A.l(R);)D-=x,k=f(D),A=k.j(C);N(k)&&(k=E),M=M.add(k),R=W(R,A)}return new se(M,R)}n.A=function(R){return le(this,R).h},n.and=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0;x<C;x++)D[x]=this.i(x)&R.i(x);return new a(D,this.h&R.h)},n.or=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0;x<C;x++)D[x]=this.i(x)|R.i(x);return new a(D,this.h|R.h)},n.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0;x<C;x++)D[x]=this.i(x)^R.i(x);return new a(D,this.h^R.h)};function Ye(R){for(var C=R.g.length+1,D=[],x=0;x<C;x++)D[x]=R.i(x)<<1|R.i(x-1)>>>31;return new a(D,R.h)}function be(R,C){var D=C>>5;C%=32;for(var x=R.g.length-D,M=[],k=0;k<x;k++)M[k]=0<C?R.i(k+D)>>>C|R.i(k+D+1)<<32-C:R.i(k+D);return new a(M,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,V0=T1.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Po=T1.Integer=a}).apply(typeof I1<"u"?I1:typeof self<"u"?self:typeof window<"u"?window:{});var j_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},No={};var U0,r8,ll,j0,nf,B_,B0,z0,$0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,v){return d==Array.prototype||d==Object.prototype||(d[m]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof j_=="object"&&j_];for(var m=0;m<d.length;++m){var v=d[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,m){if(m)e:{var v=r;d=d.split(".");for(var b=0;b<d.length-1;b++){var P=d[b];if(!(P in v))break e;v=v[P]}d=d[d.length-1],b=v[d],m=m(b),m!=b&&m!=null&&e(v,d,{configurable:!0,writable:!0,value:m})}}function o(d,m){d instanceof String&&(d+="");var v=0,b=!1,P={next:function(){if(!b&&v<d.length){var B=v++;return{value:m(B,d[B]),done:!1}}return b=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(d){return d||function(){return o(this,function(m,v){return v})}});var a=a||{},u=this||self;function l(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function f(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function g(d,m,v){return d.call.apply(d.bind,arguments)}function y(d,m,v){if(!d)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,b),d.apply(m,P)}}return function(){return d.apply(m,arguments)}}function E(d,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,E.apply(null,arguments)}function I(d,m){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),d.apply(this,b)}}function N(d,m){function v(){}v.prototype=m.prototype,d.aa=m.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(b,P,B){for(var J=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)J[ke-2]=arguments[ke];return m.prototype[P].apply(b,J)}}function H(d){let m=d.length;if(0<m){let v=Array(m);for(let b=0;b<m;b++)v[b]=d[b];return v}return[]}function F(d,m){for(let v=1;v<arguments.length;v++){let b=arguments[v];if(l(b)){let P=d.length||0,B=b.length||0;d.length=P+B;for(let J=0;J<B;J++)d[P+J]=b[J]}else d.push(b)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function oe(d){return/^[\s\xa0]*$/.test(d)}function se(){var d=u.navigator;return d&&(d=d.userAgent)?d:""}function le(d){return le[" "](d),d}le[" "]=function(){};var Ye=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function be(d,m,v){for(let b in d)m.call(v,d[b],b,d)}function R(d,m){for(let v in d)m.call(void 0,d[v],v,d)}function C(d){let m={};for(let v in d)m[v]=d[v];return m}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(d,m){let v,b;for(let P=1;P<arguments.length;P++){b=arguments[P];for(v in b)d[v]=b[v];for(let B=0;B<D.length;B++)v=D[B],Object.prototype.hasOwnProperty.call(b,v)&&(d[v]=b[v])}}function M(d){var m=1;d=d.split(":");let v=[];for(;0<m&&d.length;)v.push(d.shift()),m--;return d.length&&v.push(d.join(":")),v}function k(d){u.setTimeout(()=>{throw d},0)}function A(){var d=ut;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class Dt{constructor(){this.h=this.g=null}add(m,v){let b=Lr.get();b.set(m,v),this.h?this.h.next=b:this.g=b,this.h=b}}var Lr=new W(()=>new Ie,d=>d.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Bo,pe=!1,ut=new Dt,fn=()=>{let d=u.Promise.resolve(void 0);Bo=()=>{d.then(bn)}};var bn=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(v){k(v)}var m=Lr;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}pe=!1};function rt(){this.s=this.s,this.C=this.C}rt.prototype.s=!1,rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ue=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};u.addEventListener("test",v,m),u.removeEventListener("test",v,m)}catch{}return d})();function kn(d,m){if(ve.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,b=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(Ye){e:{try{le(m.nodeName);var P=!0;break e}catch{}P=!1}P||(m=null)}}else v=="mouseover"?m=d.fromElement:v=="mouseout"&&(m=d.toElement);this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ci[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&kn.aa.h.call(this)}}N(kn,ve);var ci={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var zo="closure_listenable_"+(1e6*Math.random()|0),Fl=0;function Vl(d,m,v,b,P){this.listener=d,this.proxy=null,this.src=m,this.type=v,this.capture=!!b,this.ha=P,this.key=++Fl,this.da=this.fa=!1}function ui(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function $o(d){this.src=d,this.g={},this.h=0}$o.prototype.add=function(d,m,v,b,P){var B=d.toString();d=this.g[B],d||(d=this.g[B]=[],this.h++);var J=Ac(d,m,b,P);return-1<J?(m=d[J],v||(m.fa=!1)):(m=new Vl(m,this.src,B,!!b,P),m.fa=v,d.push(m)),m};function Ul(d,m){var v=m.type;if(v in d.g){var b=d.g[v],P=Array.prototype.indexOf.call(b,m,void 0),B;(B=0<=P)&&Array.prototype.splice.call(b,P,1),B&&(ui(m),d.g[v].length==0&&(delete d.g[v],d.h--))}}function Ac(d,m,v,b){for(var P=0;P<d.length;++P){var B=d[P];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==b)return P}return-1}var xc="closure_lm_"+(1e6*Math.random()|0),ta={};function na(d,m,v,b,P){if(b&&b.once)return Rc(d,m,v,b,P);if(Array.isArray(m)){for(var B=0;B<m.length;B++)na(d,m[B],v,b,P);return null}return v=Nc(v),d&&d[zo]?d.K(m,v,f(b)?!!b.capture:!!b,P):kf(d,m,v,!1,b,P)}function kf(d,m,v,b,P,B){if(!m)throw Error("Invalid event type");var J=f(P)?!!P.capture:!!P,ke=ra(d);if(ke||(d[xc]=ke=new $o(d)),v=ke.add(m,v,b,J,B),v.proxy)return v;if(b=Of(),v.proxy=b,b.src=d,b.listener=v,d.addEventListener)Ue||(P=J),P===void 0&&(P=!1),d.addEventListener(m.toString(),b,P);else if(d.attachEvent)d.attachEvent(Lf(m.toString()),b);else if(d.addListener&&d.removeListener)d.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Of(){function d(v){return m.call(d.src,d.listener,v)}let m=_y;return d}function Rc(d,m,v,b,P){if(Array.isArray(m)){for(var B=0;B<m.length;B++)Rc(d,m[B],v,b,P);return null}return v=Nc(v),d&&d[zo]?d.L(m,v,f(b)?!!b.capture:!!b,P):kf(d,m,v,!0,b,P)}function jl(d,m,v,b,P){if(Array.isArray(m))for(var B=0;B<m.length;B++)jl(d,m[B],v,b,P);else b=f(b)?!!b.capture:!!b,v=Nc(v),d&&d[zo]?(d=d.i,m=String(m).toString(),m in d.g&&(B=d.g[m],v=Ac(B,v,b,P),-1<v&&(ui(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete d.g[m],d.h--)))):d&&(d=ra(d))&&(m=d.g[m.toString()],d=-1,m&&(d=Ac(m,v,b,P)),(v=-1<d?m[d]:null)&&Mc(v))}function Mc(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[zo])Ul(m.i,d);else{var v=d.type,b=d.proxy;m.removeEventListener?m.removeEventListener(v,b,d.capture):m.detachEvent?m.detachEvent(Lf(v),b):m.addListener&&m.removeListener&&m.removeListener(b),(v=ra(m))?(Ul(v,d),v.h==0&&(v.src=null,m[xc]=null)):ui(d)}}}function Lf(d){return d in ta?ta[d]:ta[d]="on"+d}function _y(d,m){if(d.da)d=!0;else{m=new kn(m,this);var v=d.listener,b=d.ha||d.src;d.fa&&Mc(d),d=v.call(b,m)}return d}function ra(d){return d=d[xc],d instanceof $o?d:null}var Pc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nc(d){return typeof d=="function"?d:(d[Pc]||(d[Pc]=function(m){return d.handleEvent(m)}),d[Pc])}function en(){rt.call(this),this.i=new $o(this),this.M=this,this.F=null}N(en,rt),en.prototype[zo]=!0,en.prototype.removeEventListener=function(d,m,v,b){jl(this,d,m,v,b)};function tn(d,m){var v,b=d.F;if(b)for(v=[];b;b=b.F)v.push(b);if(d=d.M,b=m.type||m,typeof m=="string")m=new ve(m,d);else if(m instanceof ve)m.target=m.target||d;else{var P=m;m=new ve(b,d),x(m,P)}if(P=!0,v)for(var B=v.length-1;0<=B;B--){var J=m.g=v[B];P=ia(J,b,!0,m)&&P}if(J=m.g=d,P=ia(J,b,!0,m)&&P,P=ia(J,b,!1,m)&&P,v)for(B=0;B<v.length;B++)J=m.g=v[B],P=ia(J,b,!1,m)&&P}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var v=d.g[m],b=0;b<v.length;b++)ui(v[b]);delete d.g[m],d.h--}}this.F=null},en.prototype.K=function(d,m,v,b){return this.i.add(String(d),m,!1,v,b)},en.prototype.L=function(d,m,v,b){return this.i.add(String(d),m,!0,v,b)};function ia(d,m,v,b){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,B=0;B<m.length;++B){var J=m[B];if(J&&!J.da&&J.capture==v){var ke=J.listener,yt=J.ha||J.src;J.fa&&Ul(d.i,J),P=ke.call(yt,b)!==!1&&P}}return P&&!b.defaultPrevented}function Ff(d,m,v){if(typeof d=="function")v&&(d=E(d,v));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(d,m||0)}function Bl(d){d.g=Ff(()=>{d.g=null,d.i&&(d.i=!1,Bl(d))},d.l);let m=d.h;d.h=null,d.m.apply(null,m)}class zl extends rt{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Bl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ho(d){rt.call(this),this.h=d,this.g={}}N(Ho,rt);var Vf=[];function qo(d){be(d.g,function(m,v){this.g.hasOwnProperty(v)&&Mc(m)},d),d.g={}}Ho.prototype.N=function(){Ho.aa.N.call(this),qo(this)},Ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $l=u.JSON.stringify,vy=u.JSON.parse,Uf=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function kc(){}kc.prototype.h=null;function Hl(d){return d.h||(d.h=d.i())}function jf(){}var oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ql(){ve.call(this,"d")}N(ql,ve);function Wl(){ve.call(this,"c")}N(Wl,ve);var Xi={},Bf=null;function Wo(){return Bf=Bf||new en}Xi.La="serverreachability";function zf(d){ve.call(this,Xi.La,d)}N(zf,ve);function sa(d){let m=Wo();tn(m,new zf(m))}Xi.STAT_EVENT="statevent";function $f(d,m){ve.call(this,Xi.STAT_EVENT,d),this.stat=m}N($f,ve);function pn(d){let m=Wo();tn(m,new $f(m,d))}Xi.Ma="timingevent";function rr(d,m){ve.call(this,Xi.Ma,d),this.size=m}N(rr,ve);function ce(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},m)}function Go(){this.g=!0}Go.prototype.xa=function(){this.g=!1};function Hf(d,m,v,b,P,B){d.info(function(){if(d.g)if(B)for(var J="",ke=B.split("&"),yt=0;yt<ke.length;yt++){var He=ke[yt].split("=");if(1<He.length){var ft=He[0];He=He[1];var nn=ft.split("_");J=2<=nn.length&&nn[1]=="type"?J+(ft+"="+He+"&"):J+(ft+"=redacted&")}}else J=null;else J=B;return"XMLHTTP REQ ("+b+") [attempt "+P+"]: "+m+`
`+v+`
`+J})}function qf(d,m,v,b,P,B,J){d.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+P+"]: "+m+`
`+v+`
`+B+" "+J})}function eo(d,m,v,b){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+Wf(d,v)+(b?" "+b:"")})}function Gl(d,m){d.info(function(){return"TIMEOUT: "+m})}Go.prototype.info=function(){};function Wf(d,m){if(!d.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var b=v[d];if(!(2>b.length)){var P=b[1];if(Array.isArray(P)&&!(1>P.length)){var B=P[0];if(B!="noop"&&B!="stop"&&B!="close")for(var J=1;J<P.length;J++)P[J]=""}}}}return $l(v)}catch{return m}}var Fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zl;function Oc(){}N(Oc,kc),Oc.prototype.g=function(){return new XMLHttpRequest},Oc.prototype.i=function(){return{}},Zl=new Oc;function li(d,m,v,b){this.j=d,this.i=m,this.l=v,this.R=b||1,this.U=new Ho(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gf}function Gf(){this.i=null,this.g="",this.h=!1}var Ql={},Yl={};function Ko(d,m,v){d.L=1,d.v=Qo(mn(m)),d.m=v,d.P=!0,Kf(d,null)}function Kf(d,m){d.F=Date.now(),Lc(d),d.A=mn(d.v);var v=d.A,b=d.R;Array.isArray(b)||(b=[String(b)]),it(v.i,"t",b),d.C=0,v=d.j.J,d.h=new Gf,d.g=va(d.j,v?m:null,!d.m),0<d.O&&(d.M=new zl(E(d.Y,d,d.g),d.O)),m=d.U,v=d.g,b=d.ca;var P="readystatechange";Array.isArray(P)||(P&&(Vf[0]=P.toString()),P=Vf);for(var B=0;B<P.length;B++){var J=na(v,P[B],b||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),sa(),Hf(d.i,d.u,d.A,d.l,d.R,d.m)}li.prototype.ca=function(d){d=d.target;let m=this.M;m&&or(d)==3?m.j():this.Y(d)},li.prototype.Y=function(d){try{if(d==this.g)e:{let nn=or(this.g);var m=this.g.Ba();let ar=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||tp(this.g)))){this.J||nn!=4||m==7||(m==8||0>=ar?sa(3):sa(2)),aa(this);var v=this.g.Z();this.X=v;t:if(Zf(this)){var b=tp(this.g);d="";var P=b.length,B=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){di(this),Vr(this);var J="";break t}this.h.i=new u.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,d+=this.h.i.decode(b[m],{stream:!(B&&m==P-1)});b.length=0,this.h.g+=d,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=v==200,qf(this.i,this.u,this.A,this.l,this.R,nn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,yt=this.g;if((ke=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(ke)){var He=ke;break t}}He=null}if(v=He)eo(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fc(this,v);else{this.o=!1,this.s=3,pn(12),di(this),Vr(this);break e}}if(this.P){v=!0;let cr;for(;!this.J&&this.C<J.length;)if(cr=yy(this,J),cr==Yl){nn==4&&(this.s=4,pn(14),v=!1),eo(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Ql){this.s=4,pn(15),eo(this.i,this.l,J,"[Invalid Chunk]"),v=!1;break}else eo(this.i,this.l,cr,null),Fc(this,cr);if(Zf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||J.length!=0||this.h.h||(this.s=1,pn(16),v=!1),this.o=this.o&&v,!v)eo(this.i,this.l,J,"[Invalid Chunked Response]"),di(this),Vr(this);else if(0<J.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),$c(ft),ft.M=!0,pn(11))}}else eo(this.i,this.l,J,null),Fc(this,J);nn==4&&di(this),this.o&&!this.J&&(nn==4?op(this.j,this):(this.o=!1,Lc(this)))}else np(this.g),v==400&&0<J.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),di(this),Vr(this)}}}catch{}finally{}};function Zf(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function yy(d,m){var v=d.C,b=m.indexOf(`
`,v);return b==-1?Yl:(v=Number(m.substring(v,b)),isNaN(v)?Ql:(b+=1,b+v>m.length?Yl:(m=m.slice(b,b+v),d.C=b+v,m)))}li.prototype.cancel=function(){this.J=!0,di(this)};function Lc(d){d.S=Date.now()+d.I,Qf(d,d.I)}function Qf(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ce(E(d.ba,d),m)}function aa(d){d.B&&(u.clearTimeout(d.B),d.B=null)}li.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Gl(this.i,this.A),this.L!=2&&(sa(),pn(17)),di(this),this.s=2,Vr(this)):Qf(this,this.S-d)};function Vr(d){d.j.G==0||d.J||op(d.j,d)}function di(d){aa(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,qo(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function Fc(d,m){try{var v=d.j;if(v.G!=0&&(v.g==d||hi(v.h,d))){if(!d.K&&hi(v.h,d)&&v.G==3){try{var b=v.Da.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var P=b;if(P[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)Hc(v),jc(v);else break e;ud(v),pn(18)}}else v.za=P[1],0<v.za-v.T&&37500>P[2]&&v.F&&v.v==0&&!v.C&&(v.C=ce(E(v.Za,v),6e3));if(1>=ua(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else io(v,11)}else if((d.K||v.g==d)&&Hc(v),!oe(m))for(P=v.Da.g.parse(m),m=0;m<P.length;m++){let He=P[m];if(v.T=He[0],He=He[1],v.G==2)if(He[0]=="c"){v.K=He[1],v.ia=He[2];let ft=He[3];ft!=null&&(v.la=ft,v.j.info("VER="+v.la));let nn=He[4];nn!=null&&(v.Aa=nn,v.j.info("SVER="+v.Aa));let ar=He[5];ar!=null&&typeof ar=="number"&&0<ar&&(b=1.5*ar,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;let cr=d.g;if(cr){let gi=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gi){var B=b.h;B.g||gi.indexOf("spdy")==-1&&gi.indexOf("quic")==-1&&gi.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(fi(B,B.h),B.h=null))}if(b.D){let Gc=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gc&&(b.ya=Gc,Je(b.I,b.D,Gc))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var J=d;if(b.qa=hd(b,b.J?b.ia:null,b.W),J.K){Vc(b.h,J);var ke=J,yt=b.L;yt&&(ke.I=yt),ke.B&&(aa(ke),Lc(ke)),b.g=J}else zc(b);0<v.i.length&&Bc(v)}else He[0]!="stop"&&He[0]!="close"||io(v,7);else v.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?io(v,7):_a(v):He[0]!="noop"&&v.l&&v.l.ta(He),v.v=0)}}sa(4)}catch{}}var ca=class{constructor(d,m){this.g=d,this.map=m}};function $e(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ht(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ua(d){return d.h?1:d.g?d.g.size:0}function hi(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function fi(d,m){d.g?d.g.add(m):d.h=m}function Vc(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}$e.prototype.cancel=function(){if(this.i=xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function xe(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(let v of d.g.values())m=m.concat(v.D);return m}return H(d.i)}function St(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var m=[],v=d.length,b=0;b<v;b++)m.push(d[b]);return m}m=[],v=0;for(b in d)m[v++]=d[b];return m}function Jl(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var m=[];d=d.length;for(var v=0;v<d;v++)m.push(v);return m}m=[],v=0;for(let b in d)m[v++]=b;return m}}}function la(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var v=Jl(d),b=St(d),P=b.length,B=0;B<P;B++)m.call(void 0,b[B],v&&v[B],d)}var On=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wy(d,m){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var b=d[v].indexOf("="),P=null;if(0<=b){var B=d[v].substring(0,b);P=d[v].substring(b+1)}else B=d[v];m(B,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function wr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof wr){this.h=d.h,pt(this,d.j),this.o=d.o,this.g=d.g,Er(this,d.s),this.l=d.l;var m=d.i,v=new no;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Zo(this,v),this.m=d.m}else d&&(m=String(d).match(On))?(this.h=!1,pt(this,m[1]||"",!0),this.o=Ur(m[2]||""),this.g=Ur(m[3]||"",!0),Er(this,m[4]),this.l=Ur(m[5]||"",!0),Zo(this,m[6]||"",!0),this.m=Ur(m[7]||"")):(this.h=!1,this.i=new no(null,this.h))}wr.prototype.toString=function(){var d=[],m=this.j;m&&d.push(to(m,da,!0),":");var v=this.g;return(v||m=="file")&&(d.push("//"),(m=this.o)&&d.push(to(m,da,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(to(v,v.charAt(0)=="/"?td:ed,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",to(v,Yf)),d.join("")};function mn(d){return new wr(d)}function pt(d,m,v){d.j=v?Ur(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function Er(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function Zo(d,m,v){m instanceof no?(d.i=m,nd(d.i,d.h)):(v||(m=to(m,Uc)),d.i=new no(m,d.h))}function Je(d,m,v){d.i.set(m,v)}function Qo(d){return Je(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ur(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function to(d,m,v){return typeof d=="string"?(d=encodeURI(d).replace(m,Xl),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Xl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var da=/[#\/\?@]/g,ed=/[#\?:]/g,td=/[#\?]/g,Uc=/[#\?@]/g,Yf=/#/g;function no(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function pi(d){d.g||(d.g=new Map,d.h=0,d.i&&wy(d.i,function(m,v){d.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=no.prototype,n.add=function(d,m){pi(this),this.i=null,d=ro(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(m),this.h+=1,this};function ye(d,m){pi(d),m=ro(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function ir(d,m){return pi(d),m=ro(d,m),d.g.has(m)}n.forEach=function(d,m){pi(this),this.g.forEach(function(v,b){v.forEach(function(P){d.call(m,P,b,this)},this)},this)},n.na=function(){pi(this);let d=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let b=0;b<m.length;b++){let P=d[b];for(let B=0;B<P.length;B++)v.push(m[b])}return v},n.V=function(d){pi(this);let m=[];if(typeof d=="string")ir(this,d)&&(m=m.concat(this.g.get(ro(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)m=m.concat(d[v])}return m},n.set=function(d,m){return pi(this),this.i=null,d=ro(this,d),ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},n.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function it(d,m,v){ye(d,m),0<v.length&&(d.i=null,d.g.set(ro(d,m),H(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var b=m[v];let B=encodeURIComponent(String(b)),J=this.V(b);for(b=0;b<J.length;b++){var P=B;J[b]!==""&&(P+="="+encodeURIComponent(String(J[b]))),d.push(P)}}return this.i=d.join("&")};function ro(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function nd(d,m){m&&!d.j&&(pi(d),d.i=null,d.g.forEach(function(v,b){var P=b.toLowerCase();b!=P&&(ye(this,b),it(this,P,v))},d)),d.j=m}function rd(d,m){let v=new Go;if(u.Image){let b=new Image;b.onload=I(In,v,"TestLoadImage: loaded",!0,m,b),b.onerror=I(In,v,"TestLoadImage: error",!1,m,b),b.onabort=I(In,v,"TestLoadImage: abort",!1,m,b),b.ontimeout=I(In,v,"TestLoadImage: timeout",!1,m,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=d}else m(!1)}function id(d,m){let v=new Go,b=new AbortController,P=setTimeout(()=>{b.abort(),In(v,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:b.signal}).then(B=>{clearTimeout(P),B.ok?In(v,"TestPingServer: ok",!0,m):In(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),In(v,"TestPingServer: error",!1,m)})}function In(d,m,v,b,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),b(v)}catch{}}function od(){this.g=new Uf}function ha(d,m,v){let b=v||"";try{la(d,function(P,B){let J=P;f(P)&&(J=$l(P)),m.push(b+B+"="+encodeURIComponent(J))})}catch(P){throw m.push(b+"type="+encodeURIComponent("_badmap")),P}}function At(d){this.l=d.Ub||null,this.j=d.eb||!1}N(At,kc),At.prototype.g=function(){return new br(this.l,this.j)},At.prototype.i=(function(d){return function(){return d}})({});function br(d,m){en.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(br,en),n=br.prototype,n.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,fa(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yo(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sd(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function sd(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?Yo(this):fa(this),this.readyState==3&&sd(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Yo(this))},n.Qa=function(d){this.g&&(this.response=d,Yo(this))},n.ga=function(){this.g&&Yo(this)};function Yo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,fa(d)}n.setRequestHeader=function(d,m){this.u.append(d,m)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=m.next();return d.join(`\r
`)};function fa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ad(d){let m="";return be(d,function(v,b){m+=b,m+=":",m+=v,m+=`\r
`}),m}function pa(d,m,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=ad(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):Je(d,m,v))}function vt(d){en.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(vt,en);var Jf=/^https?$/i,je=["POST","PUT"];n=vt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,m,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zl.g(),this.v=this.o?Hl(this.o):Hl(Zl),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(B){Xf(this,B);return}if(d=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var P in b)v.set(P,b[P]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let B of b.keys())v.set(B,b.get(B));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),P=u.FormData&&d instanceof u.FormData,!(0<=Array.prototype.indexOf.call(je,m,void 0))||b||P||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,J]of v)this.g.setRequestHeader(B,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ep(this),this.u=!0,this.g.send(d),this.u=!1}catch(B){Xf(this,B)}};function Xf(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,qn(d),ma(d)}function qn(d){d.A||(d.A=!0,tn(d,"complete"),tn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,tn(this,"complete"),tn(this,"abort"),ma(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ma(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Jo(this):this.bb())},n.bb=function(){Jo(this)};function Jo(d){if(d.h&&typeof a<"u"&&(!d.v[1]||or(d)!=4||d.Z()!=2)){if(d.u&&or(d)==4)Ff(d.Ea,0,d);else if(tn(d,"readystatechange"),or(d)==4){d.h=!1;try{let J=d.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var b;if(b=J===0){var P=String(d.D).match(On)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),b=!Jf.test(P?P.toLowerCase():"")}v=b}if(v)tn(d,"complete"),tn(d,"success");else{d.m=6;try{var B=2<or(d)?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.Z()+"]",qn(d)}}finally{ma(d)}}}}function ma(d,m){if(d.g){ep(d);let v=d.g,b=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||tn(d,"ready");try{v.onreadystatechange=b}catch{}}}function ep(d){d.I&&(u.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function or(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),vy(m)}};function tp(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function np(d){let m={};d=(d.g&&2<=or(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<d.length;b++){if(oe(d[b]))continue;var v=M(d[b]);let P=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let B=m[P]||[];m[P]=B,B.push(v)}R(m,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ga(d,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||m}function rp(d){this.Aa=0,this.i=[],this.j=new Go,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ga("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ga("baseRetryDelayMs",5e3,d),this.cb=ga("retryDelaySeedMs",1e4,d),this.Wa=ga("forwardChannelMaxRetries",2,d),this.wa=ga("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(d&&d.concurrentRequestLimit),this.Da=new od,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=rp.prototype,n.la=8,n.G=1,n.connect=function(d,m,v,b){pn(0),this.W=d,this.H=m||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=hd(this,null,this.W),Bc(this)};function _a(d){if(sr(d),d.G==3){var m=d.U++,v=mn(d.I);if(Je(v,"SID",d.K),Je(v,"RID",m),Je(v,"TYPE","terminate"),Xo(d,v),m=new li(d,d.j,m),m.L=2,m.v=Qo(mn(v)),v=!1,u.navigator&&u.navigator.sendBeacon)try{v=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&u.Image&&(new Image().src=m.v,v=!0),v||(m.g=va(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Lc(m)}dd(d)}function jc(d){d.g&&($c(d),d.g.cancel(),d.g=null)}function sr(d){jc(d),d.u&&(u.clearTimeout(d.u),d.u=null),Hc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&u.clearTimeout(d.s),d.s=null)}function Bc(d){if(!ht(d.h)&&!d.s){d.s=!0;var m=d.Ga;Bo||fn(),pe||(Bo(),pe=!0),ut.add(m,d),d.B=0}}function ip(d,m){return ua(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ce(E(d.Ga,d,m),qc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let P=new li(this,this.j,d),B=this.o;if(this.S&&(B?(B=C(B),x(B,this.S)):B=this.S),this.m!==null||this.O||(P.H=B,B=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=cd(this,P,m),v=mn(this.I),Je(v,"RID",d),Je(v,"CVER",22),this.D&&Je(v,"X-HTTP-Session-Id",this.D),Xo(this,v),B&&(this.O?m="headers="+encodeURIComponent(String(ad(B)))+"&"+m:this.m&&pa(v,this.m,B)),fi(this.h,P),this.Ua&&Je(v,"TYPE","init"),this.P?(Je(v,"$req",m),Je(v,"SID","null"),P.T=!0,Ko(P,v,null)):Ko(P,v,m),this.G=2}}else this.G==3&&(d?jr(this,d):this.i.length==0||ht(this.h)||jr(this))};function jr(d,m){var v;m?v=m.l:v=d.U++;let b=mn(d.I);Je(b,"SID",d.K),Je(b,"RID",v),Je(b,"AID",d.T),Xo(d,b),d.m&&d.o&&pa(b,d.m,d.o),v=new li(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),m&&(d.i=m.D.concat(d.i)),m=cd(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),fi(d.h,v),Ko(v,b,m)}function Xo(d,m){d.H&&be(d.H,function(v,b){Je(m,b,v)}),d.l&&la({},function(v,b){Je(m,b,v)})}function cd(d,m,v){v=Math.min(d.i.length,v);var b=d.l?E(d.l.Na,d.l,d):null;e:{var P=d.i;let B=-1;for(;;){let J=["count="+v];B==-1?0<v?(B=P[0].g,J.push("ofs="+B)):B=0:J.push("ofs="+B);let ke=!0;for(let yt=0;yt<v;yt++){let He=P[yt].g,ft=P[yt].map;if(He-=B,0>He)B=Math.max(0,P[yt].g-100),ke=!1;else try{ha(ft,J,"req"+He+"_")}catch{b&&b(ft)}}if(ke){b=J.join("&");break e}}}return d=d.i.splice(0,v),m.D=d,b}function zc(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;Bo||fn(),pe||(Bo(),pe=!0),ut.add(m,d),d.v=0}}function ud(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ce(E(d.Fa,d),qc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,ld(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ce(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),jc(this),ld(this))};function $c(d){d.A!=null&&(u.clearTimeout(d.A),d.A=null)}function ld(d){d.g=new li(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=mn(d.qa);Je(m,"RID","rpc"),Je(m,"SID",d.K),Je(m,"AID",d.T),Je(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&Je(m,"TO",d.ja),Je(m,"TYPE","xmlhttp"),Xo(d,m),d.m&&d.o&&pa(m,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=Qo(mn(m)),v.m=null,v.P=!0,Kf(v,d)}n.Za=function(){this.C!=null&&(this.C=null,jc(this),ud(this),pn(19))};function Hc(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function op(d,m){var v=null;if(d.g==m){Hc(d),$c(d),d.g=null;var b=2}else if(hi(d.h,m))v=m.D,Vc(d.h,m),b=1;else return;if(d.G!=0){if(m.o)if(b==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var P=d.B;b=Wo(),tn(b,new rr(b,v)),Bc(d)}else zc(d);else if(P=m.s,P==3||P==0&&0<m.X||!(b==1&&ip(d,m)||b==2&&ud(d)))switch(v&&0<v.length&&(m=d.h,m.i=m.i.concat(v)),P){case 1:io(d,5);break;case 4:io(d,10);break;case 3:io(d,6);break;default:io(d,2)}}}function qc(d,m){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*m}function io(d,m){if(d.j.info("Error code "+m),m==2){var v=E(d.fb,d),b=d.Xa;let P=!b;b=new wr(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||pt(b,"https"),Qo(b),P?rd(b.toString(),v):id(b.toString(),v)}else pn(2);d.G=0,d.l&&d.l.sa(m),dd(d),sr(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function dd(d){if(d.G=0,d.ka=[],d.l){let m=xe(d.h);(m.length!=0||d.i.length!=0)&&(F(d.ka,m),F(d.ka,d.i),d.h.i.length=0,H(d.i),d.i.length=0),d.l.ra()}}function hd(d,m,v){var b=v instanceof wr?mn(v):new wr(v);if(b.g!="")m&&(b.g=m+"."+b.g),Er(b,b.s);else{var P=u.location;b=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var B=new wr(null);b&&pt(B,b),m&&(B.g=m),P&&Er(B,P),v&&(B.l=v),b=B}return v=d.D,m=d.ya,v&&m&&Je(b,v,m),Je(b,"VER",d.la),Xo(d,b),b}function va(d,m,v){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new vt(new At({eb:v})):new vt(d.pa),m.Ha(d.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mi(){}n=mi.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Wc(){}Wc.prototype.g=function(d,m){return new Yt(d,m)};function Yt(d,m){en.call(this),this.g=new rp(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!oe(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!oe(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new oo(this)}N(Yt,en),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){_a(this.g)},Yt.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=$l(d),d=v);m.i.push(new ca(m.Ya++,d)),m.G==3&&Bc(m)},Yt.prototype.N=function(){this.g.l=null,delete this.j,_a(this.g),delete this.g,Yt.aa.N.call(this)};function Ln(d){ql.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(let v in m){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}N(Ln,ql);function fd(){Wl.call(this),this.status=1}N(fd,Wl);function oo(d){this.g=d}N(oo,mi),oo.prototype.ua=function(){tn(this.g,"a")},oo.prototype.ta=function(d){tn(this.g,new Ln(d))},oo.prototype.sa=function(d){tn(this.g,new fd)},oo.prototype.ra=function(){tn(this.g,"b")},Wc.prototype.createWebChannel=Wc.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,$0=No.createWebChannelTransport=function(){return new Wc},z0=No.getStatEventTarget=function(){return Wo()},B0=No.Event=Xi,B_=No.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,nf=No.ErrorCode=Fr,Kl.COMPLETE="complete",j0=No.EventType=Kl,jf.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",en.prototype.listen=en.prototype.K,ll=No.WebChannel=jf,r8=No.FetchXmlHttpFactory=At,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,U0=No.XhrIo=vt}).apply(typeof j_<"u"?j_:typeof self<"u"?self:typeof window<"u"?window:{});var C1="@firebase/firestore",D1="4.8.0";var dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");var Rl="11.10.0";var vc=new Vi("@firebase/firestore");function dl(){return vc.logLevel}function ie(n,...e){if(vc.logLevel<=Ve.DEBUG){let t=e.map(MC);vc.debug(`Firestore (${Rl}): ${n}`,...t)}}function ko(n,...e){if(vc.logLevel<=Ve.ERROR){let t=e.map(MC);vc.error(`Firestore (${Rl}): ${n}`,...t)}}function Gs(n,...e){if(vc.logLevel<=Ve.WARN){let t=e.map(MC);vc.warn(`Firestore (${Rl}): ${n}`,...t)}}function MC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,vk(n,r,t)}function vk(n,e,t){let r=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ko(r),new Error(r)}function nt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||vk(e,i,r)}function Ae(n,e){return n}var G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ri=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var K_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},K0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}},Z0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Q0=class{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ri,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=o;e.enqueueRetryable(()=>T(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},u=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?u(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ri)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string",31837,{l:r}),new K_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new dn(e)}},Y0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},J0=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Y0(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Z_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},X0=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);let r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Z_(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Z_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function i8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function yk(){return new TextEncoder}var uf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=i8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Oe(n,e){return n<e?-1:n>e?1:0}function eT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Oe(r,i);{let o=yk(),a=o8(o.encode(S1(n,t)),o.encode(S1(e,t)));return a!==0?a:Oe(r,i)}}t+=r>65535?2:1}return Oe(n.length,e.length)}function S1(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function o8(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function vl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var A1="__name__",Q_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Oe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):eT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}},Ct=class n extends Q_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},s8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yr=class n extends Q_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return s8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===A1}static keyField(){return new n([A1])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ee(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new ee(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new ee(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var he=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ct.fromString(e))}static fromName(e){return new n(Ct.fromString(e).popFirst(5))}static empty(){return new n(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ct(e.slice()))}};function wk(n,e,t){if(!t)throw new ee(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function a8(n,e,t,r){if(e===!0&&r===!0)throw new ee(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function x1(n){if(!he.isDocumentKey(n))throw new ee(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function R1(n){if(he.isDocumentKey(n))throw new ee(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ek(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Av(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Av(n);throw new ee(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Zt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Tf(n,e){if(!Ek(n))throw new ee(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ee(G.INVALID_ARGUMENT,t);return!0}var M1=-62135596800,P1=1e6,Qt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*P1);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<M1)throw new ee(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/P1}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-M1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qt._jsonSchemaVersion="firestore/timestamp/1.0",Qt._jsonSchema={type:Zt("string",Qt._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};var Pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Qt(0,0))}static max(){return new n(new Qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var lf=-1,tT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};tT.UNKNOWN_ID=-1;function c8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(r===1e9?new Qt(t+1,0):new Qt(t,r));return new yc(i,he.empty(),e)}function u8(n){return new yc(n.readTime,n.key,lf)}var yc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Pe.min(),he.empty(),lf)}static max(){return new n(Pe.max(),he.empty(),lf)}};function l8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}var d8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",nT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ml(n){return T(this,null,function*(){if(n.code!==G.FAILED_PRECONDITION||n.message!==d8)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var Z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&t()},l=>r(l))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let l=0;l<o;l++){let f=l;t(e[f]).next(g=>{a[f]=g,++u,u===o&&r(a)},g=>i(g))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function h8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Pl(n){return n.name==="IndexedDbTransactionError"}var PC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),NC=-1;function xv(n){return n==null}function df(n){return n===0&&1/n==-1/0}function f8(n){return typeof n=="number"&&Number.isInteger(n)&&!df(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var bk="";function p8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=N1(e)),e=m8(n.get(t),e);return N1(e)}function m8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case bk:t+="";break;default:t+=o}}return t}function N1(n){return n+bk+""}var g8="remoteDocuments",Ik="owner";var Tk="mutationQueues";var Ck="mutations";var Dk="documentMutations",_8="remoteDocumentsV14";var Sk="remoteDocumentGlobal";var Ak="targets";var xk="targetDocuments";var Rk="targetGlobal",Mk="collectionParents";var Pk="clientMetadata";var Nk="bundles";var kk="namedQueries";var v8="indexConfiguration";var y8="indexState";var w8="indexEntries";var Ok="documentOverlays";var E8="globals";var b8=[Tk,Ck,Dk,g8,Ak,Ik,Rk,xk,Pk,Sk,Mk,Nk,kk],She=[...b8,Ok],I8=[Tk,Ck,Dk,_8,Ak,Ik,Rk,xk,Pk,Sk,Mk,Nk,kk,Ok],T8=I8,C8=[...T8,v8,y8,w8];var Ahe=[...C8,E8];function k1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xs(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ot=class n{constructor(e,t){this.comparator=e,this.root=t||qi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ml(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ml(this.root,e,this.comparator,!1)}getReverseIterator(){return new ml(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ml(this.root,e,this.comparator,!0)}},ml=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}};qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1;qi.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new qi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var hn=class n{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Y_(this.data.getIterator())}getIteratorFrom(e){return new Y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Y_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Or=class n{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new n([])}unionWith(e){let t=new hn(yr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var J_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new J_("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pn.EMPTY_BYTE_STRING=new Pn("");var D8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(n){if(nt(!!n,39018),typeof n=="string"){let e=0,t=D8.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lo(n){return typeof n=="string"?Pn.fromBase64String(n):Pn.fromUint8Array(n)}var Fk="server_timestamp",Vk="__type__",Uk="__previous_value__",jk="__local_write_time__";function kC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vk])===null||t===void 0?void 0:t.stringValue)===Fk}function Rv(n){let e=n.mapValue.fields[Uk];return kC(e)?Rv(e):e}function hf(n){let e=Oo(n.mapValue.fields[jk].timestampValue);return new Qt(e.seconds,e.nanos)}var rT=class{constructor(e,t,r,i,o,a,u,l,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=f,this.isUsingEmulator=g}},X_="(default)",ev=class n{constructor(e,t){this.projectId=e,this.database=t||X_}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===X_}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var OC="__type__",Bk="__max__",z_={mapValue:{fields:{__type__:{stringValue:Bk}}}},LC="__vector__",yl="value";function Ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kC(n)?4:$k(n)?9007199254740991:zk(n)?10:11:me(28295,{value:n})}function Zi(n,e){if(n===e)return!0;let t=Ks(n);if(t!==Ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hf(n).isEqual(hf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=Oo(i.timestampValue),u=Oo(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Lo(i.bytesValue).isEqual(Lo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=Tt(i.doubleValue),u=Tt(o.doubleValue);return a===u?df(a)===df(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return vl(n.arrayValue.values||[],e.arrayValue.values||[],Zi);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(k1(a)!==k1(u))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(u[l]===void 0||!Zi(a[l],u[l])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function ff(n,e){return(n.values||[]).find(t=>Zi(t,e))!==void 0}function wl(n,e){if(n===e)return 0;let t=Ks(n),r=Ks(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let u=Tt(o.integerValue||o.doubleValue),l=Tt(a.integerValue||a.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1})(n,e);case 3:return O1(n.timestampValue,e.timestampValue);case 4:return O1(hf(n),hf(e));case 5:return eT(n.stringValue,e.stringValue);case 6:return(function(o,a){let u=Lo(o),l=Lo(a);return u.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let u=o.split("/"),l=a.split("/");for(let f=0;f<u.length&&f<l.length;f++){let g=Oe(u[f],l[f]);if(g!==0)return g}return Oe(u.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let u=Oe(Tt(o.latitude),Tt(a.latitude));return u!==0?u:Oe(Tt(o.longitude),Tt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return L1(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var u,l,f,g;let y=o.fields||{},E=a.fields||{},I=(u=y[yl])===null||u===void 0?void 0:u.arrayValue,N=(l=E[yl])===null||l===void 0?void 0:l.arrayValue,H=Oe(((f=I?.values)===null||f===void 0?void 0:f.length)||0,((g=N?.values)===null||g===void 0?void 0:g.length)||0);return H!==0?H:L1(I,N)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===z_.mapValue&&a===z_.mapValue)return 0;if(o===z_.mapValue)return 1;if(a===z_.mapValue)return-1;let u=o.fields||{},l=Object.keys(u),f=a.fields||{},g=Object.keys(f);l.sort(),g.sort();for(let y=0;y<l.length&&y<g.length;++y){let E=eT(l[y],g[y]);if(E!==0)return E;let I=wl(u[l[y]],f[g[y]]);if(I!==0)return I}return Oe(l.length,g.length)})(n.mapValue,e.mapValue);default:throw me(23264,{le:t})}}function O1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);let t=Oo(n),r=Oo(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function L1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=wl(t[i],r[i]);if(o)return o}return Oe(t.length,r.length)}function El(n){return iT(n)}function iT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Oo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Lo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=iT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${iT(t.fields[a])}`;return i+"}"})(n.mapValue):me(61005,{value:n})}function q_(n){switch(Ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Rv(n);return e?16+q_(e):16;case 5:return 2*n.stringValue.length;case 6:return Lo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+q_(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Xs(r.fields,(o,a)=>{i+=o.length+q_(a)}),i})(n.mapValue);default:throw me(13486,{value:n})}}function F1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oT(n){return!!n&&"integerValue"in n}function FC(n){return!!n&&"arrayValue"in n}function V1(n){return!!n&&"nullValue"in n}function U1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function W_(n){return!!n&&"mapValue"in n}function zk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OC])===null||t===void 0?void 0:t.stringValue)===LC}function of(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Xs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=of(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=of(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $k(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Bk}var Rhe={mapValue:{fields:{[OC]:{stringValue:LC},[yl]:{arrayValue:{}}}}};var vr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!W_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=of(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=of(a):i.push(u.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());W_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];W_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Xs(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(of(this.value))}};function Hk(n){let e=[];return Xs(n.fields,(t,r)=>{let i=new yr([t]);if(W_(r)){let o=Hk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Or(e)}var ii=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,Pe.min(),Pe.min(),Pe.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Pe.min(),Pe.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Pe.min(),Pe.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var bl=class{constructor(e,t){this.position=e,this.inclusive=t}};function j1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=he.comparator(he.fromName(a.referenceValue),t.key):r=wl(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function B1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zi(n.position[t],e.position[t]))return!1;return!0}var wc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function S8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var tv=class{},Kt=class n extends tv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new aT(e,t,r):t==="array-contains"?new lT(e,r):t==="in"?new dT(e,r):t==="not-in"?new hT(e,r):t==="array-contains-any"?new fT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new cT(e,r):new uT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wl(t,this.value)):t!==null&&Ks(this.value)===Ks(t)&&this.matchesComparison(wl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},oi=class n extends tv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return qk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function qk(n){return n.op==="and"}function Wk(n){return A8(n)&&qk(n)}function A8(n){for(let e of n.filters)if(e instanceof oi)return!1;return!0}function sT(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+El(n.value);if(Wk(n))return n.filters.map(e=>sT(e)).join(",");{let e=n.filters.map(t=>sT(t)).join(",");return`${n.op}(${e})`}}function Gk(n,e){return n instanceof Kt?(function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&Zi(r.value,i.value)})(n,e):n instanceof oi?(function(r,i){return i instanceof oi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&Gk(a,i.filters[u]),!0):!1})(n,e):void me(19439)}function Kk(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${El(t.value)}`})(n):n instanceof oi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kk).join(" ,")+"}"})(n):"Filter"}var aT=class extends Kt{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){let t=he.comparator(e.key,this.key);return this.matchesComparison(t)}},cT=class extends Kt{constructor(e,t){super(e,"in",t),this.keys=Zk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},uT=class extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=Zk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Zk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>he.fromName(r.referenceValue))}var lT=class extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return FC(t)&&ff(t.arrayValue,this.value)}},dT=class extends Kt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ff(this.value.arrayValue,t)}},hT=class extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ff(this.value.arrayValue,t)}},fT=class extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!FC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ff(this.value.arrayValue,r))}};var pT=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Pe=null}};function z1(n,e=null,t=[],r=[],i=null,o=null,a=null){return new pT(n,e,t,r,i,o,a)}function VC(n){let e=Ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),xv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>El(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>El(r)).join(",")),e.Pe=t}return e.Pe}function UC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!S8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!B1(n.startAt,e.startAt)&&B1(n.endAt,e.endAt)}function mT(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Zs=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function x8(n,e,t,r,i,o,a,u){return new Zs(n,e,t,r,i,o,a,u)}function Mv(n){return new Zs(n)}function $1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Qk(n){return n.collectionGroup!==null}function sf(n){let e=Ae(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new hn(yr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new wc(o,r))}),t.has(yr.keyField().canonicalString())||e.Te.push(new wc(yr.keyField(),r))}return e.Te}function Wi(n){let e=Ae(n);return e.Ie||(e.Ie=R8(e,sf(n))),e.Ie}function R8(n,e){if(n.limitType==="F")return z1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new wc(i.field,o)});let t=n.endAt?new bl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new bl(n.startAt.position,n.startAt.inclusive):null;return z1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gT(n,e){let t=n.filters.concat([e]);return new Zs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _T(n,e,t){return new Zs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pv(n,e){return UC(Wi(n),Wi(e))&&n.limitType===e.limitType}function Yk(n){return`${VC(Wi(n))}|lt:${n.limitType}`}function hl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Kk(i)).join(", ")}]`),xv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>El(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>El(i)).join(",")),`Target(${r})`})(Wi(n))}; limitType=${n.limitType})`}function Nv(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):he.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of sf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,l){let f=j1(a,u,l);return a.inclusive?f<=0:f<0})(r.startAt,sf(r),i)||r.endAt&&!(function(a,u,l){let f=j1(a,u,l);return a.inclusive?f>=0:f>0})(r.endAt,sf(r),i))})(n,e)}function M8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jk(n){return(e,t)=>{let r=!1;for(let i of sf(n)){let o=P8(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function P8(n,e,t){let r=n.field.isKeyField()?he.comparator(e.key,t.key):(function(o,a,u){let l=a.data.field(o),f=u.data.field(o);return l!==null&&f!==null?wl(l,f):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return me(19790,{direction:n.dir})}}var Fo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Lk(this.inner)}size(){return this.innerSize}};var N8=new Ot(he.comparator);function Vo(){return N8}var Xk=new Ot(he.comparator);function rf(...n){let e=Xk;for(let t of n)e=e.insert(t.key,t);return e}function eO(n){let e=Xk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fc(){return af()}function tO(){return af()}function af(){return new Fo(n=>n.toString(),(n,e)=>n.isEqual(e))}var k8=new Ot(he.comparator),O8=new hn(he.comparator);function ze(...n){let e=O8;for(let t of n)e=e.add(t);return e}var L8=new hn(Oe);function F8(){return L8}function jC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:df(e)?"-0":e}}function nO(n){return{integerValue:""+n}}function V8(n,e){return f8(e)?nO(e):jC(n,e)}var Il=class{constructor(){this._=void 0}};function U8(n,e,t){return n instanceof Tl?(function(i,o){let a={fields:{[Vk]:{stringValue:Fk},[jk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kC(o)&&(o=Rv(o)),o&&(a.fields[Uk]=o),{mapValue:a}})(t,e):n instanceof Ec?iO(n,e):n instanceof bc?oO(n,e):(function(i,o){let a=rO(i,o),u=H1(a)+H1(i.Ee);return oT(a)&&oT(i.Ee)?nO(u):jC(i.serializer,u)})(n,e)}function j8(n,e,t){return n instanceof Ec?iO(n,e):n instanceof bc?oO(n,e):t}function rO(n,e){return n instanceof Cl?(function(r){return oT(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Tl=class extends Il{},Ec=class extends Il{constructor(e){super(),this.elements=e}};function iO(n,e){let t=sO(e);for(let r of n.elements)t.some(i=>Zi(i,r))||t.push(r);return{arrayValue:{values:t}}}var bc=class extends Il{constructor(e){super(),this.elements=e}};function oO(n,e){let t=sO(e);for(let r of n.elements)t=t.filter(i=>!Zi(i,r));return{arrayValue:{values:t}}}var Cl=class extends Il{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function H1(n){return Tt(n.integerValue||n.doubleValue)}function sO(n){return FC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function B8(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ec&&i instanceof Ec||r instanceof bc&&i instanceof bc?vl(r.elements,i.elements,Zi):r instanceof Cl&&i instanceof Cl?Zi(r.Ee,i.Ee):r instanceof Tl&&i instanceof Tl})(n.transform,e.transform)}var vT=class{constructor(e,t){this.version=e,this.transformResults=t}},Gi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function G_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Dl=class{};function aO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new pf(n.key,Gi.none()):new Ic(n.key,n.data,Gi.none());{let t=n.data,r=vr.empty(),i=new hn(yr.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Qi(n.key,r,new Or(i.toArray()),Gi.none())}}function z8(n,e,t){n instanceof Ic?(function(i,o,a){let u=i.value.clone(),l=W1(i.fieldTransforms,o,a.transformResults);u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Qi?(function(i,o,a){if(!G_(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=W1(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(cO(i)),l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function cf(n,e,t,r){return n instanceof Ic?(function(o,a,u,l){if(!G_(o.precondition,a))return u;let f=o.value.clone(),g=G1(o.fieldTransforms,l,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Qi?(function(o,a,u,l){if(!G_(o.precondition,a))return u;let f=G1(o.fieldTransforms,l,a),g=a.data;return g.setAll(cO(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))})(n,e,t,r):(function(o,a,u){return G_(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function $8(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=rO(r.transform,i||null);o!=null&&(t===null&&(t=vr.empty()),t.set(r.field,o))}return t||null}function q1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vl(r,i,(o,a)=>B8(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ic=class extends Dl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qi=class extends Dl{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function cO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function W1(n,e,t){let r=new Map;nt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,j8(a,u,t[i]))}return r}function G1(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,U8(o,a,e))}return r}var pf=class extends Dl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},yT=class extends Dl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wT=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&z8(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=tO();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let l=aO(a,u);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(t,r)=>q1(t,r))&&vl(this.baseMutations,e.baseMutations,(t,r)=>q1(t,r))}},ET=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return k8})(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var bT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var IT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Wt,We;function H8(n){switch(n){case G.OK:return me(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function uO(n){if(n===void 0)return ko("GRPC error has no .code"),G.UNKNOWN;switch(n){case Wt.OK:return G.OK;case Wt.CANCELLED:return G.CANCELLED;case Wt.UNKNOWN:return G.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return G.INTERNAL;case Wt.UNAVAILABLE:return G.UNAVAILABLE;case Wt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Wt.NOT_FOUND:return G.NOT_FOUND;case Wt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Wt.ABORTED:return G.ABORTED;case Wt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Wt.DATA_LOSS:return G.DATA_LOSS;default:return me(39323,{code:n})}}(We=Wt||(Wt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var K1=null;var q8=new Po([4294967295,4294967295],0);function Z1(n){let e=yk().encode(n),t=new V0;return t.update(e),new Uint8Array(t.digest())}function Q1(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Po([t,r],0),new Po([i,o],0)]}var TT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pc(`Invalid padding: ${t}`);if(r<0)throw new pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Po.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Po.fromNumber(r)));return i.compare(q8)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=Z1(e),[r,i]=Q1(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);if(!this.ye(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.fe===0)return;let t=Z1(e),[r,i]=Q1(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);this.we(a)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},pc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,mf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Pe.min(),i,new Ot(Oe),Vo(),ze())}},mf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ze(),ze(),ze())}};var gl=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},rv=class{constructor(e,t){this.targetId=e,this.De=t}},iv=class{constructor(e,t,r=Pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ov=class{constructor(){this.ve=0,this.Ce=Y1(),this.Fe=Pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),t=ze(),r=ze();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:me(38017,{changeType:o})}}),new mf(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=Y1()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},CT=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Vo(),this.je=$_(),this.Je=$_(),this.He=new Ot(Oe)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(mT(o))if(r===0){let a=new he(o.path);this.Xe(t,a,ii.newNoDocument(a,Pe.min()))}else nt(r===1,20013,{expectedCount:r});else{let a=this.ot(t);if(a!==r){let u=this._t(e),l=u?this.ut(u,e,a):1;if(l!==0){this.rt(t);let f=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}K1?.ct((function(g,y,E,I,N){var H,F,W,oe,se,le;let Ye={localCacheCount:g,existenceFilterCount:y.count,databaseId:E.database,projectId:E.projectId},be=y.unchangedNames;return be&&(Ye.bloomFilter={applied:N===0,hashCount:(H=be?.hashCount)!==null&&H!==void 0?H:0,bitmapLength:(oe=(W=(F=be?.bits)===null||F===void 0?void 0:F.bitmap)===null||W===void 0?void 0:W.length)!==null&&oe!==void 0?oe:0,padding:(le=(se=be?.bits)===null||se===void 0?void 0:se.padding)!==null&&le!==void 0?le:0,mightContain:R=>{var C;return(C=I?.mightContain(R))!==null&&C!==void 0&&C}}),Ye})(a,e.De,this.We.lt(),u,l))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,u;try{a=Lo(r).toUint8Array()}catch(l){if(l instanceof J_)return Gs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new TT(a,i,o)}catch(l){return Gs(l instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.We.lt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let u=this.st(a);if(u){if(o.current&&mT(u.target)){let l=new he(u.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,ii.newNoDocument(l,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let r=ze();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(l=>{let f=this.st(l);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let i=new nv(e,t,this.He,this.ze,r);return this.ze=Vo(),this.je=$_(),this.Je=$_(),this.He=new Ot(Oe),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new ov,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new hn(Oe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new hn(Oe),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new ov),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function $_(){return new Ot(he.comparator)}function Y1(){return new Ot(he.comparator)}var W8={asc:"ASCENDING",desc:"DESCENDING"},G8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K8={and:"AND",or:"OR"},DT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ST(n,e){return n.useProto3Json||xv(e)?e:{value:e}}function sv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Z8(n,e){return sv(n,e.toTimestamp())}function Ki(n){return nt(!!n,49232),Pe.fromTimestamp((function(t){let r=Oo(t);return new Qt(r.seconds,r.nanos)})(n))}function BC(n,e){return AT(n,e).canonicalString()}function AT(n,e){let t=(function(i){return new Ct(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function dO(n){let e=Ct.fromString(n);return nt(gO(e),10190,{key:e.toString()}),e}function xT(n,e){return BC(n.databaseId,e.path)}function H0(n,e){let t=dO(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(fO(t))}function hO(n,e){return BC(n.databaseId,e)}function Q8(n){let e=dO(n);return e.length===4?Ct.emptyPath():fO(e)}function RT(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fO(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function J1(n,e,t){return{name:xT(n,e),fields:t.value.mapValue.fields}}function Y8(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:me(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(nt(g===void 0||typeof g=="string",58123),Pn.fromBase64String(g||"")):(nt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Pn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(f){let g=f.code===void 0?G.UNKNOWN:uO(f.code);return new ee(g,f.message||"")})(a);t=new iv(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=H0(n,r.document.name),o=Ki(r.document.updateTime),a=r.document.createTime?Ki(r.document.createTime):Pe.min(),u=new vr({mapValue:{fields:r.document.fields}}),l=ii.newFoundDocument(i,o,a,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new gl(f,g,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=H0(n,r.document),o=r.readTime?Ki(r.readTime):Pe.min(),a=ii.newNoDocument(i,o),u=r.removedTargetIds||[];t=new gl([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=H0(n,r.document),o=r.removedTargetIds||[];t=new gl([],o,i,null)}else{if(!("filter"in e))return me(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new IT(i,o),u=r.targetId;t=new rv(u,a)}}return t}function J8(n,e){let t;if(e instanceof Ic)t={update:J1(n,e.key,e.value)};else if(e instanceof pf)t={delete:xT(n,e.key)};else if(e instanceof Qi)t={update:J1(n,e.key,e.data),updateMask:aq(e.fieldMask)};else{if(!(e instanceof yT))return me(16599,{Rt:e.type});t={verify:xT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,a){let u=a.transform;if(u instanceof Tl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ec)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof bc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Cl)return{fieldPath:a.field.canonicalString(),increment:u.Ee};throw me(20930,{transform:a.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:Z8(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:me(27497)})(n,e.precondition)),t}function X8(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map(t=>(function(i,o){let a=i.updateTime?Ki(i.updateTime):Ki(o);return a.isEqual(Pe.min())&&(a=Ki(o)),new vT(a,i.transformResults||[])})(t,e))):[]}function eq(n,e){return{documents:[hO(n,e.path)]}}function tq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hO(n,i);let o=(function(f){if(f.length!==0)return mO(oi.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(g=>(function(E){return{field:fl(E.field),direction:iq(E.dir)}})(g))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let u=ST(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:i}}function nq(n){let e=Q8(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){nt(r===1,65062);let g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){let E=pO(y);return E instanceof oi&&Wk(E)?E.getFilters():[E]})(t.where));let a=[];t.orderBy&&(a=(function(y){return y.map(E=>(function(N){return new wc(pl(N.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(E))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let E;return E=typeof y=="object"?y.value:y,xv(E)?null:E})(t.limit));let l=null;t.startAt&&(l=(function(y){let E=!!y.before,I=y.values||[];return new bl(I,E)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){let E=!y.before,I=y.values||[];return new bl(I,E)})(t.endAt)),x8(e,i,a,o,u,"F",l,f)}function rq(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pO(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=pl(t.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=pl(t.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=pl(t.unaryFilter.field);return Kt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=pl(t.unaryFilter.field);return Kt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(pl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return oi.create(t.compositeFilter.filters.map(r=>pO(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function iq(n){return W8[n]}function oq(n){return G8[n]}function sq(n){return K8[n]}function fl(n){return{fieldPath:n.canonicalString()}}function pl(n){return yr.fromServerFormat(n.fieldPath)}function mO(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(U1(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NAN"}};if(V1(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(U1(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NOT_NAN"}};if(V1(t.value))return{unaryFilter:{field:fl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(t.field),op:oq(t.op),value:t.value}}})(n):n instanceof oi?(function(t){let r=t.getFilters().map(i=>mO(i));return r.length===1?r[0]:{compositeFilter:{op:sq(t.op),filters:r}}})(n):me(54877,{filter:n})}function aq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var gf=class n{constructor(e,t,r,i,o=Pe.min(),a=Pe.min(),u=Pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var MT=class{constructor(e){this.gt=e}};function cq(n){let e=nq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_T(e,e.limit,"L"):e}var av=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Tt(e.integerValue));else if("doubleValue"in e){let r=Tt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),df(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Oo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Lo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?$k(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):zk(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):me(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let a=yl,u=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Tt(u)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),he.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};av.Ut=new av;var PT=class{constructor(){this.Dn=new NT}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(yc.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(yc.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}},NT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hn(Ct.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(Ct.comparator)).toArray()}};var Mhe=new Uint8Array(0);var X1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_O=41943040,kr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(_O,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);var _f=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var ek="LruGarbageCollector",uq=1048576;function tk([n,e],[t,r]){let i=Oe(n,t);return i===0?Oe(e,r):i}var kT=class{constructor(e){this.Tr=e,this.buffer=new hn(tk),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();tk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},OT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(ek,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Pl(t)?ie(ek,"Ignoring IndexedDB error during garbage collection: ",t):yield Ml(t)}yield this.Rr(3e5)}))}},LT=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(PC.ue);let r=new kT(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(X1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),X1):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,a,u,l,f,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),dl()<=Ve.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${o} targets in `+(l-u)+`ms
	Removed ${y} documents in `+(f-l)+`ms
Total Duration: ${f-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}};function lq(n,e){return new LT(n,e)}var FT=class{constructor(){this.changes=new Fo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ii.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var VT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var UT=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cf(r.mutation,i,Or.empty(),Qt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){let i=fc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=rf();return o.forEach((u,l)=>{a=a.insert(u,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=fc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let o=Vo(),a=af(),u=(function(){return af()})();return t.forEach((l,f)=>{let g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Qi)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),cf(g.mutation,f,g.mutation.getFieldMask(),Qt.now())):a.set(f.key,Or.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var y;return u.set(f,new VT(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,t){let r=af(),i=new Ot((a,u)=>a-u),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(l=>{let f=t.get(l);if(f===null)return;let g=r.get(l)||Or.empty();g=u.applyToLocalView(f,g),r.set(l,g);let y=(i.get(u.batchId)||ze()).add(l);i=i.insert(u.batchId,y)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let l=u.getNext(),f=l.key,g=l.value,y=tO();g.forEach(E=>{if(!o.has(E)){let I=aO(t.get(E),r.get(E));I!==null&&y.set(E,I),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Z.resolve(fc()),u=lf,l=o;return a.next(f=>Z.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{l=l.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,l,f,ze())).next(g=>({batchId:u,changes:eO(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next(r=>{let i=rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=rf();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,l=>{let f=(function(y,E){return new Zs(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,E)=>{a=a.insert(y,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((l,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,ii.newInvalidDocument(g)))});let u=rf();return a.forEach((l,f)=>{let g=o.get(l);g!==void 0&&cf(g.mutation,f,Or.empty(),Qt.now()),Nv(t,f)&&(u=u.insert(l,f))}),u})}};var jT=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Ki(i.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:cq(i.bundledQuery),readTime:Ki(i.readTime)}})(t)),Z.resolve()}};var BT=class{constructor(){this.overlays=new Ot(he.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=fc();return Z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),Z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){let i=fc(),o=t.length+1,a=new he(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let l=u.getNext().value,f=l.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ot((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=fc(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let u=fc(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=i)););return Z.resolve(u)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new bT(t,r));let o=this.kr.get(t);o===void 0&&(o=ze(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var zT=class{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}};var vf=class{constructor(){this.qr=new hn(Gt.Qr),this.$r=new hn(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Gt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new he(new Ct([])),r=new Gt(t,e),i=new Gt(t,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new he(new Ct([])),r=new Gt(t,e),i=new Gt(t,e+1),o=ze();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Gt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Gt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return he.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||he.comparator(e.key,t.key)}};var $T=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new hn(Gt.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new wT(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.Yr=this.Yr.add(new Gt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?NC:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{let u=this.Zr(a.Hr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Oe);return t.forEach(i=>{let o=new Gt(i,0),a=new Gt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],u=>{r=r.add(u.Hr)})}),Z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;he.isDocumentKey(o)||(o=o.child(""));let a=new Gt(new he(o),0),u=new hn(Oe);return this.Yr.forEachWhile(l=>{let f=l.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(l.Hr)),!0)},a),Z.resolve(this.ei(u))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){nt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Z.forEach(t.mutations,i=>{let o=new Gt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Gt(t,0),i=this.Yr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var HT=class{constructor(e){this.ni=e,this.docs=(function(){return new Ot(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():ii.newInvalidDocument(t))}getEntries(e,t){let r=Vo();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ii.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vo(),a=t.path,u=new he(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){let{key:f,value:{document:g}}=l.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||l8(u8(g),r)<=0||(i.has(g.key)||Nv(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){me(9500)}ri(e,t){return Z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qT(this)}getSize(e){return Z.resolve(this.size)}},qT=class extends FT{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var WT=class{constructor(e){this.persistence=e,this.ii=new Fo(t=>VC(t),UC),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.si=0,this.oi=new vf,this.targetCount=0,this._i=_f.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new _f(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Z.waitFor(o).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}};var cv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new PC(0),this.ci=!1,this.ci=!0,this.li=new zT,this.referenceDelegate=e(this),this.hi=new WT(this),this.indexManager=new PT,this.remoteDocumentCache=(function(i){return new HT(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new MT(t),this.Ti=new jT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new $T(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new GT(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return Z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},GT=class extends nT{constructor(e){super(),this.currentSequenceNumber=e}},KT=class n{constructor(e){this.persistence=e,this.Ai=new vf,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw me(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,r=>{let i=he.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Pe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},uv=class n{constructor(e,t){this.persistence=e,this.gi=new Fo(r=>p8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=lq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,t).next(u=>{u||(r++,o.removeEntry(a,Pe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=q_(e.data.value)),t}Sr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var ZT=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ze(),i=ze();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var QT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var YT=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return GP()?8:h8(ln())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new QT;return this.ws(e,t,a).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,t,a,u.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(dl()<=Ve.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",hl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(dl()<=Ve.DEBUG&&ie("QueryEngine","Query:",hl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(dl()<=Ve.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",hl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wi(t))):Z.resolve())}ps(e,t){if($1(t))return Z.resolve(null);let r=Wi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_T(t,null,"F"),r=Wi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=ze(...o);return this.gs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(l=>{let f=this.bs(t,u);return this.Ds(t,f,a,l.readTime)?this.ps(e,_T(t,null,"F")):this.vs(e,f,t,l)}))})))}ys(e,t,r,i){return $1(t)||i.isEqual(Pe.min())?Z.resolve(null):this.gs.getDocuments(e,r).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,r,i)?Z.resolve(null):(dl()<=Ve.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hl(t)),this.vs(e,a,t,c8(i,lf)).next(u=>u))})}bs(e,t){let r=new hn(Jk(e));return t.forEach((i,o)=>{Nv(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return dl()<=Ve.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",hl(t)),this.gs.getDocumentsMatchingQuery(e,t,yc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var zC="LocalStore",dq=3e8,JT=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ot(Oe),this.Ms=new Fo(o=>VC(o),UC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function hq(n,e,t,r){return new JT(n,e,t,r)}function vO(n,e){return T(this,null,function*(){let t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],l=ze();for(let f of i){a.push(f.batchId);for(let g of f.mutations)l=l.add(g.key)}for(let f of o){u.push(f.batchId);for(let g of f.mutations)l=l.add(g.key)}return t.localDocuments.getDocuments(r,l).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:u}))})})})}function fq(n,e){let t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(u,l,f,g){let y=f.batch,E=y.keys(),I=Z.resolve();return E.forEach(N=>{I=I.next(()=>g.getEntry(l,N)).next(H=>{let F=f.docVersions.get(N);nt(F!==null,48541),H.version.compareTo(F)<0&&(y.applyToRemoteDocument(H,f),H.isValidDocument()&&(H.setReadTime(f.commitVersion),g.addEntry(H)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(l,y))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let l=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(l=l.add(u.batch.mutations[f].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function yO(n){let e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function pq(n,e){let t=Ae(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let u=[];e.targetChanges.forEach((g,y)=>{let E=i.get(y);if(!E)return;u.push(t.hi.removeMatchingKeys(o,g.removedDocuments,y).next(()=>t.hi.addMatchingKeys(o,g.addedDocuments,y)));let I=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(Pn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,r)),i=i.insert(y,I),(function(H,F,W){return H.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=dq?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(E,I,g)&&u.push(t.hi.updateTargetData(o,I))});let l=Vo(),f=ze();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(mq(o,a,e.documentUpdates).next(g=>{l=g.Ls,f=g.ks})),!r.isEqual(Pe.min())){let g=t.hi.getLastRemoteSnapshotVersion(o).next(y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,f)).next(()=>l)}).then(o=>(t.Fs=i,o))}function mq(n,e,t){let r=ze(),i=ze();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=Vo();return t.forEach((u,l)=>{let f=o.get(u);l.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),l.isNoDocument()&&l.version.isEqual(Pe.min())?(e.removeEntry(u,l.readTime),a=a.insert(u,l)):!f.isValidDocument()||l.version.compareTo(f.version)>0||l.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(l),a=a.insert(u,l)):ie(zC,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",l.version)}),{Ls:a,ks:i}})}function gq(n,e){let t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=NC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _q(n,e){let t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,Z.resolve(i)):t.hi.allocateTargetId(r).next(a=>(i=new gf(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function XT(n,e,t){return T(this,null,function*(){let r=Ae(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Pl(a))throw a;ie(zC,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function nk(n,e,t){let r=Ae(n),i=Pe.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(l,f,g){let y=Ae(l),E=y.Ms.get(g);return E!==void 0?Z.resolve(y.Fs.get(E)):y.hi.getTargetData(f,g)})(r,a,Wi(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,u.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:Pe.min(),t?o:ze())).next(u=>(vq(r,M8(e),u),{documents:u,qs:o})))}function vq(n,e,t){let r=n.xs.get(e)||Pe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var lv=class{constructor(){this.activeTargetIds=F8()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var eC=class{constructor(){this.Fo=new lv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new lv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tC=class{xo(e){}shutdown(){}};var rk="ConnectivityMonitor",dv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(rk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ie(rk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var H_=null;function nC(){return H_===null?H_=(function(){return 268435456+Math.round(2147483648*Math.random())})():H_++,"0x"+H_.toString(16)}var q0="RestConnection",yq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},rC=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===X_?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let a=nC(),u=this.Go(e,t.toUriEncodedString());ie(q0,`Sending RPC '${e}' ${a}:`,u,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,o);let{host:f}=new URL(u),g=Li(f);return this.jo(e,u,l,r,g).then(y=>(ie(q0,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Gs(q0,`RPC '${e}' ${a} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,t,r,i,o,a){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=yq[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var iC=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Mn="WebChannelConnection",oC=class extends rC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let a=nC();return new Promise((u,l)=>{let f=new U0;f.setWithCredentials(!0),f.listenOnce(j0.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case nf.NO_ERROR:let y=f.getResponseJson();ie(Mn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case nf.TIMEOUT:ie(Mn,`RPC '${e}' ${a} timed out`),l(new ee(G.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:let E=f.getStatus();if(ie(Mn,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);let N=I?.error;if(N&&N.status&&N.message){let H=(function(W){let oe=W.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(oe)>=0?oe:G.UNKNOWN})(N.status);l(new ee(H,N.message))}else l(new ee(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new ee(G.UNAVAILABLE,"Connection failed."));break;default:me(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ie(Mn,`RPC '${e}' ${a} completed.`)}});let g=JSON.stringify(i);ie(Mn,`RPC '${e}' ${a} sending request:`,i),f.send(t,"POST",g,r,15)})}P_(e,t,r){let i=nC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=$0(),u=z0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(l.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let g=o.join("");ie(Mn,`Creating RPC '${e}' stream ${i}: ${g}`,l);let y=a.createWebChannel(g,l);this.T_(y);let E=!1,I=!1,N=new iC({Ho:F=>{I?ie(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(E||(ie(Mn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),E=!0),ie(Mn,`RPC '${e}' stream ${i} sending:`,F),y.send(F))},Yo:()=>y.close()}),H=(F,W,oe)=>{F.listen(W,se=>{try{oe(se)}catch(le){setTimeout(()=>{throw le},0)}})};return H(y,ll.EventType.OPEN,()=>{I||(ie(Mn,`RPC '${e}' stream ${i} transport opened.`),N.s_())}),H(y,ll.EventType.CLOSE,()=>{I||(I=!0,ie(Mn,`RPC '${e}' stream ${i} transport closed`),N.__(),this.I_(y))}),H(y,ll.EventType.ERROR,F=>{I||(I=!0,Gs(Mn,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),N.__(new ee(G.UNAVAILABLE,"The operation could not be completed")))}),H(y,ll.EventType.MESSAGE,F=>{var W;if(!I){let oe=F.data[0];nt(!!oe,16349);let se=oe,le=se?.error||((W=se[0])===null||W===void 0?void 0:W.error);if(le){ie(Mn,`RPC '${e}' stream ${i} received error:`,le);let Ye=le.status,be=(function(D){let x=Wt[D];if(x!==void 0)return uO(x)})(Ye),R=le.message;be===void 0&&(be=G.INTERNAL,R="Unknown error status: "+Ye+" with message "+le.message),I=!0,N.__(new ee(be,R)),y.close()}else ie(Mn,`RPC '${e}' stream ${i} received:`,oe),N.a_(oe)}}),H(u,B0.STAT_EVENT,F=>{F.stat===B_.PROXY?ie(Mn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===B_.NOPROXY&&ie(Mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function W0(){return typeof document<"u"?document:null}function kv(n){return new DT(n,!0)}var hv=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var ik="PersistentStream",fv=class{constructor(e,t,r,i,o,a,u,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new hv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return T(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return T(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return T(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(ko(t.toString()),ko("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ee(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>T(this,null,function*(){this.state=0,this.start()}))}G_(e){return ie(ik,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ie(ik,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},sC=class extends fv{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Y8(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Pe.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Pe.min():a.readTime?Ki(a.readTime):Pe.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=RT(this.serializer),t.addTarget=(function(o,a){let u,l=a.target;if(u=mT(l)?{documents:eq(o,l)}:{query:tq(o,l).Vt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=lO(o,a.resumeToken);let f=ST(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Pe.min())>0){u.readTime=sv(o,a.snapshotVersion.toTimestamp());let f=ST(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);let r=rq(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=RT(this.serializer),t.removeTarget=e,this.k_(t)}},aC=class extends fv{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=X8(e.writeResults,e.commitTime),r=Ki(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=RT(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>J8(this.serializer,r))};this.k_(t)}};var cC=class{},uC=class extends cC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ee(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,AT(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(G.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Jo(e,AT(t,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(G.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},lC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ko(t),this._a=!1):ie("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Tc="RemoteStore",dC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(()=>T(this,null,function*(){Cc(this)&&(ie(Tc,"Restarting streams for network reachability change."),yield(function(l){return T(this,null,function*(){let f=Ae(l);f.Ia.add(4),yield Cf(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield Ov(f)})})(this))}))}),this.Aa=new lC(r,i)}};function Ov(n){return T(this,null,function*(){if(Cc(n))for(let e of n.da)yield e(!0)})}function Cf(n){return T(this,null,function*(){for(let e of n.da)yield e(!1)})}function wO(n,e){let t=Ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),WC(t)?qC(t):Nl(t).x_()&&HC(t,e))}function $C(n,e){let t=Ae(n),r=Nl(t);t.Ta.delete(e),r.x_()&&EO(t,e),t.Ta.size===0&&(r.x_()?r.B_():Cc(t)&&t.Aa.set("Unknown"))}function HC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Nl(n).H_(e)}function EO(n,e){n.Ra.$e(e),Nl(n).Y_(e)}function qC(n){n.Ra=new CT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Nl(n).start(),n.Aa.aa()}function WC(n){return Cc(n)&&!Nl(n).M_()&&n.Ta.size>0}function Cc(n){return Ae(n).Ia.size===0}function bO(n){n.Ra=void 0}function wq(n){return T(this,null,function*(){n.Aa.set("Online")})}function Eq(n){return T(this,null,function*(){n.Ta.forEach((e,t)=>{HC(n,e)})})}function bq(n,e){return T(this,null,function*(){bO(n),WC(n)?(n.Aa.la(e),qC(n)):n.Aa.set("Unknown")})}function Iq(n,e,t){return T(this,null,function*(){if(n.Aa.set("Online"),e instanceof iv&&e.state===2&&e.cause)try{yield(function(i,o){return T(this,null,function*(){let a=o.cause;for(let u of o.targetIds)i.Ta.has(u)&&(yield i.remoteSyncer.rejectListen(u,a),i.Ta.delete(u),i.Ra.removeTarget(u))})})(n,e)}catch(r){ie(Tc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pv(n,r)}else if(e instanceof gl?n.Ra.Ye(e):e instanceof rv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Pe.min()))try{let r=yield yO(n.localStore);t.compareTo(r)>=0&&(yield(function(o,a){let u=o.Ra.Pt(a);return u.targetChanges.forEach((l,f)=>{if(l.resumeToken.approximateByteSize()>0){let g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(l.resumeToken,a))}}),u.targetMismatches.forEach((l,f)=>{let g=o.Ta.get(l);if(!g)return;o.Ta.set(l,g.withResumeToken(Pn.EMPTY_BYTE_STRING,g.snapshotVersion)),EO(o,l);let y=new gf(g.target,l,f,g.sequenceNumber);HC(o,y)}),o.remoteSyncer.applyRemoteEvent(u)})(n,t))}catch(r){ie(Tc,"Failed to raise snapshot:",r),yield pv(n,r)}})}function pv(n,e,t){return T(this,null,function*(){if(!Pl(e))throw e;n.Ia.add(1),yield Cf(n),n.Aa.set("Offline"),t||(t=()=>yO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(null,null,function*(){ie(Tc,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield Ov(n)}))})}function IO(n,e){return e().catch(t=>pv(n,t,e))}function Lv(n){return T(this,null,function*(){let e=Ae(n),t=Qs(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:NC;for(;Tq(e);)try{let i=yield gq(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Cq(e,i)}catch(i){yield pv(e,i)}TO(e)&&CO(e)})}function Tq(n){return Cc(n)&&n.Pa.length<10}function Cq(n,e){n.Pa.push(e);let t=Qs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function TO(n){return Cc(n)&&!Qs(n).M_()&&n.Pa.length>0}function CO(n){Qs(n).start()}function Dq(n){return T(this,null,function*(){Qs(n).na()})}function Sq(n){return T(this,null,function*(){let e=Qs(n);for(let t of n.Pa)e.X_(t.mutations)})}function Aq(n,e,t){return T(this,null,function*(){let r=n.Pa.shift(),i=ET.from(r,e,t);yield IO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Lv(n)})}function xq(n,e){return T(this,null,function*(){e&&Qs(n).Z_&&(yield(function(r,i){return T(this,null,function*(){if((function(a){return H8(a)&&a!==G.ABORTED})(i.code)){let o=r.Pa.shift();Qs(r).N_(),yield IO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Lv(r)}})})(n,e)),TO(n)&&CO(n)})}function ok(n,e){return T(this,null,function*(){let t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ie(Tc,"RemoteStore received new credentials");let r=Cc(t);t.Ia.add(3),yield Cf(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield Ov(t)})}function Rq(n,e){return T(this,null,function*(){let t=Ae(n);e?(t.Ia.delete(2),yield Ov(t)):e||(t.Ia.add(2),yield Cf(t),t.Aa.set("Unknown"))})}function Nl(n){return n.Va||(n.Va=(function(t,r,i){let o=Ae(t);return o.ia(),new sC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:wq.bind(null,n),e_:Eq.bind(null,n),n_:bq.bind(null,n),J_:Iq.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.Va.N_(),WC(n)?qC(n):n.Aa.set("Unknown")):(yield n.Va.stop(),bO(n))}))),n.Va}function Qs(n){return n.ma||(n.ma=(function(t,r,i){let o=Ae(t);return o.ia(),new aC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Dq.bind(null,n),n_:xq.bind(null,n),ea:Sq.bind(null,n),ta:Aq.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.ma.N_(),yield Lv(n)):(yield n.ma.stop(),n.Pa.length>0&&(ie(Tc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var hC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function GC(n,e){if(ko("AsyncQueue",`${e}: ${n}`),Pl(n))return new ee(G.UNAVAILABLE,`${e}: ${n}`);throw n}var mv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=rf(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var gv=class{constructor(){this.fa=new Ot(he.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):me(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Sl=class n{constructor(e,t,r,i,o,a,u,l,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new n(e,t,mv.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var fC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},pC=class{constructor(){this.queries=sk(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Ae(t),o=i.queries;i.queries=sk(),o.forEach((a,u)=>{for(let l of u.wa)l.onError(r)})})(this,new ee(G.ABORTED,"Firestore shutting down"))}};function sk(){return new Fo(n=>Yk(n),Pv)}function KC(n,e){return T(this,null,function*(){let t=Ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new fC,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let u=GC(a,`Initialization of query '${hl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&QC(t)})}function ZC(n,e){return T(this,null,function*(){let t=Ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Mq(n,e){let t=Ae(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let u of a.wa)u.Ca(i)&&(r=!0);a.ya=i}}r&&QC(t)}function Pq(n,e,t){let r=Ae(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function QC(n){n.Da.forEach(e=>{e.next()})}var mC,ak;(ak=mC||(mC={})).Fa="default",ak.Cache="cache";var yf=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==mC.Cache}};var _v=class{constructor(e){this.key=e}},vv=class{constructor(e){this.key=e}},gC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=Jk(e),this.eu=new mv(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new gv,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{let E=i.get(g),I=Nv(this.query,y)?y:null,N=!!E&&this.mutatedKeys.has(E.key),H=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),F=!1;E&&I?E.data.isEqual(I.data)?N!==H&&(r.track({type:3,doc:I}),F=!0):this.iu(E,I)||(r.track({type:2,doc:I}),F=!0,(l&&this.Xa(I,l)>0||f&&this.Xa(I,f)<0)&&(u=!0)):!E&&I?(r.track({type:0,doc:I}),F=!0):E&&!I&&(r.track({type:1,doc:E}),F=!0,(l||f)&&(u=!0)),F&&(I?(a=a.add(I),o=H?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{eu:a,ru:r,Ds:u,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((g,y)=>(function(I,N){let H=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{At:F})}};return H(I)-H(N)})(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;let u=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,f=l!==this.Ya;return this.Ya=l,a.length!==0||f?{snapshot:new Sl(this.query,e.eu,o,a,e.mutatedKeys,l===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new gv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ze(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new vv(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new _v(r))}),t}uu(e){this.Ha=e.qs,this.Za=ze();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Sl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},YC="SyncEngine",_C=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},vC=class{constructor(e){this.key=e,this.lu=!1}},yC=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Fo(u=>Yk(u),Pv),this.Tu=new Map,this.Iu=new Set,this.du=new Ot(he.comparator),this.Eu=new Map,this.Au=new vf,this.Ru={},this.Vu=new Map,this.mu=_f.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Nq(n,e,t=!0){return T(this,null,function*(){let r=MO(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield DO(r,e,t,!0),i})}function kq(n,e){return T(this,null,function*(){let t=MO(n);yield DO(t,e,!0,!1)})}function DO(n,e,t,r){return T(this,null,function*(){let i=yield _q(n.localStore,Wi(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),u;return r&&(u=yield Oq(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&wO(n.remoteStore,i),u})}function Oq(n,e,t,r,i){return T(this,null,function*(){n.gu=(y,E,I)=>(function(H,F,W,oe){return T(this,null,function*(){let se=F.view.nu(W);se.Ds&&(se=yield nk(H.localStore,F.query,!1).then(({documents:R})=>F.view.nu(R,se)));let le=oe&&oe.targetChanges.get(F.targetId),Ye=oe&&oe.targetMismatches.get(F.targetId)!=null,be=F.view.applyChanges(se,H.isPrimaryClient,le,Ye);return uk(H,F.targetId,be._u),be.snapshot})})(n,y,E,I);let o=yield nk(n.localStore,e,!0),a=new gC(e,o.qs),u=a.nu(o.documents),l=mf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,l);uk(n,t,f._u);let g=new _C(e,t,a);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot})}function Lq(n,e,t){return T(this,null,function*(){let r=Ae(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(a=>!Pv(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield XT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&$C(r.remoteStore,i.targetId),wC(r,i.targetId)}).catch(Ml))):(wC(r,i.targetId),yield XT(r.localStore,i.targetId,!0))})}function Fq(n,e){return T(this,null,function*(){let t=Ae(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),$C(t.remoteStore,r.targetId))})}function Vq(n,e,t){return T(this,null,function*(){let r=qq(n);try{let i=yield(function(a,u){let l=Ae(a),f=Qt.now(),g=u.reduce((I,N)=>I.add(N.key),ze()),y,E;return l.persistence.runTransaction("Locally write mutations","readwrite",I=>{let N=Vo(),H=ze();return l.Os.getEntries(I,g).next(F=>{N=F,N.forEach((W,oe)=>{oe.isValidDocument()||(H=H.add(W))})}).next(()=>l.localDocuments.getOverlayedDocuments(I,N)).next(F=>{y=F;let W=[];for(let oe of u){let se=$8(oe,y.get(oe.key).overlayedDocument);se!=null&&W.push(new Qi(oe.key,se,Hk(se.value.mapValue),Gi.exists(!0)))}return l.mutationQueue.addMutationBatch(I,f,W,u)}).next(F=>{E=F;let W=F.applyToLocalDocumentSet(y,H);return l.documentOverlayCache.saveOverlays(I,F.batchId,W)})}).then(()=>({batchId:E.batchId,changes:eO(y)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,l){let f=a.Ru[a.currentUser.toKey()];f||(f=new Ot(Oe)),f=f.insert(u,l),a.Ru[a.currentUser.toKey()]=f})(r,i.batchId,t),yield Df(r,i.changes),yield Lv(r.remoteStore)}catch(i){let o=GC(i,"Failed to persist write");t.reject(o)}})}function SO(n,e){return T(this,null,function*(){let t=Ae(n);try{let r=yield pq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Eu.get(o);a&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?nt(a.lu,14607):i.removedDocuments.size>0&&(nt(a.lu,42227),a.lu=!1))}),yield Df(t,r,e)}catch(r){yield Ml(r)}})}function ck(n,e,t){let r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)}),(function(a,u){let l=Ae(a);l.onlineState=u;let f=!1;l.queries.forEach((g,y)=>{for(let E of y.wa)E.va(u)&&(f=!0)}),f&&QC(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Uq(n,e,t){return T(this,null,function*(){let r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let a=new Ot(he.comparator);a=a.insert(o,ii.newNoDocument(o,Pe.min()));let u=ze().add(o),l=new nv(Pe.min(),new Map,new Ot(Oe),a,u);yield SO(r,l),r.du=r.du.remove(o),r.Eu.delete(e),JC(r)}else yield XT(r.localStore,e,!1).then(()=>wC(r,e,t)).catch(Ml)})}function jq(n,e){return T(this,null,function*(){let t=Ae(n),r=e.batch.batchId;try{let i=yield fq(t.localStore,e);xO(t,r,null),AO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Df(t,i)}catch(i){yield Ml(i)}})}function Bq(n,e,t){return T(this,null,function*(){let r=Ae(n);try{let i=yield(function(a,u){let l=Ae(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return l.mutationQueue.lookupMutationBatch(f,u).next(y=>(nt(y!==null,37113),g=y.keys(),l.mutationQueue.removeMutationBatch(f,y))).next(()=>l.mutationQueue.performConsistencyCheck(f)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>l.localDocuments.getDocuments(f,g))})})(r.localStore,e);xO(r,e,t),AO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Df(r,i)}catch(i){yield Ml(i)}})}function AO(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function xO(n,e,t){let r=Ae(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function wC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||RO(n,r)})}function RO(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&($C(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),JC(n))}function uk(n,e,t){for(let r of t)r instanceof _v?(n.Au.addReference(r.key,e),zq(n,r)):r instanceof vv?(ie(YC,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||RO(n,r.key)):me(19791,{yu:r})}function zq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ie(YC,"New document in limbo: "+t),n.Iu.add(r),JC(n))}function JC(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new he(Ct.fromString(e)),r=n.mu.next();n.Eu.set(r,new vC(t)),n.du=n.du.insert(t,r),wO(n.remoteStore,new gf(Wi(Mv(t.path)),r,"TargetPurposeLimboResolution",PC.ue))}}function Df(n,e,t){return T(this,null,function*(){let r=Ae(n),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((u,l)=>{a.push(r.gu(l,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){let y=f?!f.fromCache:(g=t?.targetChanges.get(l.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(l.targetId,y?"current":"not-current")}if(f){i.push(f);let y=ZT.Es(l.targetId,f);o.push(y)}}))}),yield Promise.all(a),r.hu.J_(i),yield(function(l,f){return T(this,null,function*(){let g=Ae(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Z.forEach(f,E=>Z.forEach(E.Is,I=>g.persistence.referenceDelegate.addReference(y,E.targetId,I)).next(()=>Z.forEach(E.ds,I=>g.persistence.referenceDelegate.removeReference(y,E.targetId,I)))))}catch(y){if(!Pl(y))throw y;ie(zC,"Failed to update sequence numbers: "+y)}for(let y of f){let E=y.targetId;if(!y.fromCache){let I=g.Fs.get(E),N=I.snapshotVersion,H=I.withLastLimboFreeSnapshotVersion(N);g.Fs=g.Fs.insert(E,H)}}})})(r.localStore,o))})}function $q(n,e){return T(this,null,function*(){let t=Ae(n);if(!t.currentUser.isEqual(e)){ie(YC,"User change. New user:",e.toKey());let r=yield vO(t.localStore,e);t.currentUser=e,(function(o,a){o.Vu.forEach(u=>{u.forEach(l=>{l.reject(new ee(G.CANCELLED,a))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Df(t,r.Bs)}})}function Hq(n,e){let t=Ae(n),r=t.Eu.get(e);if(r&&r.lu)return ze().add(r.key);{let i=ze(),o=t.Tu.get(e);if(!o)return i;for(let a of o){let u=t.Pu.get(a);i=i.unionWith(u.view.tu)}return i}}function MO(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Uq.bind(null,e),e.hu.J_=Mq.bind(null,e.eventManager),e.hu.pu=Pq.bind(null,e.eventManager),e}function qq(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bq.bind(null,e),e}var PO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=kv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return hq(this.persistence,new YT,t.initialUser,this.serializer)}Du(t){return new cv(KT.Vi,this.serializer)}bu(t){return new eC}terminate(){return T(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),EC=class extends PO{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){nt(this.persistence.referenceDelegate instanceof uv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new OT(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?kr.withCacheSize(this.cacheSizeBytes):kr.DEFAULT;return new cv(r=>uv.Vi(r,t),this.serializer)}};var Wq=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ck(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$q.bind(null,this.syncEngine),yield Rq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new pC})()}createDatastore(t){let r=kv(t.databaseInfo.databaseId),i=(function(a){return new oC(a)})(t.databaseInfo);return(function(a,u,l,f){return new uC(a,u,l,f)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,a,u,l){return new dC(i,o,a,u,l)})(this.localStore,this.datastore,t.asyncQueue,r=>ck(this.syncEngine,r,0),(function(){return dv.C()?new dv:new tC})())}createSyncEngine(t,r){return(function(o,a,u,l,f,g,y){let E=new yC(o,a,u,l,f,g);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var t,r;yield(function(o){return T(this,null,function*(){let a=Ae(o);ie(Tc,"RemoteStore shutting down."),a.Ia.add(5),yield Cf(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var wf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ko("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ys="FirestoreClient",bC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=uf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>T(this,null,function*(){ie(Ys,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(ie(Ys,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=GC(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function G0(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie(Ys,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(null,null,function*(){r.isEqual(i)||(yield vO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Gs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Gs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function lk(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Gq(n);ie(Ys,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ok(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ok(e.remoteStore,i)),n._onlineComponents=e})}function Gq(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(Ys,"Using user provided OfflineComponentProvider");try{yield G0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Gs("Error using user provided cache. Falling back to memory cache: "+t),yield G0(n,new PO)}}else ie(Ys,"Using default OfflineComponentProvider"),yield G0(n,new EC(void 0));return n._offlineComponents})}function NO(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(Ys,"Using user provided OnlineComponentProvider"),yield lk(n,n._uninitializedComponentsProvider._online)):(ie(Ys,"Using default OnlineComponentProvider"),yield lk(n,new Wq))),n._onlineComponents})}function Kq(n){return NO(n).then(e=>e.syncEngine)}function yv(n){return T(this,null,function*(){let e=yield NO(n),t=e.eventManager;return t.onListen=Nq.bind(null,e.syncEngine),t.onUnlisten=Lq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Fq.bind(null,e.syncEngine),t})}function Zq(n,e,t={}){let r=new ri;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return(function(o,a,u,l,f){let g=new wf({next:E=>{g.Ou(),a.enqueueAndForget(()=>ZC(o,y));let I=E.docs.has(u);!I&&E.fromCache?f.reject(new ee(G.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&l&&l.source==="server"?f.reject(new ee(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new yf(Mv(u.path),g,{includeMetadataChanges:!0,ka:!0});return KC(o,y)})(yield yv(n),n.asyncQueue,e,t,r)})),r.promise}function Qq(n,e,t={}){let r=new ri;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return(function(o,a,u,l,f){let g=new wf({next:E=>{g.Ou(),a.enqueueAndForget(()=>ZC(o,y)),E.fromCache&&l.source==="server"?f.reject(new ee(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new yf(u,g,{includeMetadataChanges:!0,ka:!0});return KC(o,y)})(yield yv(n),n.asyncQueue,e,t,r)})),r.promise}function kO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var dk=new Map;var OO="firestore.googleapis.com",hk=!0,wv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OO,this.ssl=hk}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:hk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_O;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<uq)throw new ee(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Al=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new K0;switch(r.type){case"firstParty":return new J0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=dk.get(t);r&&(ie("ComponentProvider","Removing Datastore"),dk.delete(t),r.terminate())})(this),Promise.resolve()}};function LO(n,e,t,r={}){var i;n=er(n,Al);let o=Li(e),a=n._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(il(`https://${l}`),ol("Firestore",!0)),a.host!==OO&&a.host!==l&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:l,ssl:o,emulatorOptions:r});if(!Fi(f,u)&&(n._setSettings(f),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=dn.MOCK_USER;else{g=f_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ee(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new dn(E)}n._authCredentials=new Z0(new K_(g,y))}}var Js=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Tf(t,n._jsonSchema))return new n(e,r||null,new he(Ct.fromString(t.referencePath)))}};Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:Zt("string",Xt._jsonSchemaVersion),referencePath:Zt("string")};var $s=class n extends Js{constructor(e,t,r){super(e,t,Mv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new he(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function FO(n,e,...t){if(n=It(n),wk("collection","path",e),n instanceof Al){let r=Ct.fromString(e,...t);return R1(r),new $s(n,null,r)}{if(!(n instanceof Xt||n instanceof $s))throw new ee(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return R1(r),new $s(n.firestore,null,r)}}function XC(n,e,...t){if(n=It(n),arguments.length===1&&(e=uf.newId()),wk("doc","path",e),n instanceof Al){let r=Ct.fromString(e,...t);return x1(r),new Xt(n,null,new he(r))}{if(!(n instanceof Xt||n instanceof $s))throw new ee(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return x1(r),new Xt(n.firestore,n instanceof $s?n.converter:null,new he(r))}}var fk="AsyncQueue",Ev=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new hv(this,"async_queue_retry"),this.oc=()=>{let r=W0();r&&ie(fk,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=W0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=W0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ri;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return T(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Pl(e))throw e;ie(fk,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ko("INTERNAL UNHANDLED ERROR: ",pk(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=hC.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&me(47125,{hc:pk(this.tc)})}verifyOperationInProgress(){}Pc(){return T(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function pk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function mk(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var si=class extends Al{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ev,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ev(e),this._firestoreClient=void 0,yield e}})}};function VO(n,e){let t=typeof n=="object"?n:So(),r=typeof n=="string"?n:e||X_,i=Ns(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=h_("firestore");o&&LO(i,...o)}return i}function Fv(n){if(n._terminated)throw new ee(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Yq(n),n._firestoreClient}function Yq(n){var e,t,r;let i=n._freezeSettings(),o=(function(u,l,f,g){return new rT(u,l,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,kO(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new bC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(u){let l=u?._online.build();return{_offline:u?._offline.build(l),_online:l}})(n._componentsProvider))}var Hs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Pn.fromBase64String(e))}catch(t){throw new ee(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Hs._jsonSchemaVersion="firestore/bytes/1.0",Hs._jsonSchema={type:Zt("string",Hs._jsonSchemaVersion),bytes:Zt("string")};var xl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ef=class{constructor(e){this._methodName=e}};var qs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Tf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};qs._jsonSchemaVersion="firestore/geoPoint/1.0",qs._jsonSchema={type:Zt("string",qs._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};var Ws=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ee(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ws._jsonSchemaVersion="firestore/vectorValue/1.0",Ws._jsonSchema={type:Zt("string",Ws._jsonSchemaVersion),vectorValues:Zt("object")};var Jq=/^__.*__$/,IC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}},bv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function UO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ec:n})}}var TC=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Tv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(UO(this.Ec)&&Jq.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},CC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kv(e)}Dc(e,t,r,i=!1){return new TC({Ec:e,methodName:t,bc:r,path:yr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Vv(n){let e=n._freezeSettings(),t=kv(n._databaseId);return new CC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jO(n,e,t,r,i,o={}){let a=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);eD("Data must be an object, but it was:",a,r);let u=BO(r,a),l,f;if(o.merge)l=new Or(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let g=[];for(let y of o.mergeFields){let E=DC(e,y,t);if(!a.contains(E))throw new ee(G.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);$O(g,E)||g.push(E)}l=new Or(g),f=a.fieldTransforms.filter(y=>l.covers(y.field))}else l=null,f=a.fieldTransforms;return new IC(new vr(u),l,f)}var Iv=class n extends Ef{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Xq(n,e,t,r){let i=n.Dc(1,e,t);eD("Data must be an object, but it was:",i,r);let o=[],a=vr.empty();Xs(r,(l,f)=>{let g=tD(e,l,t);f=It(f);let y=i.gc(g);if(f instanceof Iv)o.push(g);else{let E=Sf(f,y);E!=null&&(o.push(g),a.set(g,E))}});let u=new Or(o);return new bv(a,u,i.fieldTransforms)}function e9(n,e,t,r,i,o){let a=n.Dc(1,e,t),u=[DC(e,r,t)],l=[i];if(o.length%2!=0)throw new ee(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)u.push(DC(e,o[E])),l.push(o[E+1]);let f=[],g=vr.empty();for(let E=u.length-1;E>=0;--E)if(!$O(f,u[E])){let I=u[E],N=l[E];N=It(N);let H=a.gc(I);if(N instanceof Iv)f.push(I);else{let F=Sf(N,H);F!=null&&(f.push(I),g.set(I,F))}}let y=new Or(f);return new bv(g,y,a.fieldTransforms)}function t9(n,e,t,r=!1){return Sf(t,n.Dc(r?4:3,e))}function Sf(n,e){if(zO(n=It(n)))return eD("Unsupported field value:",e,n),BO(n,e);if(n instanceof Ef)return(function(r,i){if(!UO(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],a=0;for(let u of r){let l=Sf(u,i.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return V8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qt.fromDate(r);return{timestampValue:sv(i.serializer,o)}}if(r instanceof Qt){let o=new Qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sv(i.serializer,o)}}if(r instanceof qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hs)return{bytesValue:lO(i.serializer,r._byteString)};if(r instanceof Xt){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:BC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ws)return(function(a,u){return{mapValue:{fields:{[OC]:{stringValue:LC},[yl]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return jC(u.serializer,f)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Av(r)}`)})(n,e)}function BO(n,e){let t={};return Lk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(n,(r,i)=>{let o=Sf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function zO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qt||n instanceof qs||n instanceof Hs||n instanceof Xt||n instanceof Ef||n instanceof Ws)}function eD(n,e,t){if(!zO(t)||!Ek(t)){let r=Av(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function DC(n,e,t){if((e=It(e))instanceof xl)return e._internalPath;if(typeof e=="string")return tD(n,e);throw Tv("Field path arguments must be of type string or ",n,!1,void 0,t)}var n9=new RegExp("[~\\*/\\[\\]]");function tD(n,e,t){if(e.search(n9)>=0)throw Tv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xl(...e.split("."))._internalPath}catch{throw Tv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tv(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ee(G.INVALID_ARGUMENT,u+n+l)}function $O(n,e){return n.some(t=>t.isEqual(e))}var Cv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new SC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Uv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},SC=class extends Cv{data(){return super.data()}};function Uv(n,e){return typeof e=="string"?tD(n,e):e instanceof xl?e._internalPath:e._delegate._internalPath}function HO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bf=class{},Dv=class extends bf{};function qO(n,e,...t){let r=[];e instanceof bf&&r.push(e),r=r.concat(t),(function(o){let a=o.filter(l=>l instanceof AC).length,u=o.filter(l=>l instanceof Sv).length;if(a>1||a>0&&u>0)throw new ee(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Sv=class n extends Dv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return KO(e._query,t),new Js(e.firestore,e.converter,gT(e._query,t))}_parse(e){let t=Vv(e.firestore);return(function(o,a,u,l,f,g,y){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ee(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){_k(y,g);let N=[];for(let H of y)N.push(gk(l,o,H));E={arrayValue:{values:N}}}else E=gk(l,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||_k(y,g),E=t9(u,a,y,g==="in"||g==="not-in");return Kt.create(f,g,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function WO(n,e,t){let r=e,i=Uv("where",n);return Sv._create(i,r,t)}var AC=class n extends bf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:oi.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let a=i,u=o.getFlattenedFilters();for(let l of u)KO(a,l),a=gT(a,l)})(e._query,t),new Js(e.firestore,e.converter,gT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var xC=class n extends Dv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,a){if(i.startAt!==null)throw new ee(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(o,a)})(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,(function(i,o){let a=i.explicitOrderBy.concat([o]);return new Zs(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function GO(n,e="asc"){let t=e,r=Uv("orderBy",n);return xC._create(r,t)}function gk(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new ee(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qk(e)&&t.indexOf("/")!==-1)throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ct.fromString(t));if(!he.isDocumentKey(r))throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return F1(n,new he(r))}if(t instanceof Xt)return F1(n,t._key);throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Av(t)}.`)}function _k(n,e){if(!Array.isArray(n)||n.length===0)throw new ee(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KO(n,e){let t=(function(i,o){for(let a of i)for(let u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ee(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var RC=class{convertValue(e,t="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Xs(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[yl].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Tt(a.doubleValue));return new Ws(o)}convertGeoPoint(e){return new qs(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Rv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hf(e));default:return null}}convertTimestamp(e){let t=Oo(e);return new Qt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ct.fromString(e);nt(gO(r),9688,{name:e});let i=new ev(r.get(1),r.get(3)),o=new he(r.popFirst(5));return i.isEqual(t)||ko(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function ZO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var mc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gc=class n extends Cv{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new _l(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Uv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gc._jsonSchemaVersion="firestore/documentSnapshot/1.0",gc._jsonSchema={type:Zt("string",gc._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};var _l=class extends gc{data(e={}){return super.data(e)}},_c=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _l(this._firestore,this._userDataWriter,r.key,r,new mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let l=new _l(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let l=new _l(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,g=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:r9(u.type),doc:l,oldIndex:f,newIndex:g}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function r9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}function QO(n){n=er(n,Xt);let e=er(n.firestore,si);return Zq(Fv(e),n._key).then(t=>nL(e,n,t))}_c._jsonSchemaVersion="firestore/querySnapshot/1.0",_c._jsonSchema={type:Zt("string",_c._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};var If=class extends RC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,t)}};function YO(n){n=er(n,Js);let e=er(n.firestore,si),t=Fv(e),r=new If(e);return HO(n._query),Qq(t,n._query).then(i=>new _c(e,r,n,i))}function JO(n,e,t){n=er(n,Xt);let r=er(n.firestore,si),i=ZO(n.converter,e,t);return jv(r,[jO(Vv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Gi.none())])}function XO(n,e,t,...r){n=er(n,Xt);let i=er(n.firestore,si),o=Vv(i),a;return a=typeof(e=It(e))=="string"||e instanceof xl?e9(o,"updateDoc",n._key,e,t,r):Xq(o,"updateDoc",n._key,e),jv(i,[a.toMutation(n._key,Gi.exists(!0))])}function eL(n){return jv(er(n.firestore,si),[new pf(n._key,Gi.none())])}function tL(n,e){let t=er(n.firestore,si),r=XC(n),i=ZO(n.converter,e);return jv(t,[jO(Vv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gi.exists(!1))]).then(()=>r)}function nD(n,...e){var t,r,i;n=It(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||mk(e[a])||(o=e[a++]);let u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(mk(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let l,f,g;if(n instanceof Xt)f=er(n.firestore,si),g=Mv(n._key.path),l={next:y=>{e[a]&&e[a](nL(f,n,y))},error:e[a+1],complete:e[a+2]};else{let y=er(n,Js);f=er(y.firestore,si),g=y._query;let E=new If(f);l={next:I=>{e[a]&&e[a](new _c(f,E,y,I))},error:e[a+1],complete:e[a+2]},HO(n._query)}return(function(E,I,N,H){let F=new wf(H),W=new yf(I,F,N);return E.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return KC(yield yv(E),W)})),()=>{F.Ou(),E.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return ZC(yield yv(E),W)}))}})(Fv(f),g,u,l)}function jv(n,e){return(function(r,i){let o=new ri;return r.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return Vq(yield Kq(r),i,o)})),o.promise})(Fv(n),e)}function nL(n,e,t){let r=t.docs.get(e._key),i=new If(n);return new gc(n,i,e._key,r,new mc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Rl=i})(ji),_r(new En("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new si(new Q0(r.getProvider("auth-internal")),new X0(a,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ev(f.options.projectId,g)})(a,i),a);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),lt(C1,D1,e),lt(C1,D1,"esm2017")})();var Bv=function(){return Bv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bv.apply(this,arguments)};var s9={includeMetadataChanges:!1};function rL(n,e){return e===void 0&&(e=s9),new Te(function(t){var r=nD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function iL(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Bv(Bv({},r),(t={},t[e.idField]=n.id,t))}function oL(n){return rL(n,{includeMetadataChanges:!0}).pipe(Ce(function(e){return e.docs}))}function sL(n,e){return e===void 0&&(e={}),oL(n).pipe(Ce(function(t){return t.map(function(r){return iL(r,e)})}))}var $n=class{constructor(e){return e}},aL="firestore",rD=class{constructor(){return ks(aL)}};var iD=new X("angularfire2.firestore-instances");function a9(n,e){let t=sc(aL,n,e);return t&&new $n(t)}function c9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $n(r)}}var u9={provide:rD,deps:[[new an,iD]]},l9={provide:$n,useFactory:a9,deps:[[new an,iD],ti]};function cL(n,...e){return lt("angularfire",Bi.full,"fst"),Un([l9,u9,{provide:iD,useFactory:c9(n),multi:!0,deps:[Ke,wt,zi,Ao,[new an,dc],[new an,Ls],...e]}])}var Af=_t(sL,!0);var kl=_t(tL,!0,2);var ai=_t(FO,!0,2);var xf=_t(eL,!0,2);var tr=_t(XC,!0,2);var zv=_t(QO,!0);var oD=_t(YO,!0);var uL=_t(VO,!0);var $v=_t(GO,!0,2),ea=_t(qO,!0,2);var Ol=_t(JO,!0,2);var sD=_t(XO,!0,2);var aD=_t(WO,!0,2);var Yi=class n{auth=$(Bt);firestore=$($n);constructor(){}registerUser(e,t,r){return T(this,null,function*(){let o=(yield U_(this.auth,e,t)).user.uid;return yield Ol(tr(this.firestore,"users",o),r),o})}login(e,t){return T(this,null,function*(){return yield E1(this.auth,F_),b1(this.auth,e,t)})}getUserRole(e){return T(this,null,function*(){let t=tr(this.firestore,"users",e),r=yield zv(t);return r.exists()?r.data().role:null})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function d9(n,e){if(n&1&&(V(0,"div",18),q(1),U()),n&2){let t=Ee();Y(),Ut(" ",t.error()," ")}}var Wv=class n{constructor(e,t,r){this.authService=e;this.auth=t;this.router=r}email=gt("");password=gt("");error=gt("");login(){return T(this,null,function*(){try{let t=(yield this.authService.login(this.email(),this.password())).user,r=yield this.authService.getUserRole(t.uid);r==="commuter"?this.router.navigate(["/commuter/dashboard"]):r==="driver"?this.router.navigate(["/driver/dashboard"]):r==="admin"?this.router.navigate(["/admin/dashboard"]):this.error.set("Invalid role assigned.")}catch(e){this.error.set(e.message)}})}static \u0275fac=function(t){return new(t||n)(ue(Yi),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-login"]],decls:26,vars:3,consts:[[1,"otw-login-page"],[1,"otw-login-bg"],[1,"otw-login-content"],[1,"otw-login-card"],[1,"otw-login-header","text-center"],[1,"otw-logo-bg","mb-3"],[1,"otw-login-title"],[1,"otw-login-subtitle"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"form-floating","mb-3"],["type","email","id","email","placeholder","Email",1,"form-control","otw-input",3,"ngModelChange","keydown.enter","ngModel"],["for","email"],[1,"form-floating","mb-4"],["type","password","id","password","placeholder","Password",1,"form-control","otw-input",3,"ngModelChange","keydown.enter","ngModel"],["for","password"],[1,"btn","otw-btn-primary","w-100","mb-3",3,"click"],[1,"otw-login-footer","text-center"],["routerLink","/signup",1,"otw-link"],[1,"alert","alert-danger","mb-3"]],template:function(t,r){t&1&&(V(0,"div",0),Vt(1,"div",1),V(2,"div",2)(3,"div",3)(4,"div",4),Vt(5,"div",5),V(6,"h2",6),q(7,"Welcome to OTW"),U(),V(8,"p",7),q(9,"Login to your account"),U()(),kt(10,d9,2,1,"div",8),V(11,"div",9)(12,"input",10),Qe("ngModelChange",function(o){return Xe(r.email,o)||(r.email=o),o}),ae("keydown.enter",function(){return r.login()}),U(),V(13,"label",11),q(14,"Email"),U()(),V(15,"div",12)(16,"input",13),Qe("ngModelChange",function(o){return Xe(r.password,o)||(r.password=o),o}),ae("keydown.enter",function(){return r.login()}),U(),V(17,"label",14),q(18,"Password"),U()(),V(19,"button",15),ae("click",function(){return r.login()}),q(20," Login "),U(),V(21,"div",16)(22,"span"),q(23,"Don't have an account?"),U(),V(24,"a",17),q(25,"Create an account"),U()()()()()),t&2&&(Y(10),st("ngIf",r.error()),Y(2),Ze("ngModel",r.email),Y(4),Ze("ngModel",r.password))},dependencies:[xn,Wa,Xn,Jn,Nr,gr,Oi],styles:['.otw-login-page[_ngcontent-%COMP%]{position:relative;min-height:100vh;overflow:hidden}.otw-login-bg[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;z-index:0}.otw-login-content[_ngcontent-%COMP%]{position:relative;z-index:1;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1.5rem 1rem}.otw-login-card[_ngcontent-%COMP%]{width:100%;max-width:380px;border-radius:32px;background:#fffffff5;box-shadow:0 22px 55px #180b3c8c;padding:2rem 1.75rem}.otw-logo-bg[_ngcontent-%COMP%]{width:84px;height:84px;border-radius:24px;margin:0 auto;background-image:url("./media/logo-IKMKXBN4.png");background-size:cover;background-position:center;background-repeat:no-repeat;box-shadow:0 18px 40px #180b3c73}.otw-login-title[_ngcontent-%COMP%]{margin-top:1rem;font-weight:800;font-size:1.6rem;color:#1f1f2e;letter-spacing:.02em}.otw-login-subtitle[_ngcontent-%COMP%]{margin:.2rem 0 .6rem;font-size:.9rem;color:#0f0a28b3}.otw-input[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(15,10,40,.18);font-size:.95rem}.otw-input[_ngcontent-%COMP%]:focus{border-color:#ff9b3a;box-shadow:0 0 0 .15rem #ff9b3a59}.otw-btn-primary[_ngcontent-%COMP%]{border-radius:999px;padding:.75rem 1rem;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;font-size:.96rem;letter-spacing:.03em;text-transform:uppercase;box-shadow:0 16px 36px #180b3c80;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease}.otw-btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 22px 48px #180b3c99}.otw-btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 12px 26px #180b3c66}.otw-login-footer[_ngcontent-%COMP%]{font-size:.85rem;color:#0f0a28b3}.otw-login-footer[_ngcontent-%COMP%]   .otw-link[_ngcontent-%COMP%]{margin-left:.25rem;color:#ff9b3a;font-weight:600;text-decoration:none}.otw-login-footer[_ngcontent-%COMP%]   .otw-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (min-width: 768px){.otw-login-card[_ngcontent-%COMP%]{padding:2.3rem 2.2rem;max-width:420px}}']})};var Gv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ft({type:n,selectors:[["app-signup-choice"]],decls:13,vars:0,consts:[[1,"signup-bg","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"signup-card"],[1,"text-center","mb-4"],[1,"signup-logo","mb-3"],[1,"signup-title"],[1,"signup-subtitle"],["routerLink","/signup/commuter",1,"btn","signup-btn","w-100","py-2","mb-3"],[1,"text-center","mt-3"],["routerLink","/login",1,"signup-link"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"div",2),Vt(3,"div",3),V(4,"h2",4),q(5,"Create an account"),U(),V(6,"p",5),q(7,"Choose your account type to continue"),U()(),V(8,"button",6),q(9," I am a Commuter "),U(),V(10,"div",7)(11,"a",8),q(12,"Back to Login"),U()()()())},dependencies:[xn,Oi],styles:['.signup-bg[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;padding:1.5rem 1rem}.signup-card[_ngcontent-%COMP%]{width:100%;max-width:380px;border-radius:32px;background:#fffffff5;box-shadow:0 22px 55px #180b3c8c;padding:2rem 1.75rem}.signup-title[_ngcontent-%COMP%]{margin-top:1rem;font-weight:800;font-size:1.6rem;color:#1f1f2e;letter-spacing:.02em;text-transform:none}.signup-subtitle[_ngcontent-%COMP%]{margin:.2rem 0 .6rem;font-size:.9rem;color:#0f0a28b3}.signup-btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;font-size:.96rem;letter-spacing:.03em;text-transform:uppercase;box-shadow:0 14px 32px #180b3c80;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease}.signup-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 20px 44px #180b3c99}.signup-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 12px 26px #180b3c66}.signup-link[_ngcontent-%COMP%]{color:#ff9b3a;font-weight:600;text-decoration:none;font-size:.9rem}.signup-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (min-width: 768px){.signup-card[_ngcontent-%COMP%]{padding:2.3rem 2.2rem;max-width:420px}}']})};var Kv=class n{constructor(e,t){this.authService=e;this.router=t}name=gt("");email=gt("");password=gt("");register(){return T(this,null,function*(){try{console.log("Creating commuter account...");let e={name:this.name(),email:this.email(),role:"commuter",createdAt:new Date},t=yield this.authService.registerUser(this.email(),this.password(),e);console.log("User created with ID:",t),alert("Account created successfully!"),this.router.navigate(["/login"])}catch(e){console.error("SIGNUP ERROR:",e),alert("Error: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(ue(Yi),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-commuter-signup"]],decls:12,vars:3,consts:[[1,"signup-bg"],[1,"signup-card"],[1,"logo-placeholder","mb-3"],[1,"signup-title","text-center"],[1,"signup-subtitle","text-center"],["type","text","placeholder","Full Name",1,"form-control","mb-3",3,"input","value"],["type","email","placeholder","Email",1,"form-control","mb-3",3,"input","value"],["type","password","placeholder","Password",1,"form-control","mb-4",3,"input","value"],["type","button",1,"signup-btn","w-100","mb-3",3,"click"]],template:function(t,r){t&1&&(Qr(0,"div",0)(1,"div",1),ig(2,"div",2),Qr(3,"h2",3),q(4,"Commuter Signup"),Ai(),Qr(5,"p",4),q(6,"Create your commuter account"),Ai(),Qr(7,"input",5),Ha("input",function(o){return r.name.set(o.target.value)}),Ai(),Qr(8,"input",6),Ha("input",function(o){return r.email.set(o.target.value)}),Ai(),Qr(9,"input",7),Ha("input",function(o){return r.password.set(o.target.value)}),Ai(),Qr(10,"button",8),Ha("click",function(){return r.register()}),q(11," Create Account "),Ai()()()),t&2&&(Y(7),Ou("value",r.name()),Y(),Ou("value",r.email()),Y(),Ou("value",r.password()))},dependencies:[xn,Xn],styles:['.signup-bg[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:1rem;box-sizing:border-box}.signup-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;z-index:0}.signup-card[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:400px;border-radius:1.5rem;background:#fffffff5;box-shadow:0 10px 25px #180b3c66;padding:2rem;display:flex;flex-direction:column;align-items:center;box-sizing:border-box}.logo-placeholder[_ngcontent-%COMP%]{width:84px;height:84px;border-radius:20px;margin-bottom:1rem;background-image:url("./media/logo-IKMKXBN4.png");background-size:cover;background-position:center;box-shadow:0 4px 12px #180b3c4d}.signup-title[_ngcontent-%COMP%]{font-weight:800;font-size:1.5rem;color:#1f1f2e;text-align:center;margin-bottom:.5rem}.signup-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#0f0a28b3;text-align:center;margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%]{width:100%;border-radius:50px;border:1px solid rgba(15,10,40,.18);padding:.65rem 1rem;font-size:.95rem;margin-bottom:1rem;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#ff9b3a;box-shadow:0 0 0 .15rem #ff9b3a59;outline:none}.signup-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border-radius:50px;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;text-transform:uppercase;box-shadow:0 6px 12px #180b3c66;transition:transform .15s,box-shadow .15s,filter .15s;cursor:pointer;margin-bottom:1rem}.signup-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 10px 20px #180b3c80}.signup-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 5px 10px #180b3c4d}@media (max-width: 400px){.signup-card[_ngcontent-%COMP%]{padding:1rem}.logo-placeholder[_ngcontent-%COMP%]{width:60px;height:60px}.signup-title[_ngcontent-%COMP%]{font-size:1.2rem}.signup-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.form-control[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem .8rem}.signup-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.6rem .8rem}}']})};var Zv=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";loading=!1;message="";createAdmin(){return T(this,null,function*(){this.loading=!0,this.message="";try{let e={role:"admin",email:this.email,createdAt:new Date};yield this.authService.registerUser(this.email,this.password,e),this.message="Admin account created successfully! Redirecting...",setTimeout(()=>{this.router.navigate(["/admin/dashboard"])},1500)}catch(e){this.message=e.message}this.loading=!1})}static \u0275fac=function(t){return new(t||n)(ue(Yi),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-admin-setup"]],decls:14,vars:5,consts:[[1,"container"],[3,"ngSubmit"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"msg"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"h2"),q(2,"Create Admin Account"),U(),V(3,"form",1),ae("ngSubmit",function(){return r.createAdmin()}),V(4,"label"),q(5,"Email"),U(),V(6,"input",2),Qe("ngModelChange",function(o){return Xe(r.email,o)||(r.email=o),o}),U(),V(7,"label"),q(8,"Password"),U(),V(9,"input",3),Qe("ngModelChange",function(o){return Xe(r.password,o)||(r.password=o),o}),U(),V(10,"button",4),q(11),U()(),V(12,"p",5),q(13),U()()),t&2&&(Y(6),Ze("ngModel",r.email),Y(3),Ze("ngModel",r.password),Y(),st("disabled",r.loading),Y(),Ut(" ",r.loading?"Creating...":"Create Admin"," "),Y(2),cn(r.message))},dependencies:[Xn,LP,Jn,Nr,RP,wI,gr,gI],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:60px auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;padding:12px;margin:8px 0}button[_ngcontent-%COMP%]{background:#06f;border:none;color:#fff;cursor:pointer;border-radius:8px}button[_ngcontent-%COMP%]:disabled{opacity:.7}.msg[_ngcontent-%COMP%]{text-align:center;margin-top:10px;color:#333}"]})};var Nn=$D(cD());var z=$D(cD(),1);function Hn(n,e){return Object.assign(e,n.geocodingQueryParams)}function nr(n,e){return Object.assign(e,n.reverseQueryParams)}var h9=/[&<>"'`]/g,f9=/[&<>"'`]/,p9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function m9(n){return p9[n]}function g9(n){return n==null?"":n?(n=""+n,f9.test(n)?n.replace(h9,m9):n):n+""}function dt(n,e){let t={Accept:"application/json"},r=new URL(n);return Object.entries(e).forEach(([i,o])=>{(Array.isArray(o)?o:[o]).forEach(a=>{r.searchParams.append(i,a)})}),fetch(r.toString(),{headers:t}).then(i=>i.json())}function _9(n,e){return n.replace(/\{ *([\w_]+) *\}/g,(t,r)=>{let i=e[r];return i===void 0?i="":typeof i=="function"&&(i=i(e)),g9(i)})}var Yv=class{options={serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{token:this.options.apiKey,SingleLine:e,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"});return(yield dt(this.options.serviceUrl+"/findAddressCandidates",t)).candidates.map(r=>{let i=new z.LatLng(r.location.y,r.location.x),o=new z.LatLngBounds(new z.LatLng(r.extent.ymax,r.extent.xmax),new z.LatLng(r.extent.ymin,r.extent.xmin));return{name:r.address,bbox:o,center:i}})})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{location:e.lng+","+e.lat,distance:100,f:"json"}),i=yield dt(this.options.serviceUrl+"/reverseGeocode",r);if(!i||i.error)return[];let o=new z.LatLng(i.location.y,i.location.x),a=new z.LatLngBounds(o,o);return[{name:i.address.Match_addr,center:o,bbox:a}]})}};function v9(n){return new Yv(n)}var Jv=class{options={serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{query:e,key:this.options.apiKey}),r=yield dt(this.options.serviceUrl,t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey}),i=yield dt(this.options.serviceUrl+e.lat+","+e.lng,r);return this._parseResults(i)})}_parseResults(e){return e.resourceSets[0].resources.map(t=>{let r=t.bbox;return{name:t.name,bbox:new z.LatLngBounds([r[0],r[1]],[r[2],r[3]]),center:new z.LatLng(...t.point.coordinates)}})}};function y9(n){return new Jv(n)}var Xv=class{options={apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"};constructor(e){if(z.Util.setOptions(this,e),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}geocode(e){return T(this,null,function*(){let t={"api-version":"1.0",query:e,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+"/address/json";return((yield dt(r,t)).results||[]).map(i=>({name:i.address.freeformAddress,bbox:new z.LatLngBounds([i.viewport.topLeftPoint.lat,i.viewport.topLeftPoint.lon],[i.viewport.btmRightPoint.lat,i.viewport.btmRightPoint.lon]),center:new z.LatLng(i.position.lat,i.position.lon)}))})}reverse(e,t){return T(this,null,function*(){let r={"api-version":"1.0",query:e.lat+","+e.lng,"subscription-key":this.options.apiKey},i=this.options.serviceUrl+"/address/reverse/json";return((yield dt(i,r)).addresses||[]).map(o=>({name:o.address.freeformAddress,bbox:new z.LatLngBounds([o.viewport.topLeftPoint.lat,o.viewport.topLeftPoint.lon],[o.viewport.btmRightPoint.lat,o.viewport.btmRightPoint.lon]),center:new z.LatLng(e.lat,e.lng)}))})}};function w9(n){return new Xv(n)}var ey=class{options={serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{key:this.options.apiKey,address:e}),r=yield dt(this.options.serviceUrl,t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey,latlng:e.lat+","+e.lng}),i=yield dt(this.options.serviceUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.results||[])?.map(t=>{let r=new z.LatLng(t.geometry.location.lat,t.geometry.location.lng),i=new z.LatLngBounds(new z.LatLng(t.geometry.viewport.northeast.lat,t.geometry.viewport.northeast.lng),new z.LatLng(t.geometry.viewport.southwest.lat,t.geometry.viewport.southwest.lng));return{name:t.formatted_address,bbox:i,center:r,properties:t.address_components}})}};function E9(n){return new ey(n)}var ty=class{options={serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5};constructor(e){if(z.Util.setOptions(this,e),e?.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(e){let t=Hn(this.options,{searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",t)}reverse(e,t){let r=e.lat+","+e.lng;this.options.reverseGeocodeProxRadius&&(r+=","+this.options.reverseGeocodeProxRadius);let i=nr(this.options,{prox:r,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",i)}getJSON(e,t){return T(this,null,function*(){return((yield dt(e,t)).response.view?.[0]?.result||[]).map(r=>{let i=r.location,o=new z.LatLng(i.displayPosition.latitude,i.displayPosition.longitude),a=new z.LatLngBounds(new z.LatLng(i.mapView.topLeft.latitude,i.mapView.topLeft.longitude),new z.LatLng(i.mapView.bottomRight.latitude,i.mapView.bottomRight.longitude));return{name:i.address.label,properties:i.address,bbox:a,center:o}})})}},ny=class{options={serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10};constructor(e){z.Util.setOptions(this,e)}geocode(e){let t=Hn(this.options,{q:e,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!t.at&&!t.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",t)}reverse(e,t){let r=nr(this.options,{at:e.lat+","+e.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",r)}getJSON(e,t){return T(this,null,function*(){return((yield dt(e,t)).items||[]).map(r=>{let i=new z.LatLng(r.position.lat,r.position.lng),o;return r.mapView?o=new z.LatLngBounds(new z.LatLng(r.mapView.south,r.mapView.west),new z.LatLng(r.mapView.north,r.mapView.east)):o=new z.LatLngBounds(new z.LatLng(r.position.lat,r.position.lng),new z.LatLng(r.position.lat,r.position.lng)),{name:r.address.label,properties:r.address,bbox:o,center:i}})})}};function b9(n){return n?.apiKey?new ny(n):new ty(n)}function dL(n){let e;if(e=n.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return new z.LatLng((/N/i.test(e[1])?1:-1)*+e[2],(/E/i.test(e[3])?1:-1)*+e[4]);if(e=n.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return new z.LatLng((/N/i.test(e[2])?1:-1)*+e[1],(/E/i.test(e[4])?1:-1)*+e[3]);if(e=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\W*([EW])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?$/))return new z.LatLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60),(/E/i.test(e[4])?1:-1)*(+e[5]+ +e[6]/60));if(e=n.match(/^(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([NS])\W*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([EW])$/))return new z.LatLng((/N/i.test(e[3])?1:-1)*(+e[1]+ +e[2]/60),(/E/i.test(e[6])?1:-1)*(+e[4]+ +e[5]/60));if(e=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\W*([EW])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?$/))return new z.LatLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60+ +e[4]/3600),(/E/i.test(e[5])?1:-1)*(+e[6]+ +e[7]/60+ +e[8]/3600));if(e=n.match(/^(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]\s*([NS])\W*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\s*([EW])$/))return new z.LatLng((/N/i.test(e[4])?1:-1)*(+e[1]+ +e[2]/60+ +e[3]/3600),(/E/i.test(e[8])?1:-1)*(+e[5]+ +e[6]/60+ +e[7]/3600));if(e=n.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return new z.LatLng(+e[1],+e[2])}var ry=class{options={next:void 0,sizeInMeters:1e4};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=dL(e);return t?[{name:e,center:t,bbox:t.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(e):[]})}};function I9(n){return new ry(n)}var iy=class{options={serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"};constructor(e){z.Util.setOptions(this,e)}_getProperties(e){let t={text:e.text,address:e.address};return(e.context||[]).forEach(r=>{let i=r.id.split(".")[0];t[i]=r.text,r.short_code&&(t.countryShortCode=r.short_code)}),t}geocode(e){return T(this,null,function*(){let t=this.options.serviceUrl+encodeURIComponent(e)+".json",r=Hn(this.options,{access_token:this.options.apiKey});r.proximity!==void 0&&r.proximity.lat!==void 0&&r.proximity.lng!==void 0&&(r.proximity=r.proximity.lng+","+r.proximity.lat);let i=yield dt(t,r);return this._parseResults(i)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=this.options.serviceUrl+e.lng+","+e.lat+".json",i=nr(this.options,{access_token:this.options.apiKey}),o=yield dt(r,i);return this._parseResults(o)})}_parseResults(e){return e.features?.length?e.features.map(t=>{let r=new z.LatLng(...t.center.reverse()),i;return t.bbox?i=new z.LatLngBounds(new z.LatLng(...t.bbox.slice(0,2).reverse()),new z.LatLng(...t.bbox.slice(2,4).reverse())):i=new z.LatLngBounds(r,r),{name:t.place_name,bbox:i,center:r,properties:this._getProperties(t)}}):[]}};function T9(n){return new iy(n)}var oy=class{options={serviceUrl:"https://www.mapquestapi.com/geocoding/v1"};constructor(e){z.Util.setOptions(this,e),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...e){return e.filter(t=>!!t).join(", ")}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{key:this.options.apiKey,location:e,limit:5,outFormat:"json"}),r=yield dt(this.options.serviceUrl+"/address",t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey,location:e.lat+","+e.lng,outputFormat:"json"}),i=yield dt(this.options.serviceUrl+"/reverse",r);return this._parseResults(i)})}_parseResults(e){return(e.results?.[0]?.locations||[]).map(t=>{let r=new z.LatLng(t.latLng.lat,t.latLng.lng);return{name:this._formatName(t.street,t.adminArea4,t.adminArea3,t.adminArea1),bbox:new z.LatLngBounds(r,r),center:r}})}};function C9(n){return new oy(n)}var sy=class{options={userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:e.split(/\s+/).join(".")}),r=yield dt(this.options.serviceUrl+"geocode-address",t);if(!r.locations)return[];r.geometry=r.locations[0];let i=new z.LatLng(r.geometry.latitude,r.geometry.longitude),o=new z.LatLngBounds(i,i);return[{name:r.geometry.address,bbox:o,center:i}]})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:e.lat,longitude:e.lng}),i=yield dt(this.options.serviceUrl+"geocode-reverse",r);if(i.status.status!==200||!i.found)return[];let o=new z.LatLng(e.lat,e.lng),a=new z.LatLngBounds(o,o);return[{name:i.address,bbox:a,center:o}]})}};function D9(n){return new sy(n)}var Rf=class{options={serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(e){let t=e.address,r,i=[];return(t.road||t.building)&&i.push("{building} {road} {house_number}"),(t.city||t.town||t.village||t.hamlet)&&(r=i.length>0?"leaflet-control-geocoder-address-detail":"",i.push('<span class="'+r+'">{postcode} {city} {town} {village} {hamlet}</span>')),(t.state||t.country)&&(r=i.length>0?"leaflet-control-geocoder-address-context":"",i.push('<span class="'+r+'">{state} {country}</span>')),_9(i.join("<br/>"),t)}};constructor(e){z.Util.setOptions(this,e||{})}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{q:e,limit:5,format:"json",addressdetails:1});return(yield dt(this.options.serviceUrl+"search",t)).map(r=>{let i=r.boundingbox;return{icon:r.icon,name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,bbox:new z.LatLngBounds([+i[0],+i[2]],[+i[1],+i[3]]),center:new z.LatLng(+r.lat,+r.lon),properties:r}})})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(t/256)/Math.log(2)),addressdetails:1,format:"json"}),i=yield dt(this.options.serviceUrl+"reverse",r);if(!i?.lat||!i?.lon)return[];let o=new z.LatLng(+i.lat,+i.lon),a=new z.LatLngBounds(o,o);return[{name:i.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(i):void 0,center:o,bbox:a,properties:i}]})}};function S9(n){return new Rf(n)}var ay=class{options={};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){try{let t=this.options.OpenLocationCode.decode(e);return[{name:e,center:new z.LatLng(t.latitudeCenter,t.longitudeCenter),bbox:new z.LatLngBounds(new z.LatLng(t.latitudeLo,t.longitudeLo),new z.LatLng(t.latitudeHi,t.longitudeHi))}]}catch(t){return console.warn(t),[]}})}reverse(e,t){return T(this,null,function*(){try{return[{name:this.options.OpenLocationCode.encode(e.lat,e.lng,this.options.codeLength),center:new z.LatLng(e.lat,e.lng),bbox:new z.LatLngBounds(new z.LatLng(e.lat,e.lng),new z.LatLng(e.lat,e.lng))}]}catch(r){return console.warn(r),[]}})}};function A9(n){return new ay(n)}var cy=class{options={serviceUrl:"https://api.opencagedata.com/geocode/v1/json"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{key:this.options.apiKey,q:e}),r=yield dt(this.options.serviceUrl,t);return this._parseResults(r)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey,q:[e.lat,e.lng].join(",")}),i=yield dt(this.options.serviceUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.results||[]).map(t=>{let r=new z.LatLng(t.geometry.lat,t.geometry.lng),i=t.annotations&&t.annotations.bounds?new z.LatLngBounds(new z.LatLng(t.annotations.bounds.northeast.lat,t.annotations.bounds.northeast.lng),new z.LatLng(t.annotations.bounds.southwest.lat,t.annotations.bounds.southwest.lng)):new z.LatLngBounds(r,r);return{name:t.formatted,bbox:i,center:r,properties:t}})}};function x9(n){return new cy(n)}var Dc=class{options={serviceUrl:"https://api.geocode.earth/v1"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=Hn(this.options,{api_key:this.options.apiKey,text:e}),r=yield dt(this.options.serviceUrl+"/search",t);return this._parseResults(r)})}suggest(e){return T(this,null,function*(){let t=Hn(this.options,{api_key:this.options.apiKey,text:e}),r=yield dt(this.options.serviceUrl+"/autocomplete",t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{api_key:this.options.apiKey,"point.lat":e.lat,"point.lon":e.lng}),i=yield dt(this.options.serviceUrl+"/reverse",r);return this._parseResults(i)})}_parseResults(e){return(e.features||[]).map(t=>{let r=t.geometry.coordinates,i=new z.LatLng(r[1],r[0]),o=Array.isArray(t.bbox)&&t.bbox.length===4?new z.LatLngBounds([t.bbox[1],t.bbox[0]],[t.bbox[3],t.bbox[2]]):new z.LatLngBounds(i,i);return{name:t.properties.label,center:i,bbox:o,properties:t.properties}})}};function uD(n){return new Dc(n)}var R9=Dc,M9=uD,P9=Dc,N9=uD,uy=class extends Dc{constructor(e){super(Object.assign({serviceUrl:"https://api.openrouteservice.org/geocode"},e))}};function k9(n){return new uy(n)}var ly=class{options={serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]};constructor(e){z.Util.setOptions(this,e)}geocode(e,t){return T(this,null,function*(){let r=Hn(this.options,{q:e}),i=t?.map?.getCenter?.();i&&(r.lat=i.lat,r.lon=i.lng);let o=t?.map?.getZoom?.();o&&(r.zoom=o);let a=yield dt(this.options.serviceUrl,r);return this._parseResults(a)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{lat:e.lat,lon:e.lng}),i=yield dt(this.options.reverseUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.features||[]).map(t=>{let r=t.geometry.coordinates,i=new z.LatLng(r[1],r[0]),o=t.properties?.extent,a=o?new z.LatLngBounds([o[1],o[0]],[o[3],o[2]]):new z.LatLngBounds(i,i);return{name:this._decodeFeatureName(t),html:this.options.htmlTemplate?this.options.htmlTemplate(t):void 0,center:i,bbox:a,properties:t.properties}})}_decodeFeatureName(e){return(this.options.nameProperties||[]).map(t=>e.properties?.[t]).filter(t=>!!t).join(", ")}};function O9(n){return new ly(n)}var dy=class{options={serviceUrl:"https://api.what3words.com/v2/"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=yield dt(this.options.serviceUrl+"forward",Hn(this.options,{key:this.options.apiKey,addr:e.split(/\s+/).join(".")}));if(!t.geometry)return[];let r=new z.LatLng(t.geometry.lat,t.geometry.lng),i=new z.LatLngBounds(r,r);return[{name:t.words,bbox:i,center:r}]})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=yield dt(this.options.serviceUrl+"reverse",nr(this.options,{key:this.options.apiKey,coords:[e.lat,e.lng].join(",")}));if(r.status.status!=200)return[];let i=new z.LatLng(r.geometry.lat,r.geometry.lng),o=new z.LatLngBounds(i,i);return[{name:r.words,bbox:o,center:i}]})}};function L9(n){return new dy(n)}var F9=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:Yv,AzureMaps:Xv,Bing:Jv,GeocodeEarth:R9,Google:ey,HERE:ty,HEREv2:ny,LatLng:ry,MapQuest:oy,Mapbox:iy,Mapzen:P9,Neutrino:sy,Nominatim:Rf,OpenCage:cy,OpenLocationCode:ay,Openrouteservice:uy,Pelias:Dc,Photon:ly,What3Words:dy,arcgis:v9,azure:w9,bing:y9,geocodeEarth:M9,geocodingParams:Hn,google:E9,here:b9,latLng:I9,mapQuest:C9,mapbox:T9,mapzen:N9,neutrino:D9,nominatim:S9,openLocationCode:A9,opencage:x9,openrouteservice:k9,parseLatLng:dL,pelias:uD,photon:O9,reverseParams:nr,what3words:L9},Symbol.toStringTag,{value:"Module"})),Mf=class{constructor(...e){}};Object.getOwnPropertyNames(z.Control.prototype).forEach(n=>Mf.prototype[n]=z.Control.prototype[n]);Object.getOwnPropertyNames(z.Evented.prototype).forEach(n=>Mf.prototype[n]=z.Evented.prototype[n]);var Pf=class extends Mf{options={showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0};_alts;_container;_errorElement;_geocodeMarker;_input;_lastGeocode;_map;_preventBlurCollapse;_requestCount=0;_results;_selection;_suggestTimeout;constructor(e){super(e),z.Util.setOptions(this,e),this.options.geocoder||(this.options.geocoder=new Rf)}addThrobberClass(){this._container.classList.add("leaflet-control-geocoder-throbber")}removeThrobberClass(){this._container.classList.remove("leaflet-control-geocoder-throbber")}onAdd(e){let t="leaflet-control-geocoder",r=z.DomUtil.create("div",t+" leaflet-bar"),i=z.DomUtil.create("button",t+"-icon",r),o=z.DomUtil.create("div",t+"-form",r);this._map=e,this._container=r,i.innerHTML="&nbsp;",i.type="button",i.setAttribute("aria-label",this.options.iconLabel);let a=this._input=z.DomUtil.create("input","",o);return a.type="search",a.value=this.options.query,a.placeholder=this.options.placeholder,z.DomEvent.disableClickPropagation(a),this._errorElement=z.DomUtil.create("div",t+"-form-no-error",r),this._errorElement.innerHTML=this.options.errorMessage,this._alts=z.DomUtil.create("ul",t+"-alternatives leaflet-control-geocoder-alternatives-minimized",r),z.DomEvent.disableClickPropagation(this._alts),z.DomEvent.on(a,"keydown",this._keydown,this),this.options.geocoder?.suggest&&z.DomEvent.on(a,"input",this._change,this),z.DomEvent.on(a,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?z.DomEvent.on(r,"click",u=>{u.button===0&&u.detail!==2&&this._toggle()}):this.options.expand==="touch"?z.DomEvent.on(r,z.Browser.touch?"touchstart mousedown":"mousedown",u=>{this._toggle(),u.preventDefault(),u.stopPropagation()},this):(z.DomEvent.on(r,"mouseover",this._expand,this),z.DomEvent.on(r,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),z.Browser.touch?z.DomEvent.on(r,"touchstart",()=>this._geocode()):z.DomEvent.on(r,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),z.DomEvent.disableClickPropagation(r),r}setQuery(e){return this._input.value=e,this}_geocodeResult(e,t){!t&&this.options.showUniqueResult&&e.length===1?this._geocodeResultSelected(e[0]):e.length>0?(this._alts.innerHTML="",this._results=e,this._alts.classList.remove("leaflet-control-geocoder-alternatives-minimized"),this._container.classList.add("leaflet-control-geocoder-options-open"),this._results.forEach((r,i)=>this._alts.appendChild(this._createAlt(r,i)))):(this._container.classList.add("leaflet-control-geocoder-options-error"),this._errorElement.classList.add("leaflet-control-geocoder-error"))}markGeocode(e){let t=e.geocode;return this._map.fitBounds(t.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new z.Marker(t.center).bindPopup(t.html||t.name).addTo(this._map).openPopup(),this}_geocode(e=!1){return T(this,null,function*(){let t=this._input.value;if(!e&&t.length<this.options.queryMinLength)return;let r=++this._requestCount;this._lastGeocode=t,e||this._clearResults();let i={input:t};this.fire(e?"startsuggest":"startgeocode",i);let o={map:this._map},a=e?yield this.options.geocoder.suggest(t,o):yield this.options.geocoder.geocode(t,o);if(r===this._requestCount){let u={input:t,results:a};this.fire(e?"finishsuggest":"finishgeocode",u),this._geocodeResult(a,e)}})}_geocodeResultSelected(e){let t={geocode:e};this.fire("markgeocode",t)}_toggle(){this._container.classList.contains("leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){this._container.classList.add("leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){this._container.classList.remove("leaflet-control-geocoder-expanded"),this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._selection=null,this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error")}_createAlt(e,t){let r=z.DomUtil.create("li",""),i=z.DomUtil.create("a","",r),o=this.options.showResultIcons&&e.icon?z.DomUtil.create("img","",i):null,a=e.html?void 0:document.createTextNode(e.name),u=l=>{this._preventBlurCollapse=!0,z.DomEvent.stop(l),this._geocodeResultSelected(e),z.DomEvent.on(r,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return o&&(o.src=e.icon),r.setAttribute("data-result-index",String(t)),e.html?i.innerHTML=i.innerHTML+e.html:a&&i.appendChild(a),z.DomEvent.on(r,"mousedown touchstart",u,this),r}_keydown(e){let t=r=>{this._selection&&(this._selection.classList.remove("leaflet-control-geocoder-selected"),this._selection=this._selection[r>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[r>0?"firstChild":"lastChild"]),this._selection&&this._selection.classList.add("leaflet-control-geocoder-selected")};switch(e.key){case"Escape":this.options.collapsed?this._collapse():this._clearResults();break;case"ArrowUp":t(-1);break;case"ArrowDown":t(1);break;case"Enter":if(this._selection){let r=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[r]),this._clearResults()}else this._geocode();break;default:return}z.DomEvent.preventDefault(e)}_change(){let e=this._input.value;e!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),e.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}};function V9(n){return new Pf(n)}Object.assign(Pf,F9);Object.assign(z.Control,{Geocoder:Pf,geocoder:V9});function U9(n,e){if(n&1){let t=Rr();V(0,"div",43)(1,"button",44),ae("click",function(){at(t);let i=Ee();return ct(i.openSettings())}),q(2,"Settings"),U(),V(3,"button",44),ae("click",function(){at(t);let i=Ee();return ct(i.logout())}),q(4,"Logout"),U()()}}function j9(n,e){if(n&1&&(V(0,"div",50)(1,"span",51),q(2,"\u2022"),U(),q(3),U()),n&2){let t=e.$implicit;Y(3),og(" Plate ",t.plate," - ",t.distance," m - ",t.eta," min - Passengers: ",t.passengerCount||0," / ",t.capacity||"N/A"," ")}}function B9(n,e){if(n&1&&(V(0,"div",45)(1,"div",46)(2,"div",47),q(3,"Nearest Jeepneys"),U(),V(4,"div",48),kt(5,j9,4,5,"div",49),U()()()),n&2){let t=Ee();Y(5),st("ngForOf",t.nearestJeepneys)}}function z9(n,e){if(n&1&&(V(0,"li")(1,"strong"),q(2),U(),q(3),V(4,"span",52),q(5),U()()),n&2){let t=e.$implicit;Y(2),cn(t.user||"Anonymous"),Y(),Ut(": ",t.text," "),Y(2),cn(t.timeDisplay)}}function $9(n,e){if(n&1&&(V(0,"li"),q(1),U()),n&2){let t=e.$implicit;Y(),Ut(" ",t," ")}}function H9(n,e){if(n&1){let t=Rr();V(0,"div",53)(1,"div",54)(2,"h3"),q(3,"Account Settings"),U(),V(4,"label")(5,"strong"),q(6,"Username:"),U()(),V(7,"input",55),Qe("ngModelChange",function(i){at(t);let o=Ee();return Xe(o.customUsername,i)||(o.customUsername=i),ct(i)}),U(),V(8,"button",56),ae("click",function(){at(t);let i=Ee();return ct(i.saveUsername())}),q(9,"Save"),U(),V(10,"button",57),ae("click",function(){at(t);let i=Ee();return ct(i.closeSettings())}),q(11,"Close"),U()()()}if(n&2){let t=Ee();Y(7),Ze("ngModel",t.customUsername)}}var hy=class n{constructor(e,t,r){this.firestore=e;this.auth=t;this.router=r;zs(this.auth,i=>{let o=localStorage.getItem("customUsername");o?(this.customUsername=o,this.userName=o):i?(this.userName=i.displayName||i.email||"User",this.customUsername=this.userName):(this.userName="Guest",this.customUsername="Guest")}),this.jeepIcon=Nn.icon({iconUrl:"assets/jterminal.png",iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-12]})}userName=null;customUsername="";showSettings=!1;accountDropdownOpen=!1;toggleAccountDropdown(){this.accountDropdownOpen=!this.accountDropdownOpen}closeAccountDropdown(){this.accountDropdownOpen=!1}showChatDashboard=!1;chatMessages=[];chatText="";toggleChat(){this.showChatDashboard=!this.showChatDashboard}sendChat(){this.chatText.trim()!==""&&(this.chatMessages.push(this.chatText),this.chatText="")}map;marker=null;circle=null;radius=1500;lat="\u2014";lng="\u2014";jeepMarkers=new Map;jeepIcon;userIcon=Nn.icon({iconUrl:"assets/location.png",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-36]});terminalMarker=null;terminalIcon=Nn.icon({iconUrl:"assets/jeep.png",iconSize:[33,36],iconAnchor:[17,34],popupAnchor:[0,-30]});stopMarker=null;stopIcon=Nn.icon({iconUrl:"assets/stop.png",iconSize:[45,45],iconAnchor:[30,30],popupAnchor:[0,-28]});showTerminalIcon=!1;showStopIcon=!1;nearestJeepneys=[];newPostText="";communityPosts=[];jeepSub=null;communitySub=null;showTools=!1;toggleTools(){this.showTools=!this.showTools}openSettings(){this.closeAccountDropdown(),this.showSettings=!0}closeSettings(){this.showSettings=!1}logout(){this.auth.signOut().then(()=>{window.location.href="/otw1/#/login"})}ngAfterViewInit(){this.initMap(),this.listenJeepneysRealtime(),this.loadCommunityRealtime()}ngOnDestroy(){this.jeepSub?.unsubscribe(),this.communitySub?.unsubscribe();try{this.map?.off(),this.map?.remove()}catch{}}initMap(){this.map=Nn.map("map",{center:[16.417644,120.601387],zoom:14,zoomControl:!1}),Nn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map);let e=16.427862459557634,t=120.60728876037099;this.terminalMarker=Nn.marker([e,t],{icon:this.terminalIcon,draggable:!1});let r=16.41410551293782,i=120.59551046905928;this.stopMarker=Nn.marker([r,i],{icon:this.stopIcon,draggable:!1}),this.updateFixedMarkerVisibility();let o=this.map.getCenter();this.createMarkerAndCircle(o.lat,o.lng,this.radius),this.map.on("click",a=>{this.setMarkerAndCircle(a.latlng.lat,a.latlng.lng),this.evaluateNearest()})}toggleTerminalIcon(){this.showTerminalIcon?(this.showTerminalIcon=!1,this.showStopIcon=!1):(this.showTerminalIcon=!0,this.showStopIcon=!1),this.updateFixedMarkerVisibility()}toggleStopIcon(){this.showStopIcon?(this.showStopIcon=!1,this.showTerminalIcon=!1):(this.showStopIcon=!0,this.showTerminalIcon=!1),this.updateFixedMarkerVisibility()}updateFixedMarkerVisibility(){if(this.map){if(this.terminalMarker){let e=this.map.hasLayer(this.terminalMarker);this.showTerminalIcon&&!e&&this.terminalMarker.addTo(this.map),!this.showTerminalIcon&&e&&this.map.removeLayer(this.terminalMarker)}if(this.stopMarker){let e=this.map.hasLayer(this.stopMarker);this.showStopIcon&&!e&&this.stopMarker.addTo(this.map),!this.showStopIcon&&e&&this.map.removeLayer(this.stopMarker)}}}focusStop(){if(!this.map||!this.stopMarker)return;let e=this.stopMarker.getLatLng();this.map.flyTo([e.lat,e.lng],this.map.getZoom(),{animate:!0,duration:1}),this.stopMarker.openPopup()}createMarkerAndCircle(e,t,r=500){this.marker&&this.marker.remove(),this.circle&&this.circle.remove(),this.marker=Nn.marker([e,t],{draggable:!0,icon:this.userIcon}).addTo(this.map),this.circle=Nn.circle([e,t],{radius:r}).addTo(this.map),this.updateInfo(e,t,r),this.marker.on("drag",i=>{let o=i.target.getLatLng();this.circle?.setLatLng(o),this.updateInfo(o.lat,o.lng,this.circle?.getRadius()??this.radius),this.evaluateNearest()}),this.marker.on("click",()=>this.updateTooltip()),this.circle.on("click",()=>this.updateTooltip())}updateInfo(e,t,r){this.lat=e.toFixed(6),this.lng=t.toFixed(6),this.radius=Math.round(r)}updateRadiusFromUI(){if(this.circle){let e=this.circle.getLatLng(),t=this.map.getZoom();this.circle.setRadius(Number(this.radius)),this.map.setView(e,t)}this.evaluateNearest()}fitToCircle(){this.circle&&this.map.fitBounds(this.circle.getBounds())}setMarkerAndCircle(e,t){this.marker?.setLatLng([e,t]),this.circle?.setLatLng([e,t]),this.updateInfo(e,t,this.circle?.getRadius()??this.radius)}locateMe(){if(!navigator.geolocation)return alert("Geolocation not supported");navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,r=e.coords.longitude;this.setMarkerAndCircle(t,r),this.map.setView([t,r],15),this.evaluateNearest()})}updateTooltip(){if(!this.marker||!this.circle)return;let e=this.marker.getLatLng(),t=this.circle.getRadius()}listenJeepneysRealtime(){let e=ai(this.firestore,"jeepneys"),t=ea(e);this.jeepSub=Af(t,{idField:"id"}).subscribe(r=>{this.updateJeepMarkers(r||[]),this.evaluateNearest()})}updateJeepMarkers(e){let t=new Set;for(let r of e){if(!r.id||!r.lat||!r.lng)continue;t.add(r.id);let i=[r.lat,r.lng];if(this.jeepMarkers.has(r.id)){let o=this.jeepMarkers.get(r.id);o.setLatLng(i),o.jeepData=Q({},r),o.setPopupContent(this.jeepPopupContent(r))}else{let o=Nn.marker(i,{icon:this.jeepIcon});o.jeepData=Q({},r),o.bindPopup(this.jeepPopupContent(r)),o.addTo(this.map),this.jeepMarkers.set(r.id,o)}}for(let r of Array.from(this.jeepMarkers.keys()))t.has(r)||(this.jeepMarkers.get(r).remove(),this.jeepMarkers.delete(r))}jeepPopupContent(e){let t=e.speed?(e.speed*3.6).toFixed(1)+" km/h":"\u2014",r=e.updatedAt?new Date(e.updatedAt).toLocaleTimeString():"\u2014",i=e.passengerCount??0,o=e.capacity??"N/A";return`
      <div class="jeep-popup">
        <div class="title">\u{1F6FA} Jeepney ${e.plate||"\u2014"}</div>
        <div><b>Route:</b> ${e.routeId||"\u2014"}</div>
        <div><b>Speed:</b> ${t}</div>
        <div><b>Passengers:</b> ${i} / ${o}</div>
        <div><b>Last update:</b> ${r}</div>
      </div>
    `}evaluateNearest(){if(!this.marker)return;let e=this.marker.getLatLng(),t=[];this.jeepMarkers.forEach((r,i)=>{let o=r,a=o.getLatLng(),u=o.jeepData||{},l=this.distanceMeters({lat:e.lat,lng:e.lng},{lat:a.lat,lng:a.lng}),f=20*1e3/3600,g=Math.ceil(l/f/60);t.push({id:i,plate:u.plate||"\u2014",lat:a.lat,lng:a.lng,distance:Math.round(l),eta:g,passengerCount:u.passengerCount||0,capacity:u.capacity,marker:o})}),t.sort((r,i)=>r.distance-i.distance),this.nearestJeepneys=t.slice(0,3),this.nearestJeepneys.length>0&&this.highlightNearestMarker(this.nearestJeepneys[0].id)}highlightNearestMarker(e){this.jeepMarkers.forEach((t,r)=>{let i=t.getElement();i&&(r===e?(t.setOpacity(1),i.classList.add("nearest-jeep-highlight")):(t.setOpacity(.5),i.classList.remove("nearest-jeep-highlight")))})}focusNearestJeepney(){if(!this.map||!this.nearestJeepneys||this.nearestJeepneys.length===0)return;let e=this.nearestJeepneys[0],t=e.lat,r=e.lng;this.map.flyTo([t,r],this.map.getZoom(),{animate:!0,duration:1}),e.marker&&typeof e.marker.openPopup=="function"&&e.marker.openPopup()}focusTerminal(){if(!this.map||!this.terminalMarker)return;let e=this.terminalMarker.getLatLng();this.map.flyTo([e.lat,e.lng],this.map.getZoom(),{animate:!0,duration:1}),this.terminalMarker.openPopup()}loadCommunityRealtime(){let e=ai(this.firestore,"community"),t=ea(e,$v("time","desc"));this.communitySub=Af(t,{idField:"id"}).subscribe(r=>{this.communityPosts=(r||[]).map(i=>we(Q({},i),{timeDisplay:i.time?new Date(i.time).toLocaleString():""}))})}sendPost(){return T(this,null,function*(){let e=(this.newPostText||"").trim();if(!e)return;let t=ai(this.firestore,"community");yield kl(t,{user:this.customUsername||"Anonymous",text:e,time:new Date().toISOString()}),this.newPostText=""})}saveUsername(){let e=(this.customUsername||"").trim();if(!e)return alert("Username cannot be empty.");this.userName=e,localStorage.setItem("customUsername",e),alert("Username updated!")}toRad(e){return e*Math.PI/180}haversineKm(e,t){let i=this.toRad(t.lat-e.lat),o=this.toRad(t.lng-e.lng),a=this.toRad(e.lat),u=this.toRad(t.lat),l=Math.sin(i/2),f=Math.sin(o/2),g=l*l+Math.cos(a)*Math.cos(u)*f*f;return 6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}distanceMeters(e,t){return this.haversineKm(e,t)*1e3}searchText="";runSearch(){return T(this,null,function*(){let e=(this.searchText||"").trim();if(!e)return;let t=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`;try{let i=yield(yield fetch(t)).json();if(!i.length){alert("No results found");return}let o=i[0],a=parseFloat(o.lat),u=parseFloat(o.lon);this.setMarkerAndCircle(a,u),this.map.setView([a,u],15),this.evaluateNearest()}catch(r){console.error("Search error",r),alert("Search failed. Please try again.")}})}static \u0275fac=function(t){return new(t||n)(ue($n),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-commuter-dashboard"]],decls:73,vars:19,consts:[[1,"otw-commuter-shell"],[1,"phone-frame"],["src","assets/iphone-frame.png","alt","iPhone frame",1,"phone-image"],[1,"phone-screen"],[1,"map-frame"],[1,"map-container"],["id","map",1,"map"],[1,"gm-top-nav"],[1,"gm-icon-btn",3,"click"],[1,"gm-search-pill"],[1,"gm-search-icon"],["type","text","placeholder","Search",1,"gm-search-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"gm-icon-btn",2,"margin-left","auto",3,"click"],[1,"gm-avatar-btn",3,"click"],["class","gm-account-menu",4,"ngIf"],[1,"gm-chip-row"],[1,"gm-chip",3,"click"],[1,"gm-right-controls"],["title","My location",1,"gm-round-btn",3,"click"],["class","gm-bottom-bar",4,"ngIf"],[1,"map-sidebar"],[1,"sidebar-header"],[1,"sidebar-header-actions"],[1,"btn","small",3,"click"],[1,"sidebar-close",3,"click"],[1,"control-row"],["for","radiusRange"],["id","radiusRange","type","range","min","50","max","5000","step","10",3,"ngModelChange","input","ngModel"],["id","radiusNumber","type","number","min","50","max","5000","step","10",2,"flex","1","padding","6px",3,"ngModelChange","change","ngModel"],[1,"btn",3,"click"],[1,"coords"],[1,"small"],[1,"right-dashboard"],[1,"community"],[1,"community-header"],[1,"community-close",3,"click"],[1,"community-input"],["placeholder","Share an update\u2026",1,"form-control",3,"ngModelChange","ngModel"],[1,"post-btn","w-100","mt-2",3,"click"],[1,"mt-3","community-list"],[4,"ngFor","ngForOf"],[1,"mt-3","chat-list"],["class","modal",4,"ngIf"],[1,"gm-account-menu"],[3,"click"],[1,"gm-bottom-bar"],[1,"gm-bottom-main"],[1,"gm-bottom-title"],[1,"gm-bottom-list"],["class","gm-bottom-sub",4,"ngFor","ngForOf"],[1,"gm-bottom-sub"],[1,"jeep-bullet"],[1,"time"],[1,"modal"],[1,"modal-content"],["type","text","placeholder","Enter username",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","mt-2",3,"click"],[1,"btn","mt-3",3,"click"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1),Vt(2,"img",2),V(3,"div",3)(4,"div",4)(5,"div",5),Vt(6,"div",6),V(7,"div",7)(8,"button",8),ae("click",function(){return r.toggleTools()}),q(9,"\u2630"),U(),V(10,"div",9)(11,"span",10),q(12,"\u{1F50D}"),U(),V(13,"input",11),Qe("ngModelChange",function(o){return Xe(r.searchText,o)||(r.searchText=o),o}),ae("keyup.enter",function(){return r.runSearch()}),U()(),V(14,"button",12),ae("click",function(){return r.toggleChat()}),q(15," \u{1F4AC} "),U(),V(16,"button",13),ae("click",function(){return r.toggleAccountDropdown()}),q(17),ib(18,"uppercase"),U(),kt(19,U9,5,0,"div",14),U(),V(20,"div",15)(21,"button",16),ae("click",function(){return r.focusNearestJeepney()}),q(22,"Jeepneys"),U(),V(23,"button",16),ae("click",function(){return r.toggleStopIcon(),r.focusStop()}),q(24," Stop "),U(),V(25,"button",16),ae("click",function(){return r.toggleTerminalIcon(),r.focusTerminal()}),q(26," Terminal "),U()(),V(27,"div",17)(28,"button",18),ae("click",function(){return r.locateMe()}),q(29," \u{1F4CD} "),U()(),kt(30,B9,6,1,"div",19),U()()()(),V(31,"aside",20)(32,"div",21)(33,"strong"),q(34,"Interactive Map Tool"),U(),V(35,"div",22)(36,"button",23),ae("click",function(){return r.locateMe()}),q(37,"\u{1F4CD} My location"),U(),V(38,"button",24),ae("click",function(){return r.showTools=!1}),q(39,"\u2715"),U()()(),V(40,"div",25)(41,"label",26),q(42,"Radius (m)"),U(),V(43,"input",27),Qe("ngModelChange",function(o){return Xe(r.radius,o)||(r.radius=o),o}),ae("input",function(){return r.updateRadiusFromUI()}),U()(),V(44,"div",25)(45,"input",28),Qe("ngModelChange",function(o){return Xe(r.radius,o)||(r.radius=o),o}),ae("change",function(){return r.updateRadiusFromUI()}),U(),V(46,"button",29),ae("click",function(){return r.fitToCircle()}),q(47,"Fit"),U()(),V(48,"div",30)(49,"div"),q(50,"Radius: "),V(51,"span"),q(52),U(),q(53," m"),U()(),V(54,"p",31),q(55,"Drag the marker to move the circle."),U()(),V(56,"aside",32)(57,"div",33)(58,"div",34)(59,"h4"),q(60,"Community"),U(),V(61,"button",35),ae("click",function(){return r.toggleChat()}),q(62,"\u2715"),U()(),V(63,"div",36)(64,"textarea",37),Qe("ngModelChange",function(o){return Xe(r.newPostText,o)||(r.newPostText=o),o}),U(),V(65,"button",38),ae("click",function(){return r.sendPost()}),q(66,"Post"),U()(),V(67,"ul",39),kt(68,z9,6,3,"li",40),U(),Vt(69,"hr"),V(70,"ul",41),kt(71,$9,2,1,"li",40),U()()(),kt(72,H9,12,1,"div",42),U()),t&2&&(jn("panel-open",r.showTools||r.showChatDashboard),Y(13),Ze("ngModel",r.searchText),Y(4),Ut(" ",ob(18,17,(r.userName||"G")[0])," "),Y(2),st("ngIf",r.accountDropdownOpen),Y(11),st("ngIf",r.nearestJeepneys.length),Y(),jn("visible",r.showTools),Y(12),Ze("ngModel",r.radius),Y(2),Ze("ngModel",r.radius),Y(7),cn(r.radius),Y(4),jn("show",r.showChatDashboard),Y(8),Ze("ngModel",r.newPostText),Y(4),st("ngForOf",r.communityPosts),Y(3),st("ngForOf",r.chatMessages),Y(),st("ngIf",r.showSettings))},dependencies:[xn,Ts,Wa,Xn,Jn,Fh,_I,Nr,Vh,yI,gr,tc,_b],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;background:transparent}.otw-commuter-shell[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;background:radial-gradient(circle at top,#201344,#100622 45%,#050112);overflow:hidden}.otw-commuter-shell[_ngcontent-%COMP%]:before, .otw-commuter-shell[_ngcontent-%COMP%]:after{pointer-events:none}.otw-commuter-shell[_ngcontent-%COMP%]:before{content:"";position:absolute;width:900px;height:900px;border-radius:50%;background:radial-gradient(circle,#ffc178,#ff8c5af2,#10062200 70%);filter:blur(130px);opacity:.98;z-index:0}.otw-commuter-shell[_ngcontent-%COMP%]:after{content:"";position:absolute;width:1200px;height:1200px;border-radius:50%;background:radial-gradient(circle,#818cf8e6,#10062200 80%);filter:blur(210px);opacity:.85;z-index:0}.phone-frame[_ngcontent-%COMP%]{position:relative;width:380px;max-width:100vw;z-index:1;pointer-events:none}.phone-image[_ngcontent-%COMP%]{width:100%;display:block;pointer-events:none}.phone-screen[_ngcontent-%COMP%]{position:absolute;top:11px;left:10.5px;width:359px;height:745px;overflow:hidden;border-radius:48px;border:1px solid #000;pointer-events:auto}.map-frame[_ngcontent-%COMP%]{padding:0;background:transparent;width:100%;height:100%}.map-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:transparent;overflow:hidden;border-radius:0}.map[_ngcontent-%COMP%]{width:100%;height:100%}.gm-top-nav[_ngcontent-%COMP%]{position:absolute;top:18px;left:8px;right:8px;display:flex;align-items:center;gap:6px;z-index:2000}.gm-icon-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer}.gm-search-pill[_ngcontent-%COMP%]{flex:1;height:36px;border-radius:999px;background:#fff;display:flex;align-items:center;padding:0 10px;box-shadow:0 2px 6px #0003;max-width:230px}.gm-search-icon[_ngcontent-%COMP%]{margin-right:6px}.gm-search-input[_ngcontent-%COMP%]{border:none;outline:none;flex:1;font-size:13px;color:#111827;background:transparent}.gm-avatar-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:none;background:#751a81;color:#fff;font-weight:600;font-size:14px;cursor:pointer}.gm-account-menu[_ngcontent-%COMP%]{position:absolute;top:44px;right:8px;background:#fff;border-radius:10px;box-shadow:0 10px 20px #0003;display:flex;flex-direction:column;padding:4px 0;z-index:3000;pointer-events:auto}.gm-account-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;padding:6px 10px;text-align:left;font-size:13px;color:#111827;cursor:pointer}.gm-chip-row[_ngcontent-%COMP%]{position:absolute;top:70px;left:8px;right:8px;display:flex;gap:6px;overflow-x:auto;z-index:1000}@media (max-width: 768px){.gm-top-nav[_ngcontent-%COMP%]{top:30px}.gm-chip-row[_ngcontent-%COMP%]{top:88px}}.community-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.community-close[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;border:none;background:#0f172acc;color:#f9fafb;font-size:16px;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer}@media (max-width: 400px){.community-close[_ngcontent-%COMP%]{background:#0f172af2}}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.sidebar-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.sidebar-close[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:999px;border:none;background:#0f172ae6;color:#f9fafb;font-size:16px;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer}.jeep-bullet[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-right:6px;line-height:1}.gm-chip[_ngcontent-%COMP%]{border-radius:999px;border:1px solid #e5e7eb;background:#fff;font-size:12px;padding:4px 10px;white-space:nowrap}.gm-right-controls[_ngcontent-%COMP%]{position:absolute;right:8px;bottom:120px;display:flex;flex-direction:column;gap:6px;z-index:1000}.gm-round-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;border:none;background:#fff;box-shadow:0 2px 6px #0000004d;display:flex;align-items:center;justify-content:center;cursor:pointer}.gm-bottom-bar[_ngcontent-%COMP%]{position:absolute;left:8px;right:8px;bottom:32px;z-index:1000}@media (max-width: 768px){.gm-bottom-bar[_ngcontent-%COMP%]{bottom:calc(env(safe-area-inset-bottom,0) + 56px)}}.gm-bottom-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:12px;background:#fff;padding:8px 10px;box-shadow:0 2px 6px #00000040;max-height:90px}.gm-bottom-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#111827}.gm-bottom-list[_ngcontent-%COMP%]{max-height:60px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(156,163,175,.7) transparent;margin-top:2px}@media (max-width: 768px){.otw-commuter-shell.panel-open[_ngcontent-%COMP%]   .gm-top-nav[_ngcontent-%COMP%], .otw-commuter-shell.panel-open[_ngcontent-%COMP%]   .gm-chip-row[_ngcontent-%COMP%], .otw-commuter-shell.panel-open[_ngcontent-%COMP%]   .gm-right-controls[_ngcontent-%COMP%]{opacity:0;pointer-events:none}}.gm-bottom-sub[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}.gm-bottom-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.gm-bottom-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.gm-bottom-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3afb3;border-radius:999px}.nearest-jeep-highlight[_ngcontent-%COMP%]{filter:drop-shadow(0 0 10px yellow) drop-shadow(0 0 14px orange);transition:filter .2s ease-in-out}.map-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;width:260px;max-width:75vw;padding:.75rem .75rem 1rem;background:radial-gradient(circle at top,#201344,#120727,#050112);color:#f9fafb;border-right:1px solid rgba(255,193,120,.45);box-shadow:12px 0 30px #000000bf;transform:translate(-100%);transition:transform .2s ease-out;z-index:1500}.map-sidebar.visible[_ngcontent-%COMP%]{transform:translate(0)}.sidebar-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem}.control-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;margin-bottom:.6rem}.coords[_ngcontent-%COMP%], .small[_ngcontent-%COMP%]{font-size:.8rem}.btn.small[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(255,193,120,.7);background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#1f2933;font-size:.8rem;font-weight:600}.right-dashboard[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;width:320px;max-width:85vw;background:radial-gradient(circle at top,#201344,#120727 45%,#050112);color:#f9fafb;box-shadow:-18px 0 40px #000000e6;border-left:1px solid rgba(129,140,248,.4);transform:translate(100%);transition:transform .25s ease-out;z-index:1500;padding:1rem}.right-dashboard.show[_ngcontent-%COMP%]{transform:translate(0)}.community[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px;font-size:.95rem}.community-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:52px;font-size:.85rem;border-radius:12px;border:1px solid rgba(148,163,184,.55);background:#0a0a1ad9;color:#f9fafb}@media (max-width: 480px){.map-sidebar[_ngcontent-%COMP%], .right-dashboard[_ngcontent-%COMP%]{background:#050112;box-shadow:none}}.post-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#171717;font-size:.85rem;font-weight:600;cursor:pointer}.community-list[_ngcontent-%COMP%], .chat-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;font-size:.8rem;max-height:140px;overflow-y:auto}.community-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.4rem}.community-list[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#9ca3af}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#050112bf;display:flex;align-items:center;justify-content:center;z-index:2000}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top,#201344,#120727,#050112);color:#f9fafb;border-radius:18px;padding:1.4rem 1.6rem;width:100%;max-width:380px;box-shadow:0 20px 50px #000000d9;border:1px solid rgba(255,193,120,.6)}.modal-content[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{background:#0a0a1ad9;border:1px solid rgba(148,163,184,.6);color:#f9fafb}@media (min-width: 1024px){.otw-commuter-shell[_ngcontent-%COMP%]{background:radial-gradient(circle at top,#201344,#100622 45%,#050112)}.otw-commuter-shell[_ngcontent-%COMP%]:before, .otw-commuter-shell[_ngcontent-%COMP%]:after{display:block}.phone-image[_ngcontent-%COMP%]{display:block}.phone-frame[_ngcontent-%COMP%]{position:relative;width:380px;max-width:100vw;z-index:1;pointer-events:none;opacity:0;transform:translateY(40px) scale(.96);animation:phoneFadeUp .6s ease-out forwards}@keyframes phoneFadeUp{0%{opacity:0;transform:translateY(40px) scale(.96)}60%{opacity:1;transform:translateY(0) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.phone-screen[_ngcontent-%COMP%]{position:absolute;top:11px;left:10.5px;width:359px;height:745px;border-radius:48px;border:1px solid #000}}@media (max-width: 1000px){.otw-commuter-shell[_ngcontent-%COMP%]{background:#050112}.otw-commuter-shell[_ngcontent-%COMP%]:before, .otw-commuter-shell[_ngcontent-%COMP%]:after{display:none}.phone-image[_ngcontent-%COMP%]{display:none}.phone-frame[_ngcontent-%COMP%]{width:100vw;max-width:100vw;pointer-events:auto}.phone-screen[_ngcontent-%COMP%]{position:static;width:100vw;height:100vh;border-radius:0;border:none}.map-frame[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:0;border-radius:0;background:transparent}}']})};window.closeLeafletPopup=()=>{let n=window.leafletMapRef;n&&n.closePopup()};function q9(n,e){if(n&1&&(V(0,"li")(1,"strong"),q(2),U(),q(3),V(4,"span",26),q(5),U()()),n&2){let t=e.$implicit;Y(2),cn(t.user||"Driver"),Y(),Ut(": ",t.text," "),Y(2),cn(t.timeDisplay)}}var fy=class n{constructor(e,t){this.firestore=e;this.auth=t;zs(this.auth,r=>T(this,null,function*(){if(r){this.driverId=r.uid;let i=r.displayName||r.email||"Driver",o=localStorage.getItem("driverCustomUsername");this.driverName=o||i,this.customUsername=this.driverName;let a=tr(this.firestore,"users",r.uid),u=yield zv(a);if(u.exists()){let l=u.data();this.plate=l.plate||null,this.capacity=l.capacity||null}console.log("loaded plate:",this.plate)}else this.driverId=null,this.driverName=null,this.customUsername="",this.plate=null})),this.loadDriverCommunity()}isOnline=!1;intervalId=null;driverId=null;driverName=null;customUsername="";showSettings=!1;plate=null;lastLat=null;lastLng=null;lastTimestamp=null;routeId="Aurora Hill";dropdownOpen=!1;driverCommunityOpen=!1;passengerCount=0;capacity=null;toggleDropdown(){this.dropdownOpen=!this.dropdownOpen}closeDropdown(){this.dropdownOpen=!1}toggleDriverCommunity(){this.driverCommunityOpen=!this.driverCommunityOpen}incrementPassengers(){this.capacity!==null&&this.passengerCount>=this.capacity||(this.passengerCount=this.passengerCount+1)}emptyPassengers(){this.passengerCount=0}logout(){this.setDriverOffline(),this.auth.signOut().then(()=>{window.location.href="/otw1/#/login"})}driverNewPostText="";driverCommunityPosts=[];driverCommunitySub=null;ngOnDestroy(){this.driverCommunitySub?.unsubscribe()}startLocationUpdates(){this.intervalId=setInterval(()=>this.sendLocationOnce(),2e3),this.sendLocationOnce()}sendLocationOnce(){return T(this,null,function*(){if(!navigator.geolocation||!this.driverId)return;let e=this.driverId,t=this.driverName||"Driver";navigator.geolocation.getCurrentPosition(r=>T(this,null,function*(){let{latitude:i,longitude:o}=r.coords,a=Date.now(),u=0;if(this.lastLat!==null&&this.lastLng!==null&&this.lastTimestamp!==null){let l=(a-this.lastTimestamp)/1e3;u=this.haversine(this.lastLat,this.lastLng,i,o)/l}this.lastLat=i,this.lastLng=o,this.lastTimestamp=a,yield Ol(tr(this.firestore,"jeepneys",e),{id:e,plate:this.plate||"unknown",driverName:t,lat:i,lng:o,updatedAt:a,speed:u,routeId:this.routeId,passengerCount:this.passengerCount,capacity:this.capacity},{merge:!0})}),r=>{console.error("Geolocation error",r)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})})}setDriverOnline(){return T(this,null,function*(){if(!this.driverId)return alert("Driver not logged in.");this.isOnline=!0,this.startLocationUpdates()})}setDriverOffline(){return T(this,null,function*(){if(!this.driverId)return;this.isOnline=!1,this.intervalId&&clearInterval(this.intervalId);let e=this.driverId;yield xf(tr(this.firestore,"jeepneys",e))})}toggleOnline(){this.isOnline?this.setDriverOffline():this.setDriverOnline()}openSettings(){this.closeDropdown(),this.showSettings=!0}closeSettings(){this.showSettings=!1}saveUsername(){let e=(this.customUsername||"").trim();if(!e)return alert("Username cannot be empty.");this.driverName=e,localStorage.setItem("driverCustomUsername",e),alert("Username updated!")}loadDriverCommunity(){let e=ai(this.firestore,"driverCommunity"),t=ea(e,$v("time","desc"));this.driverCommunitySub=Af(t,{idField:"id"}).subscribe(r=>{this.driverCommunityPosts=(r||[]).map(i=>we(Q({},i),{timeDisplay:i.time?new Date(i.time).toLocaleString():""}))})}sendDriverPost(){return T(this,null,function*(){let e=(this.driverNewPostText||"").trim();if(!e)return;let t=ai(this.firestore,"driverCommunity");yield kl(t,{user:this.driverName||this.plate||"Driver",text:e,role:"driver",time:new Date().toISOString()}),this.driverNewPostText=""})}haversine(e,t,r,i){let a=f=>f*Math.PI/180,u=a(r-e),l=a(i-t);return 6371e3*2*Math.asin(Math.sqrt(Math.sin(u/2)**2+Math.cos(a(e))*Math.cos(a(r))*Math.sin(l/2)**2))}static \u0275fac=function(t){return new(t||n)(ue($n),ue(Bt))};static \u0275cmp=Ft({type:n,selectors:[["app-driver"]],decls:52,vars:11,consts:[[1,"top-bar"],[1,"top-bar-left"],[1,"driver-header-horizontal"],[1,"logo-circle"],[1,"app-title"],[1,"top-bar-right"],[1,"chat-btn",3,"click"],[1,"account-dropdown"],[1,"account-btn",3,"click"],[1,"dropdown-menu"],[3,"click"],[1,"main-content-wrapper"],[1,"main-content"],[1,"toggle-tools-btn","center-btn",3,"click"],[1,"passenger-counter","mt-3"],[1,"counter-buttons"],[1,"full-capacity-btn",3,"click"],[1,"right-dashboard"],[1,"community"],[1,"community-header"],[1,"community-close",3,"click"],[1,"community-input"],["placeholder","Share an update\u2026",1,"form-control",3,"ngModelChange","ngModel"],[1,"post-btn","w-100","mt-2",3,"click"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"time"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"div",2),Vt(3,"div",3),V(4,"h4",4),q(5,"Driver App"),U()()(),V(6,"div",5)(7,"button",6),ae("click",function(){return r.toggleDriverCommunity()}),q(8,"Community"),U(),V(9,"div",7)(10,"button",8),ae("click",function(){return r.toggleDropdown()}),q(11),U(),V(12,"ul",9)(13,"li")(14,"button",10),ae("click",function(){return r.logout()}),q(15,"\u{1F6AA}Logout"),U()()()()()(),V(16,"div",11)(17,"div",12)(18,"button",13),ae("click",function(){return r.toggleOnline()}),q(19),U(),V(20,"p"),q(21,"Status: "),V(22,"strong"),q(23),U()()()(),V(24,"div",14)(25,"h5"),q(26,"Passengers: "),V(27,"span"),q(28),U(),q(29),U(),V(30,"div",15)(31,"button",10),ae("click",function(){return r.emptyPassengers()}),q(32,"Empty"),U(),V(33,"button",10),ae("click",function(){return r.passengerCount=r.passengerCount>0?r.passengerCount-1:0}),q(34,"-1"),U(),V(35,"button",10),ae("click",function(){return r.incrementPassengers()}),q(36,"+1"),U(),V(37,"button",16),ae("click",function(){return r.passengerCount=r.capacity||r.passengerCount}),q(38,"Full Capacity"),U()()(),V(39,"div",17)(40,"div",18)(41,"div",19)(42,"h4"),q(43,"Driver Community"),U(),V(44,"button",20),ae("click",function(){return r.toggleDriverCommunity()}),q(45,"\u2715"),U()(),V(46,"div",21)(47,"textarea",22),Qe("ngModelChange",function(o){return Xe(r.driverNewPostText,o)||(r.driverNewPostText=o),o}),U(),V(48,"button",23),ae("click",function(){return r.sendDriverPost()}),q(49,"Post"),U()(),V(50,"ul",24),kt(51,q9,6,3,"li",25),U()()()),t&2&&(Y(9),jn("open",r.dropdownOpen),Y(2),Ut(" ",r.driverName||"Driver"," "),Y(8),Ut(" ",r.isOnline?"\u{1F534} STOP SHARING":"\u{1F7E2} START SHARING"," "),Y(4),cn(r.isOnline?"ONLINE":"OFFLINE"),Y(5),cn(r.passengerCount),Y(),Ut(" / ",r.capacity||"N/A"),Y(10),jn("show",r.driverCommunityOpen),Y(8),Ze("ngModel",r.driverNewPostText),Y(4),st("ngForOf",r.driverCommunityPosts))},dependencies:[xn,Ts,Xn,Jn,Nr,gr],styles:['.otw-driver-shell[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background:radial-gradient(circle at top left,#1d4ed8 0,#020617 55% 100%);color:#e5e7eb;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 18px;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);background:linear-gradient(to right,#0f172af5,#0f172ae6);border-bottom:1px solid rgba(148,163,184,.25);box-shadow:0 8px 28px #0f172ae6;position:relative;z-index:20}.top-bar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.driver-header-horizontal[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.logo-circle[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:999px;background:radial-gradient(circle at 30% 20%,#facc15,#4f46e5);box-shadow:0 0 0 2px #0f172a,0 10px 24px #000000bf}.app-title[_ngcontent-%COMP%]{margin:0;font-size:17px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:#f9fafb}.top-bar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.chat-btn[_ngcontent-%COMP%], .account-btn[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(148,163,184,.55);background:#020617;color:#e5e7eb;font-size:12px;font-weight:500;padding:6px 14px;cursor:pointer;display:inline-flex;align-items:center;gap:4px;transition:background .15s ease,border-color .15s ease,transform .1s ease}.chat-btn[_ngcontent-%COMP%]:before{content:"\\1f4ac"}.chat-btn[_ngcontent-%COMP%]:hover, .account-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4f46e5f2,#facc15f2);border-color:transparent;color:#020617;transform:translateY(-1px)}.account-dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:115%;list-style:none;margin:0;padding:4px 0;background:#020617;border-radius:10px;min-width:150px;box-shadow:0 16px 32px #000000d9;border:1px solid rgba(148,163,184,.35);display:none;z-index:30}.account-dropdown.open[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:none;border:none;color:#e5e7eb;font-size:13px;text-align:left;padding:7px 12px;cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#111827}.main-content-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:24px 16px}.main-content[_ngcontent-%COMP%]{width:100%;max-width:420px;background:#fff;color:#0f172a;border-radius:18px;padding:22px 20px 18px;box-shadow:0 12px 28px #0000001f;text-align:center}.toggle-tools-btn.center-btn[_ngcontent-%COMP%]{width:100%;border-radius:999px;border:none;padding:12px 20px;font-size:15px;font-weight:600;background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#111827;cursor:pointer;box-shadow:0 12px 20px #0000002e;transition:transform .1s ease,box-shadow .1s ease,filter .1s ease}.toggle-tools-btn.center-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 16px 28px #0003}.main-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#475569}.main-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#111827}.right-dashboard[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;width:320px;max-width:85vw;background:#020617;color:#e5e7eb;box-shadow:-18px 0 40px #000000e6;transform:translate(100%);transition:transform .25s ease-out;z-index:40;padding:1rem;border-left:1px solid rgba(148,163,184,.35)}.right-dashboard.show[_ngcontent-%COMP%]{transform:translate(0)}.community[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:15px;font-weight:600}.community-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.community-close[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;border:none;background:#0f172acc;color:#f9fafb;font-size:16px;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer}@media (max-width: 400px){.community-close[_ngcontent-%COMP%]{background:#0f172af2}}.community-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:64px;font-size:.85rem;border-radius:12px;border:1px solid #4b5563;background:#020617;color:#e5e7eb;padding:8px 9px}.post-btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#f97316,#facc15);color:#111827;font-size:.85rem;font-weight:600;cursor:pointer;padding:6px 12px;margin-top:6px}.community[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:12px 0 0;padding:0;font-size:.8rem;max-height:260px;overflow-y:auto}.community[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.6rem}.community[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:inline-block;margin-left:.4rem;font-size:.7rem;color:#9ca3af}.counter-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:center;gap:8px}.btn.small[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(255,193,120,.7);background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#1f2933;font-size:.8rem;font-weight:600}.post-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#171717;font-size:.85rem;font-weight:600;cursor:pointer;padding:6px 12px}@media (max-width: 480px){.top-bar[_ngcontent-%COMP%]{padding:8px 10px;flex-wrap:wrap;gap:8px}.app-title[_ngcontent-%COMP%]{font-size:14px}.chat-btn[_ngcontent-%COMP%], .account-btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 9px}.top-bar-right[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.main-content[_ngcontent-%COMP%]{margin-top:12px;padding:18px 16px 14px;max-width:100%}.right-dashboard[_ngcontent-%COMP%]{width:100vw;max-width:100vw}.passenger-counter[_ngcontent-%COMP%]{max-width:100%}.counter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 45%;min-width:120px}}.passenger-counter[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;border-radius:12px;box-shadow:0 6px 16px #0f172a26;text-align:center;max-width:360px;margin:1rem auto}.passenger-counter[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:600;color:#111827}.counter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:linear-gradient(135deg,#ff9b3a,#ff6fa8,#7b61ff);color:#fff;padding:.35rem .7rem;border-radius:999px;margin:0;font-weight:600;cursor:pointer;transition:transform .1s;min-width:72px}.counter-buttons[_ngcontent-%COMP%]   .full-capacity-btn[_ngcontent-%COMP%]{margin-left:0}.counter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#050112bf;display:flex;align-items:center;justify-content:center;z-index:2000}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top,#201344,#120727,#050112);color:#f9fafb;border-radius:18px;padding:1.4rem 1.6rem;width:100%;max-width:380px;box-shadow:0 20px 50px #000000d9;border:1px solid rgba(255,193,120,.6)}.modal-content[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{background:#0a0a1ad9;border:1px solid rgba(148,163,184,.6);color:#f9fafb}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin-top:.5rem}']})};function W9(n,e){if(n&1){let t=Rr();V(0,"div",19)(1,"button",20),ae("click",function(){at(t);let i=Ee();return ct(i.logout())}),q(2," Logout "),U()()}}function G9(n,e){n&1&&(V(0,"div",28),q(1," No drivers found. "),U())}function K9(n,e){n&1&&(V(0,"div",28),q(1," No drivers found matching your search. "),U())}function Z9(n,e){if(n&1){let t=Rr();V(0,"div",32)(1,"div",33)(2,"h4"),q(3),U(),V(4,"p",34)(5,"strong"),q(6,"Email:"),U(),q(7),U(),V(8,"p",34)(9,"strong"),q(10,"License:"),U(),q(11),U(),V(12,"p",35)(13,"strong"),q(14,"Plate:"),U(),q(15),U()(),V(16,"div",36)(17,"button",37),ae("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.startDriverEdit(i))}),q(18,"Update"),U(),V(19,"button",38),ae("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.deleteDriverAccount(i.id))}),q(20,"Delete"),U()()()}if(n&2){let t=Ee().$implicit;Y(3),cn(t.name),Y(4),Ut(" ",t.email),Y(4),Ut(" ",t.license),Y(4),Ut(" ",t.plate)}}function Q9(n,e){if(n&1){let t=Rr();V(0,"div",39)(1,"h5"),q(2,"Edit Driver"),U(),V(3,"input",40),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverName,i)||(o.editDriverName=i),ct(i)}),U(),V(4,"input",41),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverEmail,i)||(o.editDriverEmail=i),ct(i)}),U(),V(5,"input",42),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverLicense,i)||(o.editDriverLicense=i),ct(i)}),U(),V(6,"input",43),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverPlate,i)||(o.editDriverPlate=i),ct(i)}),U(),V(7,"div",44)(8,"button",45),ae("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.updateDriver(i.id,{name:o.editDriverName,email:o.editDriverEmail,license:o.editDriverLicense,plate:o.editDriverPlate}))}),q(9," Save "),U(),V(10,"button",46),ae("click",function(){at(t);let i=Ee(3);return ct(i.cancelDriverEdit())}),q(11,"Cancel"),U()()()}if(n&2){let t=Ee(3);Y(3),Ze("ngModel",t.editDriverName),Y(),Ze("ngModel",t.editDriverEmail),Y(),Ze("ngModel",t.editDriverLicense),Y(),Ze("ngModel",t.editDriverPlate)}}function Y9(n,e){if(n&1&&(V(0,"article",29),kt(1,Z9,21,4,"div",30)(2,Q9,12,4,"div",31),U()),n&2){let t=e.$implicit,r=Ee(2);Y(),st("ngIf",r.editDriverId!==t.id),Y(),st("ngIf",r.editDriverId===t.id)}}function J9(n,e){if(n&1){let t=Rr();V(0,"section",21)(1,"div",22)(2,"h1"),q(3,"Driver Accounts"),U(),V(4,"div",23)(5,"input",24),Qe("ngModelChange",function(i){at(t);let o=Ee();return Xe(o.driverSearchTerm,i)||(o.driverSearchTerm=i),ct(i)}),ae("input",function(){at(t);let i=Ee();return ct(i.filterDrivers())}),U()()(),kt(6,G9,2,0,"div",25),V(7,"div",26),kt(8,K9,2,0,"div",25)(9,Y9,3,2,"article",27),U()()}if(n&2){let t=Ee();Y(5),Ze("ngModel",t.driverSearchTerm),Y(),st("ngIf",t.drivers().length===0),Y(2),st("ngIf",t.filteredDrivers().length===0),Y(),st("ngForOf",t.filteredDrivers())}}function X9(n,e){n&1&&(V(0,"div",28),q(1," No commuters found. "),U())}function eW(n,e){n&1&&(V(0,"div",28),q(1," No commuters found matching your search. "),U())}function tW(n,e){if(n&1){let t=Rr();V(0,"div",32)(1,"div",33)(2,"h4"),q(3),U(),V(4,"p",34)(5,"strong"),q(6,"Email:"),U(),q(7),U()(),V(8,"div",36)(9,"button",37),ae("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.startEdit(i))}),q(10,"Update"),U(),V(11,"button",38),ae("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.deleteCommuter(i.id))}),q(12,"Delete"),U()()()}if(n&2){let t=Ee().$implicit;Y(3),cn(t.name),Y(4),Ut(" ",t.email)}}function nW(n,e){if(n&1){let t=Rr();V(0,"div",39)(1,"h5"),q(2,"Edit Commuter"),U(),V(3,"input",40),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editCommuterName,i)||(o.editCommuterName=i),ct(i)}),U(),V(4,"input",41),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editCommuterEmail,i)||(o.editCommuterEmail=i),ct(i)}),U(),V(5,"div",44)(6,"button",45),ae("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.updateUser(i.id,{name:o.editCommuterName,email:o.editCommuterEmail}))}),q(7," Save "),U(),V(8,"button",46),ae("click",function(){at(t);let i=Ee(3);return ct(i.cancelEdit())}),q(9,"Cancel"),U()()()}if(n&2){let t=Ee(3);Y(3),Ze("ngModel",t.editCommuterName),Y(),Ze("ngModel",t.editCommuterEmail)}}function rW(n,e){if(n&1&&(V(0,"article",29),kt(1,tW,13,2,"div",30)(2,nW,10,2,"div",31),U()),n&2){let t=e.$implicit,r=Ee(2);Y(),st("ngIf",r.editId!==t.id),Y(),st("ngIf",r.editId===t.id)}}function iW(n,e){if(n&1){let t=Rr();V(0,"section",21)(1,"div",22)(2,"h1"),q(3,"Commuter Accounts"),U(),V(4,"div",23)(5,"input",47),Qe("ngModelChange",function(i){at(t);let o=Ee();return Xe(o.commuterSearchTerm,i)||(o.commuterSearchTerm=i),ct(i)}),ae("input",function(){at(t);let i=Ee();return ct(i.filterCommuters())}),U()()(),kt(6,X9,2,0,"div",25),V(7,"div",26),kt(8,eW,2,0,"div",25)(9,rW,3,2,"article",27),U()()}if(n&2){let t=Ee();Y(5),Ze("ngModel",t.commuterSearchTerm),Y(),st("ngIf",t.commuters().length===0),Y(2),st("ngIf",t.filteredCommuters().length===0),Y(),st("ngForOf",t.filteredCommuters())}}var py=class n{constructor(e,t,r,i){this.firestore=e;this.http=t;this.auth=r;this.router=i}newDriverName="";newDriverEmail="";newDriverLicense="";newDriverPlate="";userMenuOpen=!1;editId="";editCommuterName="";editCommuterEmail="";editDriverId="";editDriverName="";editDriverEmail="";editDriverLicense="";editDriverPlate="";driverSearchTerm="";filteredDrivers=gt([]);commuterSearchTerm="";filteredCommuters=gt([]);commuters=gt([]);drivers=gt([]);activeSection="drivers";ngOnInit(){return T(this,null,function*(){yield this.loadDrivers(),yield this.loadCommuters()})}showDrivers(){this.activeSection="drivers"}showCommuters(){this.activeSection="commuters"}loadCommuters(){return T(this,null,function*(){let e=ai(this.firestore,"users"),t=ea(e,aD("role","==","commuter")),i=(yield oD(t)).docs.map(o=>Q({id:o.id},o.data()));this.commuters.set(i),this.filteredCommuters.set([...i])})}loadDrivers(){return T(this,null,function*(){let e=ai(this.firestore,"users"),t=ea(e,aD("role","==","driver")),i=(yield oD(t)).docs.map(o=>Q({id:o.id},o.data()));this.drivers.set(i),this.filteredDrivers.set([...i])})}filterDrivers(){if(!this.driverSearchTerm.trim()){this.filteredDrivers.set([...this.drivers()]);return}let e=this.driverSearchTerm.toLowerCase().trim(),t=this.drivers().filter(r=>r.name?.toLowerCase().includes(e)||r.email?.toLowerCase().includes(e)||r.license&&r.license.toLowerCase().includes(e)||r.plate&&r.plate.toLowerCase().includes(e));this.filteredDrivers.set(t)}filterCommuters(){if(!this.commuterSearchTerm.trim()){this.filteredCommuters.set([...this.commuters()]);return}let e=this.commuterSearchTerm.toLowerCase().trim(),t=this.commuters().filter(r=>r.name?.toLowerCase().includes(e)||r.email?.toLowerCase().includes(e));this.filteredCommuters.set(t)}startEdit(e){this.editId=e.id,this.editCommuterName=e.name,this.editCommuterEmail=e.email}cancelEdit(){this.editId=""}updateUser(e,t){return T(this,null,function*(){let r=tr(this.firestore,"users",e);yield sD(r,t),alert("Commuter updated."),this.cancelEdit(),yield this.loadCommuters()})}deleteCommuter(e){return T(this,null,function*(){let t=tr(this.firestore,"users",e);yield xf(t),alert("Commuter deleted."),yield this.loadCommuters()})}startDriverEdit(e){this.editDriverId=e.id,this.editDriverName=e.name,this.editDriverEmail=e.email,this.editDriverLicense=e.license??"",this.editDriverPlate=e.plate??""}cancelDriverEdit(){this.editDriverId=""}updateDriver(e,t){return T(this,null,function*(){let r=tr(this.firestore,"users",e);yield sD(r,t),alert("Driver updated."),this.cancelDriverEdit(),yield this.loadDrivers()})}deleteDriverAccount(e){return T(this,null,function*(){let t=tr(this.firestore,"users",e);yield xf(t),alert("Driver deleted."),yield this.loadDrivers()})}createDriver(){return T(this,null,function*(){if(!this.newDriverName||!this.newDriverEmail){alert("Name and email are required.");return}let e=ai(this.firestore,"users"),t={name:this.newDriverName,email:this.newDriverEmail,license:this.newDriverLicense,plate:this.newDriverPlate,role:"driver",status:"approved",createdAt:new Date};yield kl(e,t),alert("Driver account created."),this.newDriverName="",this.newDriverEmail="",this.newDriverLicense="",this.newDriverPlate="",yield this.loadDrivers()})}logout(){this.auth.signOut().then(()=>{window.location.href="/otw1/#/login"})}static \u0275fac=function(t){return new(t||n)(ue($n),ue(Tg),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-admin-dashboard"]],decls:36,vars:9,consts:[[1,"otw-admin-shell"],[1,"otw-admin-sidebar"],[1,"otw-admin-brand-row"],[1,"otw-admin-brand"],[1,"otw-admin-logo"],[1,"otw-admin-brand-text"],[1,"otw-admin-user-dropdown",3,"click"],[1,"otw-admin-user-circle"],[1,"otw-admin-user-caret"],["class","otw-admin-user-menu",4,"ngIf"],[1,"otw-admin-toggle"],[1,"otw-toggle-btn",3,"click"],[1,"otw-admin-content"],[1,"otw-admin-summary"],[1,"otw-summary-card"],[1,"otw-summary-label"],[1,"otw-summary-value"],["type","button","routerLink","/admin/dashboard/add-driver",1,"otw-summary-card","otw-summary-cta"],["class","otw-section",4,"ngIf"],[1,"otw-admin-user-menu"],["type","button",1,"otw-user-menu-item",3,"click"],[1,"otw-section"],[1,"otw-section-header"],[1,"otw-search-container"],["type","text","placeholder","Search drivers...",1,"form-control","otw-search-input",3,"ngModelChange","input","ngModel"],["class","otw-empty",4,"ngIf"],[1,"otw-list"],["class","otw-item-card",4,"ngFor","ngForOf"],[1,"otw-empty"],[1,"otw-item-card"],["class","otw-item-row",4,"ngIf"],["class","otw-item-edit",4,"ngIf"],[1,"otw-item-row"],[1,"otw-item-info"],[1,"mb-1"],[1,"mb-0"],[1,"otw-item-actions"],[1,"btn","btn-sm","otw-btn-outline",3,"click"],[1,"btn","btn-sm","otw-btn-danger",3,"click"],[1,"otw-item-edit"],["placeholder","Full Name",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","Email",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","License",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","Plate",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"text-end"],[1,"btn","btn-sm","otw-btn-pill","me-2",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"],["type","text","placeholder","Search commuters...",1,"form-control","otw-search-input",3,"ngModelChange","input","ngModel"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"aside",1)(2,"div")(3,"div",2)(4,"div",3),Vt(5,"div",4),V(6,"span",5),q(7,"OTW"),U()(),V(8,"div",6),ae("click",function(){return r.userMenuOpen=!r.userMenuOpen}),V(9,"div",7),q(10,"ADMIN"),U(),V(11,"span",8),q(12,"\u25BE"),U(),kt(13,W9,3,0,"div",9),U()(),V(14,"div",10)(15,"button",11),ae("click",function(){return r.showDrivers()}),q(16," Driver Accounts "),U(),V(17,"button",11),ae("click",function(){return r.showCommuters()}),q(18," Commuter Accounts "),U()()()(),V(19,"main",12)(20,"section",13)(21,"div",14)(22,"span",15),q(23,"Drivers"),U(),V(24,"span",16),q(25),U()(),V(26,"div",14)(27,"span",15),q(28,"Commuters"),U(),V(29,"span",16),q(30),U()(),V(31,"button",17)(32,"span",16),q(33,"+ Add Driver"),U()()(),kt(34,J9,10,4,"section",18)(35,iW,10,4,"section",18),U()()),t&2&&(Y(13),st("ngIf",r.userMenuOpen),Y(2),jn("active",r.activeSection==="drivers"),Y(2),jn("active",r.activeSection==="commuters"),Y(8),cn(r.drivers().length),Y(5),cn(r.commuters().length),Y(4),st("ngIf",r.activeSection==="drivers"),Y(),st("ngIf",r.activeSection==="commuters"))},dependencies:[xn,Ts,Wa,Nb,Xn,Jn,Nr,gr,tc,Oi],styles:['.otw-admin-shell[_ngcontent-%COMP%]{min-height:100vh;display:grid;grid-template-columns:240px minmax(0,1fr);background:linear-gradient(135deg,#ff9c3a70,#ff6fa96c 40%,#7b61ff49);color:#e5e7eb}.otw-admin-sidebar[_ngcontent-%COMP%]{padding:1.4rem 1.1rem;background:#000;border-right:1px solid rgba(148,163,184,.25);display:flex;flex-direction:column;justify-content:space-between}.otw-admin-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem;margin-bottom:1.4rem}.otw-admin-logo[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:16px;background-image:url("./media/logo-IKMKXBN4.png");background-size:cover;background-position:center;box-shadow:0 10px 22px #0f172ae6}.otw-admin-brand-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#f9fafb}.otw-admin-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:.4rem}.otw-toggle-btn[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(148,163,184,.6);background-color:#020617;color:#e5e7eb;font-size:.85rem;padding:.45rem .9rem;text-align:left}.otw-toggle-btn.active[_ngcontent-%COMP%]{border-color:transparent;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827}.otw-admin-logout-btn[_ngcontent-%COMP%]{margin-top:2rem;border-radius:999px;border:1px solid rgba(148,163,184,.7);padding:.4rem 1rem;background:#020617;color:#e5e7eb;font-size:.8rem}.otw-admin-content[_ngcontent-%COMP%]{padding:1.6rem 1.8rem 2.3rem}.otw-admin-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem;margin-bottom:1.6rem}.otw-summary-card[_ngcontent-%COMP%]{border-radius:16px;padding:.9rem 1.1rem;background:linear-gradient(180deg,#000000e6,#0f172ad9)}.otw-summary-label[_ngcontent-%COMP%]{font-size:.78rem;letter-spacing:.08em;text-transform:uppercase;color:#9ca3af}.otw-summary-value[_ngcontent-%COMP%]{margin-top:.35rem;font-size:1.35rem;font-weight:700;color:#f9fafb}.otw-summary-cta[_ngcontent-%COMP%]{border:none;cursor:pointer;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827}.otw-section[_ngcontent-%COMP%]{margin-bottom:1.9rem}.otw-section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.7rem;color:#000}.otw-section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;color:#f9fafb}.otw-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;width:100%;overflow-y:auto;padding-right:.25rem;margin:0 auto}.otw-item-card[_ngcontent-%COMP%]{position:relative;border-radius:16px;padding:.9rem 1.1rem;background:linear-gradient(120deg,#000000f5,#000000e6,#0f172ae6);color:#f9fafb;z-index:1}.otw-item-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:1rem}.otw-item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.25rem;color:#f9fafb}.otw-item-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.otw-btn-pill[_ngcontent-%COMP%]{border-radius:999px;padding:.45rem 1.1rem;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827;font-weight:600;font-size:.85rem;letter-spacing:.03em;text-transform:uppercase}.otw-btn-outline[_ngcontent-%COMP%]{border-radius:999px;padding:.3rem .9rem;border:1px solid rgba(252,211,77,.9);background-color:#0f172a;color:#facc15;font-size:.8rem}.otw-btn-danger[_ngcontent-%COMP%]{border-radius:999px;padding:.3rem .9rem;border:1px solid rgba(248,113,113,.9);background:#7f1d1d;color:#fee2e2;font-size:.8rem}.otw-item-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#020617;border-color:#374151;color:#e5e7eb}.otw-item-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-color:#020617;border-color:#ff9b3a;box-shadow:0 0 0 .12rem #ff9b3a66}.otw-empty[_ngcontent-%COMP%]{padding:.85rem 1rem;border-radius:12px;background-color:#111827;color:#9ca3af;font-size:.9rem}@media (max-width: 900px){.otw-admin-shell[_ngcontent-%COMP%]{grid-template-columns:1fr}.otw-admin-sidebar[_ngcontent-%COMP%]{padding:1.4rem 1.1rem;background:#000000e6;border-right:1px solid rgba(148,163,184,.35);display:flex;flex-direction:column;justify-content:space-between}.otw-admin-toggle[_ngcontent-%COMP%]{flex-direction:row;margin-left:.75rem}.otw-admin-content[_ngcontent-%COMP%]{padding:1.2rem 1.1rem 2rem}.otw-admin-summary[_ngcontent-%COMP%]{grid-template-columns:1fr}.otw-item-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.otw-item-actions[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-end}}.otw-admin-brand-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:1.2rem}.otw-admin-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem}.otw-admin-user-dropdown[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.25rem;padding:.25rem .5rem;border-radius:999px;background-color:#020617;border:1px solid rgba(148,163,184,.7);cursor:pointer}.otw-admin-user-circle[_ngcontent-%COMP%]{width:60px;height:26px;border-radius:999px;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827;font-size:.7rem;font-weight:700;display:flex;align-items:center;justify-content:center}.otw-admin-user-caret[_ngcontent-%COMP%]{font-size:.7rem;color:#e5e7eb}.otw-admin-user-menu[_ngcontent-%COMP%]{position:absolute;top:120%;right:0;min-width:130px;padding:.35rem 0;background-color:#020617;border-radius:10px;box-shadow:0 12px 26px #0f172ad9;z-index:20}.otw-user-menu-item[_ngcontent-%COMP%]{width:100%;padding:.45rem .9rem;border:none;background:transparent;color:#e5e7eb;font-size:.8rem;text-align:left}.otw-user-menu-item[_ngcontent-%COMP%]:hover{background-color:#111827}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#ff9b3a,#ffb767);border-radius:999px}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#ff8a3c,#ffb14f)}.otw-list[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#ff9b3a transparent}']})};var my=class n{constructor(e,t,r){this.firestore=e;this.auth=t;this.router=r}name="";email="";license="";plate="";password="";capacity=null;createDriver(){return T(this,null,function*(){if(!this.name||!this.email||!this.password){alert("Name, Email, and Password are required.");return}try{let t=(yield U_(this.auth,this.email,this.password)).user.uid,r=tr(this.firestore,`users/${t}`);yield Ol(r,{uid:t,name:this.name,email:this.email,license:this.license,plate:this.plate,role:"driver",status:"approved",capacity:this.capacity,createdAt:new Date}),alert("Driver account created successfully!"),this.router.navigate(["/admin"])}catch(e){console.error(e),alert("Error: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(ue($n),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-add-driver"]],decls:18,vars:6,consts:[[1,"add-driver-bg"],[1,"add-driver-card"],[1,"add-driver-logo","mb-3"],[1,"text-orange","text-center","mb-2"],[1,"add-driver-subtitle","text-center","mb-4"],["type","text","placeholder","Full Name",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","email","placeholder","Email",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","text","placeholder","License Number",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","text","placeholder","Plate Number",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","number","placeholder","Jeep Capacity","min","1",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",1,"form-control","mb-4",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","w-100"],["routerLink","/admin/dashboard",1,"add-driver-cancel-btn"],[1,"add-driver-btn",3,"click"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1),Vt(2,"div",2),V(3,"h2",3),q(4,"Create Driver Account"),U(),V(5,"p",4),q(6,"Add a new driver to OTW"),U(),V(7,"input",5),Qe("ngModelChange",function(o){return Xe(r.name,o)||(r.name=o),o}),U(),V(8,"input",6),Qe("ngModelChange",function(o){return Xe(r.email,o)||(r.email=o),o}),U(),V(9,"input",7),Qe("ngModelChange",function(o){return Xe(r.license,o)||(r.license=o),o}),U(),V(10,"input",8),Qe("ngModelChange",function(o){return Xe(r.plate,o)||(r.plate=o),o}),U(),V(11,"input",9),Qe("ngModelChange",function(o){return Xe(r.capacity,o)||(r.capacity=o),o}),U(),V(12,"input",10),Qe("ngModelChange",function(o){return Xe(r.password,o)||(r.password=o),o}),U(),V(13,"div",11)(14,"button",12),q(15,"Cancel"),U(),V(16,"button",13),ae("click",function(){return r.createDriver()}),q(17,"Create Driver"),U()()()()),t&2&&(Y(7),Ze("ngModel",r.name),Y(),Ze("ngModel",r.email),Y(),Ze("ngModel",r.license),Y(),Ze("ngModel",r.plate),Y(),Ze("ngModel",r.capacity),Y(),Ze("ngModel",r.password))},dependencies:[xn,Xn,Jn,Fh,Nr,Vh,gr,Oi],styles:['.add-driver-bg[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1.5rem 1rem;box-sizing:border-box}.add-driver-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;z-index:0}.add-driver-card[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:420px;border-radius:24px;background:#fffffff5;box-shadow:0 24px 60px #0f172a4d;padding:2rem 1.75rem;display:flex;flex-direction:column;align-items:center;box-sizing:border-box}.add-driver-logo[_ngcontent-%COMP%]{width:84px;height:84px;margin:0 auto;border-radius:24px;background:#fff url("./media/logo-IKMKXBN4.png") no-repeat center center;background-size:cover;background-position:center;background-repeat:no-repeat;box-shadow:0 18px 40px #180b3c73}.add-driver-logo[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.text-orange[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#111827;text-align:center;margin-bottom:.25rem}.add-driver-subtitle[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;text-align:center;margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:.95rem;border-radius:50px;border:1px solid #d1d5db;color:#111827;margin-bottom:1rem;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#ff4500;box-shadow:0 0 0 .2rem #f603;outline:none}.add-driver-btn[_ngcontent-%COMP%]{border-radius:50px;padding:.55rem 1.2rem;width:50%;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;font-size:.96rem;letter-spacing:.03em;text-transform:uppercase;cursor:pointer;transition:transform .15s,box-shadow .15s,filter .15s}.add-driver-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 20px 44px #180b3c99}.add-driver-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 12px 26px #180b3c66}.add-driver-cancel-btn[_ngcontent-%COMP%]{border-radius:50px;padding:.45rem 1.1rem;border:1px solid #FF4500;background-color:transparent;color:#ff4500;font-size:.86rem;cursor:pointer}@media (max-width: 576px){.add-driver-card[_ngcontent-%COMP%]{padding:1.5rem 1.25rem}.add-driver-logo[_ngcontent-%COMP%]{width:80px;height:80px}.text-orange[_ngcontent-%COMP%]{font-size:1.2rem}.add-driver-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.form-control[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem .9rem}.add-driver-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.45rem 1rem}}']})};var Sc=class n{constructor(e,t,r){this.auth=e;this.authService=t;this.router=r}canActivate=(e,t)=>T(this,null,function*(){let r=e.data.role,i=yield new Promise(a=>{zs(this.auth,u=>a(u),()=>a(null))});return i?(yield this.authService.getUserRole(i.uid))===r?!0:(this.router.navigate(["/login"]),!1):(this.router.navigate(["/login"]),!1)});static \u0275fac=function(t){return new(t||n)(de(Bt),de(Yi),de(bt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var hL=[{path:"login",component:Wv},{path:"signup",children:[{path:"",component:Gv},{path:"commuter",component:Kv},{path:"admin",component:Zv}]},{path:"commuter/dashboard",component:hy,canActivate:[Sc],data:{role:"commuter"}},{path:"driver/dashboard",component:fy,canActivate:[Sc],data:{role:"driver"}},{path:"admin/dashboard",component:py,canActivate:[Sc],data:{role:"admin"}},{path:"admin/dashboard/add-driver",component:my,canActivate:[Sc],data:{role:"admin"}},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login"}];var vL="firebasestorage.googleapis.com",oW="storageBucket",sW=120*1e3,aW=600*1e3;var Ji=class n extends zn{constructor(e,t,r=0){super(lD(e),`Firebase Storage: ${t} (${lD(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lD(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},jo=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(jo||{});function lD(n){return"storage/"+n}function cW(){let n="An unknown error occurred, please check the error payload for server response.";return new Ji(jo.UNKNOWN,n)}function uW(){return new Ji(jo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lW(){return new Ji(jo.CANCELED,"User canceled the upload/download.")}function dW(n){return new Ji(jo.INVALID_URL,"Invalid URL '"+n+"'.")}function hW(n){return new Ji(jo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function fL(n){return new Ji(jo.INVALID_ARGUMENT,n)}function yL(){return new Ji(jo.APP_DELETED,"The Firebase app was deleted.")}function fW(n){return new Ji(jo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Uo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw hW(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(le){le.path.charAt(le.path.length-1)==="/"&&(le.path_=le.path_.slice(0,-1))}let a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function f(le){le.path_=decodeURIComponent(le.path)}let g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",I=new RegExp(`^https?://${y}/${g}/b/${i}/o${E}`,"i"),N={bucket:1,path:3},H=t===vL?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",W=new RegExp(`^https?://${H}/${i}/${F}`,"i"),se=[{regex:u,indices:l,postModify:o},{regex:I,indices:N,postModify:f},{regex:W,indices:{bucket:1,path:2},postModify:f}];for(let le=0;le<se.length;le++){let Ye=se[le],be=Ye.regex.exec(e);if(be){let R=be[Ye.indices.bucket],C=be[Ye.indices.path];C||(C=""),r=new n(R,C),Ye.postModify(r);break}}if(r==null)throw dW(e);return r}},dD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function pW(n,e,t){let r=1,i=null,o=null,a=!1,u=0;function l(){return u===2}let f=!1;function g(...F){f||(f=!0,e.apply(null,F))}function y(F){i=setTimeout(()=>{i=null,n(I,l())},F)}function E(){o&&clearTimeout(o)}function I(F,...W){if(f){E();return}if(F){E(),g.call(null,F,...W);return}if(l()||a){E(),g.call(null,F,...W);return}r<64&&(r*=2);let se;u===1?(u=2,se=0):se=(r+Math.random())*1e3,y(se)}let N=!1;function H(F){N||(N=!0,E(),!f&&(i!==null?(F||(u=2),clearTimeout(i),y(0)):F||(u=1)))}return y(0),o=setTimeout(()=>{a=!0,H(!0)},t),H}function mW(n){n(!1)}function gW(n){return n!==void 0}function pL(n,e,t,r){if(r<e)throw fL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw fL(`Invalid value for '${n}'. Expected ${t} or less.`)}function _W(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var hD=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(hD||{});function vW(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var fD=class{constructor(e,t,r,i,o,a,u,l,f,g,y,E=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=l,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=E,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,H)=>{this.resolve_=N,this.reject_=H,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ll(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=u=>{let l=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let u=o.getErrorCode()===hD.NO_ERROR,l=o.getStatus();if(!u||vW(l,this.additionalRetryCodes_)&&this.retry){let g=o.getErrorCode()===hD.ABORT;r(!1,new Ll(!1,null,g));return}let f=this.successCodes_.indexOf(l)!==-1;r(!0,new Ll(f,o))})},t=(r,i)=>{let o=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(u,u.getResponse());gW(l)?o(l):o()}catch(l){a(l)}else if(u!==null){let l=cW();l.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,l)):a(l)}else if(i.canceled){let l=this.appDelete_?yL():lW();a(l)}else{let l=uW();a(l)}};this.canceled_?t(!1,new Ll(!1,null,!0)):this.backoffId_=pW(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ll=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function yW(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function wW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EW(n,e){e&&(n["X-Firebase-GMPID"]=e)}function bW(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function IW(n,e,t,r,i,o,a=!0,u=!1){let l=_W(n.urlParams),f=n.url+l,g=Object.assign({},n.headers);return EW(g,e),yW(g,t),wW(g,o),bW(g,r),new fD(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,u)}function TW(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function CW(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Cme=256*1024;var pD=class n{constructor(e,t){this._service=e,t instanceof Uo?this._location=t:this._location=Uo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Uo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CW(this._location.path)}get storage(){return this._service}get parent(){let e=TW(this._location.path);if(e===null)return null;let t=new Uo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw fW(e)}};function mL(n,e){let t=e?.[oW];return t==null?null:Uo.makeFromBucketSpec(t,n)}function DW(n,e,t,r={}){n.host=`${e}:${t}`;let i=Li(e);i&&(il(`https://${n.host}/b`),ol("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:f_(o,n.app.options.projectId))}var mD=class{constructor(e,t,r,i,o,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=vL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=sW,this._maxUploadRetryTime=aW,this._requests=new Set,i!=null?this._bucket=Uo.makeFromBucketSpec(i,this._host):this._bucket=mL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Uo.makeFromBucketSpec(this._url,e):this._bucket=mL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return T(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return T(this,null,function*(){if(Rn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pD(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new dD(yL());{let a=IW(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return T(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},gL="@firebase/storage",_L="0.13.14";var wL="storage";function EL(n=So(),e){n=It(n);let r=Ns(n,wL).getImmediate({identifier:e}),i=h_("storage");return i&&bL(r,...i),r}function bL(n,e,t,r={}){DW(n,e,t,r)}function SW(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new mD(t,r,i,e,ji)}function AW(){_r(new En(wL,SW,"PUBLIC").setMultipleInstances(!0)),lt(gL,_L,""),lt(gL,_L,"esm2017")}AW();var Nf=class{constructor(e){return e}},IL="storage",gD=class{constructor(){return ks(IL)}};var _D=new X("angularfire2.storage-instances");function xW(n,e){let t=sc(IL,n,e);return t&&new Nf(t)}function RW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Nf(r)}}var MW={provide:gD,deps:[[new an,_D]]},PW={provide:Nf,useFactory:xW,deps:[[new an,_D],ti]};function TL(n,...e){return lt("angularfire",Bi.full,"gcs"),Un([PW,MW,{provide:_D,useFactory:RW(n),multi:!0,deps:[Ke,wt,zi,Ao,[new an,dc],[new an,Ls],...e]}])}var CL=_t(EL,!0);var DL={production:!1,firebase:{apiKey:"AIzaSyAQuY-FE7naQBxAe0RXMRDb6sOJSTX2vTQ",authDomain:"fpotw-3328e.firebaseapp.com",projectId:"fpotw-3328e",storageBucket:"fpotw-3328e.appspot.com",messagingSenderId:"1070031116982",appId:"1:1070031116982:web:e532363d7c43e89a3be417"}};var SL={providers:[aI(hL),pN(()=>mN(DL.firebase)),y1(()=>w1()),cL(()=>uL()),TL(()=>CL())]};var gy=class n{constructor(e){this.auth=e;zs(this.auth,t=>{console.log("AUTH STATE (app root):",t?t.uid:"none")})}static \u0275fac=function(t){return new(t||n)(ue(Bt))};static \u0275cmp=Ft({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Vt(0,"router-outlet")},dependencies:[Ch,tc],encapsulation:2})};Sb(gy,SL).catch(n=>console.error(n));
