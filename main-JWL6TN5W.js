var aF=Object.create;var Py=Object.defineProperty,cF=Object.defineProperties,uF=Object.getOwnPropertyDescriptor,lF=Object.getOwnPropertyDescriptors,dF=Object.getOwnPropertyNames,WD=Object.getOwnPropertySymbols,KD=Object.getPrototypeOf,ZD=Object.prototype.hasOwnProperty,hF=Object.prototype.propertyIsEnumerable,fF=Reflect.get;var GD=(n,e,t)=>e in n?Py(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q=(n,e)=>{for(var t in e||={})ZD.call(e,t)&&GD(n,t,e[t]);if(WD)for(var t of WD(e))hF.call(e,t)&&GD(n,t,e[t]);return n},we=(n,e)=>cF(n,lF(e));var pF=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var mF=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of dF(e))!ZD.call(n,i)&&i!==t&&Py(n,i,{get:()=>e[i],enumerable:!(r=uF(e,i))||r.enumerable});return n};var QD=(n,e,t)=>(t=n!=null?aF(KD(n)):{},mF(e||!n||!n.__esModule?Py(t,"default",{value:n,enumerable:!0}):t,n));var ss=(n,e,t)=>fF(KD(n),t,e);var T=(n,e,t)=>new Promise((r,i)=>{var o=l=>{try{u(t.next(l))}catch(f){i(f)}},a=l=>{try{u(t.throw(l))}catch(f){i(f)}},u=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,a);u((t=t.apply(n,e)).next())});var mD=pF((ny,_L)=>{"use strict";(function(n,e){typeof ny=="object"&&typeof _L<"u"?e(ny):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.leaflet={}))})(ny,function(n){"use strict";var e="1.9.4";function t(s){var c,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(c in _)s[c]=_[c]}return s}var r=Object.create||(function(){function s(){}return function(c){return s.prototype=c,new s}})();function i(s,c){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(c,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function u(s,c,h){var p,_,w,S;return S=function(){p=!1,_&&(w.apply(h,_),_=!1)},w=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(S,c),p=!0)},w}function l(s,c,h){var p=c[1],_=c[0],w=p-_;return s===p&&h?s:((s-_)%w+w)%w+_}function f(){return!1}function g(s,c){if(c===!1)return s;var h=Math.pow(10,c===void 0?6:c);return Math.round(s*h)/h}function y(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function E(s){return y(s).split(/\s+/)}function I(s,c){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?r(s.options):{});for(var h in c)s.options[h]=c[h];return s.options}function N(s,c,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!c||c.indexOf("?")===-1?"?":"&")+p.join("&")}var q=/\{ *([\w_ -]+) *\}/g;function F(s,c){return s.replace(q,function(h,p){var _=c[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(c)),_})}var W=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function oe(s,c){for(var h=0;h<s.length;h++)if(s[h]===c)return h;return-1}var ae="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function le(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Ye=0;function be(s){var c=+new Date,h=Math.max(0,16-(c-Ye));return Ye=c+h,window.setTimeout(s,h)}var R=window.requestAnimationFrame||le("RequestAnimationFrame")||be,C=window.cancelAnimationFrame||le("CancelAnimationFrame")||le("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,c,h){if(h&&R===be)s.call(c);else return R.call(window,i(s,c))}function x(s){s&&C.call(window,s)}var M={__proto__:null,extend:t,create:r,bind:i,get lastId(){return o},stamp:a,throttle:u,wrapNum:l,falseFn:f,formatNum:g,trim:y,splitWords:E,setOptions:I,getParamString:N,template:F,isArray:W,indexOf:oe,emptyImageUrl:ae,requestFn:R,cancelFn:C,requestAnimFrame:D,cancelAnimFrame:x};function k(){}k.extend=function(s){var c=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=c.__super__=this.prototype,p=r(h);p.constructor=c,c.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(c[_]=this[_]);return s.statics&&t(c,s.statics),s.includes&&(A(s.includes),t.apply(null,[p].concat(s.includes))),t(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?r(h.options):{},t(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,S=p._initHooks.length;w<S;w++)p._initHooks[w].call(this)}},c},k.include=function(s){var c=this.prototype.options;return t(this.prototype,s),s.options&&(this.prototype.options=c,this.mergeOptions(s.options)),this},k.mergeOptions=function(s){return t(this.prototype.options,s),this},k.addInitHook=function(s){var c=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function A(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=W(s)?s:[s];for(var c=0;c<s.length;c++)s[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Dt={on:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h)}return this},off:function(s,c,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],c);else{s=E(s);for(var _=arguments.length===1,w=0,S=s.length;w<S;w++)_?this._off(s[w]):this._off(s[w],c,h)}return this},_on:function(s,c,h,p){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(s,c,h)===!1){h===this&&(h=void 0);var _={fn:c,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,c,h){var p,_,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,w=p.length;_<w;_++)p[_].fn=f;delete this._events[s];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var S=this._listens(s,c,h);if(S!==!1){var O=p[S];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(S,1)}}},fire:function(s,c,h){if(!this.listens(s,h))return this;var p=t({},c,{type:s,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var w=0,S=_.length;w<S;w++){var O=_[w],j=O.fn;O.once&&this.off(s,j,O.ctx),j.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,c,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=c;typeof c!="function"&&(p=!!c,_=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var S in this._eventParents)if(this._eventParents[S].listens(s,c,h,p))return!0}return!1},_listens:function(s,c,h){if(!this._events)return!1;var p=this._events[s]||[];if(!c)return!!p.length;h===this&&(h=void 0);for(var _=0,w=p.length;_<w;_++)if(p[_].fn===c&&p[_].ctx===h)return _;return!1},once:function(s,c,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],c,!0);else{s=E(s);for(var _=0,w=s.length;_<w;_++)this._on(s[_],c,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var c in this._eventParents)this._eventParents[c].fire(s.type,t({layer:s.target,propagatedFrom:s.target},s),!0)}};Dt.addEventListener=Dt.on,Dt.removeEventListener=Dt.clearAllEventListeners=Dt.off,Dt.addOneTimeEventListener=Dt.once,Dt.fireEvent=Dt.fire,Dt.hasEventListeners=Dt.listens;var Fr=k.extend(Dt);function Ie(s,c,h){this.x=h?Math.round(s):s,this.y=h?Math.round(c):c}var Wo=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Ie.prototype={clone:function(){return new Ie(this.x,this.y)},add:function(s){return this.clone()._add(me(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(me(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Ie(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Ie(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Wo(this.x),this.y=Wo(this.y),this},distanceTo:function(s){s=me(s);var c=s.x-this.x,h=s.y-this.y;return Math.sqrt(c*c+h*h)},equals:function(s){return s=me(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=me(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function me(s,c,h){return s instanceof Ie?s:W(s)?new Ie(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Ie(s.x,s.y):new Ie(s,c,h)}function ut(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}ut.prototype={extend:function(s){var c,h;if(!s)return this;if(s instanceof Ie||typeof s[0]=="number"||"x"in s)c=h=me(s);else if(s=fn(s),c=s.min,h=s.max,!c||!h)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=h.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return me(this.min.x,this.max.y)},getTopRight:function(){return me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var c,h;return typeof s[0]=="number"||s instanceof Ie?s=me(s):s=fn(s),s instanceof ut?(c=s.min,h=s.max):c=h=s,c.x>=this.min.x&&h.x<=this.max.x&&c.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=fn(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>=c.x&&p.x<=h.x,S=_.y>=c.y&&p.y<=h.y;return w&&S},overlaps:function(s){s=fn(s);var c=this.min,h=this.max,p=s.min,_=s.max,w=_.x>c.x&&p.x<h.x,S=_.y>c.y&&p.y<h.y;return w&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var c=this.min,h=this.max,p=Math.abs(c.x-h.x)*s,_=Math.abs(c.y-h.y)*s;return fn(me(c.x-p,c.y-_),me(h.x+p,h.y+_))},equals:function(s){return s?(s=fn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function fn(s,c){return!s||s instanceof ut?s:new ut(s,c)}function In(s,c){if(s)for(var h=c?[s,c]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}In.prototype={extend:function(s){var c=this._southWest,h=this._northEast,p,_;if(s instanceof ve)p=s,_=s;else if(s instanceof In){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(Ue(s)||rt(s)):this;return!c&&!h?(this._southWest=new ve(p.lat,p.lng),this._northEast=new ve(_.lat,_.lng)):(c.lat=Math.min(p.lat,c.lat),c.lng=Math.min(p.lng,c.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var c=this._southWest,h=this._northEast,p=Math.abs(c.lat-h.lat)*s,_=Math.abs(c.lng-h.lng)*s;return new In(new ve(c.lat-p,c.lng-_),new ve(h.lat+p,h.lng+_))},getCenter:function(){return new ve((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ve(this.getNorth(),this.getWest())},getSouthEast:function(){return new ve(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ve||"lat"in s?s=Ue(s):s=rt(s);var c=this._southWest,h=this._northEast,p,_;return s instanceof In?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=c.lat&&_.lat<=h.lat&&p.lng>=c.lng&&_.lng<=h.lng},intersects:function(s){s=rt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>=c.lat&&p.lat<=h.lat,S=_.lng>=c.lng&&p.lng<=h.lng;return w&&S},overlaps:function(s){s=rt(s);var c=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),w=_.lat>c.lat&&p.lat<h.lat,S=_.lng>c.lng&&p.lng<h.lng;return w&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,c){return s?(s=rt(s),this._southWest.equals(s.getSouthWest(),c)&&this._northEast.equals(s.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function rt(s,c){return s instanceof In?s:new In(s,c)}function ve(s,c,h){if(isNaN(s)||isNaN(c))throw new Error("Invalid LatLng object: ("+s+", "+c+")");this.lat=+s,this.lng=+c,h!==void 0&&(this.alt=+h)}ve.prototype={equals:function(s,c){if(!s)return!1;s=Ue(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(c===void 0?1e-9:c)},toString:function(s){return"LatLng("+g(this.lat,s)+", "+g(this.lng,s)+")"},distanceTo:function(s){return li.distance(this,Ue(s))},wrap:function(){return li.wrapLatLng(this)},toBounds:function(s){var c=180*s/40075017,h=c/Math.cos(Math.PI/180*this.lat);return rt([this.lat-c,this.lng-h],[this.lat+c,this.lng+h])},clone:function(){return new ve(this.lat,this.lng,this.alt)}};function Ue(s,c,h){return s instanceof ve?s:W(s)&&typeof s[0]!="object"?s.length===3?new ve(s[0],s[1],s[2]):s.length===2?new ve(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ve(s.lat,"lng"in s?s.lng:s.lon,s.alt):c===void 0?null:new ve(s,c,h)}var kn={latLngToPoint:function(s,c){var h=this.projection.project(s),p=this.scale(c);return this.transformation._transform(h,p)},pointToLatLng:function(s,c){var h=this.scale(c),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var c=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(c.min,h),_=this.transformation.transform(c.max,h);return new ut(p,_)},infinite:!1,wrapLatLng:function(s){var c=this.wrapLng?l(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?l(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new ve(h,c,p)},wrapLatLngBounds:function(s){var c=s.getCenter(),h=this.wrapLatLng(c),p=c.lat-h.lat,_=c.lng-h.lng;if(p===0&&_===0)return s;var w=s.getSouthWest(),S=s.getNorthEast(),O=new ve(w.lat-p,w.lng-_),j=new ve(S.lat-p,S.lng-_);return new In(O,j)}},li=t({},kn,{wrapLng:[-180,180],R:6371e3,distance:function(s,c){var h=Math.PI/180,p=s.lat*h,_=c.lat*h,w=Math.sin((c.lat-s.lat)*h/2),S=Math.sin((c.lng-s.lng)*h/2),O=w*w+Math.cos(p)*Math.cos(_)*S*S,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),Go=6378137,jl={R:Go,MAX_LATITUDE:85.0511287798,project:function(s){var c=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*c);return new Ie(this.R*s.lng*c,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var c=180/Math.PI;return new ve((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*c,s.x*c/this.R)},bounds:(function(){var s=Go*Math.PI;return new ut([-s,-s],[s,s])})()};function Bl(s,c,h,p){if(W(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=c,this._c=h,this._d=p}Bl.prototype={transform:function(s,c){return this._transform(s.clone(),c)},_transform:function(s,c){return c=c||1,s.x=c*(this._a*s.x+this._b),s.y=c*(this._c*s.y+this._d),s},untransform:function(s,c){return c=c||1,new Ie((s.x/c-this._b)/this._a,(s.y/c-this._d)/this._c)}};function di(s,c,h,p){return new Bl(s,c,h,p)}var Ko=t({},li,{code:"EPSG:3857",projection:jl,transformation:(function(){var s=.5/(Math.PI*jl.R);return di(s,.5,-s,.5)})()}),zl=t({},Ko,{code:"EPSG:900913"});function xc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Rc(s,c){var h="",p,_,w,S,O,j;for(p=0,w=s.length;p<w;p++){for(O=s[p],_=0,S=O.length;_<S;_++)j=O[_],h+=(_?"L":"M")+j.x+" "+j.y;h+=c?ce.svg?"z":"x":""}return h||"M0 0"}var ra=document.documentElement.style,ia="ActiveXObject"in window,Vf=ia&&!document.addEventListener,Uf="msLaunchUri"in navigator&&!("documentMode"in document),Mc=rr("webkit"),$l=rr("android"),Pc=rr("android 2")||rr("android 3"),jf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Iy=$l&&rr("Google")&&jf<537&&!("AudioNode"in window),oa=!!window.opera,Nc=!Uf&&rr("chrome"),kc=rr("gecko")&&!Mc&&!oa&&!ia,en=!Nc&&rr("safari"),tn=rr("phantom"),sa="OTransition"in ra,Bf=navigator.platform.indexOf("Win")===0,Hl=ia&&"transition"in ra,ql="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pc,Zo="MozPerspective"in ra,zf=!window.L_DISABLE_3D&&(Hl||ql||Zo)&&!sa&&!tn,Qo=typeof orientation<"u"||rr("mobile"),Wl=Qo&&Mc,Ty=Qo&&ql,$f=!window.PointerEvent&&window.MSPointerEvent,Oc=!!(window.PointerEvent||$f),Gl="ontouchstart"in window||!!window.TouchEvent,Hf=!window.L_NO_TOUCH&&(Gl||Oc),aa=Qo&&oa,Kl=Qo&&kc,Zl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,eo=(function(){var s=!1;try{var c=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,c),window.removeEventListener("testPassiveEventSupport",f,c)}catch{}return s})(),qf=(function(){return!!document.createElement("canvas").getContext})(),Yo=!!(document.createElementNS&&xc("svg").createSVGRect),Wf=!!Yo&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),ca=!Yo&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var c=s.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}})(),Gf=navigator.platform.indexOf("Mac")===0,pn=navigator.platform.indexOf("Linux")===0;function rr(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ce={ie:ia,ielt9:Vf,edge:Uf,webkit:Mc,android:$l,android23:Pc,androidStock:Iy,opera:oa,chrome:Nc,gecko:kc,safari:en,phantom:tn,opera12:sa,win:Bf,ie3d:Hl,webkit3d:ql,gecko3d:Zo,any3d:zf,mobile:Qo,mobileWebkit:Wl,mobileWebkit3d:Ty,msPointer:$f,pointer:Oc,touch:Hf,touchNative:Gl,mobileOpera:aa,mobileGecko:Kl,retina:Zl,passiveEvents:eo,canvas:qf,svg:Yo,vml:ca,inlineSvg:Wf,mac:Gf,linux:pn},Jo=ce.msPointer?"MSPointerDown":"pointerdown",Kf=ce.msPointer?"MSPointerMove":"pointermove",Zf=ce.msPointer?"MSPointerUp":"pointerup",to=ce.msPointer?"MSPointerCancel":"pointercancel",Ql={touchstart:Jo,touchmove:Kf,touchend:Zf,touchcancel:to},Qf={touchstart:Jf,touchmove:Xo,touchend:Xo,touchcancel:Xo},Vr={},Yl=!1;function Jl(s,c,h){return c==="touchstart"&&ed(),Qf[c]?(h=Qf[c].bind(this,h),s.addEventListener(Ql[c],h,!1),h):(console.warn("wrong event specified:",c),f)}function Lc(s,c,h){if(!Ql[c]){console.warn("wrong event specified:",c);return}s.removeEventListener(Ql[c],h,!1)}function hi(s){Vr[s.pointerId]=s}function Yf(s){Vr[s.pointerId]&&(Vr[s.pointerId]=s)}function Xl(s){delete Vr[s.pointerId]}function ed(){Yl||(document.addEventListener(Jo,hi,!0),document.addEventListener(Kf,Yf,!0),document.addEventListener(Zf,Xl,!0),document.addEventListener(to,Xl,!0),Yl=!0)}function Xo(s,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var h in Vr)c.touches.push(Vr[h]);c.changedTouches=[c],s(c)}}function Jf(s,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&At(c),Xo(s,c)}function Xf(s){var c={},h,p;for(p in s)h=s[p],c[p]=h&&h.bind?h.bind(s):h;return s=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var Cy=200;function Fc(s,c){s.addEventListener("dblclick",c);var h=0,p;function _(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var S=ud(w);if(!(S.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!S.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-h<=Cy?(p++,p===2&&c(Xf(w))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:c,simDblclick:_}}function ep(s,c){s.removeEventListener("dblclick",c.dblclick),s.removeEventListener("click",c.simDblclick)}var ua=wr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ur=wr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),fi=Ur==="webkitTransition"||Ur==="OTransition"?Ur+"End":"transitionend";function Vc(s){return typeof s=="string"?document.getElementById(s):s}function la(s,c){var h=s.style[c]||s.currentStyle&&s.currentStyle[c];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[c]:null}return h==="auto"?null:h}function $e(s,c,h){var p=document.createElement(s);return p.className=c||"",h&&h.appendChild(p),p}function ft(s){var c=s.parentNode;c&&c.removeChild(s)}function da(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function pi(s){var c=s.parentNode;c&&c.lastChild!==s&&c.appendChild(s)}function mi(s){var c=s.parentNode;c&&c.firstChild!==s&&c.insertBefore(s,c.firstChild)}function Uc(s,c){if(s.classList!==void 0)return s.classList.contains(c);var h=ha(s);return h.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(h)}function xe(s,c){if(s.classList!==void 0)for(var h=E(c),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!Uc(s,c)){var w=ha(s);td(s,(w?w+" ":"")+c)}}function St(s,c){s.classList!==void 0?s.classList.remove(c):td(s,y((" "+ha(s)+" ").replace(" "+c+" "," ")))}function td(s,c){s.className.baseVal===void 0?s.className=c:s.className.baseVal=c}function ha(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function On(s,c){"opacity"in s.style?s.style.opacity=c:"filter"in s.style&&Dy(s,c)}function Dy(s,c){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(c===1)return}c=Math.round(c*100),h?(h.Enabled=c!==100,h.Opacity=c):s.style.filter+=" progid:"+p+"(opacity="+c+")"}function wr(s){for(var c=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in c)return s[h];return!1}function mn(s,c,h){var p=c||new Ie(0,0);s.style[ua]=(ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function mt(s,c){s._leaflet_pos=c,ce.any3d?mn(s,c):(s.style.left=c.x+"px",s.style.top=c.y+"px")}function Er(s){return s._leaflet_pos||new Ie(0,0)}var es,Je,ts;if("onselectstart"in document)es=function(){ye(window,"selectstart",At)},Je=function(){it(window,"selectstart",At)};else{var jr=wr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);es=function(){if(jr){var s=document.documentElement.style;ts=s[jr],s[jr]="none"}},Je=function(){jr&&(document.documentElement.style[jr]=ts,ts=void 0)}}function no(){ye(window,"dragstart",At)}function nd(){it(window,"dragstart",At)}var fa,rd;function id(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(jc(),fa=s,rd=s.style.outlineStyle,s.style.outlineStyle="none",ye(window,"keydown",jc))}function jc(){fa&&(fa.style.outlineStyle=rd,fa=void 0,rd=void 0,it(window,"keydown",jc))}function tp(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function ro(s){var c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}var gi={__proto__:null,TRANSFORM:ua,TRANSITION:Ur,TRANSITION_END:fi,get:Vc,getStyle:la,create:$e,remove:ft,empty:da,toFront:pi,toBack:mi,hasClass:Uc,addClass:xe,removeClass:St,setClass:td,getClass:ha,setOpacity:On,testProp:wr,setTransform:mn,setPosition:mt,getPosition:Er,get disableTextSelection(){return es},get enableTextSelection(){return Je},disableImageDrag:no,enableImageDrag:nd,preventOutline:id,restoreOutline:jc,getSizedParentNode:tp,getScale:ro};function ye(s,c,h,p){if(c&&typeof c=="object")for(var _ in c)sd(s,_,c[_],h);else{c=E(c);for(var w=0,S=c.length;w<S;w++)sd(s,c[w],h,p)}return this}var ir="_leaflet_events";function it(s,c,h,p){if(arguments.length===1)io(s),delete s[ir];else if(c&&typeof c=="object")for(var _ in c)ad(s,_,c[_],h);else if(c=E(c),arguments.length===2)io(s,function(O){return oe(c,O)!==-1});else for(var w=0,S=c.length;w<S;w++)ad(s,c[w],h,p);return this}function io(s,c){for(var h in s[ir]){var p=h.split(/\d/)[0];(!c||c(p))&&ad(s,p,null,null,h)}}var od={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function sd(s,c,h,p){var _=c+a(h)+(p?"_"+a(p):"");if(s[ir]&&s[ir][_])return this;var w=function(O){return h.call(p||s,O||window.event)},S=w;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?w=Jl(s,c,w):ce.touch&&c==="dblclick"?w=Fc(s,w):"addEventListener"in s?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?s.addEventListener(od[c]||c,w,ce.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(w=function(O){O=O||window.event,ga(s,O)&&S(O)},s.addEventListener(od[c],w,!1)):s.addEventListener(c,S,!1):s.attachEvent("on"+c,w),s[ir]=s[ir]||{},s[ir][_]=w}function ad(s,c,h,p,_){_=_||c+a(h)+(p?"_"+a(p):"");var w=s[ir]&&s[ir][_];if(!w)return this;!ce.touchNative&&ce.pointer&&c.indexOf("touch")===0?Lc(s,c,w):ce.touch&&c==="dblclick"?ep(s,w):"removeEventListener"in s?s.removeEventListener(od[c]||c,w,!1):s.detachEvent("on"+c,w),s[ir][_]=null}function Tn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function cd(s){return sd(s,"wheel",Tn),this}function pa(s){return ye(s,"mousedown touchstart dblclick contextmenu",Tn),s._leaflet_disable_click=!0,this}function At(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function br(s){return At(s),Tn(s),this}function ud(s){if(s.composedPath)return s.composedPath();for(var c=[],h=s.target;h;)c.push(h),h=h.parentNode;return c}function ns(s,c){if(!c)return new Ie(s.clientX,s.clientY);var h=ro(c),p=h.boundingClientRect;return new Ie((s.clientX-p.left)/h.x-c.clientLeft,(s.clientY-p.top)/h.y-c.clientTop)}var ma=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ld(s){return ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ma:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ga(s,c){var h=c.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var vt={__proto__:null,on:ye,off:it,stopPropagation:Tn,disableScrollPropagation:cd,disableClickPropagation:pa,preventDefault:At,stop:br,getPropagationPath:ud,getMousePosition:ns,getWheelDelta:ld,isExternalTarget:ga,addListener:ye,removeListener:it},np=Fr.extend({run:function(s,c,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Er(s),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var c=+new Date-this._startTime,h=this._duration*1e3;c<h?this._runFrame(this._easeOut(c/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,c){var h=this._startPos.add(this._offset.multiplyBy(s));c&&h._round(),mt(this._el,h),this.fire("step")},_complete:function(){x(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),je=Fr.extend({options:{crs:Ko,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,c){c=I(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(Ue(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ur&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ye(this._proxy,fi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,c,h){if(c=c===void 0?this._zoom:this._limitZoom(c),s=this._limitCenter(Ue(s),c,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=t({animate:h.animate},h.zoom),h.pan=t({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,c,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,c,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,c){return this._loaded?this.setView(this.getCenter(),s,{zoom:c}):(this._zoom=s,this)},zoomIn:function(s,c){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,c)},zoomOut:function(s,c){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,c)},setZoomAround:function(s,c,h){var p=this.getZoomScale(c),_=this.getSize().divideBy(2),w=s instanceof Ie?s:this.latLngToContainerPoint(s),S=w.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(S));return this.setView(O,c,{zoom:h})},_getBoundsCenterZoom:function(s,c){c=c||{},s=s.getBounds?s.getBounds():rt(s);var h=me(c.paddingTopLeft||c.padding||[0,0]),p=me(c.paddingBottomRight||c.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof c.maxZoom=="number"?Math.min(c.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var w=p.subtract(h).divideBy(2),S=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),j=this.unproject(S.add(O).divideBy(2).add(w),_);return{center:j,zoom:_}},fitBounds:function(s,c){if(s=rt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,c);return this.setView(h.center,h.zoom,c)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,c){return this.setView(s,this._zoom,{pan:c})},panBy:function(s,c){if(s=me(s).round(),c=c||{},!s.x&&!s.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new np,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,c.duration||.25,c.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,c,h){if(h=h||{},h.animate===!1||!ce.any3d)return this.setView(s,c,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),w=this.getSize(),S=this._zoom;s=Ue(s),c=c===void 0?S:c;var O=Math.max(w.x,w.y),j=O*this.getZoomScale(S,c),K=_.distanceTo(p)||1,ne=1.42,_e=ne*ne;function Le(zt){var wp=zt?-1:1,rF=zt?j:O,iF=j*j-O*O+wp*_e*_e*K*K,oF=2*rF*_e*K,My=iF/oF,qD=Math.sqrt(My*My+1)-My,sF=qD<1e-9?-18:Math.log(qD);return sF}function Fn(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function rn(zt){return(Math.exp(zt)+Math.exp(-zt))/2}function Ir(zt){return Fn(zt)/rn(zt)}var Gn=Le(0);function Jc(zt){return O*(rn(Gn)/rn(Gn+ne*zt))}function XL(zt){return O*(rn(Gn)*Ir(Gn+ne*zt)-Fn(Gn))/_e}function eF(zt){return 1-Math.pow(1-zt,1.5)}var tF=Date.now(),$D=(Le(1)-Gn)/ne,nF=h.duration?1e3*h.duration:1e3*$D*.8;function HD(){var zt=(Date.now()-tF)/nF,wp=eF(zt)*$D;zt<=1?(this._flyToFrame=D(HD,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(XL(wp)/K)),S),this.getScaleZoom(O/Jc(wp),S),{flyTo:!0})):this._move(s,c)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),HD.call(this),this},flyToBounds:function(s,c){var h=this._getBoundsCenterZoom(s,c);return this.flyTo(h.center,h.zoom,c)},setMaxBounds:function(s){return s=rt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var c=this.options.minZoom;return this.options.minZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var c=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&c!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,c){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,rt(s));return h.equals(p)||this.panTo(p,c),this._enforcingBounds=!1,this},panInside:function(s,c){c=c||{};var h=me(c.paddingTopLeft||c.padding||[0,0]),p=me(c.paddingBottomRight||c.padding||[0,0]),_=this.project(this.getCenter()),w=this.project(s),S=this.getPixelBounds(),O=fn([S.min.add(h),S.max.subtract(p)]),j=O.getSize();if(!O.contains(w)){this._enforcingBounds=!0;var K=w.subtract(O.getCenter()),ne=O.extend(w).getSize().subtract(j);_.x+=K.x<0?-ne.x:ne.x,_.y+=K.y<0?-ne.y:ne.y,this.panTo(this.unproject(_),c),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=t({animate:!1,pan:!0},s===!0?{animate:!0}:s);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=c.divideBy(2).round(),_=h.divideBy(2).round(),w=p.subtract(_);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=t({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=i(this._handleGeolocationResponse,this),h=i(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,h,s):navigator.geolocation.getCurrentPosition(c,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var c=s.code,h=s.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var c=s.coords.latitude,h=s.coords.longitude,p=new ve(c,h),_=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var S=this.getBoundsZoom(_);this.setView(p,w.maxZoom?Math.min(S,w.maxZoom):S)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var j in s.coords)typeof s.coords[j]=="number"&&(O[j]=s.coords[j]);this.fire("locationfound",O)}},addHandler:function(s,c){if(!c)return this;var h=this[s]=new c(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(x(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)ft(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,c){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=$e("div",h,c||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),c=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new In(c,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,c,h){s=rt(s),h=me(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),w=this.getMaxZoom(),S=s.getNorthWest(),O=s.getSouthEast(),j=this.getSize().subtract(h),K=fn(this.project(O,p),this.project(S,p)).getSize(),ne=ce.any3d?this.options.zoomSnap:1,_e=j.x/K.x,Le=j.y/K.y,Fn=c?Math.max(_e,Le):Math.min(_e,Le);return p=this.getScaleZoom(Fn,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=c?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(_,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,c){var h=this._getTopLeftPoint(s,c);return new ut(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,c){var h=this.options.crs;return c=c===void 0?this._zoom:c,h.scale(s)/h.scale(c)},getScaleZoom:function(s,c){var h=this.options.crs;c=c===void 0?this._zoom:c;var p=h.zoom(s*h.scale(c));return isNaN(p)?1/0:p},project:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(Ue(s),c)},unproject:function(s,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(me(s),c)},layerPointToLatLng:function(s){var c=me(s).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(s){var c=this.project(Ue(s))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ue(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(rt(s))},distance:function(s,c){return this.options.crs.distance(Ue(s),Ue(c))},containerPointToLayerPoint:function(s){return me(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return me(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var c=this.containerPointToLayerPoint(me(s));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ue(s)))},mouseEventToContainerPoint:function(s){return ns(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var c=this._container=Vc(s);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ye(c,"scroll",this._onScroll,this),this._containerId=a(c)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,xe(s,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=la(s,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),mt(this._mapPane,new Ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(s.markerPane,"leaflet-zoom-hide"),xe(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,c,h){mt(this._mapPane,new Ie(0,0));var p=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var _=this._zoom!==c;this._moveStart(_,h)._move(s,c)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,c){return s&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(s,c,h,p){c===void 0&&(c=this._zoom);var _=this._zoom!==c;return this._zoom=c,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return x(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){mt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var c=s?it:ye;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){x(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,c){for(var h=[],p,_=c==="mouseout"||c==="mouseover",w=s.target||s.srcElement,S=!1;w;){if(p=this._targets[a(w)],p&&(c==="click"||c==="preclick")&&this._draggableMoved(p)){S=!0;break}if(p&&p.listens(c,!0)&&(_&&!ga(w,s)||(h.push(p),_))||w===this._container)break;w=w.parentNode}return!h.length&&!S&&!_&&this.listens(c,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var c=s.target||s.srcElement;if(!(!this._loaded||c._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(c))){var h=s.type;h==="mousedown"&&id(c),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,c,h){if(s.type==="click"){var p=t({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,c);if(h){for(var w=[],S=0;S<h.length;S++)h[S].listens(c,!0)&&w.push(h[S]);_=w.concat(_)}if(_.length){c==="contextmenu"&&At(s);var O=_[0],j={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var K=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=K?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=K?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(S=0;S<_.length;S++)if(_[S].fire(c,j,!0),j.originalEvent._stopped||_[S].options.bubblingMouseEvents===!1&&oe(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,c=this._handlers.length;s<c;s++)this._handlers[s].disable()},whenReady:function(s,c){return this._loaded?s.call(c||this,{target:this}):this.on("load",s,c),this},_getMapPanePos:function(){return Er(this._mapPane)||new Ie(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,c){var h=s&&c!==void 0?this._getNewPixelOrigin(s,c):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,c){var h=this.getSize()._divideBy(2);return this.project(s,c)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return this.project(s,c)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,c,h){var p=this._getNewPixelOrigin(h,c);return fn([this.project(s.getSouthWest(),c)._subtract(p),this.project(s.getNorthWest(),c)._subtract(p),this.project(s.getSouthEast(),c)._subtract(p),this.project(s.getNorthEast(),c)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,c,h){if(!h)return s;var p=this.project(s,c),_=this.getSize().divideBy(2),w=new ut(p.subtract(_),p.add(_)),S=this._getBoundsOffset(w,h,c);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?s:this.unproject(p.add(S),c)},_limitOffset:function(s,c){if(!c)return s;var h=this.getPixelBounds(),p=new ut(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,c))},_getBoundsOffset:function(s,c,h){var p=fn(this.project(c.getNorthEast(),h),this.project(c.getSouthWest(),h)),_=p.min.subtract(s.min),w=p.max.subtract(s.max),S=this._rebound(_.x,-w.x),O=this._rebound(_.y,-w.y);return new Ie(S,O)},_rebound:function(s,c){return s+c>0?Math.round(s-c)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(c))},_limitZoom:function(s){var c=this.getMinZoom(),h=this.getMaxZoom(),p=ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(c,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){St(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,c){var h=this._getCenterOffset(s)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,c),!0)},_createAnimProxy:function(){var s=this._proxy=$e("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(c){var h=ua,p=this._proxy.style[h];mn(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),c=this.getZoom();mn(this._proxy,this.project(s,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,c,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(c),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,c,!0)},this),!0)},_animateZoom:function(s,c,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=c,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:c,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&St(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function rp(s,c){return new je(s,c)}var Wn=k.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var c=this._map;return c&&c.removeControl(this),this.options.position=s,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var c=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return xe(c,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),rs=function(s){return new Wn(s)};je.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},c="leaflet-",h=this._controlContainer=$e("div",c+"control-container",this._container);function p(_,w){var S=c+_+" "+c+w;s[_+w]=$e("div",S,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)ft(this._controlCorners[s]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _a=Wn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,c,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,c,h){I(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in c)this._addLayer(c[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Wn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,c){return this._addLayer(s,c),this._map?this._update():this},addOverlay:function(s,c){return this._addLayer(s,c,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var c=this._getLayer(a(s));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):St(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return St(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",c=this._container=$e("div",s),h=this.options.collapsed;c.setAttribute("aria-haspopup",!0),pa(c),cd(c);var p=this._section=$e("section",s+"-list");h&&(this._map.on("click",this.collapse,this),ye(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=$e("a",s+"-toggle",c);_.href="#",_.title="Layers",_.setAttribute("role","button"),ye(_,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){At(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=$e("div",s+"-base",p),this._separator=$e("div",s+"-separator",p),this._overlaysList=$e("div",s+"-overlays",p),c.appendChild(p)},_getLayer:function(s){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&a(this._layers[c].layer)===s)return this._layers[c]},_addLayer:function(s,c,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:c,overlay:h}),this.options.sortLayers&&this._layers.sort(i(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;da(this._baseLayersList),da(this._overlaysList),this._layerControlInputs=[];var s,c,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),c=c||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=c&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var c=this._getLayer(a(s.target)),h=c.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,c)},_createRadioElement:function(s,c){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(c?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var c=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),ye(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var w=document.createElement("span");c.appendChild(w),w.appendChild(p),w.appendChild(_);var S=s.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,c,h,p=[],_=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)c=s[w],h=this._getLayer(c.layerId).layer,c.checked?p.push(h):c.checked||_.push(h);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])&&this._map.removeLayer(_[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,c,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)c=s[_],h=this._getLayer(c.layerId).layer,c.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,ye(s,"click",At),this.expand();var c=this;setTimeout(function(){it(s,"click",At),c._preventClick=!1})}}),ip=function(s,c,h){return new _a(s,c,h)},or=Wn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var c="leaflet-control-zoom",h=$e("div",c+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,c+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,c+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,c,h,p,_){var w=$e("a",h,p);return w.innerHTML=s,w.href="#",w.title=c,w.setAttribute("role","button"),w.setAttribute("aria-label",c),pa(w),ye(w,"click",br),ye(w,"click",_,this),ye(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,c="leaflet-disabled";St(this._zoomInButton,c),St(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(xe(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(xe(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});je.mergeOptions({zoomControl:!0}),je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new or,this.addControl(this.zoomControl))});var op=function(s){return new or(s)},sp=Wn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var c="leaflet-control-scale",h=$e("div",c),p=this.options;return this._addScales(p,c+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,c,h){s.metric&&(this._mScale=$e("div",c,h)),s.imperial&&(this._iScale=$e("div",c,h))},_update:function(){var s=this._map,c=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,c]),s.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var c=this._getRoundNum(s),h=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,h,c/s)},_updateImperial:function(s){var c=s*3.2808399,h,p,_;c>5280?(h=c/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(c),this._updateScale(this._iScale,_+" ft",_/c))},_updateScale:function(s,c,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=c},_getRoundNum:function(s){var c=Math.pow(10,(Math.floor(s)+"").length-1),h=s/c;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,c*h}}),va=function(s){return new sp(s)},ap='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ya=Wn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?ap+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=$e("div","leaflet-control-attribution"),pa(this._container);for(var c in s._layers)s._layers[c].getAttribution&&this.addAttribution(s._layers[c].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var c in this._attributions)this._attributions[c]&&s.push(c);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});je.mergeOptions({attributionControl:!0}),je.addInitHook(function(){this.options.attributionControl&&new ya().addTo(this)});var Bc=function(s){return new ya(s)};Wn.Layers=_a,Wn.Zoom=or,Wn.Scale=sp,Wn.Attribution=ya,rs.layers=ip,rs.zoom=op,rs.scale=va,rs.attribution=Bc;var sr=k.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});sr.addTo=function(s,c){return s.addHandler(c,this),this};var zc={Events:Dt},cp=ce.touch?"touchstart mousedown":"mousedown",Br=Fr.extend({options:{clickTolerance:3},initialize:function(s,c,h,p){I(this,p),this._element=s,this._dragStartTarget=c||s,this._preventOutline=h},enable:function(){this._enabled||(ye(this._dragStartTarget,cp,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Br._dragging===this&&this.finishDrag(!0),it(this._dragStartTarget,cp,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Uc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Br._dragging===this&&this.finishDrag();return}if(!(Br._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Br._dragging=this,this._preventOutline&&id(this._element),no(),es(),!this._moving)){this.fire("down");var c=s.touches?s.touches[0]:s,h=tp(this._element);this._startPoint=new Ie(c.clientX,c.clientY),this._startPos=Er(this._element),this._parentScale=ro(h);var p=s.type==="mousedown";ye(document,p?"mousemove":"touchmove",this._onMove,this),ye(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var c=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Ie(c.clientX,c.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,At(s),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),mt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){St(document.body,"leaflet-dragging"),this._lastTarget&&(St(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),it(document,"mousemove touchmove",this._onMove,this),it(document,"mouseup touchend touchcancel",this._onUp,this),nd(),Je();var c=this._moved&&this._moving;this._moving=!1,Br._dragging=!1,c&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function is(s,c,h){var p,_=[1,4,2,8],w,S,O,j,K,ne,_e,Le;for(w=0,ne=s.length;w<ne;w++)s[w]._code=_i(s[w],c);for(O=0;O<4;O++){for(_e=_[O],p=[],w=0,ne=s.length,S=ne-1;w<ne;S=w++)j=s[w],K=s[S],j._code&_e?K._code&_e||(Le=wa(K,j,_e,c,h),Le._code=_i(Le,c),p.push(Le)):(K._code&_e&&(Le=wa(K,j,_e,c,h),Le._code=_i(Le,c),p.push(Le)),p.push(j));s=p}return s}function dd(s,c){var h,p,_,w,S,O,j,K,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var _e=Ue([0,0]),Le=rt(s),Fn=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());Fn<1700&&(_e=$c(s));var rn=s.length,Ir=[];for(h=0;h<rn;h++){var Gn=Ue(s[h]);Ir.push(c.project(Ue([Gn.lat-_e.lat,Gn.lng-_e.lng])))}for(O=j=K=0,h=0,p=rn-1;h<rn;p=h++)_=Ir[h],w=Ir[p],S=_.y*w.x-w.y*_.x,j+=(_.x+w.x)*S,K+=(_.y+w.y)*S,O+=S*3;O===0?ne=Ir[0]:ne=[j/O,K/O];var Jc=c.unproject(me(ne));return Ue([Jc.lat+_e.lat,Jc.lng+_e.lng])}function $c(s){for(var c=0,h=0,p=0,_=0;_<s.length;_++){var w=Ue(s[_]);c+=w.lat,h+=w.lng,p++}return Ue([c/p,h/p])}var hd={__proto__:null,clipPolygon:is,polygonCenter:dd,centroid:$c};function Hc(s,c){if(!c||!s.length)return s.slice();var h=c*c;return s=oo(s,h),s=up(s,h),s}function fd(s,c,h){return Math.sqrt(Yt(s,c,h,!0))}function qc(s,c,h){return Yt(s,c,h)}function up(s,c){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,Wc(s,_,c,0,h-1);var w,S=[];for(w=0;w<h;w++)_[w]&&S.push(s[w]);return S}function Wc(s,c,h,p,_){var w=0,S,O,j;for(O=p+1;O<=_-1;O++)j=Yt(s[O],s[p],s[_],!0),j>w&&(S=O,w=j);w>h&&(c[S]=1,Wc(s,c,h,p,S),Wc(s,c,h,S,_))}function oo(s,c){for(var h=[s[0]],p=1,_=0,w=s.length;p<w;p++)Gc(s[p],s[_])>c&&(h.push(s[p]),_=p);return _<w-1&&h.push(s[w-1]),h}var pd;function md(s,c,h,p,_){var w=p?pd:_i(s,h),S=_i(c,h),O,j,K;for(pd=S;;){if(!(w|S))return[s,c];if(w&S)return!1;O=w||S,j=wa(s,c,O,h,_),K=_i(j,h),O===w?(s=j,w=K):(c=j,S=K)}}function wa(s,c,h,p,_){var w=c.x-s.x,S=c.y-s.y,O=p.min,j=p.max,K,ne;return h&8?(K=s.x+w*(j.y-s.y)/S,ne=j.y):h&4?(K=s.x+w*(O.y-s.y)/S,ne=O.y):h&2?(K=j.x,ne=s.y+S*(j.x-s.x)/w):h&1&&(K=O.x,ne=s.y+S*(O.x-s.x)/w),new Ie(K,ne,_)}function _i(s,c){var h=0;return s.x<c.min.x?h|=1:s.x>c.max.x&&(h|=2),s.y<c.min.y?h|=4:s.y>c.max.y&&(h|=8),h}function Gc(s,c){var h=c.x-s.x,p=c.y-s.y;return h*h+p*p}function Yt(s,c,h,p){var _=c.x,w=c.y,S=h.x-_,O=h.y-w,j=S*S+O*O,K;return j>0&&(K=((s.x-_)*S+(s.y-w)*O)/j,K>1?(_=h.x,w=h.y):K>0&&(_+=S*K,w+=O*K)),S=s.x-_,O=s.y-w,p?S*S+O*O:new Ie(_,w)}function Ln(s){return!W(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function gd(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(s)}function so(s,c){var h,p,_,w,S,O,j,K;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=Ue([0,0]),_e=rt(s),Le=_e.getNorthWest().distanceTo(_e.getSouthWest())*_e.getNorthEast().distanceTo(_e.getNorthWest());Le<1700&&(ne=$c(s));var Fn=s.length,rn=[];for(h=0;h<Fn;h++){var Ir=Ue(s[h]);rn.push(c.project(Ue([Ir.lat-ne.lat,Ir.lng-ne.lng])))}for(h=0,p=0;h<Fn-1;h++)p+=rn[h].distanceTo(rn[h+1])/2;if(p===0)K=rn[0];else for(h=0,w=0;h<Fn-1;h++)if(S=rn[h],O=rn[h+1],_=S.distanceTo(O),w+=_,w>p){j=(w-p)/_,K=[O.x-j*(O.x-S.x),O.y-j*(O.y-S.y)];break}var Gn=c.unproject(me(K));return Ue([Gn.lat+ne.lat,Gn.lng+ne.lng])}var d={__proto__:null,simplify:Hc,pointToSegmentDistance:fd,closestPointOnSegment:qc,clipSegment:md,_getEdgeIntersection:wa,_getBitCode:_i,_sqClosestPointOnSegment:Yt,isFlat:Ln,_flat:gd,polylineCenter:so},m={project:function(s){return new Ie(s.lng,s.lat)},unproject:function(s){return new ve(s.y,s.x)},bounds:new ut([-180,-90],[180,90])},v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ut([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var c=Math.PI/180,h=this.R,p=s.lat*c,_=this.R_MINOR/h,w=Math.sqrt(1-_*_),S=w*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-S)/(1+S),w/2);return p=-h*Math.log(Math.max(O,1e-10)),new Ie(s.lng*c*h,p)},unproject:function(s){for(var c=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),S=Math.PI/2-2*Math.atan(w),O=0,j=.1,K;O<15&&Math.abs(j)>1e-7;O++)K=_*Math.sin(S),K=Math.pow((1-K)/(1+K),_/2),j=Math.PI/2-2*Math.atan(w*K)-S,S+=j;return new ve(S*c,s.x*c/h)}},b={__proto__:null,LonLat:m,Mercator:v,SphericalMercator:jl},P=t({},li,{code:"EPSG:3395",projection:v,transformation:(function(){var s=.5/(Math.PI*v.R);return di(s,.5,-s,.5)})()}),B=t({},li,{code:"EPSG:4326",projection:m,transformation:di(1/180,1,-1/180,.5)}),J=t({},kn,{projection:m,transformation:di(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,c){var h=c.lng-s.lng,p=c.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});kn.Earth=li,kn.EPSG3395=P,kn.EPSG3857=Ko,kn.EPSG900913=zl,kn.EPSG4326=B,kn.Simple=J;var ke=Fr.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var c=s.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var h=this.getEvents();c.on(h,this),this.once("remove",function(){c.off(h,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});je.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var c=a(s);return this._layers[c]?this:(this._layers[c]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var c=a(s);return this._layers[c]?(this._loaded&&s.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},_addLayers:function(s){s=s?W(s)?s:[s]:[];for(var c=0,h=s.length;c<h;c++)this.addLayer(s[c])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var c=a(s);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,c=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),c=_.maxZoom===void 0?c:Math.max(c,_.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var yt=ke.extend({initialize:function(s,c){I(this,c),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var c=this.getLayerId(s);return this._layers[c]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var c=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(s){var c=typeof s=="number"?s:this.getLayerId(s);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var c=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,c);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,c){for(var h in this._layers)s.call(c,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),He=function(s,c){return new yt(s,c)},pt=yt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),yt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),yt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new In;for(var c in this._layers){var h=this._layers[c];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),nn=function(s,c){return new pt(s,c)},ar=k.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,c){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,c){var h=this.options,p=h[c+"Size"];typeof p=="number"&&(p=[p,p]);var _=me(p),w=me(c==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+c+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,c){return c=c||document.createElement("img"),c.src=s,c},_getIconUrl:function(s){return ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function cr(s){return new ar(s)}var vi=ar.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof vi.imagePath!="string"&&(vi.imagePath=this._detectIconPath()),(this.options.imagePath||vi.imagePath)+ar.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var c=function(h,p,_){var w=p.exec(h);return w&&w[_]};return s=c(s,/^url\((['"])?(.+)\1\)$/,2),s&&c(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=$e("div","leaflet-default-icon-path",document.body),c=la(s,"background-image")||la(s,"backgroundImage");if(document.body.removeChild(s),c=this._stripUrl(c),c)return c;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Kc=sr.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Br(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&St(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var c=this._marker,h=c._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,w=Er(c._icon),S=h.getPixelBounds(),O=h.getPixelOrigin(),j=fn(S.min._subtract(O).add(_),S.max._subtract(O).subtract(_));if(!j.contains(w)){var K=me((Math.max(j.max.x,w.x)-j.max.x)/(S.max.x-j.max.x)-(Math.min(j.min.x,w.x)-j.min.x)/(S.min.x-j.min.x),(Math.max(j.max.y,w.y)-j.max.y)/(S.max.y-j.max.y)-(Math.min(j.min.y,w.y)-j.min.y)/(S.min.y-j.min.y)).multiplyBy(p);h.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),mt(c._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(x(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var c=this._marker,h=c._shadow,p=Er(c._icon),_=c._map.layerPointToLatLng(p);h&&mt(h,p),c._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,c.fire("move",s).fire("drag",s)},_onDragEnd:function(s){x(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),lp=ke.extend({options:{icon:new vi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,c){I(this,c),this._latlng=Ue(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var c=this._latlng;return this._latlng=Ue(s),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),xe(h,c),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ye(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),w=!1;_!==this._shadow&&(this._removeShadow(),w=!0),_&&(xe(_,c),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&mt(this._icon,s),this._shadow&&mt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Kc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Kc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&On(this._icon,s),this._shadow&&On(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var c=this.options.icon.options,h=c.iconSize?me(c.iconSize):me(0,0),p=c.iconAnchor?me(c.iconAnchor):me(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function OL(s,c){return new lp(s,c)}var os=ke.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),dp=os.extend({options:{fill:!0,radius:10},initialize:function(s,c){I(this,c),this._latlng=Ue(s),this._radius=this.options.radius},setLatLng:function(s){var c=this._latlng;return this._latlng=Ue(s),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var c=s&&s.radius||this._radius;return os.prototype.setStyle.call(this,s),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,c=this._radiusY||s,h=this._clickTolerance(),p=[s+h,c+h];this._pxBounds=new ut(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function LL(s,c){return new dp(s,c)}var Sy=dp.extend({initialize:function(s,c,h){if(typeof c=="number"&&(c=t({},h,{radius:c})),I(this,c),this._latlng=Ue(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new In(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:os.prototype.setStyle,_project:function(){var s=this._latlng.lng,c=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===li.distance){var _=Math.PI/180,w=this._mRadius/li.R/_,S=h.project([c+w,s]),O=h.project([c-w,s]),j=S.add(O).divideBy(2),K=h.unproject(j).lat,ne=Math.acos((Math.cos(w*_)-Math.sin(c*_)*Math.sin(K*_))/(Math.cos(c*_)*Math.cos(K*_)))/_;(isNaN(ne)||ne===0)&&(ne=w/Math.cos(Math.PI/180*c)),this._point=j.subtract(h.getPixelOrigin()),this._radius=isNaN(ne)?0:j.x-h.project([K,s-ne]).x,this._radiusY=j.y-S.y}else{var _e=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(_e).x}this._updateBounds()}});function FL(s,c,h){return new Sy(s,c,h)}var ao=os.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,c){I(this,c),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var c=1/0,h=null,p=Yt,_,w,S=0,O=this._parts.length;S<O;S++)for(var j=this._parts[S],K=1,ne=j.length;K<ne;K++){_=j[K-1],w=j[K];var _e=p(s,_,w,!0);_e<c&&(c=_e,h=p(s,_,w))}return h&&(h.distance=Math.sqrt(c)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return so(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,c){return c=c||this._defaultShape(),s=Ue(s),c.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new In,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var c=[],h=Ln(s),p=0,_=s.length;p<_;p++)h?(c[p]=Ue(s[p]),this._bounds.extend(c[p])):c[p]=this._convertLatLngs(s[p]);return c},_project:function(){var s=new ut;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),c=new Ie(s,s);this._rawPxBounds&&(this._pxBounds=new ut([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(s,c,h){var p=s[0]instanceof ve,_=s.length,w,S;if(p){for(S=[],w=0;w<_;w++)S[w]=this._map.latLngToLayerPoint(s[w]),h.extend(S[w]);c.push(S)}else for(w=0;w<_;w++)this._projectLatlngs(s[w],c,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,h,p,_,w,S,O,j;for(h=0,_=0,w=this._rings.length;h<w;h++)for(j=this._rings[h],p=0,S=j.length;p<S-1;p++)O=md(j[p],j[p+1],s,p,!0),O&&(c[_]=c[_]||[],c[_].push(O[0]),(O[1]!==j[p+1]||p===S-2)&&(c[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,c=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=Hc(s[h],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,c){var h,p,_,w,S,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(O=this._parts[h],p=0,S=O.length,_=S-1;p<S;_=p++)if(!(!c&&p===0)&&fd(s,O[_],O[p])<=j)return!0;return!1}});function VL(s,c){return new ao(s,c)}ao._flat=gd;var Zc=ao.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var c=ao.prototype._convertLatLngs.call(this,s),h=c.length;return h>=2&&c[0]instanceof ve&&c[0].equals(c[h-1])&&c.pop(),c},_setLatLngs:function(s){ao.prototype._setLatLngs.call(this,s),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,c=this.options.weight,h=new Ie(c,c);if(s=new ut(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,w;p<_;p++)w=is(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var c=!1,h,p,_,w,S,O,j,K;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,j=this._parts.length;w<j;w++)for(h=this._parts[w],S=0,K=h.length,O=K-1;S<K;O=S++)p=h[S],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(c=!c);return c||ao.prototype._containsPoint.call(this,s,!0)}});function UL(s,c){return new Zc(s,c)}var co=pt.extend({initialize:function(s,c){I(this,c),this._layers={},s&&this.addData(s)},addData:function(s){var c=W(s)?s:s.features,h,p,_;if(c){for(h=0,p=c.length;h<p;h++)_=c[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var S=hp(s,w);return S?(S.feature=mp(s),S.defaultOptions=S.options,this.resetStyle(S),w.onEachFeature&&w.onEachFeature(s,S),this.addLayer(S)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=t({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(c){this._setLayerStyle(c,s)},this)},_setLayerStyle:function(s,c){s.setStyle&&(typeof c=="function"&&(c=c(s.feature)),s.setStyle(c))}});function hp(s,c){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],w=c&&c.pointToLayer,S=c&&c.coordsToLatLng||Ay,O,j,K,ne;if(!p&&!h)return null;switch(h.type){case"Point":return O=S(p),CD(w,s,O,c);case"MultiPoint":for(K=0,ne=p.length;K<ne;K++)O=S(p[K]),_.push(CD(w,s,O,c));return new pt(_);case"LineString":case"MultiLineString":return j=fp(p,h.type==="LineString"?0:1,S),new ao(j,c);case"Polygon":case"MultiPolygon":return j=fp(p,h.type==="Polygon"?1:2,S),new Zc(j,c);case"GeometryCollection":for(K=0,ne=h.geometries.length;K<ne;K++){var _e=hp({geometry:h.geometries[K],type:"Feature",properties:s.properties},c);_e&&_.push(_e)}return new pt(_);case"FeatureCollection":for(K=0,ne=h.features.length;K<ne;K++){var Le=hp(h.features[K],c);Le&&_.push(Le)}return new pt(_);default:throw new Error("Invalid GeoJSON object.")}}function CD(s,c,h,p){return s?s(c,h):new lp(h,p&&p.markersInheritOptions&&p)}function Ay(s){return new ve(s[1],s[0],s[2])}function fp(s,c,h){for(var p=[],_=0,w=s.length,S;_<w;_++)S=c?fp(s[_],c-1,h):(h||Ay)(s[_]),p.push(S);return p}function xy(s,c){return s=Ue(s),s.alt!==void 0?[g(s.lng,c),g(s.lat,c),g(s.alt,c)]:[g(s.lng,c),g(s.lat,c)]}function pp(s,c,h,p){for(var _=[],w=0,S=s.length;w<S;w++)_.push(c?pp(s[w],Ln(s[w])?0:c-1,h,p):xy(s[w],p));return!c&&h&&_.length>0&&_.push(_[0].slice()),_}function Qc(s,c){return s.feature?t({},s.feature,{geometry:c}):mp(c)}function mp(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Ry={toGeoJSON:function(s){return Qc(this,{type:"Point",coordinates:xy(this.getLatLng(),s)})}};lp.include(Ry),Sy.include(Ry),dp.include(Ry),ao.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=pp(this._latlngs,c?1:0,!1,s);return Qc(this,{type:(c?"Multi":"")+"LineString",coordinates:h})}}),Zc.include({toGeoJSON:function(s){var c=!Ln(this._latlngs),h=c&&!Ln(this._latlngs[0]),p=pp(this._latlngs,h?2:c?1:0,!0,s);return c||(p=[p]),Qc(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),yt.include({toMultiPoint:function(s){var c=[];return this.eachLayer(function(h){c.push(h.toGeoJSON(s).geometry.coordinates)}),Qc(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(s){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(s);var h=c==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var w=_.toGeoJSON(s);if(h)p.push(w.geometry);else{var S=mp(w);S.type==="FeatureCollection"?p.push.apply(p,S.features):p.push(S)}}}),h?Qc(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function DD(s,c){return new co(s,c)}var jL=DD,gp=ke.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,c,h){this._url=s,this._bounds=rt(c),I(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&pi(this._image),this},bringToBack:function(){return this._map&&mi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=rt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",c=this._image=s?this._url:$e("img");if(xe(c,"leaflet-image-layer"),this._zoomAnimated&&xe(c,"leaflet-zoom-animated"),this.options.className&&xe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onload=i(this.fire,this,"load"),c.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(s){var c=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;mn(this._image,h,c)},_reset:function(){var s=this._image,c=new ut(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=c.getSize();mt(s,c.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){On(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),BL=function(s,c,h){return new gp(s,c,h)},SD=gp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",c=this._image=s?this._url:$e("video");if(xe(c,"leaflet-image-layer"),this._zoomAnimated&&xe(c,"leaflet-zoom-animated"),this.options.className&&xe(c,this.options.className),c.onselectstart=f,c.onmousemove=f,c.onloadeddata=i(this.fire,this,"load"),s){for(var h=c.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[c.src];return}W(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var S=$e("source");S.src=this._url[w],c.appendChild(S)}}});function zL(s,c,h){return new SD(s,c,h)}var AD=gp.extend({_initImage:function(){var s=this._image=this._url;xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function $L(s,c,h){return new AD(s,c,h)}var yi=ke.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,c){s&&(s instanceof ve||W(s))?(this._latlng=Ue(s),I(this,c)):(I(this,s),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&On(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&On(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(On(this._container,0),this._removeTimeout=setTimeout(i(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(St(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ue(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pi(this._container),this},bringToBack:function(){return this._map&&mi(this._container),this},_prepareOpen:function(s){var c=this._source;if(!c._map)return!1;if(c instanceof pt){c=null;var h=this._source._layers;for(var p in h)if(h[p]._map){c=h[p];break}if(!c)return!1;this._source=c}if(!s)if(c.getCenter)s=c.getCenter();else if(c.getLatLng)s=c.getLatLng();else if(c.getBounds)s=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")s.innerHTML=c;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),c=me(this.options.offset),h=this._getAnchor();this._zoomAnimated?mt(this._container,s.add(h)):c=c.add(s).add(h);var p=this._containerBottom=-c.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});je.include({_initOverlay:function(s,c,h,p){var _=c;return _ instanceof s||(_=new s(p).setContent(c)),h&&_.setLatLng(h),_}}),ke.include({_initOverlay:function(s,c,h,p){var _=h;return _ instanceof s?(I(_,p),_._source=this):(_=c&&!p?c:new s(p,this),_.setContent(h)),_}});var _p=yi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,yi.prototype.openOn.call(this,s)},onAdd:function(s){yi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof os||this._source.on("preclick",Tn))},onRemove:function(s){yi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof os||this._source.off("preclick",Tn))},getEvents:function(){var s=yi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",c=this._container=$e("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=$e("div",s+"-content-wrapper",c);if(this._contentNode=$e("div",s+"-content",h),pa(c),cd(this._contentNode),ye(c,"contextmenu",Tn),this._tipContainer=$e("div",s+"-tip-container",c),this._tip=$e("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=$e("a",s+"-close-button",c);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',ye(p,"click",function(_){At(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,c=s.style;c.width="",c.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),c.width=h+1+"px",c.whiteSpace="",c.height="";var p=s.offsetHeight,_=this.options.maxHeight,w="leaflet-popup-scrolled";_&&p>_?(c.height=_+"px",xe(s,w)):St(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();mt(this._container,c.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,c=parseInt(la(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+c,p=this._containerWidth,_=new Ie(this._containerLeft,-h-this._containerBottom);_._add(Er(this._container));var w=s.layerPointToContainerPoint(_),S=me(this.options.autoPanPadding),O=me(this.options.autoPanPaddingTopLeft||S),j=me(this.options.autoPanPaddingBottomRight||S),K=s.getSize(),ne=0,_e=0;w.x+p+j.x>K.x&&(ne=w.x+p-K.x+j.x),w.x-ne-O.x<0&&(ne=w.x-O.x),w.y+h+j.y>K.y&&(_e=w.y+h-K.y+j.y),w.y-_e-O.y<0&&(_e=w.y-O.y),(ne||_e)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,_e]))}},_getAnchor:function(){return me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),HL=function(s,c){return new _p(s,c)};je.mergeOptions({closePopupOnClick:!0}),je.include({openPopup:function(s,c,h){return this._initOverlay(_p,s,c,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),ke.include({bindPopup:function(s,c){return this._popup=this._initOverlay(_p,this._popup,s,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof pt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){br(s);var c=s.layer||s.target;if(this._popup._source===c&&!(c instanceof os)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=c,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var vp=yi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){yi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){yi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=yi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",c=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$e("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var c,h,p=this._map,_=this._container,w=p.latLngToContainerPoint(p.getCenter()),S=p.layerPointToContainerPoint(s),O=this.options.direction,j=_.offsetWidth,K=_.offsetHeight,ne=me(this.options.offset),_e=this._getAnchor();O==="top"?(c=j/2,h=K):O==="bottom"?(c=j/2,h=0):O==="center"?(c=j/2,h=K/2):O==="right"?(c=0,h=K/2):O==="left"?(c=j,h=K/2):S.x<w.x?(O="right",c=0,h=K/2):(O="left",c=j+(ne.x+_e.x)*2,h=K/2),s=s.subtract(me(c,h,!0)).add(ne).add(_e),St(_,"leaflet-tooltip-right"),St(_,"leaflet-tooltip-left"),St(_,"leaflet-tooltip-top"),St(_,"leaflet-tooltip-bottom"),xe(_,"leaflet-tooltip-"+O),mt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&On(this._container,s)},_animateZoom:function(s){var c=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(c)},_getAnchor:function(){return me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),qL=function(s,c){return new vp(s,c)};je.include({openTooltip:function(s,c,h){return this._initOverlay(vp,s,c,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),ke.include({bindTooltip:function(s,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(vp,this._tooltip,s,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var c=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[c](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof pt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&(ye(c,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),ye(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var c=typeof s.getElement=="function"&&s.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var c=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),c=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(c)}});var xD=ar.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var c=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(da(c),c.appendChild(h.html)):c.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=me(h.bgPos);c.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function WL(s){return new xD(s)}ar.Default=vi;var _d=ke.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),ft(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Ie?s:new Ie(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var c=this.getPane().children,h=-s(-1/0,1/0),p=0,_=c.length,w;p<_;p++)w=c[p].style.zIndex,c[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){On(this._container,this.options.opacity);var s=+new Date,c=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var w=Math.min(1,(s-_.loaded)/200);On(_.el,w),w<1?c=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),c&&(x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=$e("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,c=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=c-Math.abs(s-h),this._onUpdateLevel(h)):(ft(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=$e("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=c,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,c,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)c=this._tiles[s],c.retain=c.current;for(s in this._tiles)if(c=this._tiles[s],c.current&&!c.active){var p=c.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var c in this._tiles)this._tiles[c].coords.z===s&&this._removeTile(c)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)ft(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,c,h,p){var _=Math.floor(s/2),w=Math.floor(c/2),S=h-1,O=new Ie(+_,+w);O.z=+S;var j=this._tileCoordsToKey(O),K=this._tiles[j];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),S>p?this._retainParent(_,w,S,p):!1)},_retainChildren:function(s,c,h,p){for(var _=2*s;_<2*s+2;_++)for(var w=2*c;w<2*c+2;w++){var S=new Ie(_,w);S.z=h+1;var O=this._tileCoordsToKey(S),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);h+1<p&&this._retainChildren(_,w,h+1,p)}},_resetView:function(s){var c=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var c=this.options;return c.minNativeZoom!==void 0&&s<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<s?c.maxNativeZoom:s},_setView:function(s,c,h,p){var _=Math.round(c);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var w=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||w)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,c)},_setZoomTransforms:function(s,c){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,c)},_setZoomTransform:function(s,c,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(c,h)).round();ce.any3d?mn(s.el,_,p):mt(s.el,_)},_resetGrid:function(){var s=this._map,c=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,c.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,c.wrapLng[1]],p).x/h.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([c.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([c.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var c=this._map,h=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),p=c.getZoomScale(h,this._tileZoom),_=c.project(s,this._tileZoom).floor(),w=c.getSize().divideBy(p*2);return new ut(_.subtract(w),_.add(w))},_update:function(s){var c=this._map;if(c){var h=this._clampZoom(c.getZoom());if(s===void 0&&(s=c.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),w=_.getCenter(),S=[],O=this.options.keepBuffer,j=new ut(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ne=this._tiles[K].coords;(ne.z!==this._tileZoom||!j.contains(new Ie(ne.x,ne.y)))&&(this._tiles[K].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var _e=_.min.y;_e<=_.max.y;_e++)for(var Le=_.min.x;Le<=_.max.x;Le++){var Fn=new Ie(Le,_e);if(Fn.z=this._tileZoom,!!this._isValidTile(Fn)){var rn=this._tiles[this._tileCoordsToKey(Fn)];rn?rn.current=!0:S.push(Fn)}}if(S.sort(function(Gn,Jc){return Gn.distanceTo(w)-Jc.distanceTo(w)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ir=document.createDocumentFragment();for(Le=0;Le<S.length;Le++)this._addTile(S[Le],Ir);this._level.el.appendChild(Ir)}}}},_isValidTile:function(s){var c=this._map.options.crs;if(!c.infinite){var h=this._globalTileRange;if(!c.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!c.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return rt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var c=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),w=c.unproject(p,s.z),S=c.unproject(_,s.z);return[w,S]},_tileCoordsToBounds:function(s){var c=this._tileCoordsToNwSe(s),h=new In(c[0],c[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var c=s.split(":"),h=new Ie(+c[0],+c[1]);return h.z=+c[2],h},_removeTile:function(s){var c=this._tiles[s];c&&(ft(c.el),delete this._tiles[s],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){xe(s,"leaflet-tile");var c=this.getTileSize();s.style.width=c.x+"px",s.style.height=c.y+"px",s.onselectstart=f,s.onmousemove=f,ce.ielt9&&this.options.opacity<1&&On(s,this.options.opacity)},_addTile:function(s,c){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),i(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(i(this._tileReady,this,s,null,_)),mt(_,h),this._tiles[p]={el:_,coords:s,current:!0},c.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,c,h){c&&this.fire("tileerror",{error:c,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(On(h.el,0),x(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),c||(xe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var c=new Ie(this._wrapX?l(s.x,this._wrapX):s.x,this._wrapY?l(s.y,this._wrapY):s.y);return c.z=s.z,c},_pxBoundsToTileRange:function(s){var c=this.getTileSize();return new ut(s.min.unscaleBy(c).floor(),s.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function GL(s){return new _d(s)}var Yc=_d.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,c){this._url=s,c=I(this,c),c.detectRetina&&ce.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,c){return this._url===s&&c===void 0&&(c=!0),this._url=s,c||this.redraw(),this},createTile:function(s,c){var h=document.createElement("img");return ye(h,"load",i(this._tileOnLoad,this,c,h)),ye(h,"error",i(this._tileOnError,this,c,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var c={r:ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(c.y=h),c["-y"]=h}return F(this._url,t(c,this.options))},_tileOnLoad:function(s,c){ce.ielt9?setTimeout(i(s,this,null,c),0):s(null,c)},_tileOnError:function(s,c,h){var p=this.options.errorTileUrl;p&&c.getAttribute("src")!==p&&(c.src=p),s(h,c)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,c=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=c-s),s+p},_getSubdomain:function(s){var c=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var s,c;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(c=this._tiles[s].el,c.onload=f,c.onerror=f,!c.complete)){c.src=ae;var h=this._tiles[s].coords;ft(c),delete this._tiles[s],this.fire("tileabort",{tile:c,coords:h})}},_removeTile:function(s){var c=this._tiles[s];if(c)return c.el.setAttribute("src",ae),_d.prototype._removeTile.call(this,s)},_tileReady:function(s,c,h){if(!(!this._map||h&&h.getAttribute("src")===ae))return _d.prototype._tileReady.call(this,s,c,h)}});function RD(s,c){return new Yc(s,c)}var MD=Yc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,c){this._url=s;var h=t({},this.defaultWmsParams);for(var p in c)p in this.options||(h[p]=c[p]);c=I(this,c);var _=c.detectRetina&&ce.retina?2:1,w=this.getTileSize();h.width=w.x*_,h.height=w.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Yc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var c=this._tileCoordsToNwSe(s),h=this._crs,p=fn(h.project(c[0]),h.project(c[1])),_=p.min,w=p.max,S=(this._wmsVersion>=1.3&&this._crs===B?[_.y,_.x,w.y,w.x]:[_.x,_.y,w.x,w.y]).join(","),O=Yc.prototype.getTileUrl.call(this,s);return O+N(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(s,c){return t(this.wmsParams,s),c||this.redraw(),this}});function KL(s,c){return new MD(s,c)}Yc.WMS=MD,RD.wms=KL;var uo=ke.extend({options:{padding:.1},initialize:function(s){I(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,c){var h=this._map.getZoomScale(c,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,c),w=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,c));ce.any3d?mn(this._container,w,h):mt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,c=this._map.getSize(),h=this._map.containerPointToLayerPoint(c.multiplyBy(-s)).round();this._bounds=new ut(h,h.add(c.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),PD=uo.extend({options:{tolerance:0},getEvents:function(){var s=uo.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){uo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");ye(s,"mousemove",this._onMouseMove,this),ye(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ye(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){x(this._redrawRequest),delete this._ctx,ft(this._container),it(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var c in this._layers)s=this._layers[c],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){uo.prototype._update.call(this);var s=this._bounds,c=this._container,h=s.getSize(),p=ce.retina?2:1;mt(c,s.min),c.width=p*h.x,c.height=p*h.y,c.style.width=h.x+"px",c.style.height=h.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){uo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var c=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var c=s._order,h=c.next,p=c.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var c=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<c.length;_++){if(p=Number(c[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var c=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ut,this._redrawBounds.extend(s._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(s._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var c=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,c=this._redrawBounds;if(this._ctx.save(),c){var h=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!c||s._pxBounds&&s._pxBounds.intersects(c))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,c){if(this._drawing){var h,p,_,w,S=s._parts,O=S.length,j=this._ctx;if(O){for(j.beginPath(),h=0;h<O;h++){for(p=0,_=S[h].length;p<_;p++)w=S[h][p],j[p?"lineTo":"moveTo"](w.x,w.y);c&&j.closePath()}this._fillStroke(j,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var c=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(c.x,c.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,c){var h=c.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(c.options&&c.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var c=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,c)}},_handleMouseOut:function(s){var c=this._hoveredLayer;c&&(St(this._container,"leaflet-interactive"),this._fireEvent([c],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,c){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(c)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(xe(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,c,h){this._map._fireDOMEvent(c,h||c.type,s)},_bringToFront:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(s)}},_bringToBack:function(s){var c=s._order;if(c){var h=c.next,p=c.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(s)}}});function ND(s){return ce.canvas?new PD(s):null}var vd=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ZL={_initContainer:function(){this._container=$e("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(uo.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var c=s._container=vd("shape");xe(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",s._path=vd("path"),c.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var c=s._container;this._container.appendChild(c),s.options.interactive&&s.addInteractiveTarget(c)},_removePath:function(s){var c=s._container;ft(c),s.removeInteractiveTarget(c),delete this._layers[a(s)]},_updateStyle:function(s){var c=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(c||(c=s._stroke=vd("stroke")),_.appendChild(c),c.weight=p.weight+"px",c.color=p.color,c.opacity=p.opacity,p.dashArray?c.dashStyle=W(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=p.lineCap.replace("butt","flat"),c.joinstyle=p.lineJoin):c&&(_.removeChild(c),s._stroke=null),p.fill?(h||(h=s._fill=vd("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var c=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+c.x+","+c.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,c){s._path.v=c},_bringToFront:function(s){pi(s._container)},_bringToBack:function(s){mi(s._container)}},yp=ce.vml?vd:xc,yd=uo.extend({_initContainer:function(){this._container=yp("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=yp("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),it(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){uo.prototype._update.call(this);var s=this._bounds,c=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,h.setAttribute("width",c.x),h.setAttribute("height",c.y)),mt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(s){var c=s._path=yp("path");s.options.className&&xe(c,s.options.className),s.options.interactive&&xe(c,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){ft(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var c=s._path,h=s.options;c&&(h.stroke?(c.setAttribute("stroke",h.color),c.setAttribute("stroke-opacity",h.opacity),c.setAttribute("stroke-width",h.weight),c.setAttribute("stroke-linecap",h.lineCap),c.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?c.setAttribute("stroke-dasharray",h.dashArray):c.removeAttribute("stroke-dasharray"),h.dashOffset?c.setAttribute("stroke-dashoffset",h.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),h.fill?(c.setAttribute("fill",h.fillColor||h.color),c.setAttribute("fill-opacity",h.fillOpacity),c.setAttribute("fill-rule",h.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(s,c){this._setPath(s,Rc(s._parts,c))},_updateCircle:function(s){var c=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(c.x-h)+","+c.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,c){s._path.setAttribute("d",c)},_bringToFront:function(s){pi(s._path)},_bringToBack:function(s){mi(s._path)}});ce.vml&&yd.include(ZL);function kD(s){return ce.svg||ce.vml?new yd(s):null}je.include({getRenderer:function(s){var c=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var c=this._paneRenderers[s];return c===void 0&&(c=this._createRenderer({pane:s}),this._paneRenderers[s]=c),c},_createRenderer:function(s){return this.options.preferCanvas&&ND(s)||kD(s)}});var OD=Zc.extend({initialize:function(s,c){Zc.prototype.initialize.call(this,this._boundsToLatLngs(s),c)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=rt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function QL(s,c){return new OD(s,c)}yd.create=yp,yd.pointsToPath=Rc,co.geometryToLayer=hp,co.coordsToLatLng=Ay,co.coordsToLatLngs=fp,co.latLngToCoords=xy,co.latLngsToCoords=pp,co.getFeature=Qc,co.asFeature=mp,je.mergeOptions({boxZoom:!0});var LD=sr.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){ye(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),es(),no(),this._startPoint=this._map.mouseEventToContainerPoint(s),ye(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=$e("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var c=new ut(this._point,this._startPoint),h=c.getSize();mt(this._box,c.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ft(this._box),St(this._container,"leaflet-crosshair")),Je(),nd(),it(document,{contextmenu:br,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var c=new In(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});je.addInitHook("addHandler","boxZoom",LD),je.mergeOptions({doubleClickZoom:!0});var FD=sr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var c=this._map,h=c.getZoom(),p=c.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;c.options.doubleClickZoom==="center"?c.setZoom(_):c.setZoomAround(s.containerPoint,_)}});je.addInitHook("addHandler","doubleClickZoom",FD),je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var VD=sr.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Br(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){St(this._map._container,"leaflet-grab"),St(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=rt(this._map.options.maxBounds);this._offsetLimit=fn(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var c=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(c),this._prunePositions(c)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,c){return s-(s-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;s.x<c.min.x&&(s.x=this._viscousLimit(s.x,c.min.x)),s.y<c.min.y&&(s.y=this._viscousLimit(s.y,c.min.y)),s.x>c.max.x&&(s.x=this._viscousLimit(s.x,c.max.x)),s.y>c.max.y&&(s.y=this._viscousLimit(s.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,c=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-c+h)%s+c-h,w=(p+c+h)%s-c-h,S=Math.abs(_+h)<Math.abs(w+h)?_:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(s){var c=this._map,h=c.options,p=!h.inertia||s.noInertia||this._times.length<2;if(c.fire("dragend",s),p)c.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,S=h.easeLinearity,O=_.multiplyBy(S/w),j=O.distanceTo([0,0]),K=Math.min(h.inertiaMaxSpeed,j),ne=O.multiplyBy(K/j),_e=K/(h.inertiaDeceleration*S),Le=ne.multiplyBy(-_e/2).round();!Le.x&&!Le.y?c.fire("moveend"):(Le=c._limitOffset(Le,c.options.maxBounds),D(function(){c.panBy(Le,{duration:_e,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});je.addInitHook("addHandler","dragging",VD),je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var UD=sr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),ye(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),it(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,c=document.documentElement,h=s.scrollTop||c.scrollTop,p=s.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var c=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)c[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)c[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)c[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)c[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var c=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)c[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)c[h.zoomOut[p]]=-s},_addHooks:function(){ye(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){it(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var c=s.keyCode,h=this._map,p;if(c in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[c],s.shiftKey&&(p=me(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(me(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(c in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;br(s)}}});je.addInitHook("addHandler","keyboard",UD),je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var jD=sr.extend({addHooks:function(){ye(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var c=ld(s),h=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),p),br(s)},_performZoom:function(){var s=this._map,c=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(_/h)*h:_,S=s._limitZoom(c+(this._delta>0?w:-w))-c;this._delta=0,this._startTime=null,S&&(s.options.scrollWheelZoom==="center"?s.setZoom(c+S):s.setZoomAround(this._lastMousePos,c+S))}});je.addInitHook("addHandler","scrollWheelZoom",jD);var YL=600;je.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var BD=sr.extend({addHooks:function(){ye(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var c=s.touches[0];this._startPos=this._newPos=new Ie(c.clientX,c.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(ye(document,"touchend",At),ye(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),YL),ye(document,"touchend touchcancel contextmenu",this._cancel,this),ye(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){it(document,"touchend",At),it(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)},_onMove:function(s){var c=s.touches[0];this._newPos=new Ie(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,c){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});h._simulated=!0,c.target.dispatchEvent(h)}});je.addInitHook("addHandler","tapHold",BD),je.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var zD=sr.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),ye(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){St(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var c=this._map;if(!(!s.touches||s.touches.length!==2||c._animatingZoom||this._zooming)){var h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),ye(document,"touchmove",this._onTouchMove,this),ye(document,"touchend touchcancel",this._onTouchEnd,this),At(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var c=this._map,h=c.mouseEventToContainerPoint(s.touches[0]),p=c.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=c.getScaleZoom(_,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&_<1||this._zoom>c.getMaxZoom()&&_>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&w.x===0&&w.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),x(this._animRequest);var S=i(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(S,this,!0),At(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,x(this._animRequest),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});je.addInitHook("addHandler","touchZoom",zD),je.BoxZoom=LD,je.DoubleClickZoom=FD,je.Drag=VD,je.Keyboard=UD,je.ScrollWheelZoom=jD,je.TapHold=BD,je.TouchZoom=zD,n.Bounds=ut,n.Browser=ce,n.CRS=kn,n.Canvas=PD,n.Circle=Sy,n.CircleMarker=dp,n.Class=k,n.Control=Wn,n.DivIcon=xD,n.DivOverlay=yi,n.DomEvent=vt,n.DomUtil=gi,n.Draggable=Br,n.Evented=Fr,n.FeatureGroup=pt,n.GeoJSON=co,n.GridLayer=_d,n.Handler=sr,n.Icon=ar,n.ImageOverlay=gp,n.LatLng=ve,n.LatLngBounds=In,n.Layer=ke,n.LayerGroup=yt,n.LineUtil=d,n.Map=je,n.Marker=lp,n.Mixin=zc,n.Path=os,n.Point=Ie,n.PolyUtil=hd,n.Polygon=Zc,n.Polyline=ao,n.Popup=_p,n.PosAnimation=np,n.Projection=b,n.Rectangle=OD,n.Renderer=uo,n.SVG=yd,n.SVGOverlay=AD,n.TileLayer=Yc,n.Tooltip=vp,n.Transformation=Bl,n.Util=M,n.VideoOverlay=SD,n.bind=i,n.bounds=fn,n.canvas=ND,n.circle=FL,n.circleMarker=LL,n.control=rs,n.divIcon=WL,n.extend=t,n.featureGroup=nn,n.geoJSON=DD,n.geoJson=jL,n.gridLayer=GL,n.icon=cr,n.imageOverlay=BL,n.latLng=Ue,n.latLngBounds=rt,n.layerGroup=He,n.map=rp,n.marker=OL,n.point=me,n.polygon=UL,n.polyline=VL,n.popup=HL,n.rectangle=QL,n.setOptions=I,n.stamp=a,n.svg=kD,n.svgOverlay=$L,n.tileLayer=RD,n.tooltip=qL,n.transformation=di,n.version=e,n.videoOverlay=zL;var JL=window.L;n.noConflict=function(){return window.L=JL,this},window.L=n})});var Ny;function Ep(){return Ny}function wi(n){let e=Ny;return Ny=n,e}var YD=Symbol("NotFound");function Xc(n){return n===YD||n?.name==="\u0275NotFound"}var Cn=null,bp=!1,ky=1,gF=null,Dn=Symbol("SIGNAL");function Ne(n){let e=Cn;return Cn=n,e}function Dp(){return Cn}var eu={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function tu(n){if(bp)throw new Error("");if(Cn===null)return;Cn.consumerOnSignalRead(n);let e=Cn.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Cn.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Cn.producers,t!==void 0&&t.producer===n)){Cn.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Cn&&(!r||vF(i,Cn)))return;let o=ru(Cn),a={producer:n,consumer:Cn,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Cn.producersTail=a,e!==void 0?e.nextProducer=a:Cn.producers=a,o&&tS(n,a)}function JD(){ky++}function Sp(n){if(!(ru(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ky)){if(!n.producerMustRecompute(n)&&!bd(n)){Cp(n);return}n.producerRecomputeValue(n),Cp(n)}}function Oy(n){if(n.consumers===void 0)return;let e=bp;bp=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||_F(r)}}finally{bp=e}}function Ly(){return Cn?.consumerAllowSignalWrites!==!1}function _F(n){n.dirty=!0,Oy(n),n.consumerMarkedDirty?.(n)}function Cp(n){n.dirty=!1,n.lastCleanEpoch=ky}function nu(n){return n&&XD(n),Ne(n)}function XD(n){n.producersTail=void 0,n.recomputing=!0}function Ed(n,e){Ne(e),n&&eS(n)}function eS(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(ru(n))do t=Fy(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function bd(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Sp(t),r!==t.version))return!0}return!1}function Id(n){if(ru(n)){let e=n.producers;for(;e!==void 0;)e=Fy(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function tS(n,e){let t=n.consumersTail,r=ru(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)tS(i.producer,i)}function Fy(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ru(e)){let o=e.producers;for(;o!==void 0;)o=Fy(o)}return t}function ru(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ap(n){gF?.(n)}function vF(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function xp(n,e){return Object.is(n,e)}function Rp(n,e){let t=Object.create(yF);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Sp(t),tu(t),t.value===wd)throw t.error;return t.value};return r[Dn]=t,Ap(t),r}var Ip=Symbol("UNSET"),Tp=Symbol("COMPUTING"),wd=Symbol("ERRORED"),yF=we(Q({},eu),{value:Ip,dirty:!0,error:null,equal:xp,kind:"computed",producerMustRecompute(n){return n.value===Ip||n.value===Tp},producerRecomputeValue(n){if(n.value===Tp)throw new Error("");let e=n.value;n.value=Tp;let t=nu(n),r,i=!1;try{r=n.computation(),Ne(null),i=e!==Ip&&e!==wd&&r!==wd&&n.equal(e,r)}catch(o){r=wd,n.error=o}finally{Ed(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function wF(){throw new Error}var nS=wF;function rS(n){nS(n)}function Vy(n){nS=n}var EF=null;function Uy(n,e){let t=Object.create(Mp);t.value=n,e!==void 0&&(t.equal=e);let r=()=>iS(t);return r[Dn]=t,Ap(t),[r,a=>iu(t,a),a=>jy(t,a)]}function iS(n){return tu(n),n.value}function iu(n,e){Ly()||rS(n),n.equal(n.value,e)||(n.value=e,bF(n))}function jy(n,e){Ly()||rS(n),iu(n,e(n.value))}var Mp=we(Q({},eu),{equal:xp,value:void 0,kind:"signal"});function bF(n){n.version++,JD(),Oy(n),EF?.(n)}function Re(n){return typeof n=="function"}function ou(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Pp=ou(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ea(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Mt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Re(r))try{r()}catch(o){e=o instanceof Pp?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{oS(o)}catch(a){e=e??[],a instanceof Pp?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Pp(e)}}add(e){var t;if(e&&e!==this)if(this.closed)oS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ea(t,e)}remove(e){let{_finalizers:t}=this;t&&Ea(t,e),e instanceof n&&e._removeParent(this)}};Mt.EMPTY=(()=>{let n=new Mt;return n.closed=!0,n})();var By=Mt.EMPTY;function Np(n){return n instanceof Mt||n&&"closed"in n&&Re(n.remove)&&Re(n.add)&&Re(n.unsubscribe)}function oS(n){Re(n)?n():n.unsubscribe()}var zr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var su={setTimeout(n,e,...t){let{delegate:r}=su;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=su;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function kp(n){su.setTimeout(()=>{let{onUnhandledError:e}=zr;if(e)e(n);else throw n})}function Td(){}var sS=zy("C",void 0,void 0);function aS(n){return zy("E",void 0,n)}function cS(n){return zy("N",n,void 0)}function zy(n,e,t){return{kind:n,value:e,error:t}}var ba=null;function au(n){if(zr.useDeprecatedSynchronousErrorHandling){let e=!ba;if(e&&(ba={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ba;if(ba=null,t)throw r}}else n()}function uS(n){zr.useDeprecatedSynchronousErrorHandling&&ba&&(ba.errorThrown=!0,ba.error=n)}var Ia=class extends Mt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Np(e)&&e.add(this)):this.destination=CF}static create(e,t,r){return new cu(e,t,r)}next(e){this.isStopped?Hy(cS(e),this):this._next(e)}error(e){this.isStopped?Hy(aS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hy(sS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IF=Function.prototype.bind;function $y(n,e){return IF.call(n,e)}var qy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Op(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Op(r)}else Op(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Op(t)}}},cu=class extends Ia{constructor(e,t,r){super();let i;if(Re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&zr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&$y(e.next,o),error:e.error&&$y(e.error,o),complete:e.complete&&$y(e.complete,o)}):i=e}this.destination=new qy(i)}};function Op(n){zr.useDeprecatedSynchronousErrorHandling?uS(n):kp(n)}function TF(n){throw n}function Hy(n,e){let{onStoppedNotification:t}=zr;t&&su.setTimeout(()=>t(n,e))}var CF={closed:!0,next:Td,error:TF,complete:Td};var uu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ur(n){return n}function Lp(...n){return Wy(n)}function Wy(n){return n.length===0?ur:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Te=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=SF(t)?t:new cu(t,r,i);return au(()=>{let{operator:a,source:u}=this;o.add(a?a.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=lS(r),new r((i,o)=>{let a=new cu({next:u=>{try{t(u)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});this.subscribe(a)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uu](){return this}pipe(...t){return Wy(t)(this)}toPromise(t){return t=lS(t),new t((r,i)=>{let o;this.subscribe(a=>o=a,a=>i(a),()=>r(o))})}}return n.create=e=>new n(e),n})();function lS(n){var e;return(e=n??zr.Promise)!==null&&e!==void 0?e:Promise}function DF(n){return n&&Re(n.next)&&Re(n.error)&&Re(n.complete)}function SF(n){return n&&n instanceof Ia||DF(n)&&Np(n)}function Gy(n){return Re(n?.lift)}function qe(n){return e=>{if(Gy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(n,e,t,r,i){return new Ky(n,e,t,r,i)}var Ky=class extends Ia{constructor(e,t,r,i,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=t?function(u){try{t(u)}catch(l){e.error(l)}}:super._next,this._error=i?function(u){try{i(u)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lu(){return qe((n,e)=>{let t=null;n._refCount++;let r=Be(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var du=class extends Te{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Mt;let t=this.getSubject();e.add(this.source.subscribe(Be(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Mt.EMPTY)}return e}refCount(){return lu()(this)}};var dS=ou(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $t=(()=>{class n extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Fp(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new dS}next(t){au(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){au(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){au(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?By:(this.currentObservers=null,o.push(t),new Mt(()=>{this.currentObservers=null,Ea(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Te;return t.source=this,t}}return n.create=(e,t)=>new Fp(e,t),n})(),Fp=class extends $t{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:By}};var gn=class extends $t{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Zy={now(){return(Zy.delegate||Date).now()},delegate:void 0};var Vp=class extends Mt{constructor(e,t){super()}schedule(e,t=0){return this}};var Cd={setInterval(n,e,...t){let{delegate:r}=Cd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Cd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var hu=class extends Vp{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Cd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Cd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ea(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var fu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};fu.now=Zy.now;var pu=class extends fu{constructor(e,t=fu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Qy=new pu(hu);var Up=class extends hu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var jp=class extends pu{};var Yy=new jp(Up);var Kn=new Te(n=>n.complete());function hS(n){return n&&Re(n.schedule)}function fS(n){return n[n.length-1]}function Bp(n){return Re(fS(n))?n.pop():void 0}function as(n){return hS(fS(n))?n.pop():void 0}function zp(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function mS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function u(g){try{f(r.next(g))}catch(y){a(y)}}function l(g){try{f(r.throw(g))}catch(y){a(y)}}function f(g){g.done?o(g.value):i(g.value).then(u,l)}f((r=r.apply(n,e||[])).next())})}function pS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ta(n){return this instanceof Ta?(this.v=n,this):new Ta(n)}function gS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(I){return function(N){return Promise.resolve(N).then(I,y)}}function u(I,N){r[I]&&(i[I]=function(q){return new Promise(function(F,W){o.push([I,q,F,W])>1||l(I,q)})},N&&(i[I]=N(i[I])))}function l(I,N){try{f(r[I](N))}catch(q){E(o[0][3],q)}}function f(I){I.value instanceof Ta?Promise.resolve(I.value.v).then(g,y):E(o[0][2],I)}function g(I){l("next",I)}function y(I){l("throw",I)}function E(I,N){I(N),o.shift(),o.length&&l(o[0][0],o[0][1])}}function _S(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof pS=="function"?pS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(a){return new Promise(function(u,l){a=n[o](a),i(u,l,a.done,a.value)})}}function i(o,a,u,l){Promise.resolve(l).then(function(f){o({value:f,done:u})},a)}}var $p=n=>n&&typeof n.length=="number"&&typeof n!="function";function Hp(n){return Re(n?.then)}function qp(n){return Re(n[uu])}function Wp(n){return Symbol.asyncIterator&&Re(n?.[Symbol.asyncIterator])}function Gp(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Kp=AF();function Zp(n){return Re(n?.[Kp])}function Qp(n){return gS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ta(t.read());if(i)return yield Ta(void 0);yield yield Ta(r)}}finally{t.releaseLock()}})}function Yp(n){return Re(n?.getReader)}function Ht(n){if(n instanceof Te)return n;if(n!=null){if(qp(n))return xF(n);if($p(n))return RF(n);if(Hp(n))return MF(n);if(Wp(n))return vS(n);if(Zp(n))return PF(n);if(Yp(n))return NF(n)}throw Gp(n)}function xF(n){return new Te(e=>{let t=n[uu]();if(Re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function RF(n){return new Te(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function MF(n){return new Te(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,kp)})}function PF(n){return new Te(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function vS(n){return new Te(e=>{kF(n,e).catch(t=>e.error(t))})}function NF(n){return vS(Qp(n))}function kF(n,e){var t,r,i,o;return mS(this,void 0,void 0,function*(){try{for(t=_S(n);r=yield t.next(),!r.done;){let a=r.value;if(e.next(a),e.closed)return}}catch(a){i={error:a}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Zn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function cs(n,e=0){return qe((t,r)=>{t.subscribe(Be(r,i=>Zn(r,n,()=>r.next(i),e),()=>Zn(r,n,()=>r.complete(),e),i=>Zn(r,n,()=>r.error(i),e)))})}function us(n,e=0){return qe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function yS(n,e){return Ht(n).pipe(us(e),cs(e))}function wS(n,e){return Ht(n).pipe(us(e),cs(e))}function ES(n,e){return new Te(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function bS(n,e){return new Te(t=>{let r;return Zn(t,e,()=>{r=n[Kp](),Zn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(a){t.error(a);return}o?t.complete():t.next(i)},0,!0)}),()=>Re(r?.return)&&r.return()})}function Jp(n,e){if(!n)throw new Error("Iterable cannot be null");return new Te(t=>{Zn(t,e,()=>{let r=n[Symbol.asyncIterator]();Zn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function IS(n,e){return Jp(Qp(n),e)}function TS(n,e){if(n!=null){if(qp(n))return yS(n,e);if($p(n))return ES(n,e);if(Hp(n))return wS(n,e);if(Wp(n))return Jp(n,e);if(Zp(n))return bS(n,e);if(Yp(n))return IS(n,e)}throw Gp(n)}function gt(n,e){return e?TS(n,e):Ht(n)}function pe(...n){let e=as(n);return gt(n,e)}function mu(n,e){let t=Re(n)?n:()=>n,r=i=>i.error(t());return new Te(e?i=>e.schedule(r,0,i):r)}function Jy(n){return!!n&&(n instanceof Te||Re(n.lift)&&Re(n.subscribe))}var lo=ou(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ce(n,e){return qe((t,r)=>{let i=0;t.subscribe(Be(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:OF}=Array;function LF(n,e){return OF(e)?n(...e):n(e)}function Xp(n){return Ce(e=>LF(n,e))}var{isArray:FF}=Array,{getPrototypeOf:VF,prototype:UF,keys:jF}=Object;function em(n){if(n.length===1){let e=n[0];if(FF(e))return{args:e,keys:null};if(BF(e)){let t=jF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function BF(n){return n&&typeof n=="object"&&VF(n)===UF}function tm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Dd(...n){let e=as(n),t=Bp(n),{args:r,keys:i}=em(n);if(r.length===0)return gt([],e);let o=new Te(zF(r,e,i?a=>tm(i,a):ur));return t?o.pipe(Xp(t)):o}function zF(n,e,t=ur){return r=>{CS(e,()=>{let{length:i}=n,o=new Array(i),a=i,u=i;for(let l=0;l<i;l++)CS(e,()=>{let f=gt(n[l],e),g=!1;f.subscribe(Be(r,y=>{o[l]=y,g||(g=!0,u--),u||r.next(t(o.slice()))},()=>{--a||r.complete()}))},r)},r)}}function CS(n,e,t){n?Zn(t,n,e):e()}function DS(n,e,t,r,i,o,a,u){let l=[],f=0,g=0,y=!1,E=()=>{y&&!l.length&&!f&&e.complete()},I=q=>f<r?N(q):l.push(q),N=q=>{o&&e.next(q),f++;let F=!1;Ht(t(q,g++)).subscribe(Be(e,W=>{i?.(W),o?I(W):e.next(W)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;l.length&&f<r;){let W=l.shift();a?Zn(e,a,()=>N(W)):N(W)}E()}catch(W){e.error(W)}}))};return n.subscribe(Be(e,I,()=>{y=!0,E()})),()=>{u?.()}}function Lt(n,e,t=1/0){return Re(e)?Lt((r,i)=>Ce((o,a)=>e(r,o,i,a))(Ht(n(r,i))),t):(typeof e=="number"&&(t=e),qe((r,i)=>DS(r,i,n,t)))}function gu(n=1/0){return Lt(ur,n)}function SS(){return gu(1)}function _u(...n){return SS()(gt(n,as(n)))}function Sd(n){return new Te(e=>{Ht(n()).subscribe(e)})}function Xy(...n){let e=Bp(n),{args:t,keys:r}=em(n),i=new Te(o=>{let{length:a}=t;if(!a){o.complete();return}let u=new Array(a),l=a,f=a;for(let g=0;g<a;g++){let y=!1;Ht(t[g]).subscribe(Be(o,E=>{y||(y=!0,f--),u[g]=E},()=>l--,void 0,()=>{(!l||!y)&&(f||o.next(r?tm(r,u):u),o.complete())}))}});return e?i.pipe(Xp(e)):i}function _n(n,e){return qe((t,r)=>{let i=0;t.subscribe(Be(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ho(n){return qe((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Be(t,void 0,void 0,a=>{o=Ht(n(a,ho(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function AS(n,e,t,r,i){return(o,a)=>{let u=t,l=e,f=0;o.subscribe(Be(a,g=>{let y=f++;l=u?n(l,g,y):(u=!0,g),r&&a.next(l)},i&&(()=>{u&&a.next(l),a.complete()})))}}function Ei(n,e){return Re(e)?Lt(n,e,1):Lt(n,1)}function ls(n){return qe((e,t)=>{let r=!1;e.subscribe(Be(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fo(n){return n<=0?()=>Kn:qe((e,t)=>{let r=0;e.subscribe(Be(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function nm(n=$F){return qe((e,t)=>{let r=!1;e.subscribe(Be(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $F(){return new lo}function ds(n){return qe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function po(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_n((i,o)=>n(i,o,r)):ur,fo(1),t?ls(e):nm(()=>new lo))}function vu(n){return n<=0?()=>Kn:qe((e,t)=>{let r=[];e.subscribe(Be(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ew(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_n((i,o)=>n(i,o,r)):ur,vu(1),t?ls(e):nm(()=>new lo))}function rm(n,e){return qe(AS(n,e,arguments.length>=2,!0))}function im(...n){let e=as(n);return qe((t,r)=>{(e?_u(n,t,e):_u(n,t)).subscribe(r)})}function vn(n,e){return qe((t,r)=>{let i=null,o=0,a=!1,u=()=>a&&!i&&r.complete();t.subscribe(Be(r,l=>{i?.unsubscribe();let f=0,g=o++;Ht(n(l,g)).subscribe(i=Be(r,y=>r.next(e?e(l,y,g,f++):y),()=>{i=null,u()}))},()=>{a=!0,u()}))})}function om(n){return qe((e,t)=>{Ht(n).subscribe(Be(t,()=>t.complete(),Td)),!t.closed&&e.subscribe(t)})}function on(n,e,t){let r=Re(n)||e||t?{next:n,error:e,complete:t}:n;return r?qe((i,o)=>{var a;(a=r.subscribe)===null||a===void 0||a.call(r);let u=!0;i.subscribe(Be(o,l=>{var f;(f=r.next)===null||f===void 0||f.call(r,l),o.next(l)},()=>{var l;u=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var f;u=!1,(f=r.error)===null||f===void 0||f.call(r,l),o.error(l)},()=>{var l,f;u&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(f=r.finalize)===null||f===void 0||f.call(r)}))}):ur}function xS(n){let e=Ne(null);try{return n()}finally{Ne(e)}}var hs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},fw=new hs("20.3.14");var um="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",te=class extends Error{code;constructor(e,t){super(vo(e,t)),this.code=e}};function HF(n){return`NG0${Math.abs(n)}`}function vo(n,e){return`${HF(n)}${e?": "+e:""}`}var Md=globalThis;function tt(n){for(let e in n)if(n[e]===tt)return e;throw Error("")}function PS(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function go(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(go).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function pw(n,e){return n?e?`${n} ${e}`:n:e||""}var qF=tt({__forward_ref__:tt});function dr(n){return n.__forward_ref__=dr,n.toString=function(){return go(this())},n}function yn(n){return mw(n)?n():n}function mw(n){return typeof n=="function"&&n.hasOwnProperty(qF)&&n.__forward_ref__===dr}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function hr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Pd(n){return WF(n,lm)}function gw(n){return Pd(n)!==null}function WF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function GF(n){let e=n?.[lm]??null;return e||null}function nw(n){return n&&n.hasOwnProperty(am)?n[am]:null}var lm=tt({\u0275prov:tt}),am=tt({\u0275inj:tt}),X=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _w(n){return n&&!!n.\u0275providers}var vw=tt({\u0275cmp:tt}),yw=tt({\u0275dir:tt}),ww=tt({\u0275pipe:tt}),Ew=tt({\u0275mod:tt}),xd=tt({\u0275fac:tt}),xa=tt({__NG_ELEMENT_ID__:tt}),RS=tt({__NG_ENV_ID__:tt});function bi(n){return typeof n=="string"?n:n==null?"":String(n)}function NS(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():bi(n)}var kS=tt({ngErrorCode:tt}),KF=tt({ngErrorMessage:tt}),ZF=tt({ngTokenPath:tt});function bw(n,e){return OS("",-200,e)}function dm(n,e){throw new te(-201,!1)}function OS(n,e,t){let r=new te(e,n);return r[kS]=e,r[KF]=n,t&&(r[ZF]=t),r}function QF(n){return n[kS]}var rw;function LS(){return rw}function Vn(n){let e=rw;return rw=n,e}function Iw(n,e,t){let r=Pd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;dm(n,"Injector")}var YF={},Ca=YF,iw="__NG_DI_FLAG__",ow=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Da(t)||0;try{return this.injector.get(e,r&8?null:Ca,r)}catch(i){if(Xc(i))return i;throw i}}};function JF(n,e=0){let t=Ep();if(t===void 0)throw new te(-203,!1);if(t===null)return Iw(n,void 0,e);{let r=XF(e),i=t.retrieve(n,r);if(Xc(i)){if(r.optional)return null;throw i}return i}}function de(n,e=0){return(LS()||JF)(yn(n),e)}function $(n,e){return de(n,Da(e))}function Da(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function XF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function sw(n){let e=[];for(let t=0;t<n.length;t++){let r=yn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=0;for(let a=0;a<r.length;a++){let u=r[a],l=eV(u);typeof l=="number"?l===-1?i=u.token:o|=l:i=u}e.push(de(i,o))}else e.push(de(r))}return e}function FS(n,e){return n[iw]=e,n.prototype[iw]=e,n}function eV(n){return n[iw]}function fs(n,e){let t=n.hasOwnProperty(xd);return t?n[xd]:null}function hm(n,e){n.forEach(t=>Array.isArray(t)?hm(t,e):e(t))}function Tw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Nd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function VS(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function US(n,e,t){let r=wu(n,e);return r>=0?n[r|1]=t:(r=~r,VS(n,r,e,t)),r}function fm(n,e){let t=wu(n,e);if(t>=0)return n[t|1]}function wu(n,e){return tV(n,e,1)}function tV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),a=n[o<<t];if(e===a)return o<<t;a>e?i=o:r=o+1}return~(i<<t)}var ms={},lr=[],gs=new X(""),Cw=new X("",-1),Dw=new X(""),Rd=class{get(e,t=Ca){if(t===Ca){let i=OS("",-201);throw i.name="\u0275NotFound",i}return t}};function Sw(n){return n[Ew]||null}function yo(n){return n[vw]||null}function Aw(n){return n[yw]||null}function jS(n){return n[ww]||null}function Un(n){return{\u0275providers:n}}function BS(...n){return{\u0275providers:xw(!0,n),\u0275fromNgModule:!0}}function xw(n,...e){let t=[],r=new Set,i,o=a=>{t.push(a)};return hm(e,a=>{let u=a;cm(u,o,[],r)&&(i||=[],i.push(u))}),i!==void 0&&zS(i,o),t}function zS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Rw(i,o=>{e(o,r)})}}function cm(n,e,t,r){if(n=yn(n),!n)return!1;let i=null,o=nw(n),a=!o&&yo(n);if(!o&&!a){let l=n.ngModule;if(o=nw(l),o)i=l;else return!1}else{if(a&&!a.standalone)return!1;i=n}let u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of l)cm(f,e,t,r)}}else if(o){if(o.imports!=null&&!u){r.add(i);let f;try{hm(o.imports,g=>{cm(g,e,t,r)&&(f||=[],f.push(g))})}finally{}f!==void 0&&zS(f,e)}if(!u){let f=fs(i)||(()=>new i);e({provide:i,useFactory:f,deps:lr},i),e({provide:Dw,useValue:i,multi:!0},i),e({provide:gs,useValue:()=>de(i),multi:!0},i)}let l=o.providers;if(l!=null&&!u){let f=n;Rw(l,g=>{e(g,f)})}}else return!1;return i!==n&&n.providers!==void 0}function Rw(n,e){for(let t of n)_w(t)&&(t=t.\u0275providers),Array.isArray(t)?Rw(t,e):e(t)}var nV=tt({provide:String,useValue:tt});function $S(n){return n!==null&&typeof n=="object"&&nV in n}function rV(n){return!!(n&&n.useExisting)}function iV(n){return!!(n&&n.useFactory)}function Sa(n){return typeof n=="function"}function HS(n){return!!n.useClass}var kd=new X(""),sm={},MS={},tw;function Od(){return tw===void 0&&(tw=new Rd),tw}var xt=class{},Aa=class extends xt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,cw(e,a=>this.processProvider(a)),this.records.set(Cw,yu(void 0,this)),i.has("environment")&&this.records.set(xt,yu(void 0,this));let o=this.records.get(kd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Dw,lr,{self:!0}))}retrieve(e,t){let r=Da(t)||0;try{return this.get(e,Ca,r)}catch(i){if(Xc(i))return i;throw i}}destroy(){Ad(this),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return Ad(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ad(this);let t=wi(this),r=Vn(void 0),i;try{return e()}finally{wi(t),Vn(r)}}get(e,t=Ca,r){if(Ad(this),e.hasOwnProperty(RS))return e[RS](this);let i=Da(r),o,a=wi(this),u=Vn(void 0);try{if(!(i&4)){let f=this.records.get(e);if(f===void 0){let g=uV(e)&&Pd(e);g&&this.injectableDefInScope(g)?f=yu(aw(e),sm):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f,i)}let l=i&2?Od():this.parent;return t=i&8&&t===Ca?null:t,l.get(e,t)}catch(l){let f=QF(l);throw f===-200||f===-201?new te(f,null):l}finally{Vn(u),wi(a)}}resolveInjectorInitializers(){let e=Ne(null),t=wi(this),r=Vn(void 0),i;try{let o=this.get(gs,lr,{self:!0});for(let a of o)a()}finally{wi(t),Vn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(go(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yn(e);let t=Sa(e)?e:yn(e&&e.provide),r=sV(e);if(!Sa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=yu(void 0,sm,!0),i.factory=()=>sw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ne(null);try{if(t.value===MS)throw bw(go(e));return t.value===sm&&(t.value=MS,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&cV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=yn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function aw(n){let e=Pd(n),t=e!==null?e.factory:fs(n);if(t!==null)return t;if(n instanceof X)throw new te(204,!1);if(n instanceof Function)return oV(n);throw new te(204,!1)}function oV(n){if(n.length>0)throw new te(204,!1);let t=GF(n);return t!==null?()=>t.factory(n):()=>new n}function sV(n){if($S(n))return yu(void 0,n.useValue);{let e=Mw(n);return yu(e,sm)}}function Mw(n,e,t){let r;if(Sa(n)){let i=yn(n);return fs(i)||aw(i)}else if($S(n))r=()=>yn(n.useValue);else if(iV(n))r=()=>n.useFactory(...sw(n.deps||[]));else if(rV(n))r=(i,o)=>de(yn(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=yn(n&&(n.useClass||n.provide));if(aV(n))r=()=>new i(...sw(n.deps));else return fs(i)||aw(i)}return r}function Ad(n){if(n.destroyed)throw new te(205,!1)}function yu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function aV(n){return!!n.deps}function cV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function uV(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function cw(n,e){for(let t of n)Array.isArray(t)?cw(t,e):t&&_w(t)?cw(t.\u0275providers,e):e(t)}function Pt(n,e){let t;n instanceof Aa?(Ad(n),t=n):t=new ow(n);let r,i=wi(t),o=Vn(void 0);try{return e()}finally{wi(i),Vn(o)}}function qS(){return LS()!==void 0||Ep()!=null}var Hr=0,Me=1,De=2,wn=3,Tr=4,Cr=5,Ld=6,Eu=7,Sn=8,_s=9,Ii=10,Et=11,bu=12,Pw=13,Ra=14,Dr=15,Ma=16,Pa=17,Na=18,Fd=19,Nw=20,mo=21,pm=22,Vd=23,fr=24,ka=25,Ud=26,An=27,WS=1;var vs=7,jd=8,Bd=9,Qn=10;function Ti(n){return Array.isArray(n)&&typeof n[WS]=="object"}function qr(n){return Array.isArray(n)&&n[WS]===!0}function kw(n){return(n.flags&4)!==0}function ys(n){return n.componentOffset>-1}function zd(n){return(n.flags&1)===1}function Ci(n){return!!n.template}function Iu(n){return(n[De]&512)!==0}function Oa(n){return(n[De]&256)===256}var GS="svg",KS="math";function Sr(n){for(;Array.isArray(n);)n=n[Hr];return n}function Ow(n,e){return Sr(e[n])}function Wr(n,e){return Sr(e[n.index])}function mm(n,e){return n.data[e]}function ZS(n,e){return n[e]}function Lw(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ar(n,e){let t=e[n];return Ti(t)?t:t[Hr]}function gm(n){return(n[De]&128)===128}function QS(n){return qr(n[wn])}function La(n,e){return e==null?null:n[e]}function Fw(n){n[Pa]=0}function Vw(n){n[De]&1024||(n[De]|=1024,gm(n)&&Tu(n))}function YS(n,e){for(;n>0;)e=e[Ra],n--;return e}function $d(n){return!!(n[De]&9216||n[fr]?.dirty)}function _m(n){n[Ii].changeDetectionScheduler?.notify(8),n[De]&64&&(n[De]|=1024),$d(n)&&Tu(n)}function Tu(n){n[Ii].changeDetectionScheduler?.notify(0);let e=ps(n);for(;e!==null&&!(e[De]&8192||(e[De]|=8192,!gm(e)));)e=ps(e)}function Uw(n,e){if(Oa(n))throw new te(911,!1);n[mo]===null&&(n[mo]=[]),n[mo].push(e)}function JS(n,e){if(n[mo]===null)return;let t=n[mo].indexOf(e);t!==-1&&n[mo].splice(t,1)}function ps(n){let e=n[wn];return qr(e)?e[wn]:e}function XS(n){return n[Eu]??=[]}function eA(n){return n.cleanup??=[]}var Fe={lFrame:pA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var uw=!1;function tA(){return Fe.lFrame.elementDepthCount}function nA(){Fe.lFrame.elementDepthCount++}function jw(){Fe.lFrame.elementDepthCount--}function Bw(){return Fe.bindingsEnabled}function rA(){return Fe.skipHydrationRootTNode!==null}function zw(n){return Fe.skipHydrationRootTNode===n}function $w(){Fe.skipHydrationRootTNode=null}function Ge(){return Fe.lFrame.lView}function xn(){return Fe.lFrame.tView}function at(n){return Fe.lFrame.contextLView=n,n[Sn]}function ct(n){return Fe.lFrame.contextLView=null,n}function sn(){let n=Hw();for(;n!==null&&n.type===64;)n=n.parent;return n}function Hw(){return Fe.lFrame.currentTNode}function iA(){let n=Fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Cu(n,e){let t=Fe.lFrame;t.currentTNode=n,t.isParent=e}function qw(){return Fe.lFrame.isParent}function oA(){Fe.lFrame.isParent=!1}function Ww(){return uw}function Gw(n){let e=uw;return uw=n,e}function sA(){let n=Fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function aA(){return Fe.lFrame.bindingIndex}function cA(n){return Fe.lFrame.bindingIndex=n}function Du(){return Fe.lFrame.bindingIndex++}function Kw(n){let e=Fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function uA(){return Fe.lFrame.inI18n}function lA(n,e){let t=Fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,vm(e)}function dA(){return Fe.lFrame.currentDirectiveIndex}function vm(n){Fe.lFrame.currentDirectiveIndex=n}function hA(n){let e=Fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Zw(n){Fe.lFrame.currentQueryIndex=n}function lV(n){let e=n[Me];return e.type===2?e.declTNode:e.type===1?n[Cr]:null}function Qw(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=lV(o),i===null||(o=o[Ra],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Fe.lFrame=fA();return r.currentTNode=e,r.lView=n,!0}function ym(n){let e=fA(),t=n[Me];Fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function fA(){let n=Fe.lFrame,e=n===null?null:n.child;return e===null?pA(n):e}function pA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function mA(){let n=Fe.lFrame;return Fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Yw=mA;function wm(){let n=mA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gA(n){return(Fe.lFrame.contextLView=YS(n,Fe.lFrame.contextLView))[Sn]}function ws(){return Fe.lFrame.selectedIndex}function Es(n){Fe.lFrame.selectedIndex=n}function Hd(){let n=Fe.lFrame;return mm(n.tView,n.selectedIndex)}function _A(){return Fe.lFrame.currentNamespace}var vA=!0;function Em(){return vA}function bm(n){vA=n}function lw(n,e=null,t=null,r){let i=Jw(n,e,t,r);return i.resolveInjectorInitializers(),i}function Jw(n,e=null,t=null,r,i=new Set){let o=[t||lr,BS(n)];return r=r||(typeof n=="object"?void 0:go(n)),new Aa(o,e||Od(),r||null,i)}var wt=class n{static THROW_IF_NOT_FOUND=Ca;static NULL=new Rd;static create(e,t){if(Array.isArray(e))return lw({name:""},t,e,"");{let r=e.name??"";return lw({name:r},e.parent,e.providers,r)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>de(Cw)});static __NG_ELEMENT_ID__=-1},Nt=new X(""),Gr=(()=>{class n{static __NG_ELEMENT_ID__=dV;static __NG_ENV_ID__=t=>t}return n})(),dw=class extends Gr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Oa(this._lView)}onDestroy(e){let t=this._lView;return Uw(t,e),()=>JS(t,e)}};function dV(){return new dw(Ge())}var $r=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Yn=new X("",{providedIn:"root",factory:()=>{let n=$(xt),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get($r),e.handleError(t))}}}),yA={provide:gs,useValue:()=>void $($r),multi:!0};function Xw(n){return typeof n=="function"&&n[Dn]!==void 0}function _t(n,e){let[t,r,i]=Uy(n,e?.equal),o=t,a=o[Dn];return o.set=r,o.update=i,o.asReadonly=wA.bind(o),o}function wA(){let n=this[Dn];if(n.readonlyFn===void 0){let e=()=>this();e[Dn]=n,n.readonlyFn=e}return n.readonlyFn}function eE(n){return Xw(n)&&typeof n.set=="function"}var Im=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=hV}return n})();function hV(){return new Im(Ge(),sn())}var _o=class{},Tm=new X("",{providedIn:"root",factory:()=>!1});var tE=new X(""),nE=new X(""),Di=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new gn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Te(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),wo=(()=>{class n{internalPendingTasks=$(Di);scheduler=$(_o);errorHandler=$(Yn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();function qd(...n){}var rE=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new hw})}return n})(),hw=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Nu(n){return{toString:n}.toString()}var Cm="__parameters__";function wV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function EV(n,e,t){return Nu(()=>{let r=wV(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let a=new i(...o);return u.annotation=a,u;function u(l,f,g){let y=l.hasOwnProperty(Cm)?l[Cm]:Object.defineProperty(l,Cm,{value:[]})[Cm];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(a),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var an=FS(EV("Optional"),8);function bV(n){return typeof n=="function"}var Pm=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function JA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var bo=(()=>{let n=()=>XA;return n.ngInherit=!0,n})();function XA(n){return n.type.prototype.ngOnChanges&&(n.setInput=TV),IV}function IV(){let n=tx(this),e=n?.current;if(e){let t=n.previous;if(t===ms)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function TV(n,e,t,r,i){let o=this.declaredInputs[r],a=tx(n)||CV(n,{previous:ms,current:null}),u=a.current||(a.current={}),l=a.previous,f=l[o];u[o]=new Pm(f&&f.currentValue,t,l===ms),JA(n,e,i,t)}var ex="__ngSimpleChanges__";function tx(n){return n[ex]||null}function CV(n,e){return n[ex]=e}var EA=[];var ot=function(n,e=null,t){for(let r=0;r<EA.length;r++){let i=EA[r];i(n,e,t)}};function DV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let a=XA(e);(t.preOrderHooks??=[]).push(n,a),(t.preOrderCheckHooks??=[]).push(n,a)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function nx(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:l,ngAfterViewChecked:f,ngOnDestroy:g}=o;a&&(n.contentHooks??=[]).push(-t,a),u&&((n.contentHooks??=[]).push(t,u),(n.contentCheckHooks??=[]).push(t,u)),l&&(n.viewHooks??=[]).push(-t,l),f&&((n.viewHooks??=[]).push(t,f),(n.viewCheckHooks??=[]).push(t,f)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function Am(n,e,t){rx(n,e,3,t)}function xm(n,e,t,r){(n[De]&3)===t&&rx(n,e,t,r)}function iE(n,e){let t=n[De];(t&3)===e&&(t&=16383,t+=1,n[De]=t)}function rx(n,e,t,r){let i=r!==void 0?n[Pa]&65535:0,o=r??-1,a=e.length-1,u=0;for(let l=i;l<a;l++)if(typeof e[l+1]=="number"){if(u=e[l],r!=null&&u>=r)break}else e[l]<0&&(n[Pa]+=65536),(u<o||o==-1)&&(SV(n,t,e,l),n[Pa]=(n[Pa]&4294901760)+l+2),l++}function bA(n,e){ot(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),ot(5,n,e)}}function SV(n,e,t,r){let i=t[r]<0,o=t[r+1],a=i?-t[r]:t[r],u=n[a];i?n[De]>>14<n[Pa]>>16&&(n[De]&3)===e&&(n[De]+=16384,bA(u,o)):bA(u,o)}var Au=-1,Va=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function AV(n){return(n.flags&8)!==0}function xV(n){return(n.flags&16)!==0}function RV(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],a=t[r++],u=t[r++];n.setAttribute(e,a,u,o)}else{let o=i,a=t[++r];MV(o)?n.setProperty(e,o,a):n.setAttribute(e,o,a),r++}}return r}function ix(n){return n===3||n===4||n===6}function MV(n){return n.charCodeAt(0)===64}function xu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?IA(n,t,i,null,e[++r]):IA(n,t,i,null,null))}}return n}function IA(n,e,t,r,i){let o=0,a=n.length;if(e===-1)a=-1;else for(;o<n.length;){let u=n[o++];if(typeof u=="number"){if(u===e){a=-1;break}else if(u>e){a=o-1;break}}}for(;o<n.length;){let u=n[o];if(typeof u=="number")break;if(u===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}a!==-1&&(n.splice(a,0,e),o=a+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function ox(n){return n!==Au}function Nm(n){return n&32767}function PV(n){return n>>16}function km(n,e){let t=PV(n),r=e;for(;t>0;)r=r[Ra],t--;return r}var fE=!0;function Om(n){let e=fE;return fE=n,e}var NV=256,sx=NV-1,ax=5,kV=0,Si={};function OV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(xa)&&(r=t[xa]),r==null&&(r=t[xa]=kV++);let i=r&sx,o=1<<i;e.data[n+(i>>ax)]|=o}function Lm(n,e){let t=cx(n,e);if(t!==-1)return t;let r=e[Me];r.firstCreatePass&&(n.injectorIndex=e.length,oE(r.data,n),oE(e,null),oE(r.blueprint,null));let i=PE(n,e),o=n.injectorIndex;if(ox(i)){let a=Nm(i),u=km(i,e),l=u[Me].data;for(let f=0;f<8;f++)e[o+f]=u[a+f]|l[a+f]}return e[o+8]=i,o}function oE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function cx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function PE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=fx(i),r===null)return Au;if(t++,i=i[Ra],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Au}function pE(n,e,t){OV(n,e,t)}function LV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(ix(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function ux(n,e,t){if(t&8||n!==void 0)return n;dm(e,"NodeInjector")}function lx(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[_s],o=Vn(void 0);try{return i?i.get(e,r,t&8):Iw(e,r,t&8)}finally{Vn(o)}}return ux(r,e,t)}function dx(n,e,t,r=0,i){if(n!==null){if(e[De]&2048&&!(r&2)){let a=BV(n,e,t,r,Si);if(a!==Si)return a}let o=hx(n,e,t,r,Si);if(o!==Si)return o}return lx(e,t,r,i)}function hx(n,e,t,r,i){let o=UV(t);if(typeof o=="function"){if(!Qw(e,n,r))return r&1?ux(i,t,r):lx(e,t,r,i);try{let a;if(a=o(r),a==null&&!(r&8))dm(t);else return a}finally{Yw()}}else if(typeof o=="number"){let a=null,u=cx(n,e),l=Au,f=r&1?e[Dr][Cr]:null;for((u===-1||r&4)&&(l=u===-1?PE(n,e):e[u+8],l===Au||!CA(r,!1)?u=-1:(a=e[Me],u=Nm(l),e=km(l,e)));u!==-1;){let g=e[Me];if(TA(o,u,g.data)){let y=FV(u,e,t,a,r,f);if(y!==Si)return y}l=e[u+8],l!==Au&&CA(r,e[Me].data[u+8]===f)&&TA(o,u,e)?(a=g,u=Nm(l),e=km(l,e)):u=-1}}return i}function FV(n,e,t,r,i,o){let a=e[Me],u=a.data[n+8],l=r==null?ys(u)&&fE:r!=a&&(u.type&3)!==0,f=i&1&&o===u,g=VV(u,a,t,l,f);return g!==null?Fm(e,a,g,u,i):Si}function VV(n,e,t,r,i){let o=n.providerIndexes,a=e.data,u=o&1048575,l=n.directiveStart,f=n.directiveEnd,g=o>>20,y=r?u:u+g,E=i?u+g:f;for(let I=y;I<E;I++){let N=a[I];if(I<l&&t===N||I>=l&&N.type===t)return I}if(i){let I=a[l];if(I&&Ci(I)&&I.type===t)return l}return null}function Fm(n,e,t,r,i){let o=n[t],a=e.data;if(o instanceof Va){let u=o;if(u.resolving){let I=NS(a[t]);throw bw(I)}let l=Om(u.canSeeViewProviders);u.resolving=!0;let f=a[t].type||a[t],g,y=u.injectImpl?Vn(u.injectImpl):null,E=Qw(n,r,0);try{o=n[t]=u.factory(void 0,i,a,n,r),e.firstCreatePass&&t>=r.directiveStart&&DV(t,a[t],e)}finally{y!==null&&Vn(y),Om(l),u.resolving=!1,Yw()}}return o}function UV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(xa)?n[xa]:void 0;return typeof e=="number"?e>=0?e&sx:jV:e}function TA(n,e,t){let r=1<<n;return!!(t[e+(n>>ax)]&r)}function CA(n,e){return!(n&2)&&!(n&1&&e)}var Fa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return dx(this._tNode,this._lView,e,Da(r),t)}};function jV(){return new Fa(sn(),Ge())}function Zr(n){return Nu(()=>{let e=n.prototype.constructor,t=e[xd]||mE(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[xd]||mE(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function mE(n){return mw(n)?()=>{let e=mE(yn(n));return e&&e()}:fs(n)}function BV(n,e,t,r,i){let o=n,a=e;for(;o!==null&&a!==null&&a[De]&2048&&!Iu(a);){let u=hx(o,a,t,r|2,Si);if(u!==Si)return u;let l=o.parent;if(!l){let f=a[Nw];if(f){let g=f.get(t,Si,r);if(g!==Si)return g}l=fx(a),a=a[Ra]}o=l}return i}function fx(n){let e=n[Me],t=e.type;return t===2?e.declTNode:t===1?n[Cr]:null}function Yd(n){return LV(sn(),n)}function zV(){return Qm(sn(),Ge())}function Qm(n,e){return new Io(Wr(n,e))}var Io=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=zV}return n})();function px(n){return(n.flags&128)===128}var NE=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(NE||{}),mx=new Map,$V=0;function HV(){return $V++}function qV(n){mx.set(n[Fd],n)}function gE(n){mx.delete(n[Fd])}var DA="__ngContext__";function Ru(n,e){Ti(e)?(n[DA]=e[Fd],qV(e)):n[DA]=e}function gx(n){return vx(n[bu])}function _x(n){return vx(n[Tr])}function vx(n){for(;n!==null&&!qr(n);)n=n[Tr];return n}var _E;function kE(n){_E=n}function yx(){if(_E!==void 0)return _E;if(typeof document<"u")return document;throw new te(210,!1)}var Ym=new X("",{providedIn:"root",factory:()=>WV}),WV="ng",Jm=new X(""),$a=new X("",{providedIn:"platform",factory:()=>"unknown"});var Xm=new X("",{providedIn:"root",factory:()=>yx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var GV="h",KV="b";var wx=!1,Ex=new X("",{providedIn:"root",factory:()=>wx});var OE=new X("");var ZV=(n,e,t,r)=>{};function QV(n,e,t,r){ZV(n,e,t,r)}function LE(n){return(n.flags&32)===32}var YV=()=>null;function bx(n,e,t=!1){return YV(n,e,t)}function Ix(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a!==-1){let u=n.data[a];Zw(o),u.contentQueries(2,e[a],a)}}}finally{Ne(r)}}}function vE(n,e,t){Zw(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function Tx(n,e,t){if(kw(e)){let r=Ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let a=i;a<o;a++){let u=n.data[a];if(u.contentQueries){let l=t[a];u.contentQueries(1,l,a)}}}finally{Ne(r)}}}var Eo=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(Eo||{});var Dm;function JV(){if(Dm===void 0&&(Dm=null,Md.trustedTypes))try{Dm=Md.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Dm}function SA(n){return JV()?.createScriptURL(n)||n}var Vm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${um})`}};function Jd(n){return n instanceof Vm?n.changingThisBreaksApplicationSecurity:n}function FE(n,e){let t=Cx(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${um})`)}return t===e}function Cx(n){return n instanceof Vm&&n.getTypeName()||null}var XV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Dx(n){return n=String(n),n.match(XV)?n:"unsafe:"+n}var eg=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(eg||{});function Sx(n){let e=xx();return e?e.sanitize(eg.URL,n)||"":FE(n,"URL")?Jd(n):Dx(bi(n))}function Ax(n){let e=xx();if(e)return SA(e.sanitize(eg.RESOURCE_URL,n)||"");if(FE(n,"ResourceURL"))return SA(Jd(n));throw new te(904,!1)}function e2(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?Ax:Sx}function VE(n,e,t){return e2(e,t)(n)}function xx(){let n=Ge();return n&&n[Ii].sanitizer}function Rx(n){return n instanceof Function?n():n}function t2(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var Mx="ng-template";function n2(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&t2(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(UE(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function UE(n){return n.type===4&&n.value!==Mx}function r2(n,e,t){let r=n.type===4&&!t?Mx:n.value;return e===r}function i2(n,e,t){let r=4,i=n.attrs,o=i!==null?a2(i):0,a=!1;for(let u=0;u<e.length;u++){let l=e[u];if(typeof l=="number"){if(!a&&!Kr(r)&&!Kr(l))return!1;if(a&&Kr(l))continue;a=!1,r=l|r&1;continue}if(!a)if(r&4){if(r=2|r&1,l!==""&&!r2(n,l,t)||l===""&&e.length===1){if(Kr(r))return!1;a=!0}}else if(r&8){if(i===null||!n2(n,i,l,t)){if(Kr(r))return!1;a=!0}}else{let f=e[++u],g=o2(l,i,UE(n),t);if(g===-1){if(Kr(r))return!1;a=!0;continue}if(f!==""){let y;if(g>o?y="":y=i[g+1].toLowerCase(),r&2&&f!==y){if(Kr(r))return!1;a=!0}}}}return Kr(r)||a}function Kr(n){return(n&1)===0}function o2(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let a=e[i];if(a===n)return i;if(a===3||a===6)o=!0;else if(a===1||a===2){let u=e[++i];for(;typeof u=="string";)u=e[++i];continue}else{if(a===4)break;if(a===0){i+=4;continue}}i+=o?1:2}return-1}else return c2(e,n)}function s2(n,e,t=!1){for(let r=0;r<e.length;r++)if(i2(n,e[r],t))return!0;return!1}function a2(n){for(let e=0;e<n.length;e++){let t=n[e];if(ix(t))return e}return n.length}function c2(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function AA(n,e){return n?":not("+e.trim()+")":e}function u2(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let a=n[t];if(typeof a=="string")if(r&2){let u=n[++t];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else r&8?i+="."+a:r&4&&(i+=" "+a);else i!==""&&!Kr(a)&&(e+=AA(o,i),i=""),r=a,o=o||!Kr(r);t++}return i!==""&&(e+=AA(o,i)),e}function l2(n){return n.map(u2).join(",")}function d2(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Kr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Qr={};function h2(n,e){return n.createText(e)}function f2(n,e,t){n.setValue(e,t)}function Px(n,e,t){return n.createElement(e,t)}function Um(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Nx(n,e,t){n.appendChild(e,t)}function xA(n,e,t,r,i){r!==null?Um(n,e,t,r,i):Nx(n,e,t)}function p2(n,e,t,r){n.removeChild(null,e,t,r)}function m2(n,e,t){n.setAttribute(e,"style",t)}function g2(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function kx(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&RV(n,e,r),i!==null&&g2(n,e,i),o!==null&&m2(n,e,o)}function jE(n,e,t,r,i,o,a,u,l,f,g){let y=An+r,E=y+i,I=_2(y,E),N=typeof f=="function"?f():f;return I[Me]={type:n,blueprint:I,template:t,queries:null,viewQuery:u,declTNode:e,data:I.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:E,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:N,incompleteFirstPass:!1,ssrId:g}}function _2(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Qr);return t}function v2(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=jE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function BE(n,e,t,r,i,o,a,u,l,f,g){let y=e.blueprint.slice();return y[Hr]=i,y[De]=r|4|128|8|64|1024,(f!==null||n&&n[De]&2048)&&(y[De]|=2048),Fw(y),y[wn]=y[Ra]=n,y[Sn]=t,y[Ii]=a||n&&n[Ii],y[Et]=u||n&&n[Et],y[_s]=l||n&&n[_s]||null,y[Cr]=o,y[Fd]=HV(),y[Ld]=g,y[Nw]=f,y[Dr]=e.type==2?n[Dr]:y,y}function y2(n,e,t){let r=Wr(e,n),i=v2(t),o=n[Ii].rendererFactory,a=zE(n,BE(n,i,null,Ox(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=a}function Ox(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Lx(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function zE(n,e){return n[bu]?n[Pw][Tr]=e:n[bu]=e,n[Pw]=e,e}function Y(n=1){Fx(xn(),Ge(),ws()+n,!1)}function Fx(n,e,t,r){if(!r)if((e[De]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Am(e,o,t)}else{let o=n.preOrderHooks;o!==null&&xm(e,o,0,t)}Es(t)}var tg=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(tg||{});function yE(n,e,t,r){let i=Ne(null);try{let[o,a,u]=n.inputs[t],l=null;(a&tg.SignalBased)!==0&&(l=e[o][Dn]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):u!==null&&(r=u.call(e,r)),n.setInput!==null?n.setInput(e,l,r,t,o):JA(e,l,o,r)}finally{Ne(i)}}var Ai=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Ai||{}),w2;function $E(n,e){return w2(n,e)}var Mu=new Set,ng=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(ng||{}),Ha=new X(""),RA=new Set;function ku(n){RA.has(n)||(RA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Vx=!1,wE=class extends $t{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,qS()&&(this.destroyRef=$(Gr,{optional:!0})??void 0,this.pendingTasks=$(Di,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),a=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),a=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),a&&(a=this.wrapInTimeout(a)));let u=super.subscribe({next:i,error:o,complete:a});return e instanceof Mt&&e.add(u),u}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},qt=wE;function Ux(n){let e,t;function r(){n=qd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function MA(n){return queueMicrotask(()=>n()),()=>{n=qd}}var HE="isAngularZone",jm=HE+"_ID",E2=0,Ke=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new qt(!1);onMicrotaskEmpty=new qt(!1);onStable=new qt(!1);onError=new qt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Vx}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!i&&r,a.shouldCoalesceRunChangeDetection=i,a.callbackScheduled=!1,a.scheduleInRootZone=o,T2(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(HE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+i,e,b2,qd,qd);try{return o.runTask(a,t,r)}finally{o.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},b2={};function qE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Ux(()=>{n.callbackScheduled=!1,EE(n),n.isCheckStableRunning=!0,qE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),EE(n)}function T2(n){let e=()=>{I2(n)},t=E2++;n._inner=n._inner.fork({name:"angular",properties:{[HE]:!0,[jm]:t,[jm+t]:!0},onInvokeTask:(r,i,o,a,u,l)=>{if(C2(l))return r.invokeTask(o,a,u,l);try{return PA(n),r.invokeTask(o,a,u,l)}finally{(n.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),NA(n)}},onInvoke:(r,i,o,a,u,l,f)=>{try{return PA(n),r.invoke(o,a,u,l,f)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!D2(l)&&e(),NA(n)}},onHasTask:(r,i,o,a)=>{r.hasTask(o,a),i===o&&(a.change=="microTask"?(n._hasPendingMicrotasks=a.microTask,EE(n),qE(n)):a.change=="macroTask"&&(n.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,i,o,a)=>(r.handleError(o,a),n.runOutsideAngular(()=>n.onError.emit(a)),!1)})}function EE(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function PA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function NA(n){n._nesting--,qE(n)}var Bm=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new qt;onMicrotaskEmpty=new qt;onStable=new qt;onError=new qt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function C2(n){return jx(n,"__ignore_ng_zone__")}function D2(n){return jx(n,"__scheduler_tick__")}function jx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var WE=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),Bx=[0,1,2,3],zx=(()=>{class n{ngZone=$(Ke);scheduler=$(_o);errorHandler=$($r,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){$(Ha,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ot(16),this.executing=!0;for(let r of Bx)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ot(17)}register(t){let{view:r}=t;r!==void 0?((r[ka]??=[]).push(t),Tu(r),r[De]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(ng.AFTER_NEXT_RENDER,t):t()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),zm=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,a=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=a,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ka];e&&(this.view[ka]=e.filter(t=>t!==this))}};function rg(n,e){let t=e?.injector??$(wt);return ku("NgAfterNextRender"),A2(n,t,e,!0)}function S2(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function A2(n,e,t,r){let i=e.get(WE);i.impl??=e.get(zx);let o=e.get(Ha,null,{optional:!0}),a=t?.manualCleanup!==!0?e.get(Gr):null,u=e.get(Im,null,{optional:!0}),l=new zm(i.impl,S2(n),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var x2=new X("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function $x(n,e,t){let r=n.get(x2);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function R2(n,e){for(let[t,r]of e)$x(n,r.animateFns)}function kA(n,e,t,r){let i=n?.[Ud]?.enter;e!==null&&i&&i.has(t.index)&&R2(r,i)}function Su(n,e,t,r,i,o,a,u){if(i!=null){let l,f=!1;qr(i)?l=i:Ti(i)&&(f=!0,i=i[Hr]);let g=Sr(i);n===0&&r!==null?(kA(u,r,o,t),a==null?Nx(e,r,g):Um(e,r,g,a||null,!0)):n===1&&r!==null?(kA(u,r,o,t),Um(e,r,g,a||null,!0)):n===2?OA(u,o,t,y=>{p2(e,g,f,y)}):n===3&&OA(u,o,t,()=>{e.destroyNode(g)}),l!=null&&$2(e,n,t,l,o,r,a)}}function M2(n,e){Hx(n,e),e[Hr]=null,e[Cr]=null}function P2(n,e,t,r,i,o){r[Hr]=i,r[Cr]=e,ig(n,r,t,1,i,o)}function Hx(n,e){e[Ii].changeDetectionScheduler?.notify(9),ig(n,e,e[Et],2,null,null)}function N2(n){let e=n[bu];if(!e)return sE(n[Me],n);for(;e;){let t=null;if(Ti(e))t=e[bu];else{let r=e[Qn];r&&(t=r)}if(!t){for(;e&&!e[Tr]&&e!==n;)Ti(e)&&sE(e[Me],e),e=e[wn];e===null&&(e=n),Ti(e)&&sE(e[Me],e),t=e&&e[Tr]}e=t}}function GE(n,e){let t=n[Bd],r=t.indexOf(e);t.splice(r,1)}function qx(n,e){if(Oa(e))return;let t=e[Et];t.destroyNode&&ig(n,e,t,3,null,null),N2(e)}function sE(n,e){if(Oa(e))return;let t=Ne(null);try{e[De]&=-129,e[De]|=256,e[fr]&&Id(e[fr]),L2(n,e),O2(n,e),e[Me].type===1&&e[Et].destroy();let r=e[Ma];if(r!==null&&qr(e[wn])){r!==e[wn]&&GE(r,e);let i=e[Na];i!==null&&i.detachView(n)}gE(e)}finally{Ne(t)}}function OA(n,e,t,r){let i=n?.[Ud];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Mu.add(n),$x(t,()=>{if(i.leave&&i.leave.has(e.index)){let a=i.leave.get(e.index),u=[];if(a){for(let l=0;l<a.animateFns.length;l++){let f=a.animateFns[l],{promise:g}=f();u.push(g)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(u),k2(n,r)}else n&&Mu.delete(n),r(!1)},i)}function k2(n,e){let t=n[Ud]?.running;if(t){t.then(()=>{n[Ud].running=void 0,Mu.delete(n),e(!0)});return}e(!1)}function O2(n,e){let t=n.cleanup,r=e[Eu];if(t!==null)for(let a=0;a<t.length-1;a+=2)if(typeof t[a]=="string"){let u=t[a+3];u>=0?r[u]():r[-u].unsubscribe(),a+=2}else{let u=r[t[a+1]];t[a].call(u)}r!==null&&(e[Eu]=null);let i=e[mo];if(i!==null){e[mo]=null;for(let a=0;a<i.length;a++){let u=i[a];u()}}let o=e[Vd];if(o!==null){e[Vd]=null;for(let a of o)a.destroy()}}function L2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Va)){let o=t[r+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let u=i[o[a]],l=o[a+1];ot(4,u,l);try{l.call(u)}finally{ot(5,u,l)}}else{ot(4,i,o);try{o.call(i)}finally{ot(5,i,o)}}}}}function F2(n,e,t){return V2(n,e.parent,t)}function V2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Hr];if(ys(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Eo.None||i===Eo.Emulated)return null}return Wr(r,t)}function U2(n,e,t){return B2(n,e,t)}function j2(n,e,t){return n.type&40?Wr(n,t):null}var B2=j2,LA;function KE(n,e,t,r){let i=F2(n,r,e),o=e[Et],a=r.parent||e[Cr],u=U2(a,r,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)xA(o,i,t[l],u,!1);else xA(o,i,t,u,!1);LA!==void 0&&LA(o,r,e,t,i)}function Wd(n,e){if(e!==null){let t=e.type;if(t&3)return Wr(e,n);if(t&4)return bE(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Wd(n,r);{let i=n[e.index];return qr(i)?bE(-1,i):Sr(i)}}else{if(t&128)return Wd(n,e.next);if(t&32)return $E(e,n)()||Sr(n[e.index]);{let r=Wx(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ps(n[Dr]);return Wd(i,r)}else return Wd(n,e.next)}}}return null}function Wx(n,e){if(e!==null){let r=n[Dr][Cr],i=e.projection;return r.projection[i]}return null}function bE(n,e){let t=Qn+n+1;if(t<e.length){let r=e[t],i=r[Me].firstChild;if(i!==null)return Wd(r,i)}return e[vs]}function ZE(n,e,t,r,i,o,a){for(;t!=null;){let u=r[_s];if(t.type===128){t=t.next;continue}let l=r[t.index],f=t.type;if(a&&e===0&&(l&&Ru(Sr(l),r),t.flags|=2),!LE(t))if(f&8)ZE(n,e,t.child,r,i,o,!1),Su(e,n,u,i,l,t,o,r);else if(f&32){let g=$E(t,r),y;for(;y=g();)Su(e,n,u,i,y,t,o,r);Su(e,n,u,i,l,t,o,r)}else f&16?z2(n,e,r,t,i,o):Su(e,n,u,i,l,t,o,r);t=a?t.projectionNext:t.next}}function ig(n,e,t,r,i,o){ZE(t,r,n.firstChild,e,i,o,!1)}function z2(n,e,t,r,i,o){let a=t[Dr],l=a[Cr].projection[r.projection];if(Array.isArray(l))for(let f=0;f<l.length;f++){let g=l[f];Su(e,n,t[_s],i,g,r,o,t)}else{let f=l,g=a[wn];px(r)&&(f.flags|=128),ZE(n,e,f,g,i,o,!0)}}function $2(n,e,t,r,i,o,a){let u=r[vs],l=Sr(r);u!==l&&Su(e,n,t,o,u,i,a);for(let f=Qn;f<r.length;f++){let g=r[f];ig(g[Me],g,n,e,o,u)}}function H2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ai.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ai.Important),n.setStyle(t,r,i,o))}}function Gx(n,e,t,r,i){let o=ws(),a=r&2;try{Es(-1),a&&e.length>An&&Fx(n,e,An,!1),ot(a?2:0,i,t),t(r,i)}finally{Es(o),ot(a?3:1,i,t)}}function QE(n,e,t){Q2(n,e,t),(t.flags&64)===64&&Y2(n,e,t)}function YE(n,e,t=Wr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let a=r[o+1],u=a===-1?t(e,n):n[a];n[i++]=u}}}function q2(n,e,t,r){let o=r.get(Ex,wx)||t===Eo.ShadowDom,a=n.selectRootElement(e,o);return W2(a),a}function W2(n){G2(n)}var G2=()=>null;function K2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Kx(n,e,t,r,i,o){let a=e[Me];if(JE(n,a,e,t,r)){ys(n)&&Z2(e,n.index);return}n.type&3&&(t=K2(t)),Zx(n,e,t,r,i,o)}function Zx(n,e,t,r,i,o){if(n.type&3){let a=Wr(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(a,t,r)}else n.type&12}function Z2(n,e){let t=Ar(e,n);t[De]&16||(t[De]|=64)}function Q2(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ys(t)&&y2(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Lm(t,e);let o=t.initialInputs;for(let a=r;a<i;a++){let u=n.data[a],l=Fm(e,n,a,t);if(Ru(l,e),o!==null&&tU(e,a-r,l,u,t,o),Ci(u)){let f=Ar(t.index,e);f[Sn]=Fm(e,n,a,t)}}}function Y2(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,a=dA();try{Es(o);for(let u=r;u<i;u++){let l=n.data[u],f=e[u];vm(u),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&J2(l,f)}}finally{Es(-1),vm(a)}}function J2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Qx(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];s2(e,o.selectors,!1)&&(r??=[],Ci(o)?r.unshift(o):r.push(o))}return r}function X2(n,e,t,r,i,o){let a=Wr(n,e);eU(e[Et],a,o,n.value,t,r,i)}function eU(n,e,t,r,i,o,a){if(o==null)n.removeAttribute(e,i,t);else{let u=a==null?bi(o):a(o,r||"",i);n.setAttribute(e,i,u,t)}}function tU(n,e,t,r,i,o){let a=o[e];if(a!==null)for(let u=0;u<a.length;u+=2){let l=a[u],f=a[u+1];yE(r,t,l,f)}}function Yx(n,e,t,r,i){let o=An+t,a=e[Me],u=i(a,e,n,r,t);e[o]=u,Cu(n,!0);let l=n.type===2;return l?(kx(e[Et],u,n),(tA()===0||zd(n))&&Ru(u,e),nA()):Ru(u,e),Em()&&(!l||!LE(n))&&KE(a,e,u,n),n}function Jx(n){let e=n;return qw()?oA():(e=e.parent,Cu(e,!1)),e}function nU(n,e){let t=n[_s];if(!t)return;let r;try{r=t.get(Yn,null)}catch{r=null}r?.(e)}function JE(n,e,t,r,i){let o=n.inputs?.[r],a=n.hostDirectiveInputs?.[r],u=!1;if(a)for(let l=0;l<a.length;l+=2){let f=a[l],g=a[l+1],y=e.data[f];yE(y,t[f],g,i),u=!0}if(o)for(let l of o){let f=t[l],g=e.data[l];yE(g,f,r,i),u=!0}return u}function rU(n,e){let t=Ar(e,n),r=t[Me];iU(r,t);let i=t[Hr];i!==null&&t[Ld]===null&&(t[Ld]=bx(i,t[_s])),ot(18),XE(r,t,t[Sn]),ot(19,t[Sn])}function iU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function XE(n,e,t){ym(e);try{let r=n.viewQuery;r!==null&&vE(1,r,t);let i=n.template;i!==null&&Gx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Na]?.finishViewCreation(n),n.staticContentQueries&&Ix(n,e),n.staticViewQueries&&vE(2,n.viewQuery,t);let o=n.components;o!==null&&oU(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[De]&=-5,wm()}}function oU(n,e){for(let t=0;t<e.length;t++)rU(n,e[t])}function sU(n,e,t,r){let i=Ne(null);try{let o=e.tView,u=n[De]&4096?4096:16,l=BE(n,o,t,u,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),f=n[e.index];l[Ma]=f;let g=n[Na];return g!==null&&(l[Na]=g.createEmbeddedView(o)),XE(o,l,t),l}finally{Ne(i)}}function FA(n,e){return!e||e.firstChild===null||px(n)}function Kd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Sr(o)),qr(o)&&Xx(o,r);let a=t.type;if(a&8)Kd(n,e,t.child,r);else if(a&32){let u=$E(t,e),l;for(;l=u();)r.push(l)}else if(a&16){let u=Wx(e,t);if(Array.isArray(u))r.push(...u);else{let l=ps(e[Dr]);Kd(l[Me],l,u,r,!0)}}t=i?t.projectionNext:t.next}return r}function Xx(n,e){for(let t=Qn;t<n.length;t++){let r=n[t],i=r[Me].firstChild;i!==null&&Kd(r[Me],r,i,e)}n[vs]!==n[Hr]&&e.push(n[vs])}function eR(n){if(n[ka]!==null){for(let e of n[ka])e.impl.addSequence(e);n[ka].length=0}}var tR=[];function aU(n){return n[fr]??cU(n)}function cU(n){let e=tR.pop()??Object.create(lU);return e.lView=n,e}function uU(n){n.lView[fr]!==n&&(n.lView=null,tR.push(n))}var lU=we(Q({},eu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Tu(n.lView)},consumerOnSignalRead(){this.lView[fr]=this}});function dU(n){let e=n[fr]??Object.create(hU);return e.lView=n,e}var hU=we(Q({},eu),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ps(n.lView);for(;e&&!nR(e[Me]);)e=ps(e);e&&Vw(e)},consumerOnSignalRead(){this.lView[fr]=this}});function nR(n){return n.type!==2}function rR(n){if(n[Vd]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Vd])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[De]&8192)}}var fU=100;function iR(n,e=0){let r=n[Ii].rendererFactory,i=!1;i||r.begin?.();try{pU(n,e)}finally{i||r.end?.()}}function pU(n,e){let t=Ww();try{Gw(!0),IE(n,e);let r=0;for(;$d(n);){if(r===fU)throw new te(103,!1);r++,IE(n,1)}}finally{Gw(t)}}function mU(n,e,t,r){if(Oa(e))return;let i=e[De],o=!1,a=!1;ym(e);let u=!0,l=null,f=null;o||(nR(n)?(f=aU(e),l=nu(f)):Dp()===null?(u=!1,f=dU(e),l=nu(f)):e[fr]&&(Id(e[fr]),e[fr]=null));try{Fw(e),cA(n.bindingStartIndex),t!==null&&Gx(n,e,t,2,r);let g=(i&3)===3;if(!o)if(g){let I=n.preOrderCheckHooks;I!==null&&Am(e,I,null)}else{let I=n.preOrderHooks;I!==null&&xm(e,I,0,null),iE(e,0)}if(a||gU(e),rR(e),oR(e,0),n.contentQueries!==null&&Ix(n,e),!o)if(g){let I=n.contentCheckHooks;I!==null&&Am(e,I)}else{let I=n.contentHooks;I!==null&&xm(e,I,1),iE(e,1)}vU(n,e);let y=n.components;y!==null&&aR(e,y,0);let E=n.viewQuery;if(E!==null&&vE(2,E,r),!o)if(g){let I=n.viewCheckHooks;I!==null&&Am(e,I)}else{let I=n.viewHooks;I!==null&&xm(e,I,2),iE(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[pm]){for(let I of e[pm])I();e[pm]=null}o||(eR(e),e[De]&=-73)}catch(g){throw o||Tu(e),g}finally{f!==null&&(Ed(f,l),u&&uU(f)),wm()}}function oR(n,e){for(let t=gx(n);t!==null;t=_x(t))for(let r=Qn;r<t.length;r++){let i=t[r];sR(i,e)}}function gU(n){for(let e=gx(n);e!==null;e=_x(e)){if(!(e[De]&2))continue;let t=e[Bd];for(let r=0;r<t.length;r++){let i=t[r];Vw(i)}}}function _U(n,e,t){ot(18);let r=Ar(e,n);sR(r,t),ot(19,r[Sn])}function sR(n,e){gm(n)&&IE(n,e)}function IE(n,e){let r=n[Me],i=n[De],o=n[fr],a=!!(e===0&&i&16);if(a||=!!(i&64&&e===0),a||=!!(i&1024),a||=!!(o?.dirty&&bd(o)),a||=!1,o&&(o.dirty=!1),n[De]&=-9217,a)mU(r,n,r.template,n[Sn]);else if(i&8192){let u=Ne(null);try{rR(n),oR(n,1);let l=r.components;l!==null&&aR(n,l,1),eR(n)}finally{Ne(u)}}}function aR(n,e,t){for(let r=0;r<e.length;r++)_U(n,e[r],t)}function vU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Es(~i);else{let o=i,a=t[++r],u=t[++r];lA(a,o);let l=e[o];ot(24,l),u(2,l),ot(25,l)}}}finally{Es(-1)}}function eb(n,e){let t=Ww()?64:1088;for(n[Ii].changeDetectionScheduler?.notify(e);n;){n[De]|=t;let r=ps(n);if(Iu(n)&&!r)return n;n=r}return null}function cR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function yU(n,e,t,r=!0){let i=e[Me];if(wU(i,e,n,t),r){let a=bE(t,n),u=e[Et],l=u.parentNode(n[vs]);l!==null&&P2(i,n[Cr],u,e,l,a)}let o=e[Ld];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function TE(n,e){if(n.length<=Qn)return;let t=Qn+e,r=n[t];if(r){let i=r[Ma];i!==null&&i!==n&&GE(i,r),e>0&&(n[t-1][Tr]=r[Tr]);let o=Nd(n,Qn+e);M2(r[Me],r);let a=o[Na];a!==null&&a.detachView(o[Me]),r[wn]=null,r[Tr]=null,r[De]&=-129}return r}function wU(n,e,t,r){let i=Qn+r,o=t.length;r>0&&(t[i-1][Tr]=e),r<o-Qn?(e[Tr]=t[i],Tw(t,Qn+r,e)):(t.push(e),e[Tr]=null),e[wn]=t;let a=e[Ma];a!==null&&t!==a&&uR(a,e);let u=e[Na];u!==null&&u.insertView(n),_m(e),e[De]|=128}function uR(n,e){let t=n[Bd],r=e[wn];if(Ti(r))n[De]|=2;else{let i=r[wn][Dr];e[Dr]!==i&&(n[De]|=2)}t===null?n[Bd]=[e]:t.push(e)}var bs=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Me];return Kd(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Sn]}set context(e){this._lView[Sn]=e}get destroyed(){return Oa(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[wn];if(qr(e)){let t=e[jd],r=t?t.indexOf(this):-1;r>-1&&(TE(e,r),Nd(t,r))}this._attachedToViewContainer=!1}qx(this._lView[Me],this._lView)}onDestroy(e){Uw(this._lView,e)}markForCheck(){eb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[De]&=-129}reattach(){_m(this._lView),this._lView[De]|=128}detectChanges(){this._lView[De]|=1024,iR(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Iu(this._lView),t=this._lView[Ma];t!==null&&!e&&GE(t,this._lView),Hx(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=Iu(this._lView),r=this._lView[Ma];r!==null&&!t&&uR(r,this._lView),_m(this._lView)}};var Xd=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=EU;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=sU(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new bs(o)}}return n})();function EU(){return bU(sn(),Ge())}function bU(n,e){return n.type&4?new Xd(e,n,Qm(n,e)):null}function og(n,e,t,r,i){let o=n.data[e];if(o===null)o=IU(n,e,t,r,i),uA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let a=iA();o.injectorIndex=a===null?-1:a.injectorIndex}return Cu(o,!0),o}function IU(n,e,t,r,i){let o=Hw(),a=qw(),u=a?o:o&&o.parent,l=n.data[e]=CU(n,u,t,e,r,i);return TU(n,l,o,a),l}function TU(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function CU(n,e,t,r,i,o){let a=e?e.injectorIndex:-1,u=0;return rA()&&(u|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:u,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var jX=new RegExp(`^(\\d+)*(${KV}|${GV})*(.*)`);var DU=()=>null;function VA(n,e){return DU(n,e)}var lR=class{},sg=class{},CE=class{resolveComponentFactory(e){throw new te(917,!1)}},eh=class{static NULL=new CE},Ua=class{},Is=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>SU()}return n})();function SU(){let n=Ge(),e=sn(),t=Ar(e.index,n);return(Ti(t)?t:n)[Et]}var dR=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var Rm={},DE=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,Rm,r);return i!==Rm||t===Rm?i:this.parentInjector.get(e,t,r)}};function $m(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number")o=u;else if(o==1)i=pw(i,u);else if(o==2){let l=u,f=e[++a];r=pw(r,l+": "+f+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ue(n,e=0){let t=Ge();if(t===null)return de(n,e);let r=sn();return dx(r,t,yn(n),e)}function tb(){let n="invalid";throw new Error(n)}function hR(n,e,t,r,i){let o=r===null?null:{"":-1},a=i(n,t);if(a!==null){let u=a,l=null,f=null;for(let g of a)if(g.resolveHostDirectives!==null){[u,l,f]=g.resolveHostDirectives(a);break}RU(n,e,t,u,o,l,f)}o!==null&&r!==null&&AU(t,r,o)}function AU(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}function xU(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RU(n,e,t,r,i,o,a){let u=r.length,l=!1;for(let E=0;E<u;E++){let I=r[E];!l&&Ci(I)&&(l=!0,xU(n,t,E)),pE(Lm(t,e),n,I.type)}LU(t,n.data.length,u);for(let E=0;E<u;E++){let I=r[E];I.providersResolver&&I.providersResolver(I)}let f=!1,g=!1,y=Lx(n,e,u,null);u>0&&(t.directiveToIndex=new Map);for(let E=0;E<u;E++){let I=r[E];if(t.mergedAttrs=xu(t.mergedAttrs,I.hostAttrs),PU(n,t,e,y,I),OU(y,I,i),a!==null&&a.has(I)){let[q,F]=a.get(I);t.directiveToIndex.set(I.type,[y,q+t.directiveStart,F+t.directiveStart])}else(o===null||!o.has(I))&&t.directiveToIndex.set(I.type,y);I.contentQueries!==null&&(t.flags|=4),(I.hostBindings!==null||I.hostAttrs!==null||I.hostVars!==0)&&(t.flags|=64);let N=I.type.prototype;!f&&(N.ngOnChanges||N.ngOnInit||N.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),f=!0),!g&&(N.ngOnChanges||N.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),g=!0),y++}MU(n,t,o)}function MU(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))UA(0,e,i,r),UA(1,e,i,r),BA(e,r,!1);else{let o=t.get(i);jA(0,e,o,r),jA(1,e,o,r),BA(e,r,!0)}}}function UA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a;n===0?a=e.inputs??={}:a=e.outputs??={},a[o]??=[],a[o].push(r),fR(e,o)}}function jA(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let a=i[o],u;n===0?u=e.hostDirectiveInputs??={}:u=e.hostDirectiveOutputs??={},u[a]??=[],u[a].push(r,o),fR(e,a)}}function fR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function BA(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||UE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let a=null,u=0;for(;u<r.length;){let l=r[u];if(l===0){u+=4;continue}else if(l===5){u+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let f=i[l];for(let g of f)if(g===e){a??=[],a.push(l,r[u+1]);break}}else if(t&&o.hasOwnProperty(l)){let f=o[l];for(let g=0;g<f.length;g+=2)if(f[g]===e){a??=[],a.push(f[g+1],r[u+1]);break}}u+=2}n.initialInputs??=[],n.initialInputs.push(a)}function PU(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=fs(i.type,!0)),a=new Va(o,Ci(i),ue,null);n.blueprint[r]=a,t[r]=a,NU(n,e,r,Lx(n,t,i.hostVars,Qr),i)}function NU(n,e,t,r,i){let o=i.hostBindings;if(o){let a=n.hostBindingOpCodes;a===null&&(a=n.hostBindingOpCodes=[]);let u=~e.index;kU(a)!=u&&a.push(u),a.push(t,r,o)}}function kU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function OU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ci(e)&&(t[""]=n)}}function LU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function pR(n,e,t,r,i,o,a,u){let l=e[Me],f=l.consts,g=La(f,a),y=og(l,n,t,r,g);return o&&hR(l,e,y,La(f,u),i),y.mergedAttrs=xu(y.mergedAttrs,y.attrs),y.attrs!==null&&$m(y,y.attrs,!1),y.mergedAttrs!==null&&$m(y,y.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,y),y}function mR(n,e){nx(n,e),kw(e)&&n.queries.elementEnd(e)}function FU(n,e,t,r,i,o){let a=e.consts,u=La(a,i),l=og(e,n,t,r,u);if(l.mergedAttrs=xu(l.mergedAttrs,l.attrs),o!=null){let f=La(a,o);l.localNames=[];for(let g=0;g<f.length;g+=2)l.localNames.push(f[g],-1)}return l.attrs!==null&&$m(l,l.attrs,!1),l.mergedAttrs!==null&&$m(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function nb(n){return _R(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function gR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function _R(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function VU(n,e,t){return n[e]=t}function xi(n,e,t){if(t===Qr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function zA(n,e,t,r){let i=xi(n,e,t);return xi(n,e+1,r)||i}function UU(n,e,t,r,i,o){let a=zA(n,e,t,r);return zA(n,e+2,i,o)||a}function Mm(n,e,t){return function r(i){let o=ys(n)?Ar(n.index,e):e;eb(o,5);let a=e[Sn],u=$A(e,a,t,i),l=r.__ngNextListenerFn__;for(;l;)u=$A(e,a,l,i)&&u,l=l.__ngNextListenerFn__;return u}}function $A(n,e,t,r){let i=Ne(null);try{return ot(6,e,t),t(r)!==!1}catch(o){return nU(n,o),!1}finally{ot(7,e,t),Ne(i)}}function vR(n,e,t,r,i,o,a,u){let l=zd(n),f=!1,g=null;if(!r&&l&&(g=BU(e,t,o,n.index)),g!==null){let y=g.__ngLastListenerFn__||g;y.__ngNextListenerFn__=a,g.__ngLastListenerFn__=a,f=!0}else{let y=Wr(n,t),E=r?r(y):y;QV(t,E,o,u);let I=i.listen(E,o,u);if(!jU(o)){let N=r?q=>r(Sr(q[n.index])):n.index;yR(N,e,t,o,u,I,!1)}}return f}function jU(n){return n.startsWith("animation")||n.startsWith("transition")}function BU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let a=i[o];if(a===t&&i[o+1]===r){let u=e[Eu],l=i[o+2];return u&&u.length>l?u[l]:null}typeof a=="string"&&(o+=2)}return null}function yR(n,e,t,r,i,o,a){let u=e.firstCreatePass?eA(e):null,l=XS(t),f=l.length;l.push(i,o),u&&u.push(r,n,f,(f+1)*(a?-1:1))}function HA(n,e,t,r,i,o){let a=e[t],u=e[Me],f=u.data[t].outputs[r],y=a[f].subscribe(o);yR(n.index,u,e,i,o,y,!0)}var SE=Symbol("BINDING");var Hm=class extends eh{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=yo(e);return new ja(t,this.ngModule)}};function zU(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&tg.SignalBased)!==0};return i&&(o.transform=i),o})}function $U(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function HU(n,e,t){let r=e instanceof xt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new DE(t,r):t}function qU(n){let e=n.get(Ua,null);if(e===null)throw new te(407,!1);let t=n.get(dR,null),r=n.get(_o,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function WU(n,e){let t=wR(n);return Px(e,t,t==="svg"?GS:t==="math"?KS:null)}function wR(n){return(n.selectors[0][0]||"div").toLowerCase()}var ja=class extends sg{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=zU(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=$U(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=l2(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,a){ot(22);let u=Ne(null);try{let l=this.componentDef,f=GU(r,l,a,o),g=HU(l,i||this.ngModule,e),y=qU(g),E=y.rendererFactory.createRenderer(null,l),I=r?q2(E,r,l.encapsulation,g):WU(l,E),N=a?.some(qA)||o?.some(W=>typeof W!="function"&&W.bindings.some(qA)),q=BE(null,f,null,512|Ox(l),null,null,y,E,g,null,bx(I,g,!0));q[An]=I,ym(q);let F=null;try{let W=pR(An,q,2,"#host",()=>f.directiveRegistry,!0,0);kx(E,I,W),Ru(I,q),QE(f,q,W),Tx(f,W,q),mR(f,W),t!==void 0&&ZU(W,this.ngContentSelectors,t),F=Ar(W.index,q),q[Sn]=F[Sn],XE(f,q,null)}catch(W){throw F!==null&&gE(F),gE(q),W}finally{ot(23),wm()}return new qm(this.componentType,q,!!N)}finally{Ne(u)}}};function GU(n,e,t,r){let i=n?["ng-version","20.3.14"]:d2(e.selectors[0]),o=null,a=null,u=0;if(t)for(let g of t)u+=g[SE].requiredVars,g.create&&(g.targetIdx=0,(o??=[]).push(g)),g.update&&(g.targetIdx=0,(a??=[]).push(g));if(r)for(let g=0;g<r.length;g++){let y=r[g];if(typeof y!="function")for(let E of y.bindings){u+=E[SE].requiredVars;let I=g+1;E.create&&(E.targetIdx=I,(o??=[]).push(E)),E.update&&(E.targetIdx=I,(a??=[]).push(E))}}let l=[e];if(r)for(let g of r){let y=typeof g=="function"?g:g.type,E=Aw(y);l.push(E)}return jE(0,null,KU(o,a),1,u,l,null,null,null,[i],null)}function KU(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function qA(n){let e=n[SE].kind;return e==="input"||e==="twoWay"}var qm=class extends lR{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=mm(t[Me],An),this.location=Qm(this._tNode,t),this.instance=Ar(this._tNode.index,t)[Sn],this.hostView=this.changeDetectorRef=new bs(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=JE(r,i[Me],i,e,t);this.previousInputValues.set(e,t);let a=Ar(r.index,i);eb(a,1)}get injector(){return new Fa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ZU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var qa=(()=>{class n{static __NG_ELEMENT_ID__=QU}return n})();function QU(){let n=sn();return JU(n,Ge())}var YU=qa,ER=class extends YU{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Qm(this._hostTNode,this._hostLView)}get injector(){return new Fa(this._hostTNode,this._hostLView)}get parentInjector(){let e=PE(this._hostTNode,this._hostLView);if(ox(e)){let t=km(e,this._hostLView),r=Nm(e),i=t[Me].data[r+8];return new Fa(i,t)}else return new Fa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=WA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Qn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let a=VA(this._lContainer,e.ssrId),u=e.createEmbeddedViewImpl(t||{},o,a);return this.insertImpl(u,i,FA(this._hostTNode,a)),u}createComponent(e,t,r,i,o,a,u){let l=e&&!bV(e),f;if(l)f=t;else{let F=t||{};f=F.index,r=F.injector,i=F.projectableNodes,o=F.environmentInjector||F.ngModuleRef,a=F.directives,u=F.bindings}let g=l?e:new ja(yo(e)),y=r||this.parentInjector;if(!o&&g.ngModule==null){let W=(l?y:this.parentInjector).get(xt,null);W&&(o=W)}let E=yo(g.componentType??{}),I=VA(this._lContainer,E?.id??null),N=I?.firstChild??null,q=g.create(y,i,N,o,a,u);return this.insertImpl(q.hostView,f,FA(this._hostTNode,I)),q}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(QS(i)){let u=this.indexOf(e);if(u!==-1)this.detach(u);else{let l=i[wn],f=new ER(l,l[Cr],l[wn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(t),a=this._lContainer;return yU(a,i,o,r),e.attachToViewContainerRef(),Tw(aE(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=WA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=TE(this._lContainer,t);r&&(Nd(aE(this._lContainer),t),qx(r[Me],r))}detach(e){let t=this._adjustIndex(e,-1),r=TE(this._lContainer,t);return r&&Nd(aE(this._lContainer),t)!=null?new bs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function WA(n){return n[jd]}function aE(n){return n[jd]||(n[jd]=[])}function JU(n,e){let t,r=e[n.index];return qr(r)?t=r:(t=cR(r,e,null,n),e[n.index]=t,zE(e,t)),ej(t,e,n,r),new ER(t,n,e)}function XU(n,e){let t=n[Et],r=t.createComment(""),i=Wr(e,n),o=t.parentNode(i);return Um(t,o,r,t.nextSibling(i),!1),r}var ej=rj,tj=()=>!1;function nj(n,e,t){return tj(n,e,t)}function rj(n,e,t,r){if(n[vs])return;let i;t.type&8?i=Sr(r):i=XU(e,t),n[vs]=i}var Ba=class{},ag=class{};var Wm=class extends Ba{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hm(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Sw(e);this._bootstrapComponents=Rx(o.bootstrap),this._r3Injector=Jw(e,t,[{provide:Ba,useValue:this},{provide:eh,useValue:this.componentFactoryResolver},...r],go(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gm=class extends ag{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Wm(this.moduleType,e,[])}};var Zd=class extends Ba{injector;componentFactoryResolver=new Hm(this);instance=null;constructor(e){super();let t=new Aa([...e.providers,{provide:Ba,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],e.parent||Od(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ou(n,e,t=null){return new Zd({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var ij=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=xw(!1,t.type),i=r.length>0?Ou([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(de(xt))})}return n})();function Ft(n){return Nu(()=>{let e=bR(n),t=we(Q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===NE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(ij).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Eo.Emulated,styles:n.styles||lr,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ku("NgStandalone"),IR(t);let r=n.dependencies;return t.directiveDefs=GA(r,oj),t.pipeDefs=GA(r,jS),t.id=cj(t),t})}function oj(n){return yo(n)||Aw(n)}function xr(n){return Nu(()=>({type:n.type,bootstrap:n.bootstrap||lr,declarations:n.declarations||lr,imports:n.imports||lr,exports:n.exports||lr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function sj(n,e){if(n==null)return ms;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,a,u,l;Array.isArray(i)?(u=i[0],o=i[1],a=i[2]??o,l=i[3]||null):(o=i,a=i,u=tg.None,l=null),t[o]=[r,u,l],e[o]=a}return t}function aj(n){if(n==null)return ms;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Rt(n){return Nu(()=>{let e=bR(n);return IR(e),e})}function rb(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function bR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ms,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||lr,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:sj(n.inputs,e),outputs:aj(n.outputs),debugInfo:null}}function IR(n){n.features?.forEach(e=>e(n))}function GA(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function cj(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function uj(n){return Object.getPrototypeOf(n.prototype).constructor}function Jn(n){let e=uj(n.type),t=!0,r=[n];for(;e;){let i;if(Ci(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let a=n;a.inputs=cE(n.inputs),a.declaredInputs=cE(n.declaredInputs),a.outputs=cE(n.outputs);let u=i.hostBindings;u&&pj(n,u);let l=i.viewQuery,f=i.contentQueries;if(l&&hj(n,l),f&&fj(n,f),lj(n,i),PS(n.outputs,i.outputs),Ci(i)&&i.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let a=0;a<o.length;a++){let u=o[a];u&&u.ngInherit&&u(n),u===Jn&&(t=!1)}}e=Object.getPrototypeOf(e)}dj(r)}function lj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function dj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=xu(i.hostAttrs,t=xu(t,i.hostAttrs))}}function cE(n){return n===ms?{}:n===lr?[]:n}function hj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function fj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function pj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function mj(n,e,t,r,i,o,a,u){if(t.firstCreatePass){n.mergedAttrs=xu(n.mergedAttrs,n.attrs);let g=n.tView=jE(2,n,i,o,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),g.queries=t.queries.embeddedTView(n))}u&&(n.flags|=u),Cu(n,!1);let l=_j(t,e,n,r);Em()&&KE(t,e,l,n),Ru(l,e);let f=cR(l,e,l,n);e[r+An]=f,zE(e,f),nj(f,n,e)}function gj(n,e,t,r,i,o,a,u,l,f,g){let y=t+An,E;return e.firstCreatePass?(E=og(e,y,4,a||null,u||null),Bw()&&hR(e,n,E,La(e.consts,f),Qx),nx(e,E)):E=e.data[y],mj(E,n,e,t,r,i,o,l),zd(E)&&QE(e,n,E),f!=null&&YE(n,E,g),E}function kt(n,e,t,r,i,o,a,u){let l=Ge(),f=xn(),g=La(f.consts,o);return gj(l,f,n,e,t,r,i,g,void 0,a,u),kt}var _j=vj;function vj(n,e,t,r){return bm(!0),e[Et].createComment("")}var ib=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var ob=new X("");function Ts(n){return!!n&&typeof n.then=="function"}function sb(n){return!!n&&typeof n.subscribe=="function"}var ab=new X("");function cg(n){return Un([{provide:ab,multi:!0,useValue:n}])}var cb=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=$(ab,{optional:!0})??[];injector=$(wt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Pt(this.injector,i);if(Ts(o))t.push(o);else if(sb(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});t.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),th=new X("");function TR(){Vy(()=>{let n="";throw new te(600,n)})}function CR(n){return n.isBoundToModule}var yj=10;var Cs=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=$(Yn);afterRenderManager=$(WE);zonelessEnabled=$(Tm);rootEffectScheduler=$(rE);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new $t;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=$(Di);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ce(t=>!t))}constructor(){$(Ha,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=$(xt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=wt.NULL){return this._injector.get(Ke).run(()=>{ot(10);let a=t instanceof sg;if(!this._injector.get(cb).done){let N="";throw new te(405,N)}let l;a?l=t:l=this._injector.get(eh).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let f=CR(l)?void 0:this._injector.get(Ba),g=r||l.selector,y=l.create(i,[],g,f),E=y.location.nativeElement,I=y.injector.get(ob,null);return I?.registerApplication(E),y.onDestroy(()=>{this.detachView(y.hostView),Gd(this.components,y),I?.unregisterApplication(E)}),this._loadComponent(y),ot(11,y),y})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ot(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ng.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new te(101,!1);let t=Ne(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ne(t),this.afterTick.next(),ot(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ua,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<yj;)ot(14),this.synchronizeOnce(),ot(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!$d(i))continue;let o=r&&!this.zonelessEnabled?0:1;iR(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>$d(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Gd(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(th,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Gd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gd(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ds(n,e,t,r){let i=Ge(),o=Du();if(xi(i,o,e)){let a=xn(),u=Hd();X2(u,i,n,e,t,r)}return Ds}var GX=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function st(n,e,t){let r=Ge(),i=Du();if(xi(r,i,e)){let o=xn(),a=Hd();Kx(a,r,n,e,r[Et],t)}return st}function KA(n,e,t,r,i){JE(e,n,t,i?"class":"style",r)}function V(n,e,t,r){let i=Ge(),o=i[Me],a=n+An,u=o.firstCreatePass?pR(a,i,2,e,Qx,Bw(),t,r):o.data[a];if(Yx(u,i,n,e,DR),zd(u)){let l=i[Me];QE(l,i,u),Tx(l,u,i)}return r!=null&&YE(i,u),V}function U(){let n=xn(),e=sn(),t=Jx(e);return n.firstCreatePass&&mR(n,t),zw(t)&&$w(),jw(),t.classesWithoutHost!=null&&AV(t)&&KA(n,t,Ge(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&xV(t)&&KA(n,t,Ge(),t.stylesWithoutHost,!1),U}function Vt(n,e,t,r){return V(n,e,t,r),U(),Vt}function Yr(n,e,t,r){let i=Ge(),o=i[Me],a=n+An,u=o.firstCreatePass?FU(a,o,2,e,t,r):o.data[a];return Yx(u,i,n,e,DR),r!=null&&YE(i,u),Yr}function Ri(){let n=sn(),e=Jx(n);return zw(e)&&$w(),jw(),Ri}function ug(n,e,t,r){return Yr(n,e,t,r),Ri(),ug}var DR=(n,e,t,r,i)=>(bm(!0),Px(e[Et],r,_A()));function Rr(){return Ge()}function Lu(n,e,t){let r=Ge(),i=Du();if(xi(r,i,e)){let o=xn(),a=Hd();Zx(a,r,n,e,r[Et],t)}return Lu}var nh="en-US";var wj=nh;function SR(n){typeof n=="string"&&(wj=n.toLowerCase().replace(/_/g,"-"))}function se(n,e,t){let r=Ge(),i=xn(),o=sn();return AR(i,r,r[Et],o,n,e,t),se}function Wa(n,e,t){let r=Ge(),i=xn(),o=sn();return(o.type&3||t)&&vR(o,i,r,t,r[Et],n,e,Mm(o,r,e)),Wa}function AR(n,e,t,r,i,o,a){let u=!0,l=null;if((r.type&3||a)&&(l??=Mm(r,e,o),vR(r,n,e,a,t,i,o,l)&&(u=!1)),u){let f=r.outputs?.[i],g=r.hostDirectiveOutputs?.[i];if(g&&g.length)for(let y=0;y<g.length;y+=2){let E=g[y],I=g[y+1];l??=Mm(r,e,o),HA(r,e,E,I,i,l)}if(f&&f.length)for(let y of f)l??=Mm(r,e,o),HA(r,e,y,i,i,l)}}function Ee(n=1){return gA(n)}function Sm(n,e){return n<<17|e<<2}function za(n){return n>>17&32767}function Ej(n){return(n&2)==2}function bj(n,e){return n&131071|e<<17}function AE(n){return n|2}function Pu(n){return(n&131068)>>2}function uE(n,e){return n&-131069|e<<2}function Ij(n){return(n&1)===1}function xE(n){return n|1}function Tj(n,e,t,r,i,o){let a=o?e.classBindings:e.styleBindings,u=za(a),l=Pu(a);n[r]=t;let f=!1,g;if(Array.isArray(t)){let y=t;g=y[1],(g===null||wu(y,g)>0)&&(f=!0)}else g=t;if(i)if(l!==0){let E=za(n[u+1]);n[r+1]=Sm(E,u),E!==0&&(n[E+1]=uE(n[E+1],r)),n[u+1]=bj(n[u+1],r)}else n[r+1]=Sm(u,0),u!==0&&(n[u+1]=uE(n[u+1],r)),u=r;else n[r+1]=Sm(l,0),u===0?u=r:n[l+1]=uE(n[l+1],r),l=r;f&&(n[r+1]=AE(n[r+1])),ZA(n,g,r,!0),ZA(n,g,r,!1),Cj(e,g,n,r,o),a=Sm(u,l),o?e.classBindings=a:e.styleBindings=a}function Cj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&wu(o,e)>=0&&(t[r+1]=xE(t[r+1]))}function ZA(n,e,t,r){let i=n[t+1],o=e===null,a=r?za(i):Pu(i),u=!1;for(;a!==0&&(u===!1||o);){let l=n[a],f=n[a+1];Dj(l,e)&&(u=!0,n[a+1]=r?xE(f):AE(f)),a=r?za(f):Pu(f)}u&&(n[t+1]=r?AE(i):xE(i))}function Dj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?wu(n,e)>=0:!1}function jn(n,e){return Sj(n,e,null,!0),jn}function Sj(n,e,t,r){let i=Ge(),o=xn(),a=Kw(2);if(o.firstUpdatePass&&xj(o,n,a,r),e!==Qr&&xi(i,a,e)){let u=o.data[ws()];kj(o,u,i,i[Et],n,i[a+1]=Oj(e,t),r,a)}}function Aj(n,e){return e>=n.expandoStartIndex}function xj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ws()],a=Aj(n,t);Lj(o,r)&&e===null&&!a&&(e=!1),e=Rj(i,o,e,r),Tj(i,o,e,t,a,r)}}function Rj(n,e,t,r){let i=hA(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=lE(null,n,e,t,r),t=Qd(t,e.attrs,r),o=null);else{let a=e.directiveStylingLast;if(a===-1||n[a]!==i)if(t=lE(i,n,e,t,r),o===null){let l=Mj(n,e,r);l!==void 0&&Array.isArray(l)&&(l=lE(null,n,e,l[1],r),l=Qd(l,e.attrs,r),Pj(n,e,r,l))}else o=Nj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Mj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Pu(r)!==0)return n[za(r)]}function Pj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[za(i)]=r}function Nj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let a=n[o].hostAttrs;r=Qd(r,a,t)}return Qd(r,e.attrs,t)}function lE(n,e,t,r,i){let o=null,a=t.directiveEnd,u=t.directiveStylingLast;for(u===-1?u=t.directiveStart:u++;u<a&&(o=e[u],r=Qd(r,o.hostAttrs,i),o!==n);)u++;return n!==null&&(t.directiveStylingLast=u),r}function Qd(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?i=a:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),US(n,a,t?!0:e[++o]))}return n===void 0?null:n}function kj(n,e,t,r,i,o,a,u){if(!(e.type&3))return;let l=n.data,f=l[u+1],g=Ij(f)?QA(l,e,t,i,Pu(f),a):void 0;if(!Km(g)){Km(o)||Ej(f)&&(o=QA(l,null,t,i,u,a));let y=Ow(ws(),t);H2(r,a,y,i,o)}}function QA(n,e,t,r,i,o){let a=e===null,u;for(;i>0;){let l=n[i],f=Array.isArray(l),g=f?l[1]:l,y=g===null,E=t[i+1];E===Qr&&(E=y?lr:void 0);let I=y?fm(E,r):g===r?E:void 0;if(f&&!Km(I)&&(I=fm(l,r)),Km(I)&&(u=I,a))return u;let N=n[i+1];i=a?za(N):Pu(N)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(u=fm(l,r))}return u}function Km(n){return n!==void 0}function Oj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=go(Jd(n)))),n}function Lj(n,e){return(n.flags&(e?8:16))!==0}function H(n,e=""){let t=Ge(),r=xn(),i=n+An,o=r.firstCreatePass?og(r,i,1,e,null):r.data[i],a=Fj(r,t,o,e,n);t[i]=a,Em()&&KE(r,t,a,o),Cu(o,!1)}var Fj=(n,e,t,r,i)=>(bm(!0),h2(e[Et],r));function Vj(n,e,t,r=""){return xi(n,Du(),t)?e+bi(t)+r:Qr}function Uj(n,e,t,r,i,o,a,u,l,f,g,y=""){let E=aA(),I=UU(n,E,t,i,a,l);return I=xi(n,E+4,g)||I,Kw(5),I?e+bi(t)+r+bi(i)+o+bi(a)+u+bi(l)+f+bi(g)+y:Qr}function cn(n){return Ut("",n),cn}function Ut(n,e,t){let r=Ge(),i=Vj(r,n,e,t);return i!==Qr&&xR(r,ws(),i),Ut}function lg(n,e,t,r,i,o,a,u,l,f,g){let y=Ge(),E=Uj(y,n,e,t,r,i,o,a,u,l,f,g);return E!==Qr&&xR(y,ws(),E),lg}function xR(n,e,t){let r=Ow(e,n);f2(n[Et],r,t)}function Ze(n,e,t){eE(e)&&(e=e());let r=Ge(),i=Du();if(xi(r,i,e)){let o=xn(),a=Hd();Kx(a,r,n,e,r[Et],t)}return Ze}function Xe(n,e){let t=eE(n);return t&&n.set(e),t}function Qe(n,e){let t=Ge(),r=xn(),i=sn();return AR(r,t,t[Et],i,n,e),Qe}function jj(n,e,t){let r=xn();if(r.firstCreatePass){let i=Ci(n);RE(t,r.data,r.blueprint,i,!0),RE(e,r.data,r.blueprint,i,!1)}}function RE(n,e,t,r,i){if(n=yn(n),Array.isArray(n))for(let o=0;o<n.length;o++)RE(n[o],e,t,r,i);else{let o=xn(),a=Ge(),u=sn(),l=Sa(n)?n:yn(n.provide),f=Mw(n),g=u.providerIndexes&1048575,y=u.directiveStart,E=u.providerIndexes>>20;if(Sa(n)||!n.multi){let I=new Va(f,i,ue,null),N=hE(l,e,i?g:g+E,y);N===-1?(pE(Lm(u,a),o,l),dE(o,n,e.length),e.push(l),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(I),a.push(I)):(t[N]=I,a[N]=I)}else{let I=hE(l,e,g+E,y),N=hE(l,e,g,g+E),q=I>=0&&t[I],F=N>=0&&t[N];if(i&&!F||!i&&!q){pE(Lm(u,a),o,l);let W=$j(i?zj:Bj,t.length,i,r,f,n);!i&&F&&(t[N].providerFactory=W),dE(o,n,e.length,0),e.push(l),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),t.push(W),a.push(W)}else{let W=RR(t[i?N:I],f,!i&&r);dE(o,n,I>-1?I:N,W)}!i&&r&&F&&t[N].componentProviders++}}}function dE(n,e,t,r){let i=Sa(e),o=HS(e);if(i||o){let l=(o?yn(e.useClass):e).prototype.ngOnDestroy;if(l){let f=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let g=f.indexOf(t);g===-1?f.push(t,[r,l]):f[g+1].push(r,l)}else f.push(t,l)}}}function RR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function hE(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Bj(n,e,t,r,i){return ME(this.multi,[])}function zj(n,e,t,r,i){let o=this.multi,a;if(this.providerFactory){let u=this.providerFactory.componentProviders,l=Fm(r,r[Me],this.providerFactory.index,i);a=l.slice(0,u),ME(o,a);for(let f=u;f<l.length;f++)a.push(l[f])}else a=[],ME(o,a);return a}function ME(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function $j(n,e,t,r,i,o){let a=new Va(n,t,ue,null);return a.multi=[],a.index=e,a.componentProviders=0,RR(a,i,r&&!t),a}function Mi(n,e=[]){return t=>{t.providersResolver=(r,i)=>jj(r,i?i(n):n,e)}}function Hj(n,e){let t=n[e];return t===Qr?void 0:t}function qj(n,e,t,r,i,o){let a=e+t;return xi(n,a,i)?VU(n,a+1,o?r.call(o,i):r(i)):Hj(n,a+1)}function ub(n,e){let t=xn(),r,i=n+An;t.firstCreatePass?(r=Wj(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=fs(r.type,!0)),a,u=Vn(ue);try{let l=Om(!1),f=o();return Om(l),Lw(t,Ge(),i,f),f}finally{Vn(u)}}function Wj(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function lb(n,e,t){let r=n+An,i=Ge(),o=ZS(i,r);return Gj(i,r)?qj(i,sA(),e,o.transform,t,o):o.transform(t)}function Gj(n,e){return n[Me].data[e].pure}var Zm=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},db=(()=>{class n{compileModuleSync(t){return new Gm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Sw(t),o=Rx(i.declarations).reduce((a,u)=>{let l=yo(u);return l&&a.push(new ja(l)),a},[]);return new Zm(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kj=(()=>{class n{zone=$(Ke);changeDetectionScheduler=$(_o);applicationRef=$(Cs);applicationErrorHandler=$(Yn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ke(we(Q({},PR()),{scheduleInRootZone:t})),[{provide:Ke,useFactory:n},{provide:gs,multi:!0,useFactory:()=>{let r=$(Kj,{optional:!0});return()=>r.initialize()}},{provide:gs,multi:!0,useFactory:()=>{let r=$(Zj);return()=>{r.initialize()}}},e===!0?{provide:tE,useValue:!0}:[],{provide:nE,useValue:t??Vx},{provide:Yn,useFactory:()=>{let r=$(Ke),i=$(xt),o;return a=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw a}):(o??=i.get($r),o.handleError(a))})}}}]}function PR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Zj=(()=>{class n{subscription=new Mt;initialized=!1;zone=$(Ke);pendingTasks=$(Di);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ke.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ke.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var NR=(()=>{class n{applicationErrorHandler=$(Yn);appRef=$(Cs);taskService=$(Di);ngZone=$(Ke);zonelessEnabled=$(Tm);tracing=$(Ha,{optional:!0});disableScheduling=$(tE,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&($(nE,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Bm||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?MA:Ux;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,MA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qj(){return typeof $localize<"u"&&$localize.locale||nh}var dg=new X("",{providedIn:"root",factory:()=>$(dg,{optional:!0,skipSelf:!0})||Qj()});function un(n){return xS(n)}function Fu(n,e){return Rp(n,e?.equal)}var kR=class{[Dn];constructor(e){this[Dn]=e}destroy(){this[Dn].destroy()}};var UR=Symbol("InputSignalNode#UNSET"),fB=we(Q({},Mp),{transformFn:void 0,applyValueToInputSignal(n,e){iu(n,e)}});function jR(n,e){let t=Object.create(fB);t.value=n,t.transformFn=e?.transform;function r(){if(tu(t),t.value===UR){let i=null;throw new te(-950,i)}return t.value}return r[Dn]=t,r}var fg=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Yd(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pB=new X("");pB.__NG_ELEMENT_ID__=n=>{let e=sn();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new te(204,!1)};function OR(n,e){return jR(n,e)}function mB(n){return jR(UR,n)}var BR=(OR.required=mB,OR);var hb=new X(""),gB=new X("");function rh(n){return!n.moduleRef}function _B(n){let e=rh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ke);return t.run(()=>{rh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Yn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),rh(n)){let o=()=>e.destroy(),a=n.platformInjector.get(hb);a.add(o),e.onDestroy(()=>{i.unsubscribe(),a.delete(o)})}else{let o=()=>n.moduleRef.destroy(),a=n.platformInjector.get(hb);a.add(o),n.moduleRef.onDestroy(()=>{Gd(n.allPlatformModules,n.moduleRef),i.unsubscribe(),a.delete(o)})}return yB(r,t,()=>{let o=e.get(Di),a=o.add(),u=e.get(cb);return u.runInitializers(),u.donePromise.then(()=>{let l=e.get(dg,nh);if(SR(l||nh),!e.get(gB,!0))return rh(n)?e.get(Cs):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(rh(n)){let g=e.get(Cs);return n.rootComponent!==void 0&&g.bootstrap(n.rootComponent),g}else return vB?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(a))})})}var vB;function yB(n,e,t){try{let r=t();return Ts(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var hg=null;function wB(n=[],e){return wt.create({name:e,providers:[{provide:kd,useValue:"platform"},{provide:hb,useValue:new Set([()=>hg=null])},...n]})}function EB(n=[]){if(hg)return hg;let e=wB(n);return hg=e,TR(),bB(e),e}function bB(n){let e=n.get(Jm,null);Pt(n,()=>{e?.forEach(t=>t())})}function _b(){return!1}var Ga=(()=>{class n{static __NG_ELEMENT_ID__=IB}return n})();function IB(n){return TB(sn(),Ge(),(n&16)===16)}function TB(n,e,t){if(ys(n)&&!t){let r=Ar(n.index,e);return new bs(r,r)}else if(n.type&175){let r=e[Dr];return new bs(r,e)}return null}var fb=class{constructor(){}supports(e){return nb(e)}create(e){return new pb(e)}},CB=(n,e)=>e,pb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||CB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let a=!r||t&&t.currentIndex<LR(r,i,o)?t:r,u=LR(a,i,o),l=a.currentIndex;if(a===r)i--,r=r._nextRemoved;else if(t=t._next,a.previousIndex==null)i++;else{o||(o=[]);let f=u-i,g=l-i;if(f!=g){for(let E=0;E<f;E++){let I=E<o.length?o[E]:o[E]=0,N=I+E;g<=N&&N<f&&(o[E]=I+1)}let y=a.previousIndex;o[y]=g-f}}u!==l&&e(a,u,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!nb(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,a;if(Array.isArray(e)){this.length=e.length;for(let u=0;u<this.length;u++)o=e[u],a=this._trackByFn(u,o),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,o,a,u),r=!0):(r&&(t=this._verifyReinsertion(t,o,a,u)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,gR(e,u=>{a=this._trackByFn(i,u),t===null||!Object.is(t.trackById,a)?(t=this._mismatch(t,u,a,i),r=!0):(r&&(t=this._verifyReinsertion(t,u,a,i)),Object.is(t.item,u)||this._addIdentityChange(t,u)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new mb(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new pg),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},mb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},gb=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},pg=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new gb,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function LR(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function FR(){return new vb([new fb])}var vb=(()=>{class n{factories;static \u0275prov=re({token:n,providedIn:"root",factory:FR});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=$(n,{optional:!0,skipSelf:!0});return n.create(t,r||FR())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();function zR(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ot(8);try{let o=i?.injector??EB(r),a=[MR({}),{provide:_o,useExisting:NR},yA,...t||[]],u=new Zd({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1});return _B({r3Injector:u.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ot(9)}}function Ss(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function $R(n){let e=yo(n);if(!e)return null;let t=new ja(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var WR=null;function Mr(){return WR}function yb(n){WR??=n}var ih=class{},oh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(GR),providedIn:"platform"})}return n})(),wb=new X(""),GR=(()=>{class n extends oh{_location;_history;_doc=$(Nt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Mr().getBaseHref(this._doc)}onPopState(t){let r=Mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Mr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function mg(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function HR(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Jr(n){return n&&n[0]!=="?"?`?${n}`:n}var Xr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(_g),providedIn:"root"})}return n})(),gg=new X(""),_g=(()=>{class n extends Xr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??$(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return mg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Jr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Jr(o));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Jr(o));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(oh),de(gg,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),As=(()=>{class n{_subject=new $t;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=AB(HR(qR(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Jr(r))}normalize(t){return n.stripTrailingSlash(SB(this._basePath,qR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Jr;static joinWithSlash=mg;static stripTrailingSlash=HR;static \u0275fac=function(r){return new(r||n)(de(Xr))};static \u0275prov=re({token:n,factory:()=>DB(),providedIn:"root"})}return n})();function DB(){return new As(de(Xr))}function SB(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qR(n){return n.replace(/\/index.html$/,"")}function AB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Eb=(()=>{class n extends Xr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=mg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let a=this.prepareExternalUrl(i+Jr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,o){let a=this.prepareExternalUrl(i+Jr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(de(oh),de(gg,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var vg=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},xs=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,a)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new vg(i.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let u=r.get(o);r.move(u,a),KR(u,i)}});for(let i=0,o=r.length;i<o;i++){let u=r.get(i).context;u.index=i,u.count=o,u.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);KR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue(qa),ue(Xd),ue(vb))};static \u0275dir=Rt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function KR(n,e){n.context.$implicit=e.item}var Ka=(()=>{class n{_viewContainer;_context=new yg;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ZR(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ZR(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(ue(qa),ue(Xd))};static \u0275dir=Rt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),yg=class{$implicit=null;ngIf=null};function ZR(n,e){if(n&&!n.createEmbeddedView)throw new te(2020,!1)}function xB(n,e){return new te(2100,!1)}var bb=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw xB(n,t);return t.toUpperCase()}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=rb({name:"uppercase",type:n,pure:!0})}return n})();var Rn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({})}return n})();function sh(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Za=class{};var QR="browser";var YR=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new Ib($(Nt),window)})}return n})(),Ib=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(we(Q({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=RB(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(vo(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(we(Q({},t),{left:i-a[0],top:o-a[1]}))}};function RB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let a=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}var ch=class{_doc;constructor(e){this._doc=e}manager},wg=(()=>{class n extends ch{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(de(Nt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),bg=new X(""),Ab=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(a=>{a.manager=this});let i=t.filter(a=>!(a instanceof wg));this._plugins=i.slice().reverse();let o=t.find(a=>a instanceof wg);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(de(bg),de(Ke))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Tb="ng-app-id";function JR(n){for(let e of n)e.remove()}function XR(n,e){let t=e.createElement("style");return t.textContent=n,t}function MB(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Tb}="${e}"],link[${Tb}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Tb),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Db(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var xb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,MB(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,XR);r?.forEach(i=>this.addUsage(i,this.external,Db))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(a=>this.addElement(a,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(JR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])JR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,XR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Db(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(de(Nt),de(Ym),de(Xm,8),de($a))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),Cb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Rb=/%COMP%/g;var tM="%COMP%",PB=`_nghost-${tM}`,NB=`_ngcontent-${tM}`,kB=!0,OB=new X("",{providedIn:"root",factory:()=>kB});function LB(n){return NB.replace(Rb,n)}function FB(n){return PB.replace(Rb,n)}function nM(n,e){return e.map(t=>t.replace(Rb,n))}var Mb=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,a,u,l=null,f=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=a,this.ngZone=u,this.nonce=l,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new uh(t,a,u,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Eg?i.applyToHost(t):i instanceof lh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,f=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer,E=this.tracingService;switch(r.encapsulation){case Eo.Emulated:o=new Eg(l,f,r,this.appId,g,a,u,y,E);break;case Eo.ShadowDom:return new Sb(l,f,t,r,a,u,this.nonce,y,E);default:o=new lh(l,f,r,g,a,u,y,E);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(de(Ab),de(xb),de(Ym),de(OB),de(Nt),de(Ke),de(Xm),de(Ha,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),uh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Cb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(eM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(eM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Cb[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Cb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ai.DashCase|Ai.Important)?e.style.setProperty(t,r,i&Ai.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ai.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Mr().getGlobalEventTarget(this.doc,e),!e))throw new te(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function eM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Sb=class extends uh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,a,u,l,f){super(e,o,a,l,f),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let g=i.styles;g=nM(i.id,g);for(let E of g){let I=document.createElement("style");u&&I.setAttribute("nonce",u),I.textContent=E,this.shadowRoot.appendChild(I)}let y=i.getExternalStyles?.();if(y)for(let E of y){let I=Db(E,o);u&&I.setAttribute("nonce",u),this.shadowRoot.appendChild(I)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},lh=class extends uh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,a,u,l,f){super(e,o,a,u,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let g=r.styles;this.styles=f?nM(f,g):g,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Mu.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Eg=class extends lh{contentAttr;hostAttr;constructor(e,t,r,i,o,a,u,l,f){let g=i+"-"+r.id;super(e,t,r,o,a,u,l,f,g),this.contentAttr=LB(g),this.hostAttr=FB(g)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Ig=class n extends ih{supportsDOMEvents=!0;static makeCurrent(){yb(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=VB();return t==null?null:UB(t)}resetBaseElement(){dh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sh(document.cookie,e)}},dh=null;function VB(){return dh=dh||document.head.querySelector("base"),dh?dh.getAttribute("href"):null}function UB(n){return new URL(n,document.baseURI).pathname}var jB=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),rM=["alt","control","meta","shift"],BB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},iM=(()=>{class n extends ch{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Mr().onAndCancel(t,a.domEventName,u,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),rM.forEach(f=>{let g=r.indexOf(f);g>-1&&(r.splice(g,1),a+=f+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=a,l}static matchEventFullKeyCode(t,r){let i=BB[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rM.forEach(a=>{if(a!==i){let u=zB[a];u(t)&&(o+=a+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(de(Nt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function Pb(n,e,t){let r=Q({rootComponent:n,platformRef:t?.platformRef},$B(e));return zR(r)}function $B(n){return{appProviders:[...KB,...n?.providers??[]],platformProviders:GB}}function HB(){Ig.makeCurrent()}function qB(){return new $r}function WB(){return kE(document),document}var GB=[{provide:$a,useValue:QR},{provide:Jm,useValue:HB,multi:!0},{provide:Nt,useFactory:WB}];var KB=[{provide:kd,useValue:"root"},{provide:$r,useFactory:qB},{provide:bg,useClass:wg,multi:!0,deps:[Nt]},{provide:bg,useClass:iM,multi:!0,deps:[Nt]},Mb,xb,Ab,{provide:Ua,useExisting:Mb},{provide:Za,useClass:jB},[]];var ju=class{},hh=class{},Rs=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let a=this.headers.get(t);if(!a)return;a=a.filter(u=>o.indexOf(u)===-1),a.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Cg=class{encodeKey(e){return oM(e)}encodeValue(e){return oM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function ZB(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[a,u]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=t.get(a)||[];l.push(u),t.set(a,l)}),t}var QB=/%(\d[a-f0-9])/gi,YB={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oM(n){return encodeURIComponent(n).replace(QB,(e,t)=>YB[t]??e)}function Tg(n){return`${n}`}var Co=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Cg,e.fromString){if(e.fromObject)throw new te(2805,!1);this.map=ZB(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Tg):[Tg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Tg(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Tg(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Dg=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function JB(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function sM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function aM(n){return typeof Blob<"u"&&n instanceof Blob}function cM(n){return typeof FormData<"u"&&n instanceof FormData}function XB(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var uM="Content-Type",lM="Accept",hM="X-Request-URL",fM="text/plain",pM="application/json",e3=`${pM}, ${fM}, */*`,Vu=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(JB(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new te(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Rs,this.context??=new Dg,!this.params)this.params=new Co,this.urlWithParams=t;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=t;else{let u=t.indexOf("?"),l=u===-1?"?":u<t.length-1?"&":"";this.urlWithParams=t+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||sM(this.body)||aM(this.body)||cM(this.body)||XB(this.body)?this.body:this.body instanceof Co?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||cM(this.body)?null:aM(this.body)?this.body.type||null:sM(this.body)?null:typeof this.body=="string"?fM:this.body instanceof Co?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?pM:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,a=e.priority||this.priority,u=e.cache||this.cache,l=e.mode||this.mode,f=e.redirect||this.redirect,g=e.credentials||this.credentials,y=e.referrer||this.referrer,E=e.integrity||this.integrity,I=e.transferCache??this.transferCache,N=e.timeout??this.timeout,q=e.body!==void 0?e.body:this.body,F=e.withCredentials??this.withCredentials,W=e.reportProgress??this.reportProgress,oe=e.headers||this.headers,ae=e.params||this.params,le=e.context??this.context;return e.setHeaders!==void 0&&(oe=Object.keys(e.setHeaders).reduce((Ye,be)=>Ye.set(be,e.setHeaders[be]),oe)),e.setParams&&(ae=Object.keys(e.setParams).reduce((Ye,be)=>Ye.set(be,e.setParams[be]),ae)),new n(t,r,q,{params:ae,headers:oe,context:le,reportProgress:W,responseType:i,withCredentials:F,transferCache:I,keepalive:o,cache:u,priority:a,timeout:N,mode:l,redirect:f,credentials:g,referrer:y,integrity:E})}},Qa=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Qa||{}),Bu=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Rs,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},Sg=class n extends Bu{constructor(e={}){super(e)}type=Qa.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},fh=class n extends Bu{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Qa.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},Uu=class extends Bu{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},t3=200,n3=204;function Nb(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var xg=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Vu)o=t;else{let l;i.headers instanceof Rs?l=i.headers:l=new Rs(i.headers);let f;i.params&&(i.params instanceof Co?f=i.params:f=new Co({fromObject:i.params})),o=new Vu(t,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:f,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let a=pe(o).pipe(Ei(l=>this.handler.handle(l)));if(t instanceof Vu||i.observe==="events")return a;let u=a.pipe(_n(l=>l instanceof fh));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(Ce(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new te(2806,!1);return l.body}));case"blob":return u.pipe(Ce(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new te(2807,!1);return l.body}));case"text":return u.pipe(Ce(l=>{if(l.body!==null&&typeof l.body!="string")throw new te(2808,!1);return l.body}));case"json":default:return u.pipe(Ce(l=>l.body))}case"response":return u;default:throw new te(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Co().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Nb(i,r))}post(t,r,i={}){return this.request("POST",t,Nb(i,r))}put(t,r,i={}){return this.request("PUT",t,Nb(i,r))}static \u0275fac=function(r){return new(r||n)(de(ju))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var r3=new X("");function mM(n,e){return e(n)}function i3(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function o3(n,e,t){return(r,i)=>Pt(t,()=>e(r,o=>n(o,i)))}var gM=new X(""),Ob=new X(""),_M=new X(""),Lb=new X("",{providedIn:"root",factory:()=>!0});function s3(){let n=null;return(e,t)=>{n===null&&(n=($(gM,{optional:!0})??[]).reduceRight(i3,mM));let r=$(wo);if($(Lb)){let o=r.add();return n(e,t).pipe(ds(o))}else return n(e,t)}}var Ag=(()=>{class n extends ju{backend;injector;chain=null;pendingTasks=$(wo);contributeToStability=$(Lb);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Ob),...this.injector.get(_M,[])]));this.chain=r.reduceRight((i,o)=>o3(i,o,this.injector),mM)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(ds(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(de(hh),de(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var a3=/^\)\]\}',?\n/,c3=RegExp(`^${hM}:`,"m");function u3(n){return"responseURL"in n&&n.responseURL?n.responseURL:c3.test(n.getAllResponseHeaders())?n.getResponseHeader(hM):null}var kb=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new te(-2800,!1);let r=this.xhrFactory;return pe(null).pipe(vn(()=>new Te(o=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((F,W)=>a.setRequestHeader(F,W.join(","))),t.headers.has(lM)||a.setRequestHeader(lM,e3),!t.headers.has(uM)){let F=t.detectContentTypeHeader();F!==null&&a.setRequestHeader(uM,F)}if(t.timeout&&(a.timeout=t.timeout),t.responseType){let F=t.responseType.toLowerCase();a.responseType=F!=="json"?F:"text"}let u=t.serializeBody(),l=null,f=()=>{if(l!==null)return l;let F=a.statusText||"OK",W=new Rs(a.getAllResponseHeaders()),oe=u3(a)||t.url;return l=new Sg({headers:W,status:a.status,statusText:F,url:oe}),l},g=()=>{let{headers:F,status:W,statusText:oe,url:ae}=f(),le=null;W!==n3&&(le=typeof a.response>"u"?a.responseText:a.response),W===0&&(W=le?t3:0);let Ye=W>=200&&W<300;if(t.responseType==="json"&&typeof le=="string"){let be=le;le=le.replace(a3,"");try{le=le!==""?JSON.parse(le):null}catch(R){le=be,Ye&&(Ye=!1,le={error:R,text:le})}}Ye?(o.next(new fh({body:le,headers:F,status:W,statusText:oe,url:ae||void 0})),o.complete()):o.error(new Uu({error:le,headers:F,status:W,statusText:oe,url:ae||void 0}))},y=F=>{let{url:W}=f(),oe=new Uu({error:F,status:a.status||0,statusText:a.statusText||"Unknown Error",url:W||void 0});o.error(oe)},E=y;t.timeout&&(E=F=>{let{url:W}=f(),oe=new Uu({error:new DOMException("Request timed out","TimeoutError"),status:a.status||0,statusText:a.statusText||"Request timeout",url:W||void 0});o.error(oe)});let I=!1,N=F=>{I||(o.next(f()),I=!0);let W={type:Qa.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(W.total=F.total),t.responseType==="text"&&a.responseText&&(W.partialText=a.responseText),o.next(W)},q=F=>{let W={type:Qa.UploadProgress,loaded:F.loaded};F.lengthComputable&&(W.total=F.total),o.next(W)};return a.addEventListener("load",g),a.addEventListener("error",y),a.addEventListener("timeout",E),a.addEventListener("abort",y),t.reportProgress&&(a.addEventListener("progress",N),u!==null&&a.upload&&a.upload.addEventListener("progress",q)),a.send(u),o.next({type:Qa.Sent}),()=>{a.removeEventListener("error",y),a.removeEventListener("abort",y),a.removeEventListener("load",g),a.removeEventListener("timeout",E),t.reportProgress&&(a.removeEventListener("progress",N),u!==null&&a.upload&&a.upload.removeEventListener("progress",q)),a.readyState!==a.DONE&&a.abort()}})))}static \u0275fac=function(r){return new(r||n)(de(Za))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),vM=new X(""),l3="XSRF-TOKEN",d3=new X("",{providedIn:"root",factory:()=>l3}),h3="X-XSRF-TOKEN",f3=new X("",{providedIn:"root",factory:()=>h3}),ph=class{},p3=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=sh(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(de(Nt),de(d3))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),m3=/^(?:https?:)?\/\//i;function g3(n,e){if(!$(vM)||n.method==="GET"||n.method==="HEAD"||m3.test(n.url))return e(n);let t=$(ph).getToken(),r=$(f3);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}var Fb=(function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n})(Fb||{});function _3(n,e){return{\u0275kind:n,\u0275providers:e}}function yM(...n){let e=[xg,kb,Ag,{provide:ju,useExisting:Ag},{provide:hh,useFactory:()=>$(r3,{optional:!0})??$(kb)},{provide:Ob,useValue:g3,multi:!0},{provide:vM,useValue:!0},{provide:ph,useClass:p3}];for(let t of n)e.push(...t.\u0275providers);return Un(e)}var dM=new X("");function wM(){return _3(Fb.LegacyInterceptors,[{provide:dM,useFactory:s3},{provide:Ob,useExisting:dM,multi:!0}])}var Vb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({providers:[yM(wM())]})}return n})();var EM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(de(Nt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Se="primary",Sh=Symbol("RouteTitle"),$b=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Xa(n){return new $b(n)}function xM(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],u=n[o];if(a[0]===":")i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function w3(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Pi(n[t],e[t]))return!1;return!0}function Pi(n,e){let t=n?Hb(n):void 0,r=e?Hb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!RM(n[i],e[i]))return!1;return!0}function Hb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function RM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function MM(n){return n.length>0?n[n.length-1]:null}function Do(n){return Jy(n)?n:Ts(n)?gt(Promise.resolve(n)):pe(n)}var E3={exact:NM,subset:kM},PM={exact:b3,subset:I3,ignored:()=>!0};function bM(n,e,t){return E3[t.paths](n.root,e.root,t.matrixParams)&&PM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function b3(n,e){return Pi(n,e)}function NM(n,e,t){if(!Ya(n.segments,e.segments)||!Pg(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!NM(n.children[r],e.children[r],t))return!1;return!0}function I3(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>RM(n[t],e[t]))}function kM(n,e,t){return OM(n,e,e.segments,t)}function OM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ya(i,t)||e.hasChildren()||!Pg(i,t,r))}else if(n.segments.length===t.length){if(!Ya(n.segments,t)||!Pg(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!kM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ya(n.segments,i)||!Pg(n.segments,i,r)||!n.children[Se]?!1:OM(n.children[Se],e,o,r)}}function Pg(n,e,t){return e.every((r,i)=>PM[t](n[i].parameters,r.parameters))}var ki=class{root;queryParams;fragment;_queryParamMap;constructor(e=new et([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Xa(this.queryParams),this._queryParamMap}toString(){return D3.serialize(this)}},et=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ng(this)}},Ms=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Xa(this.parameters),this._parameterMap}toString(){return FM(this)}};function T3(n,e){return Ya(n,e)&&n.every((t,r)=>Pi(t.parameters,e[r].parameters))}function Ya(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function C3(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Se&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Se&&(t=t.concat(e(i,r)))}),t}var ec=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new Ps,providedIn:"root"})}return n})(),Ps=class{parse(e){let t=new Wb(e);return new ki(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${mh(e.root,!0)}`,r=x3(e.queryParams),i=typeof e.fragment=="string"?`#${S3(e.fragment)}`:"";return`${t}${r}${i}`}},D3=new Ps;function Ng(n){return n.segments.map(e=>FM(e)).join("/")}function mh(n,e){if(!n.hasChildren())return Ng(n);if(e){let t=n.children[Se]?mh(n.children[Se],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Se&&r.push(`${i}:${mh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=C3(n,(r,i)=>i===Se?[mh(n.children[Se],!1)]:[`${i}:${mh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Se]!=null?`${Ng(n)}/${t[0]}`:`${Ng(n)}/(${t.join("//")})`}}function LM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rg(n){return LM(n).replace(/%3B/gi,";")}function S3(n){return encodeURI(n)}function qb(n){return LM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kg(n){return decodeURIComponent(n)}function IM(n){return kg(n.replace(/\+/g,"%20"))}function FM(n){return`${qb(n.path)}${A3(n.parameters)}`}function A3(n){return Object.entries(n).map(([e,t])=>`;${qb(e)}=${qb(t)}`).join("")}function x3(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Rg(t)}=${Rg(i)}`).join("&"):`${Rg(t)}=${Rg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var R3=/^[^\/()?;#]+/;function Ub(n){let e=n.match(R3);return e?e[0]:""}var M3=/^[^\/()?;=#]+/;function P3(n){let e=n.match(M3);return e?e[0]:""}var N3=/^[^=?&#]+/;function k3(n){let e=n.match(N3);return e?e[0]:""}var O3=/^[^&#]+/;function L3(n){let e=n.match(O3);return e?e[0]:""}var Wb=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Se]=new et(e,t)),r}parseSegment(){let e=Ub(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Ms(kg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=P3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ub(this.remaining);i&&(r=i,this.capture(r))}e[kg(t)]=kg(r)}parseQueryParam(e){let t=k3(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=L3(this.remaining);a&&(r=a,this.capture(r))}let i=IM(t),o=IM(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ub(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Se);let a=this.parseChildren();t[o??Se]=Object.keys(a).length===1&&a[Se]?a[Se]:new et([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function VM(n){return n.segments.length>0?new et([],{[Se]:n}):n}function UM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=UM(i);if(r===Se&&o.segments.length===0&&o.hasChildren())for(let[a,u]of Object.entries(o.children))e[a]=u;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new et(n.segments,e);return F3(t)}function F3(n){if(n.numberOfChildren===1&&n.children[Se]){let e=n.children[Se];return new et(n.segments.concat(e.segments),e.children)}return n}function Ns(n){return n instanceof ki}function jM(n,e,t=null,r=null){let i=BM(n);return zM(i,e,t,r)}function BM(n){let e;function t(o){let a={};for(let l of o.children){let f=t(l);a[l.outlet]=f}let u=new et(o.url,a);return o===n&&(e=u),u}let r=t(n.root),i=VM(r);return e??i}function zM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return jb(i,i,i,t,r);let o=V3(e);if(o.toRoot())return jb(i,i,new et([],{}),t,r);let a=U3(o,i,n),u=a.processChildren?_h(a.segmentGroup,a.index,o.commands):HM(a.segmentGroup,a.index,o.commands);return jb(i,a.segmentGroup,u,t,r)}function Og(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yh(n){return typeof n=="object"&&n!=null&&n.outlets}function jb(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,f])=>{o[l]=Array.isArray(f)?f.map(g=>`${g}`):`${f}`});let a;n===e?a=t:a=$M(n,e,t);let u=VM(UM(a));return new ki(u,o,i)}function $M(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=$M(o,e,t)}),new et(n.segments,r)}var Lg=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Og(r[0]))throw new te(4003,!1);let i=r.find(yh);if(i&&i!==MM(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function V3(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Lg(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let u={};return Object.entries(o.outlets).forEach(([l,f])=>{u[l]=typeof f=="string"?f.split("/"):f}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((u,l)=>{l==0&&u==="."||(l==0&&u===""?t=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,o]},[]);return new Lg(t,e,r)}var Hu=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function U3(n,e,t){if(n.isAbsolute)return new Hu(e,!0,0);if(!t)return new Hu(e,!1,NaN);if(t.parent===null)return new Hu(t,!0,0);let r=Og(n.commands[0])?0:1,i=t.segments.length-1+r;return j3(t,i,n.numberOfDoubleDots)}function j3(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new Hu(r,!1,i-o)}function B3(n){return yh(n[0])?n[0].outlets:{[Se]:n}}function HM(n,e,t){if(n??=new et([],{}),n.segments.length===0&&n.hasChildren())return _h(n,e,t);let r=z3(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new et(n.segments.slice(0,r.pathIndex),{});return o.children[Se]=new et(n.segments.slice(r.pathIndex),n.children),_h(o,0,i)}else return r.match&&i.length===0?new et(n.segments,{}):r.match&&!n.hasChildren()?Gb(n,e,t):r.match?_h(n,0,i):Gb(n,e,t)}function _h(n,e,t){if(t.length===0)return new et(n.segments,{});{let r=B3(t),i={};if(Object.keys(r).some(o=>o!==Se)&&n.children[Se]&&n.numberOfChildren===1&&n.children[Se].segments.length===0){let o=_h(n.children[Se],e,t);return new et(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=HM(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new et(n.segments,i)}}function z3(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let a=n.segments[i],u=t[r];if(yh(u))break;let l=`${u}`,f=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&f&&typeof f=="object"&&f.outlets===void 0){if(!CM(l,f,a))return o;r+=2}else{if(!CM(l,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(yh(o)){let l=$3(o.outlets);return new et(r,l)}if(i===0&&Og(t[0])){let l=n.segments[e];r.push(new Ms(l.path,TM(t[0]))),i++;continue}let a=yh(o)?o.outlets[Se]:`${o}`,u=i<t.length-1?t[i+1]:null;a&&u&&Og(u)?(r.push(new Ms(a,TM(u))),i+=2):(r.push(new Ms(a,{})),i++)}return new et(r,{})}function $3(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Gb(new et([],{}),0,r))}),e}function TM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function CM(n,e,t){return n==t.path&&Pi(e,t.parameters)}var qu="imperative",Jt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Jt||{}),mr=class{id;url;constructor(e,t){this.id=e,this.url=t}},ks=class extends mr{type=Jt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pr=class extends mr{urlAfterRedirects;type=Jt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Bn||{}),Gu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Gu||{}),Ni=class extends mr{reason;code;type=Jt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oi=class extends mr{reason;code;type=Jt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ku=class extends mr{error;target;type=Jt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wh=class extends mr{urlAfterRedirects;state;type=Jt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fg=class extends mr{urlAfterRedirects;state;type=Jt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vg=class extends mr{urlAfterRedirects;state;shouldActivate;type=Jt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ug=class extends mr{urlAfterRedirects;state;type=Jt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jg=class extends mr{urlAfterRedirects;state;type=Jt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bg=class{route;type=Jt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zg=class{route;type=Jt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$g=class{snapshot;type=Jt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hg=class{snapshot;type=Jt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qg=class{snapshot;type=Jt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wg=class{snapshot;type=Jt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{routerEvent;position;anchor;type=Jt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Eh=class{},Qu=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function H3(n){return!(n instanceof Eh)&&!(n instanceof Qu)}function q3(n,e){return n.providers&&!n._injector&&(n._injector=Ou(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ei(n){return n.outlet||Se}function W3(n,e){let t=n.filter(r=>ei(r)===e);return t.push(...n.filter(r=>ei(r)!==e)),t}function Xu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Gg=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Xu(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new tc(this.rootInjector)}},tc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Gg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(de(xt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kg=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Kb(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Kb(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Zb(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Zb(e,this._root).map(t=>t.value)}};function Kb(n,e){if(n===e.value)return e;for(let t of e.children){let r=Kb(n,t);if(r)return r}return null}function Zb(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Zb(n,t);if(r.length)return r.unshift(e),r}return[]}var pr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function $u(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bh=class extends Kg{snapshot;constructor(e,t){super(e),this.snapshot=t,rI(this,e)}toString(){return this.snapshot.toString()}};function qM(n){let e=G3(n),t=new gn([new Ms("",{})]),r=new gn({}),i=new gn({}),o=new gn({}),a=new gn(""),u=new Li(t,r,o,a,i,Se,n,e.root);return u.snapshot=e.root,new bh(new pr(u,[]),e)}function G3(n){let e={},t={},r={},o=new Ja([],e,r,"",t,Se,n,null,{});return new Ih("",new pr(o,[]))}var Li=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,a,u,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=u,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ce(f=>f[Sh]))??pe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ce(e=>Xa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ce(e=>Xa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zg(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Q(Q({},e.params),n.params),data:Q(Q({},e.data),n.data),resolve:Q(Q(Q(Q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Q({},n.params),data:Q({},n.data),resolve:Q(Q({},n.data),n._resolvedData??{})},i&&GM(i)&&(r.resolve[Sh]=i.title),r}var Ja=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Sh]}constructor(e,t,r,i,o,a,u,l,f){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=l,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ih=class extends Kg{url;constructor(e,t){super(t),this.url=e,rI(this,t)}toString(){return WM(this._root)}};function rI(n,e){e.value._routerState=n,e.children.forEach(t=>rI(n,t))}function WM(n){let e=n.children.length>0?` { ${n.children.map(WM).join(", ")} } `:"";return`${n.value}${e}`}function Bb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Pi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Pi(e.params,t.params)||n.paramsSubject.next(t.params),w3(e.url,t.url)||n.urlSubject.next(t.url),Pi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qb(n,e){let t=Pi(n.params,e.params)&&T3(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Qb(n.parent,e.parent))}function GM(n){return typeof n.title=="string"||n.title===null}var KM=new X(""),Ah=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Se;activateEvents=new qt;deactivateEvents=new qt;attachEvents=new qt;detachEvents=new qt;routerOutletData=BR();parentContexts=$(tc);location=$(qa);changeDetector=$(Ga);inputBinder=$(xh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Yb(t,u,i.injector,this.routerOutletData);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[bo]})}return n})(),Yb=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Li?this.route:e===tc?this.childContexts:e===KM?this.outletData:this.parent.get(e,t)}},xh=new X(""),iI=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Dd([r.queryParams,r.params,r.data]).pipe(vn(([o,a,u],l)=>(u=Q(Q(Q({},o),a),u),l===0?pe(u):Promise.resolve(u)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=$R(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:u}of a.inputs)t.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),oI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ft({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Vt(0,"router-outlet")},dependencies:[Ah],encapsulation:2})}return n})();function sI(n){let e=n.children&&n.children.map(sI),t=e?we(Q({},n),{children:e}):Q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Se&&(t.component=oI),t}function K3(n,e,t){let r=Th(n,e._root,t?t._root:void 0);return new bh(r,e)}function Th(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Z3(n,e,t);return new pr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(u=>Th(n,u)),a}}let r=Q3(e.value),i=e.children.map(o=>Th(n,o));return new pr(r,i)}}function Z3(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Th(n,r,i);return Th(n,r)})}function Q3(n){return new Li(new gn(n.url),new gn(n.params),new gn(n.queryParams),new gn(n.fragment),new gn(n.data),n.outlet,n.component,n)}var Yu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ZM="ngNavigationCancelingError";function Qg(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ns(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QM(!1,Bn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function QM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ZM]=!0,t.cancellationCode=e,t}function Y3(n){return YM(n)&&Ns(n.url)}function YM(n){return!!n&&n[ZM]}var J3=(n,e,t,r)=>Ce(i=>(new Jb(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Jb=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Bb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=$u(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=$u(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=$u(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=$u(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Wg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Hg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Bb(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),Bb(u.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},Yg=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Wu=class{component;route;constructor(e,t){this.component=e,this.route=t}};function X3(n,e,t){let r=n._root,i=e?e._root:null;return gh(r,i,t,[r.value])}function ez(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function el(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!gw(n)?n:e.get(n):r}function gh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=$u(e);return n.children.forEach(a=>{tz(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,u])=>vh(u,t.getContext(a),i)),i}function tz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=nz(a,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Yg(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?gh(n,e,u?u.children:null,r,i):gh(n,e,t,r,i),l&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Wu(u.outlet.component,a))}else a&&vh(e,u,i),i.canActivateChecks.push(new Yg(r)),o.component?gh(n,null,u?u.children:null,r,i):gh(n,null,t,r,i);return i}function nz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ya(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ya(n.url,e.url)||!Pi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qb(n,e)||!Pi(n.queryParams,e.queryParams);case"paramsChange":default:return!Qb(n,e)}}function vh(n,e,t){let r=$u(n),i=n.value;Object.entries(r).forEach(([o,a])=>{i.component?e?vh(a,e.children.getContext(o),t):vh(a,null,t):vh(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Wu(e.outlet.component,i)):t.canDeactivateChecks.push(new Wu(null,i)):t.canDeactivateChecks.push(new Wu(null,i))}function Rh(n){return typeof n=="function"}function rz(n){return typeof n=="boolean"}function iz(n){return n&&Rh(n.canLoad)}function oz(n){return n&&Rh(n.canActivate)}function sz(n){return n&&Rh(n.canActivateChild)}function az(n){return n&&Rh(n.canDeactivate)}function cz(n){return n&&Rh(n.canMatch)}function JM(n){return n instanceof lo||n?.name==="EmptyError"}var Mg=Symbol("INITIAL_VALUE");function Ju(){return vn(n=>Dd(n.map(e=>e.pipe(fo(1),im(Mg)))).pipe(Ce(e=>{for(let t of e)if(t!==!0){if(t===Mg)return Mg;if(t===!1||uz(t))return t}return!0}),_n(e=>e!==Mg),fo(1)))}function uz(n){return Ns(n)||n instanceof Yu}function lz(n,e){return Lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?pe(we(Q({},t),{guardsResult:!0})):dz(a,r,i,n).pipe(Lt(u=>u&&rz(u)?hz(r,o,n,e):pe(u)),Ce(u=>we(Q({},t),{guardsResult:u})))})}function dz(n,e,t,r){return gt(n).pipe(Lt(i=>_z(i.component,i.route,t,e,r)),po(i=>i!==!0,!0))}function hz(n,e,t,r){return gt(e).pipe(Ei(i=>_u(pz(i.route.parent,r),fz(i.route,r),gz(n,i.path,t),mz(n,i.route,t))),po(i=>i!==!0,!0))}function fz(n,e){return n!==null&&e&&e(new qg(n)),pe(!0)}function pz(n,e){return n!==null&&e&&e(new $g(n)),pe(!0)}function mz(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>Sd(()=>{let a=Xu(e)??t,u=el(o,a),l=oz(u)?u.canActivate(e,n):Pt(a,()=>u(e,n));return Do(l).pipe(po())}));return pe(i).pipe(Ju())}function gz(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>ez(a)).filter(a=>a!==null).map(a=>Sd(()=>{let u=a.guards.map(l=>{let f=Xu(a.node)??t,g=el(l,f),y=sz(g)?g.canActivateChild(r,n):Pt(f,()=>g(r,n));return Do(y).pipe(po())});return pe(u).pipe(Ju())}));return pe(o).pipe(Ju())}function _z(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let a=o.map(u=>{let l=Xu(e)??i,f=el(u,l),g=az(f)?f.canDeactivate(n,e,t,r):Pt(l,()=>f(n,e,t,r));return Do(g).pipe(po())});return pe(a).pipe(Ju())}function vz(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(a=>{let u=el(a,n),l=iz(u)?u.canLoad(e,t):Pt(n,()=>u(e,t));return Do(l)});return pe(o).pipe(Ju(),XM(r))}function XM(n){return Lp(on(e=>{if(typeof e!="boolean")throw Qg(n,e)}),Ce(e=>e===!0))}function yz(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(a=>{let u=el(a,n),l=cz(u)?u.canMatch(e,t):Pt(n,()=>u(e,t));return Do(l)});return pe(o).pipe(Ju(),XM(r))}var Ch=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Dh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function zu(n){return mu(new Ch(n))}function wz(n){return mu(new te(4e3,!1))}function Ez(n){return mu(QM(!1,Bn.GuardRejected))}var Xb=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[Se])return wz(`${e.redirectTo}`);i=i.children[Se]}}applyRedirectCommands(e,t,r,i,o){return bz(t,i,o).pipe(Ce(a=>{if(a instanceof ki)throw new Dh(a);let u=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,r);if(a[0]==="/")throw new Dh(u);return u}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ki(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let u=o.substring(1);r[i]=t[u]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([u,l])=>{a[u]=this.createSegmentGroup(e,l,r,i)}),new et(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function bz(n,e,t){if(typeof n=="string")return pe(n);let r=n,{queryParams:i,fragment:o,routeConfig:a,url:u,outlet:l,params:f,data:g,title:y}=e;return Do(Pt(t,()=>r({params:f,data:g,queryParams:i,fragment:o,routeConfig:a,url:u,outlet:l,title:y})))}var eI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Iz(n,e,t,r,i){let o=eP(n,e,t);return o.matched?(r=q3(e,r),yz(r,e,t,i).pipe(Ce(a=>a===!0?o:Q({},eI)))):pe(o)}function eP(n,e,t){if(e.path==="**")return Tz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Q({},eI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xM)(t,n,e);if(!i)return Q({},eI);let o={};Object.entries(i.posParams??{}).forEach(([u,l])=>{o[u]=l.path});let a=i.consumed.length>0?Q(Q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Tz(n){return{matched:!0,parameters:n.length>0?MM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function DM(n,e,t,r){return t.length>0&&Sz(n,t,r)?{segmentGroup:new et(e,Dz(r,new et(t,n.children))),slicedSegments:[]}:t.length===0&&Az(n,t,r)?{segmentGroup:new et(n.segments,Cz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new et(n.segments,n.children),slicedSegments:t}}function Cz(n,e,t,r){let i={};for(let o of t)if(Xg(n,e,o)&&!r[ei(o)]){let a=new et([],{});i[ei(o)]=a}return Q(Q({},r),i)}function Dz(n,e){let t={};t[Se]=e;for(let r of n)if(r.path===""&&ei(r)!==Se){let i=new et([],{});t[ei(r)]=i}return t}function Sz(n,e,t){return t.some(r=>Xg(n,e,r)&&ei(r)!==Se)}function Az(n,e,t){return t.some(r=>Xg(n,e,r))}function Xg(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function xz(n,e,t){return e.length===0&&!n.children[t]}var tI=class{};function Rz(n,e,t,r,i,o,a="emptyOnly"){return new nI(n,e,t,r,i,a,o).recognize()}var Mz=31,nI=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=u,this.applyRedirects=new Xb(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=DM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ce(({children:t,rootSnapshot:r})=>{let i=new pr(r,t),o=new Ih("",i),a=jM(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Ja([],Object.freeze({}),Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Se,t).pipe(Ce(r=>({children:r,rootSnapshot:t})),ho(r=>{if(r instanceof Dh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ch?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ce(a=>a instanceof pr?[a]:[]))}processChildren(e,t,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return gt(o).pipe(Ei(a=>{let u=r.children[a],l=W3(t,a);return this.processSegmentGroup(e,l,u,a,i)}),rm((a,u)=>(a.push(...u),a)),ls(null),ew(),Lt(a=>{if(a===null)return zu(r);let u=tP(a);return Pz(u),pe(u)}))}processSegment(e,t,r,i,o,a,u){return gt(t).pipe(Ei(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,a,u).pipe(ho(f=>{if(f instanceof Ch)return pe(null);throw f}))),po(l=>!!l),ho(l=>{if(JM(l))return xz(r,i,o)?pe(new tI):zu(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,a,u,l){return ei(r)!==a&&(a===Se||!Xg(i,o,r))?zu(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,l):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a,l):zu(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a,u){let{matched:l,parameters:f,consumedSegments:g,positionalParamSegments:y,remainingSegments:E}=eP(t,i,o);if(!l)return zu(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Mz&&(this.allowRedirects=!1));let I=new Ja(o,f,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,SM(i),ei(i),i.component??i._loadedComponent??null,i,AM(i)),N=Zg(I,u,this.paramsInheritanceStrategy);return I.params=Object.freeze(N.params),I.data=Object.freeze(N.data),this.applyRedirects.applyRedirectCommands(g,i.redirectTo,y,I,e).pipe(vn(F=>this.applyRedirects.lineralizeSegments(i,F)),Lt(F=>this.processSegment(e,r,t,F.concat(E),a,!1,u)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let u=Iz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),u.pipe(vn(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(vn(({routes:f})=>{let g=r._loadedInjector??e,{parameters:y,consumedSegments:E,remainingSegments:I}=l,N=new Ja(E,y,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,SM(r),ei(r),r.component??r._loadedComponent??null,r,AM(r)),q=Zg(N,a,this.paramsInheritanceStrategy);N.params=Object.freeze(q.params),N.data=Object.freeze(q.data);let{segmentGroup:F,slicedSegments:W}=DM(t,E,I,f);if(W.length===0&&F.hasChildren())return this.processChildren(g,f,F,N).pipe(Ce(ae=>new pr(N,ae)));if(f.length===0&&W.length===0)return pe(new pr(N,[]));let oe=ei(r)===o;return this.processSegment(g,f,F,W,oe?Se:o,!0,N).pipe(Ce(ae=>new pr(N,ae instanceof pr?[ae]:[])))}))):zu(t)))}getChildConfig(e,t,r){return t.children?pe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?pe({routes:t._loadedRoutes,injector:t._loadedInjector}):vz(e,t,r,this.urlSerializer).pipe(Lt(i=>i?this.configLoader.loadChildren(e,t).pipe(on(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Ez(t))):pe({routes:[],injector:e})}};function Pz(n){n.sort((e,t)=>e.value.outlet===Se?-1:t.value.outlet===Se?1:e.value.outlet.localeCompare(t.value.outlet))}function Nz(n){let e=n.value.routeConfig;return e&&e.path===""}function tP(n){let e=[],t=new Set;for(let r of n){if(!Nz(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=tP(r.children);e.push(new pr(r.value,i))}return e.filter(r=>!t.has(r))}function SM(n){return n.data||{}}function AM(n){return n.resolve||{}}function kz(n,e,t,r,i,o){return Lt(a=>Rz(n,e,t,r,a.extractedUrl,i,o).pipe(Ce(({state:u,tree:l})=>we(Q({},a),{targetSnapshot:u,urlAfterRedirects:l}))))}function Oz(n,e){return Lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return pe(t);let o=new Set(i.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let f of nP(l))a.add(f);let u=0;return gt(a).pipe(Ei(l=>o.has(l)?Lz(l,r,n,e):(l.data=Zg(l,l.parent,n).resolve,pe(void 0))),on(()=>u++),vu(1),Lt(l=>u===a.size?pe(t):Kn))})}function nP(n){let e=n.children.map(t=>nP(t)).flat();return[n,...e]}function Lz(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!GM(i)&&(o[Sh]=i.title),Sd(()=>(n.data=Zg(n,n.parent,t).resolve,Fz(o,n,e,r).pipe(Ce(a=>(n._resolvedData=a,n.data=Q(Q({},n.data),a),null)))))}function Fz(n,e,t,r){let i=Hb(n);if(i.length===0)return pe({});let o={};return gt(i).pipe(Lt(a=>Vz(n[a],e,t,r).pipe(po(),on(u=>{if(u instanceof Yu)throw Qg(new Ps,u);o[a]=u}))),vu(1),Ce(()=>o),ho(a=>JM(a)?Kn:mu(a)))}function Vz(n,e,t,r){let i=Xu(e)??r,o=el(n,i),a=o.resolve?o.resolve(e,t):Pt(i,()=>o(e,t));return Do(a)}function zb(n){return vn(e=>{let t=n(e);return t?gt(t).pipe(Ce(()=>e)):pe(e)})}var aI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Se);return r}getResolvedTitleForRoute(t){return t.data[Sh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(rP),providedIn:"root"})}return n})(),rP=(()=>{class n extends aI{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(de(EM))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Os=new X("",{providedIn:"root",factory:()=>({})}),nc=new X(""),e_=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=$(db);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Do(Pt(t,()=>r.loadComponent())).pipe(Ce(oP),vn(sP),on(a=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=a}),ds(()=>{this.componentLoaders.delete(r)})),o=new du(i,()=>new $t).pipe(lu());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=iP(r,this.compiler,t,this.onLoadEndListener).pipe(ds(()=>{this.childrenLoaders.delete(r)})),a=new du(o,()=>new $t).pipe(lu());return this.childrenLoaders.set(r,a),a}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iP(n,e,t,r){return Do(Pt(t,()=>n.loadChildren())).pipe(Ce(oP),vn(sP),Lt(i=>i instanceof ag||Array.isArray(i)?pe(i):gt(e.compileModuleAsync(i))),Ce(i=>{r&&r(n);let o,a,u=!1;return Array.isArray(i)?(a=i,u=!0):(o=i.create(t).injector,a=o.get(nc,[],{optional:!0,self:!0}).flat()),{routes:a.map(sI),injector:o}}))}function Uz(n){return n&&typeof n=="object"&&"default"in n}function oP(n){return Uz(n)?n.default:n}function sP(n){return pe(n)}var t_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(jz),providedIn:"root"})}return n})(),jz=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),cI=new X(""),uI=new X("");function aP(n,e,t){let r=n.get(uI),i=n.get(Nt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,a=new Promise(f=>{o=f}),u=i.startViewTransition(()=>(o(),Bz(n)));u.ready.catch(f=>{});let{onViewTransitionCreated:l}=r;return l&&Pt(n,()=>l({transition:u,from:e,to:t})),a}function Bz(n){return new Promise(e=>{rg({read:()=>setTimeout(e)},{injector:n})})}var lI=new X(""),n_=(()=>{class n{currentNavigation=_t(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new $t;transitionAbortWithErrorSubject=new $t;configLoader=$(e_);environmentInjector=$(xt);destroyRef=$(Gr);urlSerializer=$(ec);rootContexts=$(tc);location=$(As);inputBindingEnabled=$(xh,{optional:!0})!==null;titleStrategy=$(aI);options=$(Os,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=$(t_);createViewTransition=$(cI,{optional:!0});navigationErrorHandler=$(lI,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>pe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Bg(i)),r=i=>this.events.next(new zg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;un(()=>{this.transitions?.next(we(Q({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new gn(null),this.transitions.pipe(_n(r=>r!==null),vn(r=>{let i=!1;return pe(r).pipe(vn(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Bn.SupersededByNewNavigation),Kn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?we(Q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&u!=="reload")return this.events.next(new Oi(o.id,this.urlSerializer.serialize(o.rawUrl),"",Gu.IgnoredSameUrlNavigation)),o.resolve(!1),Kn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return pe(o).pipe(vn(l=>(this.events.next(new ks(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Kn:Promise.resolve(l))),kz(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),on(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=l.urlAfterRedirects,g));let f=new wh(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:f,source:g,restoredState:y,extras:E}=o,I=new ks(l,this.urlSerializer.serialize(f),g,y);this.events.next(I);let N=qM(this.rootComponentType).snapshot;return this.currentTransition=r=we(Q({},o),{targetSnapshot:N,urlAfterRedirects:f,extras:we(Q({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(q=>(q.finalUrl=f,q)),pe(r)}else return this.events.next(new Oi(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Gu.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Kn}),on(o=>{let a=new Fg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ce(o=>(this.currentTransition=r=we(Q({},o),{guards:X3(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),lz(this.environmentInjector,o=>this.events.next(o)),on(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Qg(this.urlSerializer,o.guardsResult);let a=new Vg(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),_n(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Bn.GuardRejected),!1)),zb(o=>{if(o.guards.canActivateChecks.length!==0)return pe(o).pipe(on(a=>{let u=new Ug(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),vn(a=>{let u=!1;return pe(a).pipe(Oz(this.paramsInheritanceStrategy,this.environmentInjector),on({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Bn.NoDataFromResolver)}}))}),on(a=>{let u=new jg(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),zb(o=>{let a=u=>{let l=[];if(u.routeConfig?.loadComponent){let f=Xu(u)??this.environmentInjector;l.push(this.configLoader.loadComponent(f,u.routeConfig).pipe(on(g=>{u.component=g}),Ce(()=>{})))}for(let f of u.children)l.push(...a(f));return l};return Dd(a(o.targetSnapshot.root)).pipe(ls(null),fo(1))}),zb(()=>this.afterPreactivation()),vn(()=>{let{currentSnapshot:o,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return u?gt(u).pipe(Ce(()=>r)):pe(r)}),Ce(o=>{let a=K3(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=we(Q({},o),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),on(()=>{this.events.next(new Eh)}),J3(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),fo(1),om(new Te(o=>{let a=r.abortController.signal,u=()=>o.next();return a.addEventListener("abort",u),()=>a.removeEventListener("abort",u)}).pipe(_n(()=>!i&&!r.targetRouterState),on(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Bn.Aborted)}))),on({next:o=>{i=!0,this.lastSuccessfulNavigation=un(this.currentNavigation),this.events.next(new Pr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),om(this.transitionAbortWithErrorSubject.pipe(on(o=>{throw o}))),ds(()=>{i||this.cancelNavigationTransition(r,"",Bn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ho(o=>{if(this.destroyed)return r.resolve(!1),Kn;if(i=!0,YM(o))this.events.next(new Ni(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),Y3(o)?this.events.next(new Qu(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ku(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let u=Pt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Yu){let{message:l,cancellationCode:f}=Qg(this.urlSerializer,u);this.events.next(new Ni(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new Qu(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Kn}))}))}cancelNavigationTransition(t,r,i){let o=new Ni(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=un(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zz(n){return n!==qu}var cP=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$($z),providedIn:"root"})}return n})(),Jg=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},$z=(()=>{class n extends Jg{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uP=(()=>{class n{urlSerializer=$(ec);options=$(Os,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=$(As);urlHandlingStrategy=$(t_);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ki;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,a=i??o;return a instanceof ki?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=qM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>$(Hz),providedIn:"root"})}return n})(),Hz=(()=>{class n extends uP{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ks?this.updateStateMemento():t instanceof Oi?this.commitTransition(r):t instanceof wh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Eh?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Ni&&t.code!==Bn.SupersededByNewNavigation&&t.code!==Bn.Redirect?this.restoreHistory(r):t instanceof Ku?this.restoreHistory(r,!0):t instanceof Pr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:a}=r;if(this.location.isCurrentPathEqualTo(t)||o){let u=this.browserPageId,l=Q(Q({},a),this.generateNgRouterState(i,u));this.location.replaceState(t,"",l)}else{let u=Q(Q({},a),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",u)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function r_(n,e){n.events.pipe(_n(t=>t instanceof Pr||t instanceof Ni||t instanceof Ku||t instanceof Oi),Ce(t=>t instanceof Pr||t instanceof Oi?0:(t instanceof Ni?t.code===Bn.Redirect||t.code===Bn.SupersededByNewNavigation:!1)?2:1),_n(t=>t!==2),fo(1)).subscribe(()=>{e()})}var qz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=$(ib);stateManager=$(uP);options=$(Os,{optional:!0})||{};pendingTasks=$(Di);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=$(n_);urlSerializer=$(ec);location=$(As);urlHandlingStrategy=$(t_);injector=$(xt);_events=new $t;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=$(cP);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=$(nc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!$(xh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=un(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ni&&r.code!==Bn.Redirect&&r.code!==Bn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pr)this.navigated=!0;else if(r instanceof Qu){let a=r.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=Q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||zz(i.source)},a);this.scheduleNavigation(u,qu,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}H3(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=Q({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(t);this.scheduleNavigation(u,r,a,o).catch(l=>{this.disposed||this.injector.get(Yn)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return un(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sI),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=r,f=l?this.currentUrlTree.fragment:a,g=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":g=Q(Q({},this.currentUrlTree.queryParams),o);break;case"preserve":g=this.currentUrlTree.queryParams;break;default:g=o||null}g!==null&&(g=this.removeEmptyProps(g));let y;try{let E=i?i.snapshot:this.routerState.snapshot.root;y=BM(E)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),y=this.currentUrlTree.root}return zM(y,t,g,f??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ns(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,qu,null,r)}navigate(t,r={skipLocationChange:!1}){return Gz(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(vo(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Q({},qz):r===!1?i=Q({},Wz):i=r,Ns(t))return bM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return bM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,f;a?(u=a.resolve,l=a.reject,f=a.promise):f=new Promise((y,E)=>{u=y,l=E});let g=this.pendingTasks.add();return r_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(g))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:u,reject:l,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gz(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}var Fi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=_t(null);get href(){return un(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new $t;applicationErrorHandler=$(Yn);options=$(Os,{optional:!0});constructor(t,r,i,o,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=u,this.reactiveHref.set($(new fg("href"),{optional:!0}));let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Pr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ns(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(t!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l)?.catch(f=>{this.applicationErrorHandler(f)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ns(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ue(bt),ue(Li),Yd("tabindex"),ue(Is),ue(Io),ue(Xr))};static \u0275dir=Rt({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&se("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Ds("href",i.reactiveHref(),VE)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ss],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ss],replaceUrl:[2,"replaceUrl","replaceUrl",Ss],routerLink:"routerLink"},features:[bo]})}return n})();var Mh=class{};var lP=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(_n(t=>t instanceof Pr),Ei(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ou(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(u,o.children??o._loadedRoutes))}return gt(i).pipe(gu())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=pe(null);let o=i.pipe(Lt(a=>a===null?pe(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(t,r);return gt([o,a]).pipe(gu())}else return o})}static \u0275fac=function(r){return new(r||n)(de(bt),de(xt),de(Mh),de(e_))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dP=new X(""),Kz=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=qu;restoredId=0;store={};constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ks?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Oi&&t.code===Gu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Zu))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>T(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Zu(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){tb()};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function hI(n,...e){return Un([{provide:nc,multi:!0,useValue:n},[],{provide:Li,useFactory:hP,deps:[bt]},{provide:th,multi:!0,useFactory:fP},e.map(t=>t.\u0275providers)])}function hP(n){return n.routerState.root}function Ph(n,e){return{\u0275kind:n,\u0275providers:e}}function fP(){let n=$(wt);return e=>{let t=n.get(Cs);if(e!==t.components[0])return;let r=n.get(bt),i=n.get(pP);n.get(fI)===1&&r.initialNavigation(),n.get(_P,null,{optional:!0})?.setUpPreloading(),n.get(dP,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pP=new X("",{factory:()=>new $t}),fI=new X("",{providedIn:"root",factory:()=>1});function mP(){let n=[{provide:OE,useValue:!0},{provide:fI,useValue:0},cg(()=>{let e=$(wt);return e.get(wb,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(bt),o=e.get(pP);r_(i,()=>{r(!0)}),e.get(n_).afterPreactivation=()=>(r(!0),o.closed?pe(void 0):o),i.initialNavigation()}))})];return Ph(2,n)}function gP(){let n=[cg(()=>{$(bt).setUpLocationChangeListener()}),{provide:fI,useValue:2}];return Ph(3,n)}var _P=new X("");function vP(n){return Ph(0,[{provide:_P,useExisting:lP},{provide:Mh,useExisting:n}])}function yP(){return Ph(8,[iI,{provide:xh,useExisting:iI}])}function wP(n){ku("NgRouterViewTransitions");let e=[{provide:cI,useValue:aP},{provide:uI,useValue:Q({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ph(9,e)}var EP=[As,{provide:ec,useClass:Ps},bt,tc,{provide:Li,useFactory:hP,deps:[bt]},e_,[]],rc=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[EP,[],{provide:nc,multi:!0,useValue:t},[],r?.errorHandler?{provide:lI,useValue:r.errorHandler}:[],{provide:Os,useValue:r||{}},r?.useHash?Qz():Yz(),Zz(),r?.preloadingStrategy?vP(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Jz(r):[],r?.bindToComponentInputs?yP().\u0275providers:[],r?.enableViewTransitions?wP().\u0275providers:[],Xz()]}}static forChild(t){return{ngModule:n,providers:[{provide:nc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({})}return n})();function Zz(){return{provide:dP,useFactory:()=>{let n=$(YR),e=$(Ke),t=$(Os),r=$(n_),i=$(ec);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Kz(i,r,n,e,t)}}}function Qz(){return{provide:Xr,useClass:Eb}}function Yz(){return{provide:Xr,useClass:_g}}function Jz(n){return[n.initialNavigation==="disabled"?gP().\u0275providers:[],n.initialNavigation==="enabledBlocking"?mP().\u0275providers:[]]}var dI=new X("");function Xz(){return[{provide:dI,useFactory:fP},{provide:th,multi:!0,useExisting:dI}]}var RP=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ue(Is),ue(Io))};static \u0275dir=Rt({type:n})}return n})(),gI=(()=>{class n extends RP{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275dir=Rt({type:n,features:[Jn]})}return n})(),h_=new X("");var e$={provide:h_,useExisting:dr(()=>Xn),multi:!0};function t$(){let n=Mr()?Mr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var n$=new X(""),Xn=(()=>{class n extends RP{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!t$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ue(Is),ue(Io),ue(n$,8))};static \u0275dir=Rt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&se("input",function(a){return i._handleInput(a.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(a){return i._compositionEnd(a.target.value)})},standalone:!1,features:[Mi([e$]),Jn]})}return n})();function r$(n){return n==null||i$(n)===0}function i$(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Uh=new X(""),MP=new X("");function o$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function s$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function a$(n){return r$(n.value)?{required:!0}:null}function bP(n){return null}function PP(n){return n!=null}function NP(n){return Ts(n)?gt(n):n}function kP(n){let e={};return n.forEach(t=>{e=t!=null?Q(Q({},e),t):e}),Object.keys(e).length===0?null:e}function OP(n,e){return e.map(t=>t(n))}function c$(n){return!n.validate}function LP(n){return n.map(e=>c$(e)?e:t=>e.validate(t))}function u$(n){if(!n)return null;let e=n.filter(PP);return e.length==0?null:function(t){return kP(OP(t,e))}}function _I(n){return n!=null?u$(LP(n)):null}function l$(n){if(!n)return null;let e=n.filter(PP);return e.length==0?null:function(t){let r=OP(t,e).map(NP);return Xy(r).pipe(Ce(kP))}}function vI(n){return n!=null?l$(LP(n)):null}function IP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function d$(n){return n._rawValidators}function h$(n){return n._rawAsyncValidators}function pI(n){return n?Array.isArray(n)?n:[n]:[]}function o_(n,e){return Array.isArray(n)?n.includes(e):n===e}function TP(n,e){let t=pI(e);return pI(n).forEach(i=>{o_(t,i)||t.push(i)}),t}function CP(n,e){return pI(e).filter(t=>!o_(n,t))}var s_=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_I(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},rl=class extends s_{name;get formDirective(){return null}get path(){return null}},Vh=class extends s_{_parent=null;name=null;valueAccessor=null},a_=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},f$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cle=we(Q({},f$),{"[class.ng-submitted]":"isSubmitted"}),Nr=(()=>{class n extends a_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(Vh,2))};static \u0275dir=Rt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&jn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Jn]})}return n})(),FP=(()=>{class n extends a_{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ue(rl,10))};static \u0275dir=Rt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&jn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Jn]})}return n})();var Nh="VALID",i_="INVALID",tl="PENDING",kh="DISABLED",Ls=class{},c_=class extends Ls{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Lh=class extends Ls{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Fh=class extends Ls{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},nl=class extends Ls{status;source;constructor(e,t){super(),this.status=e,this.source=t}},mI=class extends Ls{source;constructor(e){super(),this.source=e}},u_=class extends Ls{source;constructor(e){super(),this.source=e}};function VP(n){return(f_(n)?n.validators:n)||null}function p$(n){return Array.isArray(n)?_I(n):n||null}function UP(n,e){return(f_(e)?e.asyncValidators:n)||null}function m$(n){return Array.isArray(n)?vI(n):n||null}function f_(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function g$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function _$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var l_=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return un(this.statusReactive)}set status(e){un(()=>this.statusReactive.set(e))}_status=Fu(()=>this.statusReactive());statusReactive=_t(void 0);get valid(){return this.status===Nh}get invalid(){return this.status===i_}get pending(){return this.status==tl}get disabled(){return this.status===kh}get enabled(){return this.status!==kh}errors;get pristine(){return un(this.pristineReactive)}set pristine(e){un(()=>this.pristineReactive.set(e))}_pristine=Fu(()=>this.pristineReactive());pristineReactive=_t(!0);get dirty(){return!this.pristine}get touched(){return un(this.touchedReactive)}set touched(e){un(()=>this.touchedReactive.set(e))}_touched=Fu(()=>this.touchedReactive());touchedReactive=_t(!1);get untouched(){return!this.touched}_events=new $t;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CP(e,this._rawAsyncValidators))}hasValidator(e){return o_(this._rawValidators,e)}hasAsyncValidator(e){return o_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(we(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fh(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(we(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Lh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Lh(!0,r))}markAsPending(e={}){this.status=tl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(we(Q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=kh,this.errors=null,this._forEachChild(i=>{i.disable(we(Q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new c_(this.value,r)),this._events.next(new nl(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(we(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nh,this._forEachChild(r=>{r.enable(we(Q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(we(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nh||this.status===tl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new c_(this.value,t)),this._events.next(new nl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(we(Q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kh:Nh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=tl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=NP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new nl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new qt,this.statusChanges=new qt}_calculateStatus(){return this._allControlsDisabled()?kh:this.errors?i_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(tl)?tl:this._anyControlsHaveStatus(i_)?i_:Nh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Lh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){f_(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=p$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=m$(this._rawAsyncValidators)}},d_=class extends l_{constructor(e,t,r){super(VP(t),UP(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){_$(this,!0,e),Object.keys(e).forEach(r=>{g$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new u_(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var yI=new X("",{providedIn:"root",factory:()=>wI}),wI="always";function v$(n,e){return[...e.path,n]}function jP(n,e,t=wI){BP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),w$(n,e),b$(n,e),E$(n,e),y$(n,e)}function DP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function y$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function BP(n,e){let t=d$(n);e.validator!==null?n.setValidators(IP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=h$(n);e.asyncValidator!==null?n.setAsyncValidators(IP(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();DP(e._rawValidators,i),DP(e._rawAsyncValidators,i)}function w$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&zP(n,e)})}function E$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&zP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function zP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function b$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function I$(n,e){n==null,BP(n,e)}function T$(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function C$(n){return Object.getPrototypeOf(n.constructor)===gI}function D$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function S$(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Xn?t=o:C$(o)?r=o:i=o}),i||r||t||null}var A$={provide:rl,useExisting:dr(()=>EI)},Oh=Promise.resolve(),EI=(()=>{class n extends rl{callSetDisabledState;get submitted(){return un(this.submittedReactive)}_submitted=Fu(()=>this.submittedReactive());submittedReactive=_t(!1);_directives=new Set;form;ngSubmit=new qt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new d_({},_I(t),vI(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Oh.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),jP(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Oh.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Oh.then(()=>{let r=this._findContainer(t.path),i=new d_({});I$(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Oh.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Oh.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),D$(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new mI(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ue(Uh,10),ue(MP,10),ue(yI,8))};static \u0275dir=Rt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&se("submit",function(a){return i.onSubmit(a)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Mi([A$]),Jn]})}return n})();function SP(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function AP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var x$=class extends l_{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(VP(t),UP(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),f_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(AP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new u_(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){AP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var R$={provide:Vh,useExisting:dr(()=>gr)},xP=Promise.resolve(),gr=(()=>{class n extends Vh{_changeDetectorRef;callSetDisabledState;control=new x$;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new qt;constructor(t,r,i,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=S$(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),T$(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){jP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){xP.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ss(r);xP.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?v$(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ue(rl,9),ue(Uh,10),ue(MP,10),ue(h_,10),ue(Ga,8),ue(yI,8))};static \u0275dir=Rt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Mi([R$]),Jn,bo]})}return n})();var $P=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),M$={provide:h_,useExisting:dr(()=>jh),multi:!0},jh=(()=>{class n extends gI{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&se("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Mi([M$]),Jn]})}return n})();var P$={provide:h_,useExisting:dr(()=>bI),multi:!0},bI=(()=>{class n extends gI{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&se("change",function(a){return i.onChange(a.target.value)})("input",function(a){return i.onChange(a.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Mi([P$]),Jn]})}return n})();function HP(n){return typeof n=="number"?n:parseFloat(n)}var II=(()=>{class n{_validator=bP;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bP,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Rt({type:n,features:[bo]})}return n})(),N$={provide:Uh,useExisting:dr(()=>TI),multi:!0},TI=(()=>{class n extends II{max;inputName="max";normalizeInput=t=>HP(t);createValidator=t=>s$(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Mi([N$]),Jn]})}return n})(),k$={provide:Uh,useExisting:dr(()=>Bh),multi:!0},Bh=(()=>{class n extends II{min;inputName="min";normalizeInput=t=>HP(t);createValidator=t=>o$(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Mi([k$]),Jn]})}return n})(),O$={provide:Uh,useExisting:dr(()=>CI),multi:!0};var CI=(()=>{class n extends II{required;inputName="required";normalizeInput=Ss;createValidator=t=>a$;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Zr(n)))(i||n)}})();static \u0275dir=Rt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ds("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Mi([O$]),Jn]})}return n})();var L$=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({})}return n})();var er=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yI,useValue:t.callSetDisabledState??wI}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=xr({type:n});static \u0275inj=hr({imports:[L$]})}return n})();var qP=()=>{};var KP=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},F$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},p_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,l=i+2<n.length,f=l?n[i+2]:0,g=o>>2,y=(o&3)<<4|u>>4,E=(u&15)<<2|f>>6,I=f&63;l||(I=64,a||(E=64)),r.push(t[g],t[y],t[E],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KP(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):F$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||f==null||y==null)throw new SI;let E=o<<2|u>>4;if(r.push(E),f!==64){let I=u<<4&240|f>>2;if(r.push(I),y!==64){let N=f<<6&192|y;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},SI=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},V$=function(n){let e=KP(n);return p_.encodeByteArray(e,!0)},$h=function(n){return V$(n).replace(/\./g,"")},m_=function(n){try{return p_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var U$=()=>xI().__FIREBASE_DEFAULTS__,j$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},B$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&m_(n[1]);return e&&JSON.parse(e)},g_=()=>{try{return qP()||U$()||j$()||B$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RI=n=>{var e,t;return(t=(e=g_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},__=n=>{let e=RI(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},MI=()=>{var n;return(n=g_())===null||n===void 0?void 0:n.config},PI=n=>{var e;return(e=g_())===null||e===void 0?void 0:e[`_${n}`]};var oc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Vi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function ol(n){return T(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function v_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$h(JSON.stringify(t)),$h(JSON.stringify(a)),""].join(".")}var zh={};function z$(){let n={prod:[],emulator:[]};for(let e of Object.keys(zh))zh[e]?n.emulator.push(e):n.prod.push(e);return n}function $$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var WP=!1;function sl(n,e){if(typeof window>"u"||typeof document>"u"||!Vi(window.location.host)||zh[n]===e||zh[n]||WP)return;zh[n]=e;function t(E){return`__firebase__banner__${E}`}let r="__firebase__banner",o=z$().prod.length>0;function a(){let E=document.getElementById(r);E&&E.remove()}function u(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function l(E,I){E.setAttribute("width","24"),E.setAttribute("id",I),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){let E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{WP=!0,a()},E}function g(E,I){E.setAttribute("id",I),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function y(){let E=$$(r),I=t("text"),N=document.getElementById(I)||document.createElement("span"),q=t("learnmore"),F=document.getElementById(q)||document.createElement("a"),W=t("preprendIcon"),oe=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){let ae=E.element;u(ae),g(F,q);let le=f();l(oe,W),ae.append(oe,N,F,le),document.body.appendChild(ae)}o?(N.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function H$(){var n;let e=(n=g_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XP(){let n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eN(){return!H$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hh(){try{return typeof indexedDB=="object"}catch{return!1}}function tN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var q$="FirebaseError",zn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=q$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ti.prototype.create)}},ti=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?W$(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new zn(i,u,r)}};function W$(n,e){return n.replace(G$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var G$=/\{\$([^}]+)}/g;function nN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ui(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(GP(o)&&GP(a)){if(!Ui(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function GP(n){return n!==null&&typeof n=="object"}function al(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cl(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ul(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function rN(n,e){let t=new AI(n,e);return t.subscribe.bind(t)}var AI=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");K$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=DI),i.error===void 0&&(i.error=DI),i.complete===void 0&&(i.complete=DI);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function K$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function DI(){}var fle=14400*1e3;function It(n){return n&&n._delegate?n._delegate:n}var En=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var sc="[DEFAULT]";var NI=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new oc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q$(e))try{this.getOrInitializeService({instanceIdentifier:sc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=sc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return T(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=sc){return this.instances.has(e)}getOptions(e=sc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sc){return this.component?this.component.multipleInstances?e:sc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Z$(n){return n===sc?void 0:n}function Q$(n){return n.instantiationMode==="EAGER"}var y_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new NI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Y$=[],Ve=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ve||{}),J$={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},X$=Ve.INFO,e4={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},t4=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=e4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ji=class{constructor(e){this.name=e,this._logLevel=X$,this._logHandler=t4,this._userLogHandler=null,Y$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?J$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}};var n4=(n,e)=>e.some(t=>n instanceof t),iN,oN;function r4(){return iN||(iN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i4(){return oN||(oN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var sN=new WeakMap,OI=new WeakMap,aN=new WeakMap,kI=new WeakMap,FI=new WeakMap;function o4(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Bi(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&sN.set(t,n)}).catch(()=>{}),FI.set(e,n),e}function s4(n){if(OI.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});OI.set(n,e)}var LI={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return OI.get(n);if(e==="objectStoreNames")return n.objectStoreNames||aN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cN(n){LI=n(LI)}function a4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(w_(this),e,...t);return aN.set(r,e.sort?e.sort():[e]),Bi(r)}:i4().includes(n)?function(...e){return n.apply(w_(this),e),Bi(sN.get(this))}:function(...e){return Bi(n.apply(w_(this),e))}}function c4(n){return typeof n=="function"?a4(n):(n instanceof IDBTransaction&&s4(n),n4(n,r4())?new Proxy(n,LI):n)}function Bi(n){if(n instanceof IDBRequest)return o4(n);if(kI.has(n))return kI.get(n);let e=c4(n);return e!==n&&(kI.set(n,e),FI.set(e,n)),e}var w_=n=>FI.get(n);function lN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=Bi(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Bi(a.result),l.oldVersion,l.newVersion,Bi(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),u.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}var u4=["get","getKey","getAll","getAllKeys","count"],l4=["put","add","delete","clear"],VI=new Map;function uN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(VI.get(e))return VI.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=l4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||u4.includes(t)))return;let o=function(a,...u){return T(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),f=l.store;return r&&(f=f.index(u.shift())),(yield Promise.all([f[t](...u),i&&l.done]))[0]})};return VI.set(e,o),o}cN(n=>we(Q({},n),{get:(e,t,r)=>uN(e,t)||n.get(e,t,r),has:(e,t)=>!!uN(e,t)||n.has(e,t)}));var jI=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d4(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function d4(n){let e=n.getComponent();return e?.type==="VERSION"}var BI="@firebase/app",dN="0.13.2";var So=new ji("@firebase/app"),h4="@firebase/app-compat",f4="@firebase/analytics-compat",p4="@firebase/analytics",m4="@firebase/app-check-compat",g4="@firebase/app-check",_4="@firebase/auth",v4="@firebase/auth-compat",y4="@firebase/database",w4="@firebase/data-connect",E4="@firebase/database-compat",b4="@firebase/functions",I4="@firebase/functions-compat",T4="@firebase/installations",C4="@firebase/installations-compat",D4="@firebase/messaging",S4="@firebase/messaging-compat",A4="@firebase/performance",x4="@firebase/performance-compat",R4="@firebase/remote-config",M4="@firebase/remote-config-compat",P4="@firebase/storage",N4="@firebase/storage-compat",k4="@firebase/firestore",O4="@firebase/ai",L4="@firebase/firestore-compat",F4="firebase",V4="11.10.0";var zI="[DEFAULT]",U4={[BI]:"fire-core",[h4]:"fire-core-compat",[p4]:"fire-analytics",[f4]:"fire-analytics-compat",[g4]:"fire-app-check",[m4]:"fire-app-check-compat",[_4]:"fire-auth",[v4]:"fire-auth-compat",[y4]:"fire-rtdb",[w4]:"fire-data-connect",[E4]:"fire-rtdb-compat",[b4]:"fire-fn",[I4]:"fire-fn-compat",[T4]:"fire-iid",[C4]:"fire-iid-compat",[D4]:"fire-fcm",[S4]:"fire-fcm-compat",[A4]:"fire-perf",[x4]:"fire-perf-compat",[R4]:"fire-rc",[M4]:"fire-rc-compat",[P4]:"fire-gcs",[N4]:"fire-gcs-compat",[k4]:"fire-fst",[L4]:"fire-fst-compat",[O4]:"fire-vertex","fire-js":"fire-js",[F4]:"fire-js-all"};var qh=new Map,j4=new Map,$I=new Map;function hN(n,e){try{n.container.addComponent(e)}catch(t){So.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _r(n){let e=n.name;if($I.has(e))return So.debug(`There were multiple attempts to register component ${e}.`),!1;$I.set(e,n);for(let t of qh.values())hN(t,n);for(let t of j4.values())hN(t,n);return!0}function Vs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n==null?!1:n.settings!==void 0}var B4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fs=new ti("app","Firebase",B4);var HI=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fs.create("app-deleted",{appName:this._name})}};var zi=V4;function GI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:zI,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Fs.create("bad-app-name",{appName:String(i)});if(t||(t=MI()),!t)throw Fs.create("no-options");let o=qh.get(i);if(o){if(Ui(t,o.options)&&Ui(r,o.config))return o;throw Fs.create("duplicate-app",{appName:i})}let a=new y_(i);for(let l of $I.values())a.addComponent(l);let u=new HI(t,r,a);return qh.set(i,u),u}function Ao(n=zI){let e=qh.get(n);if(!e&&n===zI&&MI())return GI();if(!e)throw Fs.create("no-app",{appName:n});return e}function E_(){return Array.from(qh.values())}function lt(n,e,t){var r;let i=(r=U4[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),So.warn(u.join(" "));return}_r(new En(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var z4="firebase-heartbeat-database",$4=1,Wh="firebase-heartbeat-store",UI=null;function gN(){return UI||(UI=lN(z4,$4,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Wh)}catch(t){console.warn(t)}}}}).catch(n=>{throw Fs.create("idb-open",{originalErrorMessage:n.message})})),UI}function H4(n){return T(this,null,function*(){try{let t=(yield gN()).transaction(Wh),r=yield t.objectStore(Wh).get(_N(n));return yield t.done,r}catch(e){if(e instanceof zn)So.warn(e.message);else{let t=Fs.create("idb-get",{originalErrorMessage:e?.message});So.warn(t.message)}}})}function fN(n,e){return T(this,null,function*(){try{let r=(yield gN()).transaction(Wh,"readwrite");yield r.objectStore(Wh).put(e,_N(n)),yield r.done}catch(t){if(t instanceof zn)So.warn(t.message);else{let r=Fs.create("idb-set",{originalErrorMessage:t?.message});So.warn(r.message)}}})}function _N(n){return`${n.name}!${n.options.appId}`}var q4=1024,W4=30,qI=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new WI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return T(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=pN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>W4){let a=K4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){So.warn(r)}})}getHeartbeatsHeader(){return T(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=pN(),{heartbeatsToSend:r,unsentEntries:i}=G4(this._heartbeatsCache.heartbeats),o=$h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return So.warn(t),""}})}};function pN(){return new Date().toISOString().substring(0,10)}function G4(n,e=q4){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),mN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),mN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var WI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return T(this,null,function*(){return Hh()?tN().then(()=>!0).catch(()=>!1):!1})}read(){return T(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield H4(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return T(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return fN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function mN(n){return $h(JSON.stringify({version:2,heartbeats:n})).length}function K4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function Z4(n){_r(new En("platform-logger",e=>new jI(e),"PRIVATE")),_r(new En("heartbeat",e=>new qI(e),"PRIVATE")),lt(BI,dN,n),lt(BI,dN,"esm2017"),lt("fire-js","")}Z4("");var Q4="firebase",Y4="11.10.0";lt(Q4,Y4,"app");function vN(n){n===void 0&&(n=$(wt));let e=n.get(wo);return t=>new Te(r=>{let i=e.add(),o=!1;function a(){o||(i(),o=!0)}let u=t.subscribe({next:l=>{r.next(l),a()},complete:()=>{r.complete(),a()},error:l=>{r.error(l),a()}});return u.add(()=>{r.unsubscribe(),a()}),u})}var $i=new hs("ANGULARFIRE2_VERSION");function cc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Us=(n,e)=>{let t=e?[e]:E_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},ll=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(ll||{}),yN=_b()&&typeof Zone<"u"?ll.WARN:ll.SILENT;var b_=class{zone;delegate;constructor(e,t=Yy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i?i.runGuarded(()=>{e.apply(this,[a])}):e.apply(this,[a])};return this.delegate.schedule(o,t,r)}},Hi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=$(Ke);this.outsideAngular=t.runOutsideAngular(()=>new b_(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new b_(typeof Zone>"u"?void 0:Zone.current,Qy))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wN=!1;function J4(n,e){!wN&&(yN>ll.SILENT||_b())&&(wN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),yN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function X4(n){let e=$(Ke,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function ac(n){let e=$(Ke,{optional:!0});return e?e.run(()=>n()):n()}var eH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),Pt(t,()=>ac(()=>n.apply(void 0,r)))),dt=(n,e,t)=>(t||=e?ll.WARN:ll.VERBOSE,function(){let r,i=arguments,o,a,u;try{o=$(Hi),a=$(wo),u=$(xt)}catch{return J4(n,t),n.apply(this,i)}for(let f=0;f<arguments.length;f++)typeof i[f]=="function"&&(e&&(r||=ac(()=>a.add())),i[f]=eH(i[f],r,u));let l=X4(()=>n.apply(this,i));return e?l instanceof Te?l.pipe(us(o.outsideAngular),cs(o.insideAngular),vN(u)):l instanceof Promise?ac(()=>{let f=a.add();return new Promise((g,y)=>{l.then(E=>Pt(u,()=>ac(()=>g(E))),E=>Pt(u,()=>ac(()=>y(E)))).finally(f)})}):typeof l=="function"&&r?function(){return setTimeout(r,0),l.apply(this,arguments)}:ac(()=>l):l instanceof Te?l.pipe(us(o.outsideAngular),cs(o.insideAngular)):ac(()=>l)});var ni=class{constructor(e){return e}},xo=class{constructor(){return E_()}};function tH(n){return n&&n.length===1?n[0]:new ni(Ao())}var KI=new X("angularfire2._apps"),nH={provide:ni,useFactory:tH,deps:[[new an,KI]]},rH={provide:xo,deps:[[new an,KI]]};function iH(n){return(e,t)=>{let r=t.get($a);lt("angularfire",$i.full,"core"),lt("angularfire",$i.full,"app"),lt("angular",fw.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ni(i)}}function EN(n,...e){return Un([nH,rH,{provide:KI,useFactory:iH(n),multi:!0,deps:[Ke,wt,Hi,...e]}])}var bN=dt(GI,!0);var oH=new Map,sH={activated:!1,tokenObservers:[]},aH={initialized:!1,enabled:!1};function ri(n){return oH.get(n)||Object.assign({},sH)}function DN(){return aH}var cH="https://content-firebaseappcheck.googleapis.com/v1";var uH="exchangeDebugToken",IN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},gde=1440*60*1e3;var YI=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return T(this,null,function*(){this.stop();try{this.pending=new oc,this.pending.promise.catch(t=>{}),yield lH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new oc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function lH(n){return new Promise(e=>{setTimeout(e,n)})}var dH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},js=new ti("appCheck","AppCheck",dH);function SN(n){if(!ri(n).activated)throw js.create("use-before-activation",{appName:n.name})}function AN(r,i){return T(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let I=yield a.getHeartbeatsHeader();I&&(o["X-Firebase-Client"]=I)}let u={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(n,u)}catch(I){throw js.create("fetch-network-error",{originalErrorMessage:I?.message})}if(l.status!==200)throw js.create("fetch-status-error",{httpStatus:l.status});let f;try{f=yield l.json()}catch(I){throw js.create("fetch-parse-error",{originalErrorMessage:I?.message})}let g=f.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let y=Number(g[1])*1e3,E=Date.now();return{token:f.token,expireTimeMillis:E+y,issuedAtTimeMillis:E}})}function xN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${cH}/projects/${t}/apps/${r}:${uH}?key=${i}`,body:{debug_token:e}}}var hH="firebase-app-check-database",fH=1,JI="firebase-app-check-store";var I_=null;function pH(){return I_||(I_=new Promise((n,e)=>{try{let t=indexedDB.open(hH,fH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(js.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(JI,{keyPath:"compositeKey"})}}}catch(t){e(js.create("storage-open",{originalErrorMessage:t?.message}))}}),I_)}function mH(n,e){return gH(_H(n),e)}function gH(n,e){return T(this,null,function*(){let r=(yield pH()).transaction(JI,"readwrite"),o=r.objectStore(JI).put({compositeKey:n,value:e});return new Promise((a,u)=>{o.onsuccess=l=>{a()},r.onerror=l=>{var f;u(js.create("storage-set",{originalErrorMessage:(f=l.target.error)===null||f===void 0?void 0:f.message}))}})})}function _H(n){return`${n.options.appId}-${n.name}`}var Gh=new ji("@firebase/app-check");function ZI(n,e){return Hh()?mH(n,e).catch(t=>{Gh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function RN(){return DN().enabled}function MN(){return T(this,null,function*(){let n=DN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vH={error:"UNKNOWN_ERROR"};function yH(n){return p_.encodeString(JSON.stringify(n),!1)}function XI(n,e=!1,t=!1){return T(this,null,function*(){let r=n.app;SN(r);let i=ri(r),o=i.token,a;if(o&&!Kh(o)&&(i.token=void 0,o=void 0),!o){let f=yield i.cachedTokenPromise;f&&(Kh(f)?o=f:yield ZI(r,void 0))}if(!e&&o&&Kh(o))return{token:o.token};let u=!1;if(RN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=AN(xN(r,yield MN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),u=!0);let f=yield i.exchangeTokenPromise;return yield ZI(r,f),i.token=f,{token:f.token}}catch(f){return f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?Gh.warn(f.message):t&&Gh.error(f),QI(f)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),u=!0),o=yield ri(r).exchangeTokenPromise}catch(f){f.code==="appCheck/throttled"||f.code==="appCheck/initial-throttle"?Gh.warn(f.message):t&&Gh.error(f),a=f}let l;return o?a?Kh(o)?l={token:o.token,internalError:a}:l=QI(a):(l={token:o.token},i.token=o,yield ZI(r,o)):l=QI(a),u&&IH(r,l),l})}function wH(n){return T(this,null,function*(){let e=n.app;SN(e);let{provider:t}=ri(e);if(RN()){let r=yield MN(),{token:i}=yield AN(xN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function EH(n,e,t,r){let{app:i}=n,o=ri(i),a={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&Kh(o.token)){let u=o.token;Promise.resolve().then(()=>{t({token:u.token}),TN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>TN(n))}function PN(n,e){let t=ri(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function TN(n){let{app:e}=n,t=ri(e),r=t.tokenRefresher;r||(r=bH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bH(n){let{app:e}=n;return new YI(()=>T(null,null,function*(){let t=ri(e),r;if(t.token?r=yield XI(n,!0):r=yield XI(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=ri(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},IN.RETRIAL_MIN_WAIT,IN.RETRIAL_MAX_WAIT)}function IH(n,e){let t=ri(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Kh(n){return n.expireTimeMillis-Date.now()>0}function QI(n){return{token:yH(vH),error:n}}var e0=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ri(this.app);for(let t of e)PN(this.app,t.next);return Promise.resolve()}};function TH(n,e){return new e0(n,e)}function CH(n){return{getToken:e=>XI(n,e),getLimitedUseToken:()=>wH(n),addTokenListener:e=>EH(n,"INTERNAL",e),removeTokenListener:e=>PN(n.app,e)}}var DH="@firebase/app-check",SH="0.10.1";var AH="app-check",CN="app-check-internal";function xH(){_r(new En(AH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return TH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(CN).initialize()})),_r(new En(CN,n=>{let e=n.getProvider("app-check").getImmediate();return CH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),lt(DH,SH)}xH();var RH="app-check";var Bs=class{constructor(){return Us(RH)}};var MH=["localhost","0.0.0.0","127.0.0.1"],xde=typeof window<"u"&&MH.includes(window.location.hostname);function KN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ZN=KN,QN=new ti("auth","Firebase",KN());var x_=new ji("@firebase/auth");function PH(n,...e){x_.logLevel<=Ve.WARN&&x_.warn(`Auth (${zi}): ${n}`,...e)}function C_(n,...e){x_.logLevel<=Ve.ERROR&&x_.error(`Auth (${zi}): ${n}`,...e)}function kr(n,...e){throw b0(n,...e)}function ii(n,...e){return b0(n,...e)}function E0(n,e,t){let r=Object.assign(Object.assign({},ZN()),{[e]:t});return new ti("auth","Firebase",r).create(e,{appName:n.name})}function Po(n){return E0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function NH(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&kr(n,"argument-error"),E0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return QN.create(n,...e)}function he(n,e,...t){if(!n)throw b0(e,...t)}function Ro(n){let e="INTERNAL ASSERTION FAILED: "+n;throw C_(e),new Error(e)}function No(n,e){n||Ro(e)}function r0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function kH(){return NN()==="http:"||NN()==="https:"}function NN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function OH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kH()||YP()||"connection"in navigator)?navigator.onLine:!0}function LH(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var uc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,No(t>e,"Short delay should be less than long delay!"),this.isMobile=ZP()||JP()}get(){return OH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function I0(n,e){No(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var R_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ro("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ro("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ro("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var FH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var VH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UH=new uc(3e4,6e4);function ko(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Oo(o,a,u,l){return T(this,arguments,function*(n,e,t,r,i={}){return YN(n,i,()=>T(null,null,function*(){let f={},g={};r&&(e==="GET"?g=r:f={body:JSON.stringify(r)});let y=al(Object.assign({key:n.config.apiKey},g)).slice(1),E=yield n._getAdditionalHeaders();E["Content-Type"]="application/json",n.languageCode&&(E["X-Firebase-Locale"]=n.languageCode);let I=Object.assign({method:e,headers:E},f);return QP()||(I.referrerPolicy="no-referrer"),n.emulatorConfig&&Vi(n.emulatorConfig.host)&&(I.credentials="include"),R_.fetch()(yield JN(n,n.config.apiHost,t,y),I)}))})}function YN(n,e,t){return T(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},FH),e);try{let i=new i0(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw T_(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[l,f]=u.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw T_(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw T_(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw T_(n,"user-disabled",a);let g=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw E0(n,g,f);kr(n,g)}}catch(i){if(i instanceof zn)throw i;kr(n,"network-request-failed",{message:String(i)})}})}function rf(o,a,u,l){return T(this,arguments,function*(n,e,t,r,i={}){let f=yield Oo(n,e,t,r,i);return"mfaPendingCredential"in f&&kr(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function JN(n,e,t,r){return T(this,null,function*(){let i=`${e}${t}?${r}`,o=n,a=o.config.emulator?I0(n.config,i):`${n.config.apiScheme}://${i}`;return VH.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a})}function jH(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var i0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ii(this.auth,"network-request-failed")),UH.get())})}};function T_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ii(n,e,r);return i.customData._tokenResponse=t,i}function kN(n){return n!==void 0&&n.enterprise!==void 0}var o0=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jH(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function BH(n,e){return T(this,null,function*(){return Oo(n,"GET","/v2/recaptchaConfig",ko(n,e))})}function zH(n,e){return T(this,null,function*(){return Oo(n,"POST","/v1/accounts:delete",e)})}function M_(n,e){return T(this,null,function*(){return Oo(n,"POST","/v1/accounts:lookup",e)})}function Qh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function T0(n,e=!1){return T(this,null,function*(){let t=It(n),r=yield t.getIdToken(e),i=C0(r);he(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Qh(t0(i.auth_time)),issuedAtTime:Qh(t0(i.iat)),expirationTime:Qh(t0(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function t0(n){return Number(n)*1e3}function C0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return C_("JWT malformed, contained fewer than 3 sections"),null;try{let i=m_(t);return i?JSON.parse(i):(C_("Failed to decode base64 JWT payload"),null)}catch(i){return C_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ON(n){let e=C0(n);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Jh(n,e,t=!1){return T(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof zn&&$H(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function $H({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var s0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>T(this,null,function*(){yield this.iteration()}),t)}iteration(){return T(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Xh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qh(this.lastLoginAt),this.creationTime=Qh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function P_(n){return T(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Jh(n,M_(t,{idToken:r}));he(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?XN(o.providerUserInfo):[],u=HH(n.providerData,a),l=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!u?.length,g=l?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Xh(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,y)})}function D0(n){return T(this,null,function*(){let e=It(n);yield P_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function HH(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function XN(n){return n.map(e=>{var{providerId:t}=e,r=zp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function qH(n,e){return T(this,null,function*(){let t=yield YN(n,{},()=>T(null,null,function*(){let r=al({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=yield JN(n,i,"/v1/token",`key=${o}`),u=yield n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";let l={method:"POST",headers:u,body:r};return n.emulatorConfig&&Vi(n.emulatorConfig.host)&&(l.credentials="include"),R_.fetch()(a,l)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function WH(n,e){return T(this,null,function*(){return Oo(n,"POST","/v2/accounts:revokeToken",ko(n,e))})}var Yh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ON(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");let t=ON(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return T(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return T(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield qH(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(he(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(he(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ro("not implemented")}};function zs(n,e){he(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var $s=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=zp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new s0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return T(this,null,function*(){let t=yield Jh(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return T0(this,e)}reload(){return D0(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return T(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield P_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return T(this,null,function*(){if(bn(this.auth.app))return Promise.reject(Po(this.auth));let e=yield this.getIdToken();return yield Jh(this,zH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,u,l,f,g;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(i=t.email)!==null&&i!==void 0?i:void 0,I=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,N=(a=t.photoURL)!==null&&a!==void 0?a:void 0,q=(u=t.tenantId)!==null&&u!==void 0?u:void 0,F=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,W=(f=t.createdAt)!==null&&f!==void 0?f:void 0,oe=(g=t.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:ae,emailVerified:le,isAnonymous:Ye,providerData:be,stsTokenManager:R}=t;he(ae&&R,e,"internal-error");let C=Yh.fromJSON(this.name,R);he(typeof ae=="string",e,"internal-error"),zs(y,e.name),zs(E,e.name),he(typeof le=="boolean",e,"internal-error"),he(typeof Ye=="boolean",e,"internal-error"),zs(I,e.name),zs(N,e.name),zs(q,e.name),zs(F,e.name),zs(W,e.name),zs(oe,e.name);let D=new n({uid:ae,auth:e,email:E,emailVerified:le,displayName:y,isAnonymous:Ye,photoURL:N,phoneNumber:I,tenantId:q,stsTokenManager:C,createdAt:W,lastLoginAt:oe});return be&&Array.isArray(be)&&(D.providerData=be.map(x=>Object.assign({},x))),F&&(D._redirectEventId=F),D}static _fromIdTokenResponse(e,t,r=!1){return T(this,null,function*(){let i=new Yh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield P_(o),o})}static _fromGetAccountInfoResponse(e,t,r){return T(this,null,function*(){let i=t.users[0];he(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?XN(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new Yh;u.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Xh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,f),l})}};var LN=new Map;function Mo(n){No(n instanceof Function,"Expected a class definition");let e=LN.get(n);return e?(No(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,LN.set(n,e),e)}var GH=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return T(this,null,function*(){return!0})}_set(t,r){return T(this,null,function*(){this.storage[t]=r})}_get(t){return T(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return T(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),a0=GH;function D_(n,e,t){return`firebase:${n}:${e}:${t}`}var N_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=D_(this.userKey,i.apiKey,o),this.fullPersistenceKey=D_("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return T(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield M_(this.auth,{idToken:e}).catch(()=>{});return t?$s._fromGetAccountInfoResponse(this.auth,t,e):null}return $s._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return T(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return T(this,null,function*(){if(!t.length)return new n(Mo(a0),e,r);let i=(yield Promise.all(t.map(f=>T(null,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||Mo(a0),a=D_(r,e.config.apiKey,e.name),u=null;for(let f of t)try{let g=yield f._get(a);if(g){let y;if(typeof g=="string"){let E=yield M_(e,{idToken:g}).catch(()=>{});if(!E)break;y=yield $s._fromGetAccountInfoResponse(e,E,g)}else y=$s._fromJSON(e,g);f!==o&&(u=y),o=f;break}}catch{}let l=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],u&&(yield o._set(a,u.toJSON())),yield Promise.all(t.map(f=>T(null,null,function*(){if(f!==o)try{yield f._remove(a)}catch{}}))),new n(o,e,r))})}};function FN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(o1(e))return"Blackberry";if(s1(e))return"Webos";if(t1(e))return"Safari";if((e.includes("chrome/")||n1(e))&&!e.includes("edge/"))return"Chrome";if(i1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function e1(n=ln()){return/firefox\//i.test(n)}function t1(n=ln()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n1(n=ln()){return/crios\//i.test(n)}function r1(n=ln()){return/iemobile/i.test(n)}function i1(n=ln()){return/android/i.test(n)}function o1(n=ln()){return/blackberry/i.test(n)}function s1(n=ln()){return/webos/i.test(n)}function S0(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KH(n=ln()){var e;return S0(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZH(){return XP()&&document.documentMode===10}function a1(n=ln()){return S0(n)||i1(n)||s1(n)||o1(n)||/windows phone/i.test(n)||r1(n)}function c1(n,e=[]){let t;switch(n){case"Browser":t=FN(ln());break;case"Worker":t=`${FN(ln())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zi}/${r}`}var c0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,u)=>{try{let l=e(o);a(l)}catch(l){u(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return T(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function QH(t){return T(this,arguments,function*(n,e={}){return Oo(n,"GET","/v2/passwordPolicy",ko(n,e))})}var YH=6,u0=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:YH,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,u;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(u=l.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var l0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k_(this),this.idTokenSubscription=new k_(this),this.beforeStateQueue=new c0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mo(t)),this._initializationPromise=this.queue(()=>T(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield N_.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return T(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return T(this,null,function*(){try{let t=yield M_(this,{idToken:e}),r=yield $s._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return T(this,null,function*(){var t;if(bn(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return T(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return T(this,null,function*(){try{yield P_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=LH()}_delete(){return T(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return T(this,null,function*(){if(bn(this.app))return Promise.reject(Po(this));let t=e?It(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return T(this,null,function*(){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>T(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return T(this,null,function*(){return bn(this.app)?Promise.reject(Po(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bn(this.app)?Promise.reject(Po(this)):this.queue(()=>T(this,null,function*(){yield this.assertedPersistence.setPersistence(Mo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return T(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return T(this,null,function*(){let e=yield QH(this),t=new u0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ti("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return T(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield WH(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return T(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return T(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Mo(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=yield N_.create(this,[Mo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return T(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>T(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return T(this,null,function*(){if(e===this.currentUser)return this.queue(()=>T(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return T(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return T(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return T(this,null,function*(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&PH(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Lo(n){return It(n)}var k_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=rN(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var H_={loadJS(){return T(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JH(n){H_=n}function u1(n){return H_.loadJS(n)}function XH(){return H_.recaptchaEnterpriseScript}function e6(){return H_.gapiScript}function l1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var d0=class{constructor(){this.enterprise=new h0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},h0=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var t6="recaptcha-enterprise",d1="NO_RECAPTCHA",f0=class{constructor(e){this.type=t6,this.auth=Lo(e)}verify(e="verify",t=!1){return T(this,null,function*(){function r(o){return T(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((a,u)=>T(null,null,function*(){BH(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{let f=new o0(l);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(l=>{u(l)})}))})}function i(o,a,u){let l=window.grecaptcha;kN(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(d1)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new d0().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(u=>{if(!t&&kN(window.grecaptcha))i(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XH();l.length!==0&&(l+=u),u1(l).then(()=>{i(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})})}};function Zh(n,e,t,r=!1,i=!1){return T(this,null,function*(){let o=new f0(n),a;if(i)a=d1;else try{a=yield o.verify(t)}catch{a=yield o.verify(t,!0)}let u=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){let l=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){let l=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u})}function O_(n,e,t,r,i){return T(this,null,function*(){var o,a;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let u=yield Zh(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(u=>T(null,null,function*(){if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let l=yield Zh(n,e,t,t==="getOobCode");return r(n,l)}else return Promise.reject(u)}));else if(i==="PHONE_PROVIDER")if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("PHONE_PROVIDER")){let u=yield Zh(n,e,t);return r(n,u).catch(l=>T(null,null,function*(){var f;if(((f=n._getRecaptchaConfig())===null||f===void 0?void 0:f.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let g=yield Zh(n,e,t,!1,!0);return r(n,g)}return Promise.reject(l)}))}else{let u=yield Zh(n,e,t,!1,!0);return r(n,u)}else return Promise.reject(i+" provider is not supported.")})}function A0(n,e){let t=Vs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Ui(o,e??{}))return i;kr(i,"already-initialized")}return t.initialize({options:e})}function n6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Mo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function x0(n,e,t){let r=Lo(n);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=h1(e),{host:a,port:u}=r6(e),l=u===null?"":`:${u}`,f={url:`${o}//${a}${l}/`},g=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(Ui(f,r.config.emulator)&&Ui(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Vi(a)?(ol(`${o}//${a}${l}`),sl("Auth",!0)):i||i6()}function h1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function r6(n){let e=h1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:VN(r.substr(o.length+1))}}else{let[o,a]=r.split(":");return{host:o,port:VN(a)}}}function VN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function i6(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var hl=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ro("not implemented")}_getIdTokenResponse(e){return Ro("not implemented")}_linkToIdToken(e,t){return Ro("not implemented")}_getReauthenticationResolver(e){return Ro("not implemented")}};function o6(n,e){return T(this,null,function*(){return Oo(n,"POST","/v1/accounts:signUp",e)})}function s6(n,e){return T(this,null,function*(){return rf(n,"POST","/v1/accounts:signInWithPassword",ko(n,e))})}function a6(n,e){return T(this,null,function*(){return Oo(n,"POST","/v1/accounts:sendOobCode",ko(n,e))})}function c6(n,e){return T(this,null,function*(){return a6(n,e)})}function u6(n,e){return T(this,null,function*(){return rf(n,"POST","/v1/accounts:signInWithEmailLink",ko(n,e))})}function l6(n,e){return T(this,null,function*(){return rf(n,"POST","/v1/accounts:signInWithEmailLink",ko(n,e))})}var ef=class n extends hl{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return T(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O_(e,t,"signInWithPassword",s6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return u6(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_linkToIdToken(e,t){return T(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return O_(e,r,"signUpPassword",o6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return l6(e,{idToken:t,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function dl(n,e){return T(this,null,function*(){return rf(n,"POST","/v1/accounts:signInWithIdp",ko(n,e))})}var d6="http://localhost",L_=class n extends hl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=zp(t,["providerId","signInMethod"]);if(!r||!i)return null;let a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){let t=this.buildRequest();return dl(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,dl(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,dl(e,t)}buildRequest(){let e={requestUri:d6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=al(t)}return e}};function h6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function f6(n){let e=cl(ul(n)).link,t=e?cl(ul(e)).deep_link_id:null,r=cl(ul(n)).deep_link_id;return(r?cl(ul(r)).link:null)||r||t||e||n}var F_=class n{constructor(e){var t,r,i,o,a,u;let l=cl(ul(e)),f=(t=l.apiKey)!==null&&t!==void 0?t:null,g=(r=l.oobCode)!==null&&r!==void 0?r:null,y=h6((i=l.mode)!==null&&i!==void 0?i:null);he(f&&g&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=g,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=l.lang)!==null&&a!==void 0?a:null,this.tenantId=(u=l.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){let t=f6(e);try{return new n(t)}catch{return null}}};var f1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return ef._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=F_.parseLink(r);return he(i,"argument-error"),ef._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),tf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var V_=class extends tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var R0=(()=>{class n extends V_{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return L_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();function p6(n,e){return T(this,null,function*(){return rf(n,"POST","/v1/accounts:signUp",ko(n,e))})}var fl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return T(this,null,function*(){let o=yield $s._fromIdTokenResponse(e,r,i),a=UN(r);return new n({user:o,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return T(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function UN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var p0=class n extends zn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function p1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?p0._fromErrorAndOperation(n,o,e,r):o})}function m6(n,e,t=!1){return T(this,null,function*(){let r=yield Jh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return fl._forOperation(n,"link",r)})}function g6(n,e,t=!1){return T(this,null,function*(){let{auth:r}=n;if(bn(r.app))return Promise.reject(Po(r));let i="reauthenticate";try{let o=yield Jh(n,p1(r,i,e,n),t);he(o.idToken,r,"internal-error");let a=C0(o.idToken);he(a,r,"internal-error");let{sub:u}=a;return he(n.uid===u,r,"user-mismatch"),fl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&kr(r,"user-mismatch"),o}})}function m1(n,e,t=!1){return T(this,null,function*(){if(bn(n.app))return Promise.reject(Po(n));let r="signIn",i=yield p1(n,r,e),o=yield fl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function M0(n,e){return T(this,null,function*(){return m1(Lo(n),e)})}function _6(n,e,t){var r;he(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),he(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),he(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(he(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(he(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function g1(n){return T(this,null,function*(){let e=Lo(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function P0(n,e,t){return T(this,null,function*(){let r=Lo(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&_6(r,i,t),yield O_(r,i,"getOobCode",c6,"EMAIL_PASSWORD_PROVIDER")})}function N0(n,e,t){return T(this,null,function*(){if(bn(n.app))return Promise.reject(Po(n));let r=Lo(n),a=yield O_(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p6,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&g1(n),l}),u=yield fl._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(u.user),u})}function k0(n,e,t){return bn(n.app)?Promise.reject(Po(n)):M0(It(n),f1.credential(e,t)).catch(r=>T(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&g1(n),r}))}function O0(n,e){return It(n).setPersistence(e)}function L0(n,e,t,r){return It(n).onIdTokenChanged(e,t,r)}function F0(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function V0(n,e,t,r){return It(n).onAuthStateChanged(e,t,r)}var U_="__sak";var j_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(U_,"1"),this.storage.removeItem(U_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var v6=1e3,y6=10,w6=(()=>{class n extends j_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((u,l,f)=>{this.notifyListeners(u,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let u=this.storage.getItem(i);!r&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);ZH()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,y6):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},v6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return T(this,null,function*(){yield ss(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return T(this,null,function*(){let r=yield ss(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return T(this,null,function*(){yield ss(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),of=w6;var E6=(()=>{class n extends j_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),U0=E6;function b6(n){return Promise.all(n.map(e=>T(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var I6=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return T(this,null,function*(){let r=t,{eventId:i,eventType:o,data:a}=r.data,u=this.handlersMap[o];if(!u?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let l=Array.from(u).map(g=>T(this,null,function*(){return g(r.origin,a)})),f=yield b6(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function j0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var m0=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return T(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,l)=>{let f=j0("",20);i.port1.start();let g=setTimeout(()=>{l(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let E=y;if(E.data.eventId===f)switch(E.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(g),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function qi(){return window}function T6(n){qi().location.href=n}function _1(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}function C6(){return T(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function D6(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function S6(){return _1()?self:null}var v1="firebaseLocalStorageDb",A6=1,B_="firebaseLocalStorage",y1="fbase_key",lc=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function q_(n,e){return n.transaction([B_],e?"readwrite":"readonly").objectStore(B_)}function x6(){let n=indexedDB.deleteDatabase(v1);return new lc(n).toPromise()}function g0(){let n=indexedDB.open(v1,A6);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(B_,{keyPath:y1})}catch(i){t(i)}}),n.addEventListener("success",()=>T(null,null,function*(){let r=n.result;r.objectStoreNames.contains(B_)?e(r):(r.close(),yield x6(),e(yield g0()))}))})}function jN(n,e,t){return T(this,null,function*(){let r=q_(n,!0).put({[y1]:e,value:t});return new lc(r).toPromise()})}function R6(n,e){return T(this,null,function*(){let t=q_(n,!1).get(e),r=yield new lc(t).toPromise();return r===void 0?null:r.value})}function BN(n,e){let t=q_(n,!0).delete(e);return new lc(t).toPromise()}var M6=800,P6=3,N6=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return T(this,null,function*(){return this.db?this.db:(this.db=yield g0(),this.db)})}_withRetries(t){return T(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>P6)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return T(this,null,function*(){return _1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return T(this,null,function*(){this.receiver=I6._getInstance(S6()),this.receiver._subscribe("keyChanged",(t,r)=>T(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>T(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return T(this,null,function*(){var t,r;if(this.activeServiceWorker=yield C6(),!this.activeServiceWorker)return;this.sender=new m0(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return T(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||D6()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return T(this,null,function*(){try{if(!indexedDB)return!1;let t=yield g0();return yield jN(t,U_,"1"),yield BN(t,U_),!0}catch{}return!1})}_withPendingWrite(t){return T(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(i=>jN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return T(this,null,function*(){let r=yield this._withRetries(i=>R6(i,t));return this.localCache[t]=r,r})}_remove(t){return T(this,null,function*(){return this._withPendingWrite(()=>T(this,null,function*(){return yield this._withRetries(r=>BN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return T(this,null,function*(){let t=yield this._withRetries(o=>{let a=q_(o,!1).getAll();return new lc(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:a}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>T(this,null,function*(){return this._poll()}),M6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),w1=N6;var Fde=l1("rcb"),Vde=new uc(3e4,6e4);function E1(n,e){return e?Mo(e):(he(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var nf=class extends hl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dl(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function k6(n){return m1(n.auth,new nf(n),n.bypassAuthState)}function O6(n){let{auth:e,user:t}=n;return he(t,e,"internal-error"),g6(t,new nf(n),n.bypassAuthState)}function L6(n){return T(this,null,function*(){let{auth:e,user:t}=n;return he(t,e,"internal-error"),m6(t,new nf(n),n.bypassAuthState)})}var z_=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>T(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return T(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}let l={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(u)(l))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return k6;case"linkViaPopup":case"linkViaRedirect":return L6;case"reauthViaPopup":case"reauthViaRedirect":return O6;default:kr(this.auth,"internal-error")}}resolve(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){No(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var F6=new uc(2e3,1e4);function B0(n,e,t){return T(this,null,function*(){if(bn(n.app))return Promise.reject(ii(n,"operation-not-supported-in-this-environment"));let r=Lo(n);NH(n,e,tf);let i=E1(r,t);return new V6(r,"signInViaPopup",e,i).executeNotNull()})}var V6=(()=>{class n extends z_{constructor(t,r,i,o,a){super(t,r,o,a),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return T(this,null,function*(){let t=yield this.execute();return he(t,this.auth,"internal-error"),t})}onExecution(){return T(this,null,function*(){No(this.filter.length===1,"Popup operations only handle one event");let t=j0();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ii(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(ii(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ii(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,F6.get())};t()}}n.currentPopupAction=null;return n})(),U6="pendingRedirect",S_=new Map,_0=class n extends z_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return T(this,null,function*(){let e=S_.get(this.auth._key());if(!e){try{let r=(yield j6(this.resolver,this.auth))?yield ss(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}S_.set(this.auth._key(),e)}return this.bypassAuthState||S_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return T(this,null,function*(){if(e.type==="signInViaRedirect")return ss(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,ss(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return T(this,null,function*(){})}cleanUp(){}};function j6(n,e){return T(this,null,function*(){let t=$6(e),r=z6(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function B6(n,e){S_.set(n._key(),e)}function z6(n){return Mo(n._redirectPersistence)}function $6(n){return D_(U6,n.config.apiKey,n.name)}function H6(n,e,t=!1){return T(this,null,function*(){if(bn(n.app))return Promise.reject(Po(n));let r=Lo(n),i=E1(r,e),a=yield new _0(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var q6=600*1e3,v0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!W6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!b1(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ii(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q6&&this.cachedEventUids.clear(),this.cachedEventUids.has(zN(e))}saveEventToCache(e){this.cachedEventUids.add(zN(e)),this.lastProcessedEventTime=Date.now()}};function zN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function b1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function W6(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b1(n);default:return!1}}function G6(t){return T(this,arguments,function*(n,e={}){return Oo(n,"GET","/v1/projects",e)})}var K6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Z6=/^https?/;function Q6(n){return T(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield G6(n);for(let t of e)try{if(Y6(t))return}catch{}kr(n,"unauthorized-domain")})}function Y6(n){let e=r0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Z6.test(t))return!1;if(K6.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var J6=new uc(3e4,6e4);function $N(){let n=qi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function X6(n){return new Promise((e,t)=>{var r,i,o;function a(){$N(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$N(),t(ii(n,"network-request-failed"))},timeout:J6.get()})}if(!((i=(r=qi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=qi().gapi)===null||o===void 0)&&o.load)a();else{let u=l1("iframefcb");return qi()[u]=()=>{gapi.load?a():t(ii(n,"network-request-failed"))},u1(`${e6()}?onload=${u}`).catch(l=>t(l))}}).catch(e=>{throw A_=null,e})}var A_=null;function e5(n){return A_=A_||X6(n),A_}var t5=new uc(5e3,15e3),n5="__/auth/iframe",r5="emulator/auth/iframe",i5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s5(n){let e=n.config;he(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?I0(e,r5):`https://${n.config.authDomain}/${n5}`,r={apiKey:e.apiKey,appName:n.name,v:zi},i=o5.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${al(r).slice(1)}`}function a5(n){return T(this,null,function*(){let e=yield e5(n),t=qi().gapi;return he(t,n,"internal-error"),e.open({where:document.body,url:s5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:i5,dontclear:!0},r=>new Promise((i,o)=>T(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=ii(n,"network-request-failed"),u=qi().setTimeout(()=>{o(a)},t5.get());function l(){qi().clearTimeout(u),i(r)}r.ping(l).then(l,()=>{o(a)})})))})}var c5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u5=500,l5=600,d5="_blank",h5="http://localhost",$_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function f5(n,e,t,r=u5,i=l5){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",l=Object.assign(Object.assign({},c5),{width:r.toString(),height:i.toString(),top:o,left:a}),f=ln().toLowerCase();t&&(u=n1(f)?d5:t),e1(f)&&(e=e||h5,l.scrollbars="yes");let g=Object.entries(l).reduce((E,[I,N])=>`${E}${I}=${N},`,"");if(KH(f)&&u!=="_self")return p5(e||"",u),new $_(null);let y=window.open(e||"",u,g);he(y,n,"popup-blocked");try{y.focus()}catch{}return new $_(y)}function p5(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var m5="__/auth/handler",g5="emulator/auth/handler",_5=encodeURIComponent("fac");function HN(n,e,t,r,i,o){return T(this,null,function*(){he(n.config.authDomain,n,"auth-domain-config-required"),he(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zi,eventId:i};if(e instanceof tf){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",nN(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[g,y]of Object.entries(o||{}))a[g]=y}if(e instanceof V_){let g=e.getScopes().filter(y=>y!=="");g.length>0&&(a.scopes=g.join(","))}n.tenantId&&(a.tid=n.tenantId);let u=a;for(let g of Object.keys(u))u[g]===void 0&&delete u[g];let l=yield n._getAppCheckToken(),f=l?`#${_5}=${encodeURIComponent(l)}`:"";return`${v5(n)}?${al(u).slice(1)}${f}`})}function v5({config:n}){return n.emulator?I0(n,g5):`https://${n.authDomain}/${m5}`}var n0="webStorageSupport",y0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U0,this._completeRedirectFn=H6,this._overrideRedirectResult=B6}_openPopup(e,t,r,i){return T(this,null,function*(){var o;No((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let a=yield HN(e,t,r,r0(),i);return f5(e,a,j0())})}_openRedirect(e,t,r,i){return T(this,null,function*(){yield this._originValidation(e);let o=yield HN(e,t,r,r0(),i);return T6(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(No(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return T(this,null,function*(){let t=yield a5(e),r=new v0(e);return t.register("authEvent",i=>(he(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(n0,{type:n0},i=>{var o;let a=(o=i?.[0])===null||o===void 0?void 0:o[n0];a!==void 0&&t(!!a),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Q6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return a1()||t1()||S0()}},I1=y0;var qN="@firebase/auth",WN="1.10.8";var w0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return T(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function y5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w5(n){_r(new En("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c1(n)},f=new l0(r,i,o,l);return n6(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_r(new En("auth-internal",e=>{let t=Lo(e.getProvider("auth").getImmediate());return(r=>new w0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),lt(qN,WN,y5(n)),lt(qN,WN,"esm2017")}var E5=300,b5=PI("authIdTokenMaxAge")||E5,GN=null,I5=n=>e=>T(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>b5)return;let i=t?.token;GN!==i&&(GN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function z0(n=Ao()){let e=Vs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=A0(n,{popupRedirectResolver:I1,persistence:[w1,of,U0]}),r=PI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let a=I5(o.toString());F0(t,a,()=>a(t.currentUser)),L0(t,u=>a(u))}}let i=RI("auth");return i&&x0(t,`http://${i}`),t}function T5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}JH({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ii("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",T5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w5("Browser");var T1="auth",Bt=class{constructor(e){return e}},dc=class{constructor(){return Us(T1)}};var $0=new X("angularfire2.auth-instances");function l8(n,e){let t=cc(T1,n,e);return t&&new Bt(t)}function d8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bt(r)}}var h8={provide:dc,deps:[[new an,$0]]},f8={provide:Bt,useFactory:l8,deps:[[new an,$0],ni]};function C1(n,...e){return lt("angularfire",$i.full,"auth"),Un([f8,h8,{provide:$0,useFactory:d8(n),multi:!0,deps:[Ke,wt,Hi,xo,[new an,Bs],...e]}])}var W_=dt(N0,!0,2);var D1=dt(z0,!0);var Hs=dt(V0,!0);var S1=dt(P0,!0,2);var H0=dt(O0,!0);var A1=dt(k0,!0,2);var x1=dt(B0,!0,2);var R1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},M1={};var Fo,q0;(function(){var n;function e(R,C){function D(){}D.prototype=C.prototype,R.D=C.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(x,M,k){for(var A=Array(arguments.length-2),Dt=2;Dt<arguments.length;Dt++)A[Dt-2]=arguments[Dt];return C.prototype[M].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,C,D){D||(D=0);var x=Array(16);if(typeof C=="string")for(var M=0;16>M;++M)x[M]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(M=0;16>M;++M)x[M]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=R.g[0],D=R.g[1],M=R.g[2];var k=R.g[3],A=C+(k^D&(M^k))+x[0]+3614090360&4294967295;C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[1]+3905402710&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[2]+606105819&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[3]+3250441966&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+x[4]+4118548399&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[5]+1200080426&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[6]+2821735955&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[7]+4249261313&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+x[8]+1770035416&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[9]+2336552879&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[10]+4294925233&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[11]+2304563134&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(k^D&(M^k))+x[12]+1804603682&4294967295,C=D+(A<<7&4294967295|A>>>25),A=k+(M^C&(D^M))+x[13]+4254626195&4294967295,k=C+(A<<12&4294967295|A>>>20),A=M+(D^k&(C^D))+x[14]+2792965006&4294967295,M=k+(A<<17&4294967295|A>>>15),A=D+(C^M&(k^C))+x[15]+1236535329&4294967295,D=M+(A<<22&4294967295|A>>>10),A=C+(M^k&(D^M))+x[1]+4129170786&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[6]+3225465664&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[11]+643717713&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[0]+3921069994&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+x[5]+3593408605&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[10]+38016083&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[15]+3634488961&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[4]+3889429448&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+x[9]+568446438&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[14]+3275163606&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[3]+4107603335&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[8]+1163531501&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(M^k&(D^M))+x[13]+2850285829&4294967295,C=D+(A<<5&4294967295|A>>>27),A=k+(D^M&(C^D))+x[2]+4243563512&4294967295,k=C+(A<<9&4294967295|A>>>23),A=M+(C^D&(k^C))+x[7]+1735328473&4294967295,M=k+(A<<14&4294967295|A>>>18),A=D+(k^C&(M^k))+x[12]+2368359562&4294967295,D=M+(A<<20&4294967295|A>>>12),A=C+(D^M^k)+x[5]+4294588738&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[8]+2272392833&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[11]+1839030562&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[14]+4259657740&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+x[1]+2763975236&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[4]+1272893353&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[7]+4139469664&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[10]+3200236656&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+x[13]+681279174&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[0]+3936430074&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[3]+3572445317&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[6]+76029189&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(D^M^k)+x[9]+3654602809&4294967295,C=D+(A<<4&4294967295|A>>>28),A=k+(C^D^M)+x[12]+3873151461&4294967295,k=C+(A<<11&4294967295|A>>>21),A=M+(k^C^D)+x[15]+530742520&4294967295,M=k+(A<<16&4294967295|A>>>16),A=D+(M^k^C)+x[2]+3299628645&4294967295,D=M+(A<<23&4294967295|A>>>9),A=C+(M^(D|~k))+x[0]+4096336452&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[7]+1126891415&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[14]+2878612391&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[5]+4237533241&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+x[12]+1700485571&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[3]+2399980690&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[10]+4293915773&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[1]+2240044497&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+x[8]+1873313359&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[15]+4264355552&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[6]+2734768916&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[13]+1309151649&4294967295,D=M+(A<<21&4294967295|A>>>11),A=C+(M^(D|~k))+x[4]+4149444226&4294967295,C=D+(A<<6&4294967295|A>>>26),A=k+(D^(C|~M))+x[11]+3174756917&4294967295,k=C+(A<<10&4294967295|A>>>22),A=M+(C^(k|~D))+x[2]+718787259&4294967295,M=k+(A<<15&4294967295|A>>>17),A=D+(k^(M|~C))+x[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+k&4294967295}r.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var D=C-this.blockSize,x=this.B,M=this.h,k=0;k<C;){if(M==0)for(;k<=D;)i(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<C;)if(x[M++]=R.charCodeAt(k++),M==this.blockSize){i(this,x),M=0;break}}else for(;k<C;)if(x[M++]=R[k++],M==this.blockSize){i(this,x),M=0;break}}this.h=M,this.o+=C},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var D=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=D&255,D/=256;for(this.u(R),R=Array(16),C=D=0;4>C;++C)for(var x=0;32>x;x+=8)R[D++]=this.g[C]>>>x&255;return R};function o(R,C){var D=u;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=C(R)}function a(R,C){this.h=C;for(var D=[],x=!0,M=R.length-1;0<=M;M--){var k=R[M]|0;x&&k==C||(D[M]=k,x=!1)}this.g=D}var u={};function l(R){return-128<=R&&128>R?o(R,function(C){return new a([C|0],0>C?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return y;if(0>R)return F(f(-R));for(var C=[],D=1,x=0;R>=D;x++)C[x]=R/D|0,D*=4294967296;return new a(C,0)}function g(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return F(g(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(C,8)),x=y,M=0;M<R.length;M+=8){var k=Math.min(8,R.length-M),A=parseInt(R.substring(M,M+k),C);8>k?(k=f(Math.pow(C,k)),x=x.j(k).add(f(A))):(x=x.j(D),x=x.add(f(A)))}return x}var y=l(0),E=l(1),I=l(16777216);n=a.prototype,n.m=function(){if(q(this))return-F(this).m();for(var R=0,C=1,D=0;D<this.g.length;D++){var x=this.i(D);R+=(0<=x?x:4294967296+x)*C,C*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(q(this))return"-"+F(this).toString(R);for(var C=f(Math.pow(R,6)),D=this,x="";;){var M=le(D,C).g;D=W(D,M.j(C));var k=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=M,N(D))return k+x;for(;6>k.length;)k="0"+k;x=k+x}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function q(R){return R.h==-1}n.l=function(R){return R=W(this,R),q(R)?-1:N(R)?0:1};function F(R){for(var C=R.g.length,D=[],x=0;x<C;x++)D[x]=~R.g[x];return new a(D,~R.h).add(E)}n.abs=function(){return q(this)?F(this):this},n.add=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0,M=0;M<=C;M++){var k=x+(this.i(M)&65535)+(R.i(M)&65535),A=(k>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);x=A>>>16,k&=65535,A&=65535,D[M]=A<<16|k}return new a(D,D[D.length-1]&-2147483648?-1:0)};function W(R,C){return R.add(F(C))}n.j=function(R){if(N(this)||N(R))return y;if(q(this))return q(R)?F(this).j(F(R)):F(F(this).j(R));if(q(R))return F(this.j(F(R)));if(0>this.l(I)&&0>R.l(I))return f(this.m()*R.m());for(var C=this.g.length+R.g.length,D=[],x=0;x<2*C;x++)D[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<R.g.length;M++){var k=this.i(x)>>>16,A=this.i(x)&65535,Dt=R.i(M)>>>16,Fr=R.i(M)&65535;D[2*x+2*M]+=A*Fr,oe(D,2*x+2*M),D[2*x+2*M+1]+=k*Fr,oe(D,2*x+2*M+1),D[2*x+2*M+1]+=A*Dt,oe(D,2*x+2*M+1),D[2*x+2*M+2]+=k*Dt,oe(D,2*x+2*M+2)}for(x=0;x<C;x++)D[x]=D[2*x+1]<<16|D[2*x];for(x=C;x<2*C;x++)D[x]=0;return new a(D,0)};function oe(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function ae(R,C){this.g=R,this.h=C}function le(R,C){if(N(C))throw Error("division by zero");if(N(R))return new ae(y,y);if(q(R))return C=le(F(R),C),new ae(F(C.g),F(C.h));if(q(C))return C=le(R,F(C)),new ae(F(C.g),C.h);if(30<R.g.length){if(q(R)||q(C))throw Error("slowDivide_ only works with positive integers.");for(var D=E,x=C;0>=x.l(R);)D=Ye(D),x=Ye(x);var M=be(D,1),k=be(x,1);for(x=be(x,2),D=be(D,2);!N(x);){var A=k.add(x);0>=A.l(R)&&(M=M.add(D),k=A),x=be(x,1),D=be(D,1)}return C=W(R,M.j(C)),new ae(M,C)}for(M=y;0<=R.l(C);){for(D=Math.max(1,Math.floor(R.m()/C.m())),x=Math.ceil(Math.log(D)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),k=f(D),A=k.j(C);q(A)||0<A.l(R);)D-=x,k=f(D),A=k.j(C);N(k)&&(k=E),M=M.add(k),R=W(R,A)}return new ae(M,R)}n.A=function(R){return le(this,R).h},n.and=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0;x<C;x++)D[x]=this.i(x)&R.i(x);return new a(D,this.h&R.h)},n.or=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0;x<C;x++)D[x]=this.i(x)|R.i(x);return new a(D,this.h|R.h)},n.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),D=[],x=0;x<C;x++)D[x]=this.i(x)^R.i(x);return new a(D,this.h^R.h)};function Ye(R){for(var C=R.g.length+1,D=[],x=0;x<C;x++)D[x]=R.i(x)<<1|R.i(x-1)>>>31;return new a(D,R.h)}function be(R,C){var D=C>>5;C%=32;for(var x=R.g.length-D,M=[],k=0;k<x;k++)M[k]=0<C?R.i(k+D)>>>C|R.i(k+D+1)<<32-C:R.i(k+D);return new a(M,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,q0=M1.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=g,Fo=M1.Integer=a}).apply(typeof R1<"u"?R1:typeof self<"u"?self:typeof window<"u"?window:{});var G_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vo={};var W0,p8,pl,G0,sf,K_,K0,Z0,Q0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,v){return d==Array.prototype||d==Object.prototype||(d[m]=v.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof G_=="object"&&G_];for(var m=0;m<d.length;++m){var v=d[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(d,m){if(m)e:{var v=r;d=d.split(".");for(var b=0;b<d.length-1;b++){var P=d[b];if(!(P in v))break e;v=v[P]}d=d[d.length-1],b=v[d],m=m(b),m!=b&&m!=null&&e(v,d,{configurable:!0,writable:!0,value:m})}}function o(d,m){d instanceof String&&(d+="");var v=0,b=!1,P={next:function(){if(!b&&v<d.length){var B=v++;return{value:m(B,d[B]),done:!1}}return b=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(d){return d||function(){return o(this,function(m,v){return v})}});var a=a||{},u=this||self;function l(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function f(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function g(d,m,v){return d.call.apply(d.bind,arguments)}function y(d,m,v){if(!d)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,b),d.apply(m,P)}}return function(){return d.apply(m,arguments)}}function E(d,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:y,E.apply(null,arguments)}function I(d,m){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),d.apply(this,b)}}function N(d,m){function v(){}v.prototype=m.prototype,d.aa=m.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(b,P,B){for(var J=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)J[ke-2]=arguments[ke];return m.prototype[P].apply(b,J)}}function q(d){let m=d.length;if(0<m){let v=Array(m);for(let b=0;b<m;b++)v[b]=d[b];return v}return[]}function F(d,m){for(let v=1;v<arguments.length;v++){let b=arguments[v];if(l(b)){let P=d.length||0,B=b.length||0;d.length=P+B;for(let J=0;J<B;J++)d[P+J]=b[J]}else d.push(b)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function oe(d){return/^[\s\xa0]*$/.test(d)}function ae(){var d=u.navigator;return d&&(d=d.userAgent)?d:""}function le(d){return le[" "](d),d}le[" "]=function(){};var Ye=ae().indexOf("Gecko")!=-1&&!(ae().toLowerCase().indexOf("webkit")!=-1&&ae().indexOf("Edge")==-1)&&!(ae().indexOf("Trident")!=-1||ae().indexOf("MSIE")!=-1)&&ae().indexOf("Edge")==-1;function be(d,m,v){for(let b in d)m.call(v,d[b],b,d)}function R(d,m){for(let v in d)m.call(void 0,d[v],v,d)}function C(d){let m={};for(let v in d)m[v]=d[v];return m}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(d,m){let v,b;for(let P=1;P<arguments.length;P++){b=arguments[P];for(v in b)d[v]=b[v];for(let B=0;B<D.length;B++)v=D[B],Object.prototype.hasOwnProperty.call(b,v)&&(d[v]=b[v])}}function M(d){var m=1;d=d.split(":");let v=[];for(;0<m&&d.length;)v.push(d.shift()),m--;return d.length&&v.push(d.join(":")),v}function k(d){u.setTimeout(()=>{throw d},0)}function A(){var d=ut;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class Dt{constructor(){this.h=this.g=null}add(m,v){let b=Fr.get();b.set(m,v),this.h?this.h.next=b:this.g=b,this.h=b}}var Fr=new W(()=>new Ie,d=>d.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Wo,me=!1,ut=new Dt,fn=()=>{let d=u.Promise.resolve(void 0);Wo=()=>{d.then(In)}};var In=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(v){k(v)}var m=Fr;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}me=!1};function rt(){this.s=this.s,this.C=this.C}rt.prototype.s=!1,rt.prototype.ma=function(){this.s||(this.s=!0,this.N())},rt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ue=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let v=()=>{};u.addEventListener("test",v,m),u.removeEventListener("test",v,m)}catch{}return d})();function kn(d,m){if(ve.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,b=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(Ye){e:{try{le(m.nodeName);var P=!0;break e}catch{}P=!1}P||(m=null)}}else v=="mouseover"?m=d.fromElement:v=="mouseout"&&(m=d.toElement);this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:li[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&kn.aa.h.call(this)}}N(kn,ve);var li={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Go="closure_listenable_"+(1e6*Math.random()|0),jl=0;function Bl(d,m,v,b,P){this.listener=d,this.proxy=null,this.src=m,this.type=v,this.capture=!!b,this.ha=P,this.key=++jl,this.da=this.fa=!1}function di(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ko(d){this.src=d,this.g={},this.h=0}Ko.prototype.add=function(d,m,v,b,P){var B=d.toString();d=this.g[B],d||(d=this.g[B]=[],this.h++);var J=xc(d,m,b,P);return-1<J?(m=d[J],v||(m.fa=!1)):(m=new Bl(m,this.src,B,!!b,P),m.fa=v,d.push(m)),m};function zl(d,m){var v=m.type;if(v in d.g){var b=d.g[v],P=Array.prototype.indexOf.call(b,m,void 0),B;(B=0<=P)&&Array.prototype.splice.call(b,P,1),B&&(di(m),d.g[v].length==0&&(delete d.g[v],d.h--))}}function xc(d,m,v,b){for(var P=0;P<d.length;++P){var B=d[P];if(!B.da&&B.listener==m&&B.capture==!!v&&B.ha==b)return P}return-1}var Rc="closure_lm_"+(1e6*Math.random()|0),ra={};function ia(d,m,v,b,P){if(b&&b.once)return Mc(d,m,v,b,P);if(Array.isArray(m)){for(var B=0;B<m.length;B++)ia(d,m[B],v,b,P);return null}return v=kc(v),d&&d[Go]?d.K(m,v,f(b)?!!b.capture:!!b,P):Vf(d,m,v,!1,b,P)}function Vf(d,m,v,b,P,B){if(!m)throw Error("Invalid event type");var J=f(P)?!!P.capture:!!P,ke=oa(d);if(ke||(d[Rc]=ke=new Ko(d)),v=ke.add(m,v,b,J,B),v.proxy)return v;if(b=Uf(),v.proxy=b,b.src=d,b.listener=v,d.addEventListener)Ue||(P=J),P===void 0&&(P=!1),d.addEventListener(m.toString(),b,P);else if(d.attachEvent)d.attachEvent(jf(m.toString()),b);else if(d.addListener&&d.removeListener)d.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Uf(){function d(v){return m.call(d.src,d.listener,v)}let m=Iy;return d}function Mc(d,m,v,b,P){if(Array.isArray(m)){for(var B=0;B<m.length;B++)Mc(d,m[B],v,b,P);return null}return v=kc(v),d&&d[Go]?d.L(m,v,f(b)?!!b.capture:!!b,P):Vf(d,m,v,!0,b,P)}function $l(d,m,v,b,P){if(Array.isArray(m))for(var B=0;B<m.length;B++)$l(d,m[B],v,b,P);else b=f(b)?!!b.capture:!!b,v=kc(v),d&&d[Go]?(d=d.i,m=String(m).toString(),m in d.g&&(B=d.g[m],v=xc(B,v,b,P),-1<v&&(di(B[v]),Array.prototype.splice.call(B,v,1),B.length==0&&(delete d.g[m],d.h--)))):d&&(d=oa(d))&&(m=d.g[m.toString()],d=-1,m&&(d=xc(m,v,b,P)),(v=-1<d?m[d]:null)&&Pc(v))}function Pc(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[Go])zl(m.i,d);else{var v=d.type,b=d.proxy;m.removeEventListener?m.removeEventListener(v,b,d.capture):m.detachEvent?m.detachEvent(jf(v),b):m.addListener&&m.removeListener&&m.removeListener(b),(v=oa(m))?(zl(v,d),v.h==0&&(v.src=null,m[Rc]=null)):di(d)}}}function jf(d){return d in ra?ra[d]:ra[d]="on"+d}function Iy(d,m){if(d.da)d=!0;else{m=new kn(m,this);var v=d.listener,b=d.ha||d.src;d.fa&&Pc(d),d=v.call(b,m)}return d}function oa(d){return d=d[Rc],d instanceof Ko?d:null}var Nc="__closure_events_fn_"+(1e9*Math.random()>>>0);function kc(d){return typeof d=="function"?d:(d[Nc]||(d[Nc]=function(m){return d.handleEvent(m)}),d[Nc])}function en(){rt.call(this),this.i=new Ko(this),this.M=this,this.F=null}N(en,rt),en.prototype[Go]=!0,en.prototype.removeEventListener=function(d,m,v,b){$l(this,d,m,v,b)};function tn(d,m){var v,b=d.F;if(b)for(v=[];b;b=b.F)v.push(b);if(d=d.M,b=m.type||m,typeof m=="string")m=new ve(m,d);else if(m instanceof ve)m.target=m.target||d;else{var P=m;m=new ve(b,d),x(m,P)}if(P=!0,v)for(var B=v.length-1;0<=B;B--){var J=m.g=v[B];P=sa(J,b,!0,m)&&P}if(J=m.g=d,P=sa(J,b,!0,m)&&P,P=sa(J,b,!1,m)&&P,v)for(B=0;B<v.length;B++)J=m.g=v[B],P=sa(J,b,!1,m)&&P}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var v=d.g[m],b=0;b<v.length;b++)di(v[b]);delete d.g[m],d.h--}}this.F=null},en.prototype.K=function(d,m,v,b){return this.i.add(String(d),m,!1,v,b)},en.prototype.L=function(d,m,v,b){return this.i.add(String(d),m,!0,v,b)};function sa(d,m,v,b){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var P=!0,B=0;B<m.length;++B){var J=m[B];if(J&&!J.da&&J.capture==v){var ke=J.listener,yt=J.ha||J.src;J.fa&&zl(d.i,J),P=ke.call(yt,b)!==!1&&P}}return P&&!b.defaultPrevented}function Bf(d,m,v){if(typeof d=="function")v&&(d=E(d,v));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(d,m||0)}function Hl(d){d.g=Bf(()=>{d.g=null,d.i&&(d.i=!1,Hl(d))},d.l);let m=d.h;d.h=null,d.m.apply(null,m)}class ql extends rt{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Hl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zo(d){rt.call(this),this.h=d,this.g={}}N(Zo,rt);var zf=[];function Qo(d){be(d.g,function(m,v){this.g.hasOwnProperty(v)&&Pc(m)},d),d.g={}}Zo.prototype.N=function(){Zo.aa.N.call(this),Qo(this)},Zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wl=u.JSON.stringify,Ty=u.JSON.parse,$f=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Oc(){}Oc.prototype.h=null;function Gl(d){return d.h||(d.h=d.i())}function Hf(){}var aa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kl(){ve.call(this,"d")}N(Kl,ve);function Zl(){ve.call(this,"c")}N(Zl,ve);var eo={},qf=null;function Yo(){return qf=qf||new en}eo.La="serverreachability";function Wf(d){ve.call(this,eo.La,d)}N(Wf,ve);function ca(d){let m=Yo();tn(m,new Wf(m))}eo.STAT_EVENT="statevent";function Gf(d,m){ve.call(this,eo.STAT_EVENT,d),this.stat=m}N(Gf,ve);function pn(d){let m=Yo();tn(m,new Gf(m,d))}eo.Ma="timingevent";function rr(d,m){ve.call(this,eo.Ma,d),this.size=m}N(rr,ve);function ce(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},m)}function Jo(){this.g=!0}Jo.prototype.xa=function(){this.g=!1};function Kf(d,m,v,b,P,B){d.info(function(){if(d.g)if(B)for(var J="",ke=B.split("&"),yt=0;yt<ke.length;yt++){var He=ke[yt].split("=");if(1<He.length){var pt=He[0];He=He[1];var nn=pt.split("_");J=2<=nn.length&&nn[1]=="type"?J+(pt+"="+He+"&"):J+(pt+"=redacted&")}}else J=null;else J=B;return"XMLHTTP REQ ("+b+") [attempt "+P+"]: "+m+`
`+v+`
`+J})}function Zf(d,m,v,b,P,B,J){d.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+P+"]: "+m+`
`+v+`
`+B+" "+J})}function to(d,m,v,b){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+Qf(d,v)+(b?" "+b:"")})}function Ql(d,m){d.info(function(){return"TIMEOUT: "+m})}Jo.prototype.info=function(){};function Qf(d,m){if(!d.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var b=v[d];if(!(2>b.length)){var P=b[1];if(Array.isArray(P)&&!(1>P.length)){var B=P[0];if(B!="noop"&&B!="stop"&&B!="close")for(var J=1;J<P.length;J++)P[J]=""}}}}return Wl(v)}catch{return m}}var Vr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Yl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jl;function Lc(){}N(Lc,Oc),Lc.prototype.g=function(){return new XMLHttpRequest},Lc.prototype.i=function(){return{}},Jl=new Lc;function hi(d,m,v,b){this.j=d,this.i=m,this.l=v,this.R=b||1,this.U=new Zo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yf}function Yf(){this.i=null,this.g="",this.h=!1}var Xl={},ed={};function Xo(d,m,v){d.L=1,d.v=ts(mn(m)),d.m=v,d.P=!0,Jf(d,null)}function Jf(d,m){d.F=Date.now(),Fc(d),d.A=mn(d.v);var v=d.A,b=d.R;Array.isArray(b)||(b=[String(b)]),it(v.i,"t",b),d.C=0,v=d.j.J,d.h=new Yf,d.g=wa(d.j,v?m:null,!d.m),0<d.O&&(d.M=new ql(E(d.Y,d,d.g),d.O)),m=d.U,v=d.g,b=d.ca;var P="readystatechange";Array.isArray(P)||(P&&(zf[0]=P.toString()),P=zf);for(var B=0;B<P.length;B++){var J=ia(v,P[B],b||m.handleEvent,!1,m.h||m);if(!J)break;m.g[J.key]=J}m=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),ca(),Kf(d.i,d.u,d.A,d.l,d.R,d.m)}hi.prototype.ca=function(d){d=d.target;let m=this.M;m&&or(d)==3?m.j():this.Y(d)},hi.prototype.Y=function(d){try{if(d==this.g)e:{let nn=or(this.g);var m=this.g.Ba();let ar=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||op(this.g)))){this.J||nn!=4||m==7||(m==8||0>=ar?ca(3):ca(2)),ua(this);var v=this.g.Z();this.X=v;t:if(Xf(this)){var b=op(this.g);d="";var P=b.length,B=or(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),Ur(this);var J="";break t}this.h.i=new u.TextDecoder}for(m=0;m<P;m++)this.h.h=!0,d+=this.h.i.decode(b[m],{stream:!(B&&m==P-1)});b.length=0,this.h.g+=d,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=v==200,Zf(this.i,this.u,this.A,this.l,this.R,nn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,yt=this.g;if((ke=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(ke)){var He=ke;break t}}He=null}if(v=He)to(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vc(this,v);else{this.o=!1,this.s=3,pn(12),fi(this),Ur(this);break e}}if(this.P){v=!0;let cr;for(;!this.J&&this.C<J.length;)if(cr=Cy(this,J),cr==ed){nn==4&&(this.s=4,pn(14),v=!1),to(this.i,this.l,null,"[Incomplete Response]");break}else if(cr==Xl){this.s=4,pn(15),to(this.i,this.l,J,"[Invalid Chunk]"),v=!1;break}else to(this.i,this.l,cr,null),Vc(this,cr);if(Xf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||J.length!=0||this.h.h||(this.s=1,pn(16),v=!1),this.o=this.o&&v,!v)to(this.i,this.l,J,"[Invalid Chunked Response]"),fi(this),Ur(this);else if(0<J.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Hc(pt),pt.M=!0,pn(11))}}else to(this.i,this.l,J,null),Vc(this,J);nn==4&&fi(this),this.o&&!this.J&&(nn==4?up(this.j,this):(this.o=!1,Fc(this)))}else sp(this.g),v==400&&0<J.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),fi(this),Ur(this)}}}catch{}finally{}};function Xf(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Cy(d,m){var v=d.C,b=m.indexOf(`
`,v);return b==-1?ed:(v=Number(m.substring(v,b)),isNaN(v)?Xl:(b+=1,b+v>m.length?ed:(m=m.slice(b,b+v),d.C=b+v,m)))}hi.prototype.cancel=function(){this.J=!0,fi(this)};function Fc(d){d.S=Date.now()+d.I,ep(d,d.I)}function ep(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ce(E(d.ba,d),m)}function ua(d){d.B&&(u.clearTimeout(d.B),d.B=null)}hi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Ql(this.i,this.A),this.L!=2&&(ca(),pn(17)),fi(this),this.s=2,Ur(this)):ep(this,this.S-d)};function Ur(d){d.j.G==0||d.J||up(d.j,d)}function fi(d){ua(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,Qo(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function Vc(d,m){try{var v=d.j;if(v.G!=0&&(v.g==d||pi(v.h,d))){if(!d.K&&pi(v.h,d)&&v.G==3){try{var b=v.Da.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var P=b;if(P[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)qc(v),Bc(v);else break e;hd(v),pn(18)}}else v.za=P[1],0<v.za-v.T&&37500>P[2]&&v.F&&v.v==0&&!v.C&&(v.C=ce(E(v.Za,v),6e3));if(1>=da(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else oo(v,11)}else if((d.K||v.g==d)&&qc(v),!oe(m))for(P=v.Da.g.parse(m),m=0;m<P.length;m++){let He=P[m];if(v.T=He[0],He=He[1],v.G==2)if(He[0]=="c"){v.K=He[1],v.ia=He[2];let pt=He[3];pt!=null&&(v.la=pt,v.j.info("VER="+v.la));let nn=He[4];nn!=null&&(v.Aa=nn,v.j.info("SVER="+v.Aa));let ar=He[5];ar!=null&&typeof ar=="number"&&0<ar&&(b=1.5*ar,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;let cr=d.g;if(cr){let vi=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vi){var B=b.h;B.g||vi.indexOf("spdy")==-1&&vi.indexOf("quic")==-1&&vi.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(mi(B,B.h),B.h=null))}if(b.D){let Kc=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Kc&&(b.ya=Kc,Je(b.I,b.D,Kc))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var J=d;if(b.qa=md(b,b.J?b.ia:null,b.W),J.K){Uc(b.h,J);var ke=J,yt=b.L;yt&&(ke.I=yt),ke.B&&(ua(ke),Fc(ke)),b.g=J}else $c(b);0<v.i.length&&zc(v)}else He[0]!="stop"&&He[0]!="close"||oo(v,7);else v.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?oo(v,7):ya(v):He[0]!="noop"&&v.l&&v.l.ta(He),v.v=0)}}ca(4)}catch{}}var la=class{constructor(d,m){this.g=d,this.map=m}};function $e(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ft(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function da(d){return d.h?1:d.g?d.g.size:0}function pi(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function mi(d,m){d.g?d.g.add(m):d.h=m}function Uc(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}$e.prototype.cancel=function(){if(this.i=xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function xe(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(let v of d.g.values())m=m.concat(v.D);return m}return q(d.i)}function St(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var m=[],v=d.length,b=0;b<v;b++)m.push(d[b]);return m}m=[],v=0;for(b in d)m[v++]=d[b];return m}function td(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var m=[];d=d.length;for(var v=0;v<d;v++)m.push(v);return m}m=[],v=0;for(let b in d)m[v++]=b;return m}}}function ha(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var v=td(d),b=St(d),P=b.length,B=0;B<P;B++)m.call(void 0,b[B],v&&v[B],d)}var On=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dy(d,m){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var b=d[v].indexOf("="),P=null;if(0<=b){var B=d[v].substring(0,b);P=d[v].substring(b+1)}else B=d[v];m(B,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function wr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof wr){this.h=d.h,mt(this,d.j),this.o=d.o,this.g=d.g,Er(this,d.s),this.l=d.l;var m=d.i,v=new ro;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),es(this,v),this.m=d.m}else d&&(m=String(d).match(On))?(this.h=!1,mt(this,m[1]||"",!0),this.o=jr(m[2]||""),this.g=jr(m[3]||"",!0),Er(this,m[4]),this.l=jr(m[5]||"",!0),es(this,m[6]||"",!0),this.m=jr(m[7]||"")):(this.h=!1,this.i=new ro(null,this.h))}wr.prototype.toString=function(){var d=[],m=this.j;m&&d.push(no(m,fa,!0),":");var v=this.g;return(v||m=="file")&&(d.push("//"),(m=this.o)&&d.push(no(m,fa,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(no(v,v.charAt(0)=="/"?id:rd,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",no(v,tp)),d.join("")};function mn(d){return new wr(d)}function mt(d,m,v){d.j=v?jr(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function Er(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function es(d,m,v){m instanceof ro?(d.i=m,od(d.i,d.h)):(v||(m=no(m,jc)),d.i=new ro(m,d.h))}function Je(d,m,v){d.i.set(m,v)}function ts(d){return Je(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function jr(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function no(d,m,v){return typeof d=="string"?(d=encodeURI(d).replace(m,nd),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function nd(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var fa=/[#\/\?@]/g,rd=/[#\?:]/g,id=/[#\?]/g,jc=/[#\?@]/g,tp=/#/g;function ro(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function gi(d){d.g||(d.g=new Map,d.h=0,d.i&&Dy(d.i,function(m,v){d.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=ro.prototype,n.add=function(d,m){gi(this),this.i=null,d=io(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(m),this.h+=1,this};function ye(d,m){gi(d),m=io(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function ir(d,m){return gi(d),m=io(d,m),d.g.has(m)}n.forEach=function(d,m){gi(this),this.g.forEach(function(v,b){v.forEach(function(P){d.call(m,P,b,this)},this)},this)},n.na=function(){gi(this);let d=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let b=0;b<m.length;b++){let P=d[b];for(let B=0;B<P.length;B++)v.push(m[b])}return v},n.V=function(d){gi(this);let m=[];if(typeof d=="string")ir(this,d)&&(m=m.concat(this.g.get(io(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)m=m.concat(d[v])}return m},n.set=function(d,m){return gi(this),this.i=null,d=io(this,d),ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},n.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function it(d,m,v){ye(d,m),0<v.length&&(d.i=null,d.g.set(io(d,m),q(v)),d.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var b=m[v];let B=encodeURIComponent(String(b)),J=this.V(b);for(b=0;b<J.length;b++){var P=B;J[b]!==""&&(P+="="+encodeURIComponent(String(J[b]))),d.push(P)}}return this.i=d.join("&")};function io(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function od(d,m){m&&!d.j&&(gi(d),d.i=null,d.g.forEach(function(v,b){var P=b.toLowerCase();b!=P&&(ye(this,b),it(this,P,v))},d)),d.j=m}function sd(d,m){let v=new Jo;if(u.Image){let b=new Image;b.onload=I(Tn,v,"TestLoadImage: loaded",!0,m,b),b.onerror=I(Tn,v,"TestLoadImage: error",!1,m,b),b.onabort=I(Tn,v,"TestLoadImage: abort",!1,m,b),b.ontimeout=I(Tn,v,"TestLoadImage: timeout",!1,m,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=d}else m(!1)}function ad(d,m){let v=new Jo,b=new AbortController,P=setTimeout(()=>{b.abort(),Tn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:b.signal}).then(B=>{clearTimeout(P),B.ok?Tn(v,"TestPingServer: ok",!0,m):Tn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(P),Tn(v,"TestPingServer: error",!1,m)})}function Tn(d,m,v,b,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),b(v)}catch{}}function cd(){this.g=new $f}function pa(d,m,v){let b=v||"";try{ha(d,function(P,B){let J=P;f(P)&&(J=Wl(P)),m.push(b+B+"="+encodeURIComponent(J))})}catch(P){throw m.push(b+"type="+encodeURIComponent("_badmap")),P}}function At(d){this.l=d.Ub||null,this.j=d.eb||!1}N(At,Oc),At.prototype.g=function(){return new br(this.l,this.j)},At.prototype.i=(function(d){return function(){return d}})({});function br(d,m){en.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(br,en),n=br.prototype,n.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,ma(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ns(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ma(this)),this.g&&(this.readyState=3,ma(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ud(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function ud(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?ns(this):ma(this),this.readyState==3&&ud(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ns(this))},n.Qa=function(d){this.g&&(this.response=d,ns(this))},n.ga=function(){this.g&&ns(this)};function ns(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ma(d)}n.setRequestHeader=function(d,m){this.u.append(d,m)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=m.next();return d.join(`\r
`)};function ma(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ld(d){let m="";return be(d,function(v,b){m+=b,m+=":",m+=v,m+=`\r
`}),m}function ga(d,m,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=ld(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):Je(d,m,v))}function vt(d){en.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(vt,en);var np=/^https?$/i,je=["POST","PUT"];n=vt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,m,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jl.g(),this.v=this.o?Gl(this.o):Gl(Jl),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(B){rp(this,B);return}if(d=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var P in b)v.set(P,b[P]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(let B of b.keys())v.set(B,b.get(B));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(B=>B.toLowerCase()=="content-type"),P=u.FormData&&d instanceof u.FormData,!(0<=Array.prototype.indexOf.call(je,m,void 0))||b||P||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,J]of v)this.g.setRequestHeader(B,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ip(this),this.u=!0,this.g.send(d),this.u=!1}catch(B){rp(this,B)}};function rp(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,Wn(d),_a(d)}function Wn(d){d.A||(d.A=!0,tn(d,"complete"),tn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,tn(this,"complete"),tn(this,"abort"),_a(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rs(this):this.bb())},n.bb=function(){rs(this)};function rs(d){if(d.h&&typeof a<"u"&&(!d.v[1]||or(d)!=4||d.Z()!=2)){if(d.u&&or(d)==4)Bf(d.Ea,0,d);else if(tn(d,"readystatechange"),or(d)==4){d.h=!1;try{let J=d.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var b;if(b=J===0){var P=String(d.D).match(On)[1]||null;!P&&u.self&&u.self.location&&(P=u.self.location.protocol.slice(0,-1)),b=!np.test(P?P.toLowerCase():"")}v=b}if(v)tn(d,"complete"),tn(d,"success");else{d.m=6;try{var B=2<or(d)?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.Z()+"]",Wn(d)}}finally{_a(d)}}}}function _a(d,m){if(d.g){ip(d);let v=d.g,b=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||tn(d,"ready");try{v.onreadystatechange=b}catch{}}}function ip(d){d.I&&(u.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function or(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<or(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),Ty(m)}};function op(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function sp(d){let m={};d=(d.g&&2<=or(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<d.length;b++){if(oe(d[b]))continue;var v=M(d[b]);let P=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();let B=m[P]||[];m[P]=B,B.push(v)}R(m,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function va(d,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||m}function ap(d){this.Aa=0,this.i=[],this.j=new Jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=va("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=va("baseRetryDelayMs",5e3,d),this.cb=va("retryDelaySeedMs",1e4,d),this.Wa=va("forwardChannelMaxRetries",2,d),this.wa=va("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(d&&d.concurrentRequestLimit),this.Da=new cd,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ap.prototype,n.la=8,n.G=1,n.connect=function(d,m,v,b){pn(0),this.W=d,this.H=m||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=md(this,null,this.W),zc(this)};function ya(d){if(sr(d),d.G==3){var m=d.U++,v=mn(d.I);if(Je(v,"SID",d.K),Je(v,"RID",m),Je(v,"TYPE","terminate"),is(d,v),m=new hi(d,d.j,m),m.L=2,m.v=ts(mn(v)),v=!1,u.navigator&&u.navigator.sendBeacon)try{v=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&u.Image&&(new Image().src=m.v,v=!0),v||(m.g=wa(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Fc(m)}pd(d)}function Bc(d){d.g&&(Hc(d),d.g.cancel(),d.g=null)}function sr(d){Bc(d),d.u&&(u.clearTimeout(d.u),d.u=null),qc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&u.clearTimeout(d.s),d.s=null)}function zc(d){if(!ft(d.h)&&!d.s){d.s=!0;var m=d.Ga;Wo||fn(),me||(Wo(),me=!0),ut.add(m,d),d.B=0}}function cp(d,m){return da(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ce(E(d.Ga,d,m),Wc(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let P=new hi(this,this.j,d),B=this.o;if(this.S&&(B?(B=C(B),x(B,this.S)):B=this.S),this.m!==null||this.O||(P.H=B,B=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=dd(this,P,m),v=mn(this.I),Je(v,"RID",d),Je(v,"CVER",22),this.D&&Je(v,"X-HTTP-Session-Id",this.D),is(this,v),B&&(this.O?m="headers="+encodeURIComponent(String(ld(B)))+"&"+m:this.m&&ga(v,this.m,B)),mi(this.h,P),this.Ua&&Je(v,"TYPE","init"),this.P?(Je(v,"$req",m),Je(v,"SID","null"),P.T=!0,Xo(P,v,null)):Xo(P,v,m),this.G=2}}else this.G==3&&(d?Br(this,d):this.i.length==0||ft(this.h)||Br(this))};function Br(d,m){var v;m?v=m.l:v=d.U++;let b=mn(d.I);Je(b,"SID",d.K),Je(b,"RID",v),Je(b,"AID",d.T),is(d,b),d.m&&d.o&&ga(b,d.m,d.o),v=new hi(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),m&&(d.i=m.D.concat(d.i)),m=dd(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),mi(d.h,v),Xo(v,b,m)}function is(d,m){d.H&&be(d.H,function(v,b){Je(m,b,v)}),d.l&&ha({},function(v,b){Je(m,b,v)})}function dd(d,m,v){v=Math.min(d.i.length,v);var b=d.l?E(d.l.Na,d.l,d):null;e:{var P=d.i;let B=-1;for(;;){let J=["count="+v];B==-1?0<v?(B=P[0].g,J.push("ofs="+B)):B=0:J.push("ofs="+B);let ke=!0;for(let yt=0;yt<v;yt++){let He=P[yt].g,pt=P[yt].map;if(He-=B,0>He)B=Math.max(0,P[yt].g-100),ke=!1;else try{pa(pt,J,"req"+He+"_")}catch{b&&b(pt)}}if(ke){b=J.join("&");break e}}}return d=d.i.splice(0,v),m.D=d,b}function $c(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;Wo||fn(),me||(Wo(),me=!0),ut.add(m,d),d.v=0}}function hd(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ce(E(d.Fa,d),Wc(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,fd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ce(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),Bc(this),fd(this))};function Hc(d){d.A!=null&&(u.clearTimeout(d.A),d.A=null)}function fd(d){d.g=new hi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=mn(d.qa);Je(m,"RID","rpc"),Je(m,"SID",d.K),Je(m,"AID",d.T),Je(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&Je(m,"TO",d.ja),Je(m,"TYPE","xmlhttp"),is(d,m),d.m&&d.o&&ga(m,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=ts(mn(m)),v.m=null,v.P=!0,Jf(v,d)}n.Za=function(){this.C!=null&&(this.C=null,Bc(this),hd(this),pn(19))};function qc(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function up(d,m){var v=null;if(d.g==m){qc(d),Hc(d),d.g=null;var b=2}else if(pi(d.h,m))v=m.D,Uc(d.h,m),b=1;else return;if(d.G!=0){if(m.o)if(b==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var P=d.B;b=Yo(),tn(b,new rr(b,v)),zc(d)}else $c(d);else if(P=m.s,P==3||P==0&&0<m.X||!(b==1&&cp(d,m)||b==2&&hd(d)))switch(v&&0<v.length&&(m=d.h,m.i=m.i.concat(v)),P){case 1:oo(d,5);break;case 4:oo(d,10);break;case 3:oo(d,6);break;default:oo(d,2)}}}function Wc(d,m){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*m}function oo(d,m){if(d.j.info("Error code "+m),m==2){var v=E(d.fb,d),b=d.Xa;let P=!b;b=new wr(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||mt(b,"https"),ts(b),P?sd(b.toString(),v):ad(b.toString(),v)}else pn(2);d.G=0,d.l&&d.l.sa(m),pd(d),sr(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function pd(d){if(d.G=0,d.ka=[],d.l){let m=xe(d.h);(m.length!=0||d.i.length!=0)&&(F(d.ka,m),F(d.ka,d.i),d.h.i.length=0,q(d.i),d.i.length=0),d.l.ra()}}function md(d,m,v){var b=v instanceof wr?mn(v):new wr(v);if(b.g!="")m&&(b.g=m+"."+b.g),Er(b,b.s);else{var P=u.location;b=P.protocol,m=m?m+"."+P.hostname:P.hostname,P=+P.port;var B=new wr(null);b&&mt(B,b),m&&(B.g=m),P&&Er(B,P),v&&(B.l=v),b=B}return v=d.D,m=d.ya,v&&m&&Je(b,v,m),Je(b,"VER",d.la),is(d,b),b}function wa(d,m,v){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new vt(new At({eb:v})):new vt(d.pa),m.Ha(d.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _i(){}n=_i.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Gc(){}Gc.prototype.g=function(d,m){return new Yt(d,m)};function Yt(d,m){en.call(this),this.g=new ap(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!oe(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!oe(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new so(this)}N(Yt,en),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){ya(this.g)},Yt.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=Wl(d),d=v);m.i.push(new la(m.Ya++,d)),m.G==3&&zc(m)},Yt.prototype.N=function(){this.g.l=null,delete this.j,ya(this.g),delete this.g,Yt.aa.N.call(this)};function Ln(d){Kl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(let v in m){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}N(Ln,Kl);function gd(){Zl.call(this),this.status=1}N(gd,Zl);function so(d){this.g=d}N(so,_i),so.prototype.ua=function(){tn(this.g,"a")},so.prototype.ta=function(d){tn(this.g,new Ln(d))},so.prototype.sa=function(d){tn(this.g,new gd)},so.prototype.ra=function(){tn(this.g,"b")},Gc.prototype.createWebChannel=Gc.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,Q0=Vo.createWebChannelTransport=function(){return new Gc},Z0=Vo.getStatEventTarget=function(){return Yo()},K0=Vo.Event=eo,K_=Vo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vr.NO_ERROR=0,Vr.TIMEOUT=8,Vr.HTTP_ERROR=6,sf=Vo.ErrorCode=Vr,Yl.COMPLETE="complete",G0=Vo.EventType=Yl,Hf.EventType=aa,aa.OPEN="a",aa.CLOSE="b",aa.ERROR="c",aa.MESSAGE="d",en.prototype.listen=en.prototype.K,pl=Vo.WebChannel=Hf,p8=Vo.FetchXmlHttpFactory=At,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,W0=Vo.XhrIo=vt}).apply(typeof G_<"u"?G_:typeof self<"u"?self:typeof window<"u"?window:{});var P1="@firebase/firestore",N1="4.8.0";var dn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");var kl="11.10.0";var vc=new ji("@firebase/firestore");function ml(){return vc.logLevel}function ie(n,...e){if(vc.logLevel<=Ve.DEBUG){let t=e.map(VC);vc.debug(`Firestore (${kl}): ${n}`,...t)}}function Uo(n,...e){if(vc.logLevel<=Ve.ERROR){let t=e.map(VC);vc.error(`Firestore (${kl}): ${n}`,...t)}}function Zs(n,...e){if(vc.logLevel<=Ve.WARN){let t=e.map(VC);vc.warn(`Firestore (${kl}): ${n}`,...t)}}function VC(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function ge(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Ck(n,r,t)}function Ck(n,e,t){let r=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Uo(r),new Error(r)}function nt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Ck(e,i,r)}function Ae(n,e){return n}var G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var oi=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var tv=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},tT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dn.UNAUTHENTICATED))}shutdown(){}},nT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},rT=class{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new oi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new oi,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=o;e.enqueueRetryable(()=>T(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},u=l=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?u(l):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new oi)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string",31837,{l:r}),new tv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new dn(e)}},iT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},oT=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new iT(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},sT=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){nt(this.o===void 0,3512);let r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function m8(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function Dk(){return new TextEncoder}var hf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=m8(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Oe(n,e){return n<e?-1:n>e?1:0}function aT(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Oe(r,i);{let o=Dk(),a=g8(o.encode(k1(n,t)),o.encode(k1(e,t)));return a!==0?a:Oe(r,i)}}t+=r>65535?2:1}return Oe(n.length,e.length)}function k1(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function g8(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function bl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var O1="__name__",rv=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ge(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Oe(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):aT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Fo.fromString(e.substring(4,e.length-2))}},Ct=class n extends rv{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ee(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},_8=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yr=class n extends rv{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return _8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===O1}static keyField(){return new n([O1])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ee(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new ee(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new ee(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var fe=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ct.fromString(e))}static fromName(e){return new n(Ct.fromString(e).popFirst(5))}static empty(){return new n(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ct.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ct(e.slice()))}};function Sk(n,e,t){if(!t)throw new ee(G.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function v8(n,e,t,r){if(e===!0&&r===!0)throw new ee(G.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function L1(n){if(!fe.isDocumentKey(n))throw new ee(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F1(n){if(fe.isDocumentKey(n))throw new ee(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ak(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ov(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge(12329,{type:typeof n})}function tr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ee(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Ov(n);throw new ee(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Zt(n,e){let t={typeString:n};return e&&(t.value=e),t}function Sf(n,e){if(!Ak(n))throw new ee(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ee(G.INVALID_ARGUMENT,t);return!0}var V1=-62135596800,U1=1e6,Qt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*U1);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ee(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ee(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<V1)throw new ee(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U1}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sf(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-V1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Qt._jsonSchemaVersion="firestore/timestamp/1.0",Qt._jsonSchema={type:Zt("string",Qt._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};var Pe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Qt(0,0))}static max(){return new n(new Qt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ff=-1,cT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};cT.UNKNOWN_ID=-1;function y8(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pe.fromTimestamp(r===1e9?new Qt(t+1,0):new Qt(t,r));return new yc(i,fe.empty(),e)}function w8(n){return new yc(n.readTime,n.key,ff)}var yc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Pe.min(),fe.empty(),ff)}static max(){return new n(Pe.max(),fe.empty(),ff)}};function E8(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}var b8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",uT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ol(n){return T(this,null,function*(){if(n.code!==G.FAILED_PRECONDITION||n.message!==b8)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var Z=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&t()},l=>r(l))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let l=0;l<o;l++){let f=l;t(e[f]).next(g=>{a[f]=g,++u,u===o&&r(a)},g=>i(g))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function I8(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ll(n){return n.name==="IndexedDbTransactionError"}var UC=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),jC=-1;function Lv(n){return n==null}function pf(n){return n===0&&1/n==-1/0}function T8(n){return typeof n=="number"&&Number.isInteger(n)&&!pf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var xk="";function C8(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=j1(e)),e=D8(n.get(t),e);return j1(e)}function D8(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case xk:t+="";break;default:t+=o}}return t}function j1(n){return n+xk+""}var S8="remoteDocuments",Rk="owner";var Mk="mutationQueues";var Pk="mutations";var Nk="documentMutations",A8="remoteDocumentsV14";var kk="remoteDocumentGlobal";var Ok="targets";var Lk="targetDocuments";var Fk="targetGlobal",Vk="collectionParents";var Uk="clientMetadata";var jk="bundles";var Bk="namedQueries";var x8="indexConfiguration";var R8="indexState";var M8="indexEntries";var zk="documentOverlays";var P8="globals";var N8=[Mk,Pk,Nk,S8,Ok,Rk,Fk,Lk,Uk,kk,Vk,jk,Bk],Ohe=[...N8,zk],k8=[Mk,Pk,Nk,A8,Ok,Rk,Fk,Lk,Uk,kk,Vk,jk,Bk,zk],O8=k8,L8=[...O8,x8,R8,M8];var Lhe=[...L8,P8];function B1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ta(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $k(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ot=class n{constructor(e,t){this.comparator=e,this.root=t||Wi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yl(this.root,e,this.comparator,!1)}getReverseIterator(){return new yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yl(this.root,e,this.comparator,!0)}},yl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Wi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}};Wi.EMPTY=null,Wi.RED=!0,Wi.BLACK=!1;Wi.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Wi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var hn=class n{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iv(this.data.getIterator())}getIteratorFrom(e){return new iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},iv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Lr=class n{constructor(e){this.fields=e,e.sort(yr.comparator)}static empty(){return new n([])}unionWith(e){let t=new hn(yr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ov=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Pn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ov("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pn.EMPTY_BYTE_STRING=new Pn("");var F8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jo(n){if(nt(!!n,39018),typeof n=="string"){let e=0,t=F8.exec(n);if(nt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bo(n){return typeof n=="string"?Pn.fromBase64String(n):Pn.fromUint8Array(n)}var Hk="server_timestamp",qk="__type__",Wk="__previous_value__",Gk="__local_write_time__";function BC(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[qk])===null||t===void 0?void 0:t.stringValue)===Hk}function Fv(n){let e=n.mapValue.fields[Wk];return BC(e)?Fv(e):e}function mf(n){let e=jo(n.mapValue.fields[Gk].timestampValue);return new Qt(e.seconds,e.nanos)}var lT=class{constructor(e,t,r,i,o,a,u,l,f,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=f,this.isUsingEmulator=g}},sv="(default)",av=class n{constructor(e,t){this.projectId=e,this.database=t||sv}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===sv}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var zC="__type__",Kk="__max__",Z_={mapValue:{fields:{__type__:{stringValue:Kk}}}},$C="__vector__",Il="value";function Qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?BC(n)?4:Qk(n)?9007199254740991:Zk(n)?10:11:ge(28295,{value:n})}function Qi(n,e){if(n===e)return!0;let t=Qs(n);if(t!==Qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mf(n).isEqual(mf(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=jo(i.timestampValue),u=jo(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Bo(i.bytesValue).isEqual(Bo(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=Tt(i.doubleValue),u=Tt(o.doubleValue);return a===u?pf(a)===pf(u):isNaN(a)&&isNaN(u)}return!1})(n,e);case 9:return bl(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(B1(a)!==B1(u))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(u[l]===void 0||!Qi(a[l],u[l])))return!1;return!0})(n,e);default:return ge(52216,{left:n})}}function gf(n,e){return(n.values||[]).find(t=>Qi(t,e))!==void 0}function Tl(n,e){if(n===e)return 0;let t=Qs(n),r=Qs(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(o,a){let u=Tt(o.integerValue||o.doubleValue),l=Tt(a.integerValue||a.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1})(n,e);case 3:return z1(n.timestampValue,e.timestampValue);case 4:return z1(mf(n),mf(e));case 5:return aT(n.stringValue,e.stringValue);case 6:return(function(o,a){let u=Bo(o),l=Bo(a);return u.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(o,a){let u=o.split("/"),l=a.split("/");for(let f=0;f<u.length&&f<l.length;f++){let g=Oe(u[f],l[f]);if(g!==0)return g}return Oe(u.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,a){let u=Oe(Tt(o.latitude),Tt(a.latitude));return u!==0?u:Oe(Tt(o.longitude),Tt(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return $1(n.arrayValue,e.arrayValue);case 10:return(function(o,a){var u,l,f,g;let y=o.fields||{},E=a.fields||{},I=(u=y[Il])===null||u===void 0?void 0:u.arrayValue,N=(l=E[Il])===null||l===void 0?void 0:l.arrayValue,q=Oe(((f=I?.values)===null||f===void 0?void 0:f.length)||0,((g=N?.values)===null||g===void 0?void 0:g.length)||0);return q!==0?q:$1(I,N)})(n.mapValue,e.mapValue);case 11:return(function(o,a){if(o===Z_.mapValue&&a===Z_.mapValue)return 0;if(o===Z_.mapValue)return 1;if(a===Z_.mapValue)return-1;let u=o.fields||{},l=Object.keys(u),f=a.fields||{},g=Object.keys(f);l.sort(),g.sort();for(let y=0;y<l.length&&y<g.length;++y){let E=aT(l[y],g[y]);if(E!==0)return E;let I=Tl(u[l[y]],f[g[y]]);if(I!==0)return I}return Oe(l.length,g.length)})(n.mapValue,e.mapValue);default:throw ge(23264,{le:t})}}function z1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);let t=jo(n),r=jo(e),i=Oe(t.seconds,r.seconds);return i!==0?i:Oe(t.nanos,r.nanos)}function $1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Tl(t[i],r[i]);if(o)return o}return Oe(t.length,r.length)}function Cl(n){return dT(n)}function dT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=jo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=dT(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${dT(t.fields[a])}`;return i+"}"})(n.mapValue):ge(61005,{value:n})}function J_(n){switch(Qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Fv(n);return e?16+J_(e):16;case 5:return 2*n.stringValue.length;case 6:return Bo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+J_(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return ta(r.fields,(o,a)=>{i+=o.length+J_(a)}),i})(n.mapValue);default:throw ge(13486,{value:n})}}function H1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function hT(n){return!!n&&"integerValue"in n}function HC(n){return!!n&&"arrayValue"in n}function q1(n){return!!n&&"nullValue"in n}function W1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function X_(n){return!!n&&"mapValue"in n}function Zk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zC])===null||t===void 0?void 0:t.stringValue)===$C}function cf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cf(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Qk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Kk}var Vhe={mapValue:{fields:{[zC]:{stringValue:$C},[Il]:{arrayValue:{}}}}};var vr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!X_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cf(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=cf(a):i.push(u.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());X_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];X_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ta(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(cf(this.value))}};function Yk(n){let e=[];return ta(n.fields,(t,r)=>{let i=new yr([t]);if(X_(r)){let o=Yk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new Lr(e)}var si=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,Pe.min(),Pe.min(),Pe.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Pe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Pe.min(),Pe.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Pe.min(),Pe.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Dl=class{constructor(e,t){this.position=e,this.inclusive=t}};function G1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=fe.comparator(fe.fromName(a.referenceValue),t.key):r=Tl(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function K1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qi(n.position[t],e.position[t]))return!1;return!0}var wc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function V8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var cv=class{},Kt=class n extends cv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pT(e,t,r):t==="array-contains"?new _T(e,r):t==="in"?new vT(e,r):t==="not-in"?new yT(e,r):t==="array-contains-any"?new wT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new mT(e,r):new gT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Tl(t,this.value)):t!==null&&Qs(this.value)===Qs(t)&&this.matchesComparison(Tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ai=class n extends cv{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Jk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Jk(n){return n.op==="and"}function Xk(n){return U8(n)&&Jk(n)}function U8(n){for(let e of n.filters)if(e instanceof ai)return!1;return!0}function fT(n){if(n instanceof Kt)return n.field.canonicalString()+n.op.toString()+Cl(n.value);if(Xk(n))return n.filters.map(e=>fT(e)).join(",");{let e=n.filters.map(t=>fT(t)).join(",");return`${n.op}(${e})`}}function eO(n,e){return n instanceof Kt?(function(r,i){return i instanceof Kt&&r.op===i.op&&r.field.isEqual(i.field)&&Qi(r.value,i.value)})(n,e):n instanceof ai?(function(r,i){return i instanceof ai&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&eO(a,i.filters[u]),!0):!1})(n,e):void ge(19439)}function tO(n){return n instanceof Kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Cl(t.value)}`})(n):n instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(tO).join(" ,")+"}"})(n):"Filter"}var pT=class extends Kt{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){let t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}},mT=class extends Kt{constructor(e,t){super(e,"in",t),this.keys=nO("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},gT=class extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=nO("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function nO(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>fe.fromName(r.referenceValue))}var _T=class extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return HC(t)&&gf(t.arrayValue,this.value)}},vT=class extends Kt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&gf(this.value.arrayValue,t)}},yT=class extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gf(this.value.arrayValue,t)}},wT=class extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!HC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gf(this.value.arrayValue,r))}};var ET=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.Pe=null}};function Z1(n,e=null,t=[],r=[],i=null,o=null,a=null){return new ET(n,e,t,r,i,o,a)}function qC(n){let e=Ae(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Lv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Cl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Cl(r)).join(",")),e.Pe=t}return e.Pe}function WC(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!V8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!eO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K1(n.startAt,e.startAt)&&K1(n.endAt,e.endAt)}function bT(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ys=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function j8(n,e,t,r,i,o,a,u){return new Ys(n,e,t,r,i,o,a,u)}function Vv(n){return new Ys(n)}function Q1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function rO(n){return n.collectionGroup!==null}function uf(n){let e=Ae(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new hn(yr.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new wc(o,r))}),t.has(yr.keyField().canonicalString())||e.Te.push(new wc(yr.keyField(),r))}return e.Te}function Gi(n){let e=Ae(n);return e.Ie||(e.Ie=B8(e,uf(n))),e.Ie}function B8(n,e){if(n.limitType==="F")return Z1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new wc(i.field,o)});let t=n.endAt?new Dl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Dl(n.startAt.position,n.startAt.inclusive):null;return Z1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function IT(n,e){let t=n.filters.concat([e]);return new Ys(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function TT(n,e,t){return new Ys(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Uv(n,e){return WC(Gi(n),Gi(e))&&n.limitType===e.limitType}function iO(n){return`${qC(Gi(n))}|lt:${n.limitType}`}function gl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>tO(i)).join(", ")}]`),Lv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Cl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Cl(i)).join(",")),`Target(${r})`})(Gi(n))}; limitType=${n.limitType})`}function jv(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):fe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of uf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,u,l){let f=G1(a,u,l);return a.inclusive?f<=0:f<0})(r.startAt,uf(r),i)||r.endAt&&!(function(a,u,l){let f=G1(a,u,l);return a.inclusive?f>=0:f>0})(r.endAt,uf(r),i))})(n,e)}function z8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oO(n){return(e,t)=>{let r=!1;for(let i of uf(n)){let o=$8(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $8(n,e,t){let r=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(o,a,u){let l=a.data.field(o),f=u.data.field(o);return l!==null&&f!==null?Tl(l,f):ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:n.dir})}}var zo=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return $k(this.inner)}size(){return this.innerSize}};var H8=new Ot(fe.comparator);function $o(){return H8}var sO=new Ot(fe.comparator);function af(...n){let e=sO;for(let t of n)e=e.insert(t.key,t);return e}function aO(n){let e=sO;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fc(){return lf()}function cO(){return lf()}function lf(){return new zo(n=>n.toString(),(n,e)=>n.isEqual(e))}var q8=new Ot(fe.comparator),W8=new hn(fe.comparator);function ze(...n){let e=W8;for(let t of n)e=e.add(t);return e}var G8=new hn(Oe);function K8(){return G8}function GC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function uO(n){return{integerValue:""+n}}function Z8(n,e){return T8(e)?uO(e):GC(n,e)}var Sl=class{constructor(){this._=void 0}};function Q8(n,e,t){return n instanceof Al?(function(i,o){let a={fields:{[qk]:{stringValue:Hk},[Gk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&BC(o)&&(o=Fv(o)),o&&(a.fields[Wk]=o),{mapValue:a}})(t,e):n instanceof Ec?dO(n,e):n instanceof bc?hO(n,e):(function(i,o){let a=lO(i,o),u=Y1(a)+Y1(i.Ee);return hT(a)&&hT(i.Ee)?uO(u):GC(i.serializer,u)})(n,e)}function Y8(n,e,t){return n instanceof Ec?dO(n,e):n instanceof bc?hO(n,e):t}function lO(n,e){return n instanceof xl?(function(r){return hT(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Al=class extends Sl{},Ec=class extends Sl{constructor(e){super(),this.elements=e}};function dO(n,e){let t=fO(e);for(let r of n.elements)t.some(i=>Qi(i,r))||t.push(r);return{arrayValue:{values:t}}}var bc=class extends Sl{constructor(e){super(),this.elements=e}};function hO(n,e){let t=fO(e);for(let r of n.elements)t=t.filter(i=>!Qi(i,r));return{arrayValue:{values:t}}}var xl=class extends Sl{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function Y1(n){return Tt(n.integerValue||n.doubleValue)}function fO(n){return HC(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function J8(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ec&&i instanceof Ec||r instanceof bc&&i instanceof bc?bl(r.elements,i.elements,Qi):r instanceof xl&&i instanceof xl?Qi(r.Ee,i.Ee):r instanceof Al&&i instanceof Al})(n.transform,e.transform)}var CT=class{constructor(e,t){this.version=e,this.transformResults=t}},Ki=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ev(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Rl=class{};function pO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new _f(n.key,Ki.none()):new Ic(n.key,n.data,Ki.none());{let t=n.data,r=vr.empty(),i=new hn(yr.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new Yi(n.key,r,new Lr(i.toArray()),Ki.none())}}function X8(n,e,t){n instanceof Ic?(function(i,o,a){let u=i.value.clone(),l=X1(i.fieldTransforms,o,a.transformResults);u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Yi?(function(i,o,a){if(!ev(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=X1(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(mO(i)),l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(n,e,t):(function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function df(n,e,t,r){return n instanceof Ic?(function(o,a,u,l){if(!ev(o.precondition,a))return u;let f=o.value.clone(),g=ek(o.fieldTransforms,l,a);return f.setAll(g),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(n,e,t,r):n instanceof Yi?(function(o,a,u,l){if(!ev(o.precondition,a))return u;let f=ek(o.fieldTransforms,l,a),g=a.data;return g.setAll(mO(o)),g.setAll(f),a.convertToFoundDocument(a.version,g).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))})(n,e,t,r):(function(o,a,u){return ev(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(n,e,t)}function eq(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=lO(r.transform,i||null);o!=null&&(t===null&&(t=vr.empty()),t.set(r.field,o))}return t||null}function J1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&bl(r,i,(o,a)=>J8(o,a))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ic=class extends Rl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yi=class extends Rl{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function mO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function X1(n,e,t){let r=new Map;nt(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,Y8(a,u,t[i]))}return r}function ek(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,Q8(o,a,e))}return r}var _f=class extends Rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},DT=class extends Rl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ST=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&X8(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=df(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=df(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=cO();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let l=pO(a,u);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(Pe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&bl(this.mutations,e.mutations,(t,r)=>J1(t,r))&&bl(this.baseMutations,e.baseMutations,(t,r)=>J1(t,r))}},AT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return q8})(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var xT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var RT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Wt,We;function tq(n){switch(n){case G.OK:return ge(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ge(15467,{code:n})}}function gO(n){if(n===void 0)return Uo("GRPC error has no .code"),G.UNKNOWN;switch(n){case Wt.OK:return G.OK;case Wt.CANCELLED:return G.CANCELLED;case Wt.UNKNOWN:return G.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return G.INTERNAL;case Wt.UNAVAILABLE:return G.UNAVAILABLE;case Wt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Wt.NOT_FOUND:return G.NOT_FOUND;case Wt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Wt.ABORTED:return G.ABORTED;case Wt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Wt.DATA_LOSS:return G.DATA_LOSS;default:return ge(39323,{code:n})}}(We=Wt||(Wt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var tk=null;var nq=new Fo([4294967295,4294967295],0);function nk(n){let e=Dk().encode(n),t=new q0;return t.update(e),new Uint8Array(t.digest())}function rk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fo([t,r],0),new Fo([i,o],0)]}var MT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pc(`Invalid padding: ${t}`);if(r<0)throw new pc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Fo.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(Fo.fromNumber(r)));return i.compare(nq)===1&&(i=new Fo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=nk(e),[r,i]=rk(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);if(!this.ye(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new n(o,i,t);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.fe===0)return;let t=nk(e),[r,i]=rk(t);for(let o=0;o<this.hashCount;o++){let a=this.pe(r,i,o);this.we(a)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},pc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var uv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Pe.min(),i,new Ot(Oe),$o(),ze())}},vf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ze(),ze(),ze())}};var wl=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},lv=class{constructor(e,t){this.targetId=e,this.De=t}},dv=class{constructor(e,t,r=Pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},hv=class{constructor(){this.ve=0,this.Ce=ik(),this.Fe=Pn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ze(),t=ze(),r=ze();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ge(38017,{changeType:o})}}),new vf(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=ik()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},PT=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=$o(),this.je=Q_(),this.Je=Q_(),this.He=new Ot(Oe)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(bT(o))if(r===0){let a=new fe(o.path);this.Xe(t,a,si.newNoDocument(a,Pe.min()))}else nt(r===1,20013,{expectedCount:r});else{let a=this.ot(t);if(a!==r){let u=this._t(e),l=u?this.ut(u,e,a):1;if(l!==0){this.rt(t);let f=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,f)}tk?.ct((function(g,y,E,I,N){var q,F,W,oe,ae,le;let Ye={localCacheCount:g,existenceFilterCount:y.count,databaseId:E.database,projectId:E.projectId},be=y.unchangedNames;return be&&(Ye.bloomFilter={applied:N===0,hashCount:(q=be?.hashCount)!==null&&q!==void 0?q:0,bitmapLength:(oe=(W=(F=be?.bits)===null||F===void 0?void 0:F.bitmap)===null||W===void 0?void 0:W.length)!==null&&oe!==void 0?oe:0,padding:(le=(ae=be?.bits)===null||ae===void 0?void 0:ae.padding)!==null&&le!==void 0?le:0,mightContain:R=>{var C;return(C=I?.mightContain(R))!==null&&C!==void 0&&C}}),Ye})(a,e.De,this.We.lt(),u,l))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,a,u;try{a=Bo(r).toUint8Array()}catch(l){if(l instanceof ov)return Zs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new MT(a,i,o)}catch(l){return Zs(l instanceof pc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.fe===0?null:u}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let a=this.We.lt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,a)=>{let u=this.st(a);if(u){if(o.current&&bT(u.target)){let l=new fe(u.target.path);this.Tt(l).has(a)||this.It(a,l)||this.Xe(a,l,si.newNoDocument(l,e))}o.Ne&&(t.set(a,o.Le()),o.ke())}});let r=ze();this.Je.forEach((o,a)=>{let u=!0;a.forEachWhile(l=>{let f=this.st(l);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,a)=>a.setReadTime(e));let i=new uv(e,t,this.He,this.ze,r);return this.ze=$o(),this.je=Q_(),this.Je=Q_(),this.He=new Ot(Oe),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new hv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new hn(Oe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new hn(Oe),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new hv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function Q_(){return new Ot(fe.comparator)}function ik(){return new Ot(fe.comparator)}var rq={asc:"ASCENDING",desc:"DESCENDING"},iq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oq={and:"AND",or:"OR"},NT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function kT(n,e){return n.useProto3Json||Lv(e)?e:{value:e}}function fv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _O(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sq(n,e){return fv(n,e.toTimestamp())}function Zi(n){return nt(!!n,49232),Pe.fromTimestamp((function(t){let r=jo(t);return new Qt(r.seconds,r.nanos)})(n))}function KC(n,e){return OT(n,e).canonicalString()}function OT(n,e){let t=(function(i){return new Ct(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function vO(n){let e=Ct.fromString(n);return nt(IO(e),10190,{key:e.toString()}),e}function LT(n,e){return KC(n.databaseId,e.path)}function Y0(n,e){let t=vO(e);if(t.get(1)!==n.databaseId.projectId)throw new ee(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ee(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(wO(t))}function yO(n,e){return KC(n.databaseId,e)}function aq(n){let e=vO(n);return e.length===4?Ct.emptyPath():wO(e)}function FT(n){return new Ct(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wO(n){return nt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ok(n,e,t){return{name:LT(n,e),fields:t.value.mapValue.fields}}function cq(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ge(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(f,g){return f.useProto3Json?(nt(g===void 0||typeof g=="string",58123),Pn.fromBase64String(g||"")):(nt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Pn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&(function(f){let g=f.code===void 0?G.UNKNOWN:gO(f.code);return new ee(g,f.message||"")})(a);t=new dv(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Y0(n,r.document.name),o=Zi(r.document.updateTime),a=r.document.createTime?Zi(r.document.createTime):Pe.min(),u=new vr({mapValue:{fields:r.document.fields}}),l=si.newFoundDocument(i,o,a,u),f=r.targetIds||[],g=r.removedTargetIds||[];t=new wl(f,g,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Y0(n,r.document),o=r.readTime?Zi(r.readTime):Pe.min(),a=si.newNoDocument(i,o),u=r.removedTargetIds||[];t=new wl([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Y0(n,r.document),o=r.removedTargetIds||[];t=new wl([],o,i,null)}else{if(!("filter"in e))return ge(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,a=new RT(i,o),u=r.targetId;t=new lv(u,a)}}return t}function uq(n,e){let t;if(e instanceof Ic)t={update:ok(n,e.key,e.value)};else if(e instanceof _f)t={delete:LT(n,e.key)};else if(e instanceof Yi)t={update:ok(n,e.key,e.data),updateMask:vq(e.fieldMask)};else{if(!(e instanceof DT))return ge(16599,{Rt:e.type});t={verify:LT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,a){let u=a.transform;if(u instanceof Al)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ec)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof bc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof xl)return{fieldPath:a.field.canonicalString(),increment:u.Ee};throw ge(20930,{transform:a.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:sq(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge(27497)})(n,e.precondition)),t}function lq(n,e){return n&&n.length>0?(nt(e!==void 0,14353),n.map(t=>(function(i,o){let a=i.updateTime?Zi(i.updateTime):Zi(o);return a.isEqual(Pe.min())&&(a=Zi(o)),new CT(a,i.transformResults||[])})(t,e))):[]}function dq(n,e){return{documents:[yO(n,e.path)]}}function hq(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yO(n,i);let o=(function(f){if(f.length!==0)return bO(ai.create(f,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let a=(function(f){if(f.length!==0)return f.map(g=>(function(E){return{field:_l(E.field),direction:mq(E.dir)}})(g))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);let u=kT(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{Vt:t,parent:i}}function fq(n){let e=aq(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){nt(r===1,65062);let g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(y){let E=EO(y);return E instanceof ai&&Xk(E)?E.getFilters():[E]})(t.where));let a=[];t.orderBy&&(a=(function(y){return y.map(E=>(function(N){return new wc(vl(N.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(E))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let E;return E=typeof y=="object"?y.value:y,Lv(E)?null:E})(t.limit));let l=null;t.startAt&&(l=(function(y){let E=!!y.before,I=y.values||[];return new Dl(I,E)})(t.startAt));let f=null;return t.endAt&&(f=(function(y){let E=!y.before,I=y.values||[];return new Dl(I,E)})(t.endAt)),j8(e,i,a,o,u,"F",l,f)}function pq(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function EO(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=vl(t.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vl(t.unaryFilter.field);return Kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=vl(t.unaryFilter.field);return Kt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=vl(t.unaryFilter.field);return Kt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Kt.create(vl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map(r=>EO(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(n):ge(30097,{filter:n})}function mq(n){return rq[n]}function gq(n){return iq[n]}function _q(n){return oq[n]}function _l(n){return{fieldPath:n.canonicalString()}}function vl(n){return yr.fromServerFormat(n.fieldPath)}function bO(n){return n instanceof Kt?(function(t){if(t.op==="=="){if(W1(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NAN"}};if(q1(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W1(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NAN"}};if(q1(t.value))return{unaryFilter:{field:_l(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(t.field),op:gq(t.op),value:t.value}}})(n):n instanceof ai?(function(t){let r=t.getFilters().map(i=>bO(i));return r.length===1?r[0]:{compositeFilter:{op:_q(t.op),filters:r}}})(n):ge(54877,{filter:n})}function vq(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var yf=class n{constructor(e,t,r,i,o=Pe.min(),a=Pe.min(),u=Pn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var VT=class{constructor(e){this.gt=e}};function yq(n){let e=fq({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?TT(e,e.limit,"L"):e}var pv=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Tt(e.integerValue));else if("doubleValue"in e){let r=Tt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),pf(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=jo(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Bo(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?Qk(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Zk(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ge(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let a=Il,u=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Tt(u)),this.xt(a,t),this.Dt(o[a],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),fe.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};pv.Ut=new pv;var UT=class{constructor(){this.Dn=new jT}addToCollectionParentIndex(e,t){return this.Dn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(yc.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(yc.min())}updateCollectionGroup(e,t,r){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}},jT=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hn(Ct.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(Ct.comparator)).toArray()}};var Uhe=new Uint8Array(0);var sk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TO=41943040,Or=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Or.DEFAULT_COLLECTION_PERCENTILE=10,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Or.DEFAULT=new Or(TO,Or.DEFAULT_COLLECTION_PERCENTILE,Or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Or.DISABLED=new Or(-1,0,0);var wf=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var ak="LruGarbageCollector",wq=1048576;function ck([n,e],[t,r]){let i=Oe(n,t);return i===0?Oe(e,r):i}var BT=class{constructor(e){this.Tr=e,this.buffer=new hn(ck),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ck(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},zT=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ie(ak,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>T(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ll(t)?ie(ak,"Ignoring IndexedDB error during garbage collection: ",t):yield Ol(t)}yield this.Rr(3e5)}))}},$T=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(UC.ue);let r=new BT(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(sk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sk):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,a,u,l,f,g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,a=Date.now(),this.nthSequenceNumber(e,i))).next(y=>(r=y,u=Date.now(),this.removeTargets(e,r,t))).next(y=>(o=y,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),ml()<=Ve.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-g}ms
	Determined least recently used ${i} in `+(u-a)+`ms
	Removed ${o} targets in `+(l-u)+`ms
	Removed ${y} documents in `+(f-l)+`ms
Total Duration: ${f-g}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:y})))}};function Eq(n,e){return new $T(n,e)}var HT=class{constructor(){this.changes=new zo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var qT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var WT=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&df(r.mutation,i,Lr.empty(),Qt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){let i=fc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=af();return o.forEach((u,l)=>{a=a.insert(u,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=fc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let o=$o(),a=lf(),u=(function(){return lf()})();return t.forEach((l,f)=>{let g=r.get(f.key);i.has(f.key)&&(g===void 0||g.mutation instanceof Yi)?o=o.insert(f.key,f):g!==void 0?(a.set(f.key,g.mutation.getFieldMask()),df(g.mutation,f,g.mutation.getFieldMask(),Qt.now())):a.set(f.key,Lr.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((f,g)=>a.set(f,g)),t.forEach((f,g)=>{var y;return u.set(f,new qT(g,(y=a.get(f))!==null&&y!==void 0?y:null))}),u))}recalculateAndSaveOverlays(e,t){let r=lf(),i=new Ot((a,u)=>a-u),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(l=>{let f=t.get(l);if(f===null)return;let g=r.get(l)||Lr.empty();g=u.applyToLocalView(f,g),r.set(l,g);let y=(i.get(u.batchId)||ze()).add(l);i=i.insert(u.batchId,y)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let l=u.getNext(),f=l.key,g=l.value,y=cO();g.forEach(E=>{if(!o.has(E)){let I=pO(t.get(E),r.get(E));I!==null&&y.set(E,I),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,y))}return Z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return fe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):rO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):Z.resolve(fc()),u=ff,l=o;return a.next(f=>Z.forEach(f,(g,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),o.get(g)?Z.resolve():this.remoteDocumentCache.getEntry(e,g).next(E=>{l=l.insert(g,E)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,l,f,ze())).next(g=>({batchId:u,changes:aO(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next(r=>{let i=af();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=af();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,l=>{let f=(function(y,E){return new Ys(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(g=>{g.forEach((y,E)=>{a=a.insert(y,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((l,f)=>{let g=f.getKey();a.get(g)===null&&(a=a.insert(g,si.newInvalidDocument(g)))});let u=af();return a.forEach((l,f)=>{let g=o.get(l);g!==void 0&&df(g.mutation,f,Lr.empty(),Qt.now()),jv(t,f)&&(u=u.insert(l,f))}),u})}};var GT=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Z.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Zi(i.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:yq(i.bundledQuery),readTime:Zi(i.readTime)}})(t)),Z.resolve()}};var KT=class{constructor(){this.overlays=new Ot(fe.comparator),this.kr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){let r=fc();return Z.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),Z.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Z.resolve()}getOverlaysForCollection(e,t,r){let i=fc(),o=t.length+1,a=new fe(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let l=u.getNext().value,f=l.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ot((f,g)=>f-g),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let g=o.get(f.largestBatchId);g===null&&(g=fc(),o=o.insert(f.largestBatchId,g)),g.set(f.getKey(),f)}}let u=fc(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((f,g)=>u.set(f,g)),!(u.size()>=i)););return Z.resolve(u)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new xT(t,r));let o=this.kr.get(t);o===void 0&&(o=ze(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var ZT=class{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}};var Ef=class{constructor(){this.qr=new hn(Gt.Qr),this.$r=new hn(Gt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Gt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Gt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new fe(new Ct([])),r=new Gt(t,e),i=new Gt(t,e+1),o=[];return this.$r.forEachInRange([r,i],a=>{this.Wr(a),o.push(a.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new fe(new Ct([])),r=new Gt(t,e),i=new Gt(t,e+1),o=ze();return this.$r.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new Gt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Gt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return fe.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}};var QT=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new hn(Gt.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new ST(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.Yr=this.Yr.add(new Gt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?jC:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Gt(t,0),i=new Gt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],a=>{let u=this.Zr(a.Hr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(Oe);return t.forEach(i=>{let o=new Gt(i,0),a=new Gt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,a],u=>{r=r.add(u.Hr)})}),Z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;fe.isDocumentKey(o)||(o=o.child(""));let a=new Gt(new fe(o),0),u=new hn(Oe);return this.Yr.forEachWhile(l=>{let f=l.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(l.Hr)),!0)},a),Z.resolve(this.ei(u))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){nt(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Z.forEach(t.mutations,i=>{let o=new Gt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Gt(t,0),i=this.Yr.firstAfterOrEqual(r);return Z.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var YT=class{constructor(e){this.ni=e,this.docs=(function(){return new Ot(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Z.resolve(r?r.document.mutableCopy():si.newInvalidDocument(t))}getEntries(e,t){let r=$o();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():si.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=$o(),a=t.path,u=new fe(a.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){let{key:f,value:{document:g}}=l.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||E8(w8(g),r)<=0||(i.has(g.key)||jv(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ge(9500)}ri(e,t){return Z.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new JT(this)}getSize(e){return Z.resolve(this.size)}},JT=class extends HT{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Z.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var XT=class{constructor(e){this.persistence=e,this.ii=new zo(t=>qC(t),WC),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.si=0,this.oi=new Ef,this.targetCount=0,this._i=wf.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),Z.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new wf(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.hr(t),Z.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.ii.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),Z.waitFor(o).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return Z.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),Z.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return Z.resolve(r)}containsKey(e,t){return Z.resolve(this.oi.containsKey(t))}};var mv=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new UC(0),this.ci=!1,this.ci=!0,this.li=new ZT,this.referenceDelegate=e(this),this.hi=new XT(this),this.indexManager=new UT,this.remoteDocumentCache=(function(i){return new YT(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new VT(t),this.Ti=new GT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new QT(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new eC(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return Z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},eC=class extends uT{constructor(e){super(),this.currentSequenceNumber=e}},tC=class n{constructor(e){this.persistence=e,this.Ai=new Ef,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw ge(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),Z.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,r=>{let i=fe.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,Pe.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Z.or([()=>Z.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},gv=class n{constructor(e,t){this.persistence=e,this.gi=new zo(r=>C8(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Eq(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return Z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Z.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,a=>this.Sr(e,a,t).next(u=>{u||(r++,o.removeEntry(a,Pe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Z.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=J_(e.data.value)),t}Sr(e,t,r){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var nC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ze(),i=ze();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var rC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var iC=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return eN()?8:I8(ln())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new rC;return this.ws(e,t,a).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,t,a,u.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(ml()<=Ve.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(ml()<=Ve.DEBUG&&ie("QueryEngine","Query:",gl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ml()<=Ve.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):Z.resolve())}ps(e,t){if(Q1(t))return Z.resolve(null);let r=Gi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=TT(t,null,"F"),r=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=ze(...o);return this.gs.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(l=>{let f=this.bs(t,u);return this.Ds(t,f,a,l.readTime)?this.ps(e,TT(t,null,"F")):this.vs(e,f,t,l)}))})))}ys(e,t,r,i){return Q1(t)||i.isEqual(Pe.min())?Z.resolve(null):this.gs.getDocuments(e,r).next(o=>{let a=this.bs(t,o);return this.Ds(t,a,r,i)?Z.resolve(null):(ml()<=Ve.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),gl(t)),this.vs(e,a,t,y8(i,ff)).next(u=>u))})}bs(e,t){let r=new hn(oO(e));return t.forEach((i,o)=>{jv(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return ml()<=Ve.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",gl(t)),this.gs.getDocumentsMatchingQuery(e,t,yc.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var ZC="LocalStore",bq=3e8,oC=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Ot(Oe),this.Ms=new zo(o=>qC(o),WC),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Iq(n,e,t,r){return new oC(n,e,t,r)}function CO(n,e){return T(this,null,function*(){let t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],l=ze();for(let f of i){a.push(f.batchId);for(let g of f.mutations)l=l.add(g.key)}for(let f of o){u.push(f.batchId);for(let g of f.mutations)l=l.add(g.key)}return t.localDocuments.getDocuments(r,l).next(f=>({Bs:f,removedBatchIds:a,addedBatchIds:u}))})})})}function Tq(n,e){let t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(u,l,f,g){let y=f.batch,E=y.keys(),I=Z.resolve();return E.forEach(N=>{I=I.next(()=>g.getEntry(l,N)).next(q=>{let F=f.docVersions.get(N);nt(F!==null,48541),q.version.compareTo(F)<0&&(y.applyToRemoteDocument(q,f),q.isValidDocument()&&(q.setReadTime(f.commitVersion),g.addEntry(q)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(l,y))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let l=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(l=l.add(u.batch.mutations[f].key));return l})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function DO(n){let e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Cq(n,e){let t=Ae(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let u=[];e.targetChanges.forEach((g,y)=>{let E=i.get(y);if(!E)return;u.push(t.hi.removeMatchingKeys(o,g.removedDocuments,y).next(()=>t.hi.addMatchingKeys(o,g.addedDocuments,y)));let I=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?I=I.withResumeToken(Pn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):g.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(g.resumeToken,r)),i=i.insert(y,I),(function(q,F,W){return q.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=bq?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(E,I,g)&&u.push(t.hi.updateTargetData(o,I))});let l=$o(),f=ze();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),u.push(Dq(o,a,e.documentUpdates).next(g=>{l=g.Ls,f=g.ks})),!r.isEqual(Pe.min())){let g=t.hi.getLastRemoteSnapshotVersion(o).next(y=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(g)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,l,f)).next(()=>l)}).then(o=>(t.Fs=i,o))}function Dq(n,e,t){let r=ze(),i=ze();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let a=$o();return t.forEach((u,l)=>{let f=o.get(u);l.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),l.isNoDocument()&&l.version.isEqual(Pe.min())?(e.removeEntry(u,l.readTime),a=a.insert(u,l)):!f.isValidDocument()||l.version.compareTo(f.version)>0||l.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(l),a=a.insert(u,l)):ie(ZC,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",l.version)}),{Ls:a,ks:i}})}function Sq(n,e){let t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jC),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Aq(n,e){let t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,Z.resolve(i)):t.hi.allocateTargetId(r).next(a=>(i=new yf(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}function sC(n,e,t){return T(this,null,function*(){let r=Ae(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Ll(a))throw a;ie(ZC,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function uk(n,e,t){let r=Ae(n),i=Pe.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",a=>(function(l,f,g){let y=Ae(l),E=y.Ms.get(g);return E!==void 0?Z.resolve(y.Fs.get(E)):y.hi.getTargetData(f,g)})(r,a,Gi(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,u.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,t?i:Pe.min(),t?o:ze())).next(u=>(xq(r,z8(e),u),{documents:u,qs:o})))}function xq(n,e,t){let r=n.xs.get(e)||Pe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var _v=class{constructor(){this.activeTargetIds=K8()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var aC=class{constructor(){this.Fo=new _v,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new _v,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var cC=class{xo(e){}shutdown(){}};var lk="ConnectivityMonitor",vv=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ie(lk,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){ie(lk,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Y_=null;function uC(){return Y_===null?Y_=(function(){return 268435456+Math.round(2147483648*Math.random())})():Y_++,"0x"+Y_.toString(16)}var J0="RestConnection",Rq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},lC=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===sv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let a=uC(),u=this.Go(e,t.toUriEncodedString());ie(J0,`Sending RPC '${e}' ${a}:`,u,r);let l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,o);let{host:f}=new URL(u),g=Vi(f);return this.jo(e,u,l,r,g).then(y=>(ie(J0,`Received RPC '${e}' ${a}: `,y),y),y=>{throw Zs(J0,`RPC '${e}' ${a} failed with error: `,y,"url: ",u,"request:",r),y})}Jo(e,t,r,i,o,a){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=Rq[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var dC=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var Mn="WebChannelConnection",hC=class extends lC{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let a=uC();return new Promise((u,l)=>{let f=new W0;f.setWithCredentials(!0),f.listenOnce(G0.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case sf.NO_ERROR:let y=f.getResponseJson();ie(Mn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(y)),u(y);break;case sf.TIMEOUT:ie(Mn,`RPC '${e}' ${a} timed out`),l(new ee(G.DEADLINE_EXCEEDED,"Request time out"));break;case sf.HTTP_ERROR:let E=f.getStatus();if(ie(Mn,`RPC '${e}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);let N=I?.error;if(N&&N.status&&N.message){let q=(function(W){let oe=W.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(oe)>=0?oe:G.UNKNOWN})(N.status);l(new ee(q,N.message))}else l(new ee(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new ee(G.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{c_:e,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{ie(Mn,`RPC '${e}' ${a} completed.`)}});let g=JSON.stringify(i);ie(Mn,`RPC '${e}' ${a} sending request:`,i),f.send(t,"POST",g,r,15)})}P_(e,t,r){let i=uC(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Q0(),u=Z0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(l.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let g=o.join("");ie(Mn,`Creating RPC '${e}' stream ${i}: ${g}`,l);let y=a.createWebChannel(g,l);this.T_(y);let E=!1,I=!1,N=new dC({Ho:F=>{I?ie(Mn,`Not sending because RPC '${e}' stream ${i} is closed:`,F):(E||(ie(Mn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),E=!0),ie(Mn,`RPC '${e}' stream ${i} sending:`,F),y.send(F))},Yo:()=>y.close()}),q=(F,W,oe)=>{F.listen(W,ae=>{try{oe(ae)}catch(le){setTimeout(()=>{throw le},0)}})};return q(y,pl.EventType.OPEN,()=>{I||(ie(Mn,`RPC '${e}' stream ${i} transport opened.`),N.s_())}),q(y,pl.EventType.CLOSE,()=>{I||(I=!0,ie(Mn,`RPC '${e}' stream ${i} transport closed`),N.__(),this.I_(y))}),q(y,pl.EventType.ERROR,F=>{I||(I=!0,Zs(Mn,`RPC '${e}' stream ${i} transport errored. Name:`,F.name,"Message:",F.message),N.__(new ee(G.UNAVAILABLE,"The operation could not be completed")))}),q(y,pl.EventType.MESSAGE,F=>{var W;if(!I){let oe=F.data[0];nt(!!oe,16349);let ae=oe,le=ae?.error||((W=ae[0])===null||W===void 0?void 0:W.error);if(le){ie(Mn,`RPC '${e}' stream ${i} received error:`,le);let Ye=le.status,be=(function(D){let x=Wt[D];if(x!==void 0)return gO(x)})(Ye),R=le.message;be===void 0&&(be=G.INTERNAL,R="Unknown error status: "+Ye+" with message "+le.message),I=!0,N.__(new ee(be,R)),y.close()}else ie(Mn,`RPC '${e}' stream ${i} received:`,oe),N.a_(oe)}}),q(u,K0.STAT_EVENT,F=>{F.stat===K_.PROXY?ie(Mn,`RPC '${e}' stream ${i} detected buffering proxy`):F.stat===K_.NOPROXY&&ie(Mn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function X0(){return typeof document<"u"?document:null}function Bv(n){return new NT(n,!0)}var yv=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var dk="PersistentStream",wv=class{constructor(e,t,r,i,o,a,u,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new yv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return T(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return T(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return T(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Uo(t.toString()),Uo("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(t)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new ee(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>T(this,null,function*(){this.state=0,this.start()}))}G_(e){return ie(dk,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ie(dk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},fC=class extends wv{constructor(e,t,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=cq(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Pe.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?Pe.min():a.readTime?Zi(a.readTime):Pe.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=FT(this.serializer),t.addTarget=(function(o,a){let u,l=a.target;if(u=bT(l)?{documents:dq(o,l)}:{query:hq(o,l).Vt},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=_O(o,a.resumeToken);let f=kT(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(Pe.min())>0){u.readTime=fv(o,a.snapshotVersion.toTimestamp());let f=kT(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u})(this.serializer,e);let r=pq(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=FT(this.serializer),t.removeTarget=e,this.k_(t)}},pC=class extends wv{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=lq(e.writeResults,e.commitTime),r=Zi(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=FT(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>uq(this.serializer,r))};this.k_(t)}};var mC=class{},gC=class extends mC{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ee(G.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,OT(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(G.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Jo(e,OT(t,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(G.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},_C=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Uo(t),this._a=!1):ie("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Tc="RemoteStore",vC=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(a=>{r.enqueueAndForget(()=>T(this,null,function*(){Cc(this)&&(ie(Tc,"Restarting streams for network reachability change."),yield(function(l){return T(this,null,function*(){let f=Ae(l);f.Ia.add(4),yield Af(f),f.Aa.set("Unknown"),f.Ia.delete(4),yield zv(f)})})(this))}))}),this.Aa=new _C(r,i)}};function zv(n){return T(this,null,function*(){if(Cc(n))for(let e of n.da)yield e(!0)})}function Af(n){return T(this,null,function*(){for(let e of n.da)yield e(!1)})}function SO(n,e){let t=Ae(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),XC(t)?JC(t):Fl(t).x_()&&YC(t,e))}function QC(n,e){let t=Ae(n),r=Fl(t);t.Ta.delete(e),r.x_()&&AO(t,e),t.Ta.size===0&&(r.x_()?r.B_():Cc(t)&&t.Aa.set("Unknown"))}function YC(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fl(n).H_(e)}function AO(n,e){n.Ra.$e(e),Fl(n).Y_(e)}function JC(n){n.Ra=new PT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Fl(n).start(),n.Aa.aa()}function XC(n){return Cc(n)&&!Fl(n).M_()&&n.Ta.size>0}function Cc(n){return Ae(n).Ia.size===0}function xO(n){n.Ra=void 0}function Mq(n){return T(this,null,function*(){n.Aa.set("Online")})}function Pq(n){return T(this,null,function*(){n.Ta.forEach((e,t)=>{YC(n,e)})})}function Nq(n,e){return T(this,null,function*(){xO(n),XC(n)?(n.Aa.la(e),JC(n)):n.Aa.set("Unknown")})}function kq(n,e,t){return T(this,null,function*(){if(n.Aa.set("Online"),e instanceof dv&&e.state===2&&e.cause)try{yield(function(i,o){return T(this,null,function*(){let a=o.cause;for(let u of o.targetIds)i.Ta.has(u)&&(yield i.remoteSyncer.rejectListen(u,a),i.Ta.delete(u),i.Ra.removeTarget(u))})})(n,e)}catch(r){ie(Tc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ev(n,r)}else if(e instanceof wl?n.Ra.Ye(e):e instanceof lv?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Pe.min()))try{let r=yield DO(n.localStore);t.compareTo(r)>=0&&(yield(function(o,a){let u=o.Ra.Pt(a);return u.targetChanges.forEach((l,f)=>{if(l.resumeToken.approximateByteSize()>0){let g=o.Ta.get(f);g&&o.Ta.set(f,g.withResumeToken(l.resumeToken,a))}}),u.targetMismatches.forEach((l,f)=>{let g=o.Ta.get(l);if(!g)return;o.Ta.set(l,g.withResumeToken(Pn.EMPTY_BYTE_STRING,g.snapshotVersion)),AO(o,l);let y=new yf(g.target,l,f,g.sequenceNumber);YC(o,y)}),o.remoteSyncer.applyRemoteEvent(u)})(n,t))}catch(r){ie(Tc,"Failed to raise snapshot:",r),yield Ev(n,r)}})}function Ev(n,e,t){return T(this,null,function*(){if(!Ll(e))throw e;n.Ia.add(1),yield Af(n),n.Aa.set("Offline"),t||(t=()=>DO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>T(null,null,function*(){ie(Tc,"Retrying IndexedDB access"),yield t(),n.Ia.delete(1),yield zv(n)}))})}function RO(n,e){return e().catch(t=>Ev(n,t,e))}function $v(n){return T(this,null,function*(){let e=Ae(n),t=Js(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:jC;for(;Oq(e);)try{let i=yield Sq(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Lq(e,i)}catch(i){yield Ev(e,i)}MO(e)&&PO(e)})}function Oq(n){return Cc(n)&&n.Pa.length<10}function Lq(n,e){n.Pa.push(e);let t=Js(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function MO(n){return Cc(n)&&!Js(n).M_()&&n.Pa.length>0}function PO(n){Js(n).start()}function Fq(n){return T(this,null,function*(){Js(n).na()})}function Vq(n){return T(this,null,function*(){let e=Js(n);for(let t of n.Pa)e.X_(t.mutations)})}function Uq(n,e,t){return T(this,null,function*(){let r=n.Pa.shift(),i=AT.from(r,e,t);yield RO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield $v(n)})}function jq(n,e){return T(this,null,function*(){e&&Js(n).Z_&&(yield(function(r,i){return T(this,null,function*(){if((function(a){return tq(a)&&a!==G.ABORTED})(i.code)){let o=r.Pa.shift();Js(r).N_(),yield RO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield $v(r)}})})(n,e)),MO(n)&&PO(n)})}function hk(n,e){return T(this,null,function*(){let t=Ae(n);t.asyncQueue.verifyOperationInProgress(),ie(Tc,"RemoteStore received new credentials");let r=Cc(t);t.Ia.add(3),yield Af(t),r&&t.Aa.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),yield zv(t)})}function Bq(n,e){return T(this,null,function*(){let t=Ae(n);e?(t.Ia.delete(2),yield zv(t)):e||(t.Ia.add(2),yield Af(t),t.Aa.set("Unknown"))})}function Fl(n){return n.Va||(n.Va=(function(t,r,i){let o=Ae(t);return o.ia(),new fC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Mq.bind(null,n),e_:Pq.bind(null,n),n_:Nq.bind(null,n),J_:kq.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.Va.N_(),XC(n)?JC(n):n.Aa.set("Unknown")):(yield n.Va.stop(),xO(n))}))),n.Va}function Js(n){return n.ma||(n.ma=(function(t,r,i){let o=Ae(t);return o.ia(),new pC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Fq.bind(null,n),n_:jq.bind(null,n),ea:Vq.bind(null,n),ta:Uq.bind(null,n)}),n.da.push(e=>T(null,null,function*(){e?(n.ma.N_(),yield $v(n)):(yield n.ma.stop(),n.Pa.length>0&&(ie(Tc,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))}))),n.ma}var yC=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function eD(n,e){if(Uo("AsyncQueue",`${e}: ${n}`),Ll(n))return new ee(G.UNAVAILABLE,`${e}: ${n}`);throw n}var bv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=af(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Iv=class{constructor(){this.fa=new Ot(fe.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ge(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Ml=class n{constructor(e,t,r,i,o,a,u,l,f){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=f}static fromInitialDocuments(e,t,r,i,o){let a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new n(e,t,bv.emptySet(t),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var wC=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},EC=class{constructor(){this.queries=fk(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=Ae(t),o=i.queries;i.queries=fk(),o.forEach((a,u)=>{for(let l of u.wa)l.onError(r)})})(this,new ee(G.ABORTED,"Firestore shutting down"))}};function fk(){return new zo(n=>iO(n),Uv)}function tD(n,e){return T(this,null,function*(){let t=Ae(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new wC,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield t.onListen(i,!0);break;case 1:o.ya=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let u=eD(a,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(u)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&rD(t)})}function nD(n,e){return T(this,null,function*(){let t=Ae(n),r=e.query,i=3,o=t.queries.get(r);if(o){let a=o.wa.indexOf(e);a>=0&&(o.wa.splice(a,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function zq(n,e){let t=Ae(n),r=!1;for(let i of e){let o=i.query,a=t.queries.get(o);if(a){for(let u of a.wa)u.Ca(i)&&(r=!0);a.ya=i}}r&&rD(t)}function $q(n,e,t){let r=Ae(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function rD(n){n.Da.forEach(e=>{e.next()})}var bC,pk;(pk=bC||(bC={})).Fa="default",pk.Cache="cache";var bf=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==bC.Cache}};var Tv=class{constructor(e){this.key=e}},Cv=class{constructor(e){this.key=e}},IC=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ze(),this.mutatedKeys=ze(),this.Xa=oO(e),this.eu=new bv(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Iv,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,y)=>{let E=i.get(g),I=jv(this.query,y)?y:null,N=!!E&&this.mutatedKeys.has(E.key),q=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),F=!1;E&&I?E.data.isEqual(I.data)?N!==q&&(r.track({type:3,doc:I}),F=!0):this.iu(E,I)||(r.track({type:2,doc:I}),F=!0,(l&&this.Xa(I,l)>0||f&&this.Xa(I,f)<0)&&(u=!0)):!E&&I?(r.track({type:0,doc:I}),F=!0):E&&!I&&(r.track({type:1,doc:E}),F=!0,(l||f)&&(u=!0)),F&&(I?(a=a.add(I),o=q?o.add(g):o.delete(g)):(a=a.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let g=this.query.limitType==="F"?a.last():a.first();a=a.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{eu:a,ru:r,Ds:u,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let a=e.ru.pa();a.sort((g,y)=>(function(I,N){let q=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{At:F})}};return q(I)-q(N)})(g.type,y.type)||this.Xa(g.doc,y.doc)),this.su(r),i=i!=null&&i;let u=t&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,f=l!==this.Ya;return this.Ya=l,a.length!==0||f?{snapshot:new Ml(this.query,e.eu,o,a,e.mutatedKeys,l===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Iv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ze(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Cv(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Tv(r))}),t}uu(e){this.Ha=e.qs,this.Za=ze();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Ml.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},iD="SyncEngine",TC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},CC=class{constructor(e){this.key=e,this.lu=!1}},DC=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new zo(u=>iO(u),Uv),this.Tu=new Map,this.Iu=new Set,this.du=new Ot(fe.comparator),this.Eu=new Map,this.Au=new Ef,this.Ru={},this.Vu=new Map,this.mu=wf.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function Hq(n,e,t=!0){return T(this,null,function*(){let r=VO(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield NO(r,e,t,!0),i})}function qq(n,e){return T(this,null,function*(){let t=VO(n);yield NO(t,e,!0,!1)})}function NO(n,e,t,r){return T(this,null,function*(){let i=yield Aq(n.localStore,Gi(e)),o=i.targetId,a=n.sharedClientState.addLocalQueryTarget(o,t),u;return r&&(u=yield Wq(n,e,o,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&SO(n.remoteStore,i),u})}function Wq(n,e,t,r,i){return T(this,null,function*(){n.gu=(y,E,I)=>(function(q,F,W,oe){return T(this,null,function*(){let ae=F.view.nu(W);ae.Ds&&(ae=yield uk(q.localStore,F.query,!1).then(({documents:R})=>F.view.nu(R,ae)));let le=oe&&oe.targetChanges.get(F.targetId),Ye=oe&&oe.targetMismatches.get(F.targetId)!=null,be=F.view.applyChanges(ae,q.isPrimaryClient,le,Ye);return gk(q,F.targetId,be._u),be.snapshot})})(n,y,E,I);let o=yield uk(n.localStore,e,!0),a=new IC(e,o.qs),u=a.nu(o.documents),l=vf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),f=a.applyChanges(u,n.isPrimaryClient,l);gk(n,t,f._u);let g=new TC(e,t,a);return n.Pu.set(e,g),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),f.snapshot})}function Gq(n,e,t){return T(this,null,function*(){let r=Ae(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(a=>!Uv(a,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield sC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&QC(r.remoteStore,i.targetId),SC(r,i.targetId)}).catch(Ol))):(SC(r,i.targetId),yield sC(r.localStore,i.targetId,!0))})}function Kq(n,e){return T(this,null,function*(){let t=Ae(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),QC(t.remoteStore,r.targetId))})}function Zq(n,e,t){return T(this,null,function*(){let r=n9(n);try{let i=yield(function(a,u){let l=Ae(a),f=Qt.now(),g=u.reduce((I,N)=>I.add(N.key),ze()),y,E;return l.persistence.runTransaction("Locally write mutations","readwrite",I=>{let N=$o(),q=ze();return l.Os.getEntries(I,g).next(F=>{N=F,N.forEach((W,oe)=>{oe.isValidDocument()||(q=q.add(W))})}).next(()=>l.localDocuments.getOverlayedDocuments(I,N)).next(F=>{y=F;let W=[];for(let oe of u){let ae=eq(oe,y.get(oe.key).overlayedDocument);ae!=null&&W.push(new Yi(oe.key,ae,Yk(ae.value.mapValue),Ki.exists(!0)))}return l.mutationQueue.addMutationBatch(I,f,W,u)}).next(F=>{E=F;let W=F.applyToLocalDocumentSet(y,q);return l.documentOverlayCache.saveOverlays(I,F.batchId,W)})}).then(()=>({batchId:E.batchId,changes:aO(y)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,u,l){let f=a.Ru[a.currentUser.toKey()];f||(f=new Ot(Oe)),f=f.insert(u,l),a.Ru[a.currentUser.toKey()]=f})(r,i.batchId,t),yield xf(r,i.changes),yield $v(r.remoteStore)}catch(i){let o=eD(i,"Failed to persist write");t.reject(o)}})}function kO(n,e){return T(this,null,function*(){let t=Ae(n);try{let r=yield Cq(t.localStore,e);e.targetChanges.forEach((i,o)=>{let a=t.Eu.get(o);a&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.lu=!0:i.modifiedDocuments.size>0?nt(a.lu,14607):i.removedDocuments.size>0&&(nt(a.lu,42227),a.lu=!1))}),yield xf(t,r,e)}catch(r){yield Ol(r)}})}function mk(n,e,t){let r=Ae(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,a)=>{let u=a.view.va(e);u.snapshot&&i.push(u.snapshot)}),(function(a,u){let l=Ae(a);l.onlineState=u;let f=!1;l.queries.forEach((g,y)=>{for(let E of y.wa)E.va(u)&&(f=!0)}),f&&rD(l)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Qq(n,e,t){return T(this,null,function*(){let r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let a=new Ot(fe.comparator);a=a.insert(o,si.newNoDocument(o,Pe.min()));let u=ze().add(o),l=new uv(Pe.min(),new Map,new Ot(Oe),a,u);yield kO(r,l),r.du=r.du.remove(o),r.Eu.delete(e),oD(r)}else yield sC(r.localStore,e,!1).then(()=>SC(r,e,t)).catch(Ol)})}function Yq(n,e){return T(this,null,function*(){let t=Ae(n),r=e.batch.batchId;try{let i=yield Tq(t.localStore,e);LO(t,r,null),OO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield xf(t,i)}catch(i){yield Ol(i)}})}function Jq(n,e,t){return T(this,null,function*(){let r=Ae(n);try{let i=yield(function(a,u){let l=Ae(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let g;return l.mutationQueue.lookupMutationBatch(f,u).next(y=>(nt(y!==null,37113),g=y.keys(),l.mutationQueue.removeMutationBatch(f,y))).next(()=>l.mutationQueue.performConsistencyCheck(f)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(f,g,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,g)).next(()=>l.localDocuments.getDocuments(f,g))})})(r.localStore,e);LO(r,e,t),OO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield xf(r,i)}catch(i){yield Ol(i)}})}function OO(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function LO(n,e,t){let r=Ae(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function SC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||FO(n,r)})}function FO(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(QC(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),oD(n))}function gk(n,e,t){for(let r of t)r instanceof Tv?(n.Au.addReference(r.key,e),Xq(n,r)):r instanceof Cv?(ie(iD,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||FO(n,r.key)):ge(19791,{yu:r})}function Xq(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(ie(iD,"New document in limbo: "+t),n.Iu.add(r),oD(n))}function oD(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new fe(Ct.fromString(e)),r=n.mu.next();n.Eu.set(r,new CC(t)),n.du=n.du.insert(t,r),SO(n.remoteStore,new yf(Gi(Vv(t.path)),r,"TargetPurposeLimboResolution",UC.ue))}}function xf(n,e,t){return T(this,null,function*(){let r=Ae(n),i=[],o=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach((u,l)=>{a.push(r.gu(l,e,t).then(f=>{var g;if((f||t)&&r.isPrimaryClient){let y=f?!f.fromCache:(g=t?.targetChanges.get(l.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(l.targetId,y?"current":"not-current")}if(f){i.push(f);let y=nC.Es(l.targetId,f);o.push(y)}}))}),yield Promise.all(a),r.hu.J_(i),yield(function(l,f){return T(this,null,function*(){let g=Ae(l);try{yield g.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>Z.forEach(f,E=>Z.forEach(E.Is,I=>g.persistence.referenceDelegate.addReference(y,E.targetId,I)).next(()=>Z.forEach(E.ds,I=>g.persistence.referenceDelegate.removeReference(y,E.targetId,I)))))}catch(y){if(!Ll(y))throw y;ie(ZC,"Failed to update sequence numbers: "+y)}for(let y of f){let E=y.targetId;if(!y.fromCache){let I=g.Fs.get(E),N=I.snapshotVersion,q=I.withLastLimboFreeSnapshotVersion(N);g.Fs=g.Fs.insert(E,q)}}})})(r.localStore,o))})}function e9(n,e){return T(this,null,function*(){let t=Ae(n);if(!t.currentUser.isEqual(e)){ie(iD,"User change. New user:",e.toKey());let r=yield CO(t.localStore,e);t.currentUser=e,(function(o,a){o.Vu.forEach(u=>{u.forEach(l=>{l.reject(new ee(G.CANCELLED,a))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xf(t,r.Bs)}})}function t9(n,e){let t=Ae(n),r=t.Eu.get(e);if(r&&r.lu)return ze().add(r.key);{let i=ze(),o=t.Tu.get(e);if(!o)return i;for(let a of o){let u=t.Pu.get(a);i=i.unionWith(u.view.tu)}return i}}function VO(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qq.bind(null,e),e.hu.J_=zq.bind(null,e.eventManager),e.hu.pu=$q.bind(null,e.eventManager),e}function n9(n){let e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jq.bind(null,e),e}var UO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return T(this,null,function*(){this.serializer=Bv(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)})}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Iq(this.persistence,new iC,t.initialUser,this.serializer)}Du(t){return new mv(tC.Vi,this.serializer)}bu(t){return new aC}terminate(){return T(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),AC=class extends UO{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){nt(this.persistence.referenceDelegate instanceof gv,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new zT(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Or.withCacheSize(this.cacheSizeBytes):Or.DEFAULT;return new mv(r=>gv.Vi(r,t),this.serializer)}};var r9=(()=>{class n{initialize(t,r){return T(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=e9.bind(null,this.syncEngine),yield Bq(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new EC})()}createDatastore(t){let r=Bv(t.databaseInfo.databaseId),i=(function(a){return new hC(a)})(t.databaseInfo);return(function(a,u,l,f){return new gC(a,u,l,f)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,a,u,l){return new vC(i,o,a,u,l)})(this.localStore,this.datastore,t.asyncQueue,r=>mk(this.syncEngine,r,0),(function(){return vv.C()?new vv:new cC})())}createSyncEngine(t,r){return(function(o,a,u,l,f,g,y){let E=new DC(o,a,u,l,f,g);return y&&(E.fu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return T(this,null,function*(){var t,r;yield(function(o){return T(this,null,function*(){let a=Ae(o);ie(Tc,"RemoteStore shutting down."),a.Ia.add(5),yield Af(a),a.Ea.shutdown(),a.Aa.set("Unknown")})})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var If=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Uo("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Xs="FirestoreClient",xC=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dn.UNAUTHENTICATED,this.clientId=hf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>T(this,null,function*(){ie(Xs,"Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(ie(Xs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>T(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=eD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function eT(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie(Xs,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>T(null,null,function*(){r.isEqual(i)||(yield CO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{Zs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ie("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{Zs("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e})}function _k(n,e){return T(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield i9(n);ie(Xs,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>hk(e.remoteStore,i)),n._onlineComponents=e})}function i9(n){return T(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(Xs,"Using user provided OfflineComponentProvider");try{yield eT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Zs("Error using user provided cache. Falling back to memory cache: "+t),yield eT(n,new UO)}}else ie(Xs,"Using default OfflineComponentProvider"),yield eT(n,new AC(void 0));return n._offlineComponents})}function jO(n){return T(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(Xs,"Using user provided OnlineComponentProvider"),yield _k(n,n._uninitializedComponentsProvider._online)):(ie(Xs,"Using default OnlineComponentProvider"),yield _k(n,new r9))),n._onlineComponents})}function o9(n){return jO(n).then(e=>e.syncEngine)}function Dv(n){return T(this,null,function*(){let e=yield jO(n),t=e.eventManager;return t.onListen=Hq.bind(null,e.syncEngine),t.onUnlisten=Gq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=qq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Kq.bind(null,e.syncEngine),t})}function s9(n,e,t={}){let r=new oi;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return(function(o,a,u,l,f){let g=new If({next:E=>{g.Ou(),a.enqueueAndForget(()=>nD(o,y));let I=E.docs.has(u);!I&&E.fromCache?f.reject(new ee(G.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&l&&l.source==="server"?f.reject(new ee(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new bf(Vv(u.path),g,{includeMetadataChanges:!0,ka:!0});return tD(o,y)})(yield Dv(n),n.asyncQueue,e,t,r)})),r.promise}function a9(n,e,t={}){let r=new oi;return n.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return(function(o,a,u,l,f){let g=new If({next:E=>{g.Ou(),a.enqueueAndForget(()=>nD(o,y)),E.fromCache&&l.source==="server"?f.reject(new ee(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),y=new bf(u,g,{includeMetadataChanges:!0,ka:!0});return tD(o,y)})(yield Dv(n),n.asyncQueue,e,t,r)})),r.promise}function BO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var vk=new Map;var zO="firestore.googleapis.com",yk=!0,Sv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zO,this.ssl=yk}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wq)throw new ee(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Pl=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tT;switch(r.type){case"firstParty":return new oT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return T(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=vk.get(t);r&&(ie("ComponentProvider","Removing Datastore"),vk.delete(t),r.terminate())})(this),Promise.resolve()}};function $O(n,e,t,r={}){var i;n=tr(n,Pl);let o=Vi(e),a=n._getSettings(),u=Object.assign(Object.assign({},a),{emulatorOptions:n._getEmulatorOptions()}),l=`${e}:${t}`;o&&(ol(`https://${l}`),sl("Firestore",!0)),a.host!==zO&&a.host!==l&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let f=Object.assign(Object.assign({},a),{host:l,ssl:o,emulatorOptions:r});if(!Ui(f,u)&&(n._setSettings(f),r.mockUserToken)){let g,y;if(typeof r.mockUserToken=="string")g=r.mockUserToken,y=dn.MOCK_USER;else{g=v_(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ee(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new dn(E)}n._authCredentials=new nT(new tv(g,y))}}var ea=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Sf(t,n._jsonSchema))return new n(e,r||null,new fe(Ct.fromString(t.referencePath)))}};Xt._jsonSchemaVersion="firestore/documentReference/1.0",Xt._jsonSchema={type:Zt("string",Xt._jsonSchemaVersion),referencePath:Zt("string")};var qs=class n extends ea{constructor(e,t,r){super(e,t,Vv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new fe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function HO(n,e,...t){if(n=It(n),Sk("collection","path",e),n instanceof Pl){let r=Ct.fromString(e,...t);return F1(r),new qs(n,null,r)}{if(!(n instanceof Xt||n instanceof qs))throw new ee(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return F1(r),new qs(n.firestore,null,r)}}function sD(n,e,...t){if(n=It(n),arguments.length===1&&(e=hf.newId()),Sk("doc","path",e),n instanceof Pl){let r=Ct.fromString(e,...t);return L1(r),new Xt(n,null,new fe(r))}{if(!(n instanceof Xt||n instanceof qs))throw new ee(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ct.fromString(e,...t));return L1(r),new Xt(n.firestore,n instanceof qs?n.converter:null,new fe(r))}}var wk="AsyncQueue",Av=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new yv(this,"async_queue_retry"),this.oc=()=>{let r=X0();r&&ie(wk,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=X0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=X0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new oi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return T(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ll(e))throw e;ie(wk,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Uo("INTERNAL UNHANDLED ERROR: ",Ek(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=yC.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&ge(47125,{hc:Ek(this.tc)})}verifyOperationInProgress(){}Pc(){return T(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function Ek(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function bk(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ci=class extends Pl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Av,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return T(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,yield e}})}};function qO(n,e){let t=typeof n=="object"?n:Ao(),r=typeof n=="string"?n:e||sv,i=Vs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=__("firestore");o&&$O(i,...o)}return i}function Hv(n){if(n._terminated)throw new ee(G.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||c9(n),n._firestoreClient}function c9(n){var e,t,r;let i=n._freezeSettings(),o=(function(u,l,f,g){return new lT(u,l,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,BO(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new xC(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(u){let l=u?._online.build();return{_offline:u?._offline.build(l),_online:l}})(n._componentsProvider))}var Ws=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Pn.fromBase64String(e))}catch(t){throw new ee(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sf(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ws._jsonSchemaVersion="firestore/bytes/1.0",Ws._jsonSchema={type:Zt("string",Ws._jsonSchemaVersion),bytes:Zt("string")};var Nl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ee(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Tf=class{constructor(e){this._methodName=e}};var Gs=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ee(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ee(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Sf(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Gs._jsonSchemaVersion="firestore/geoPoint/1.0",Gs._jsonSchema={type:Zt("string",Gs._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};var Ks=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sf(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new ee(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:Zt("string",Ks._jsonSchemaVersion),vectorValues:Zt("object")};var u9=/^__.*__$/,RC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}},xv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Yi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function WO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ec:n})}}var MC=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Mv(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(WO(this.Ec)&&u9.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},PC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bv(e)}Dc(e,t,r,i=!1){return new MC({Ec:e,methodName:t,bc:r,path:yr.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qv(n){let e=n._freezeSettings(),t=Bv(n._databaseId);return new PC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function GO(n,e,t,r,i,o={}){let a=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);aD("Data must be an object, but it was:",a,r);let u=KO(r,a),l,f;if(o.merge)l=new Lr(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let g=[];for(let y of o.mergeFields){let E=NC(e,y,t);if(!a.contains(E))throw new ee(G.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);QO(g,E)||g.push(E)}l=new Lr(g),f=a.fieldTransforms.filter(y=>l.covers(y.field))}else l=null,f=a.fieldTransforms;return new RC(new vr(u),l,f)}var Rv=class n extends Tf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function l9(n,e,t,r){let i=n.Dc(1,e,t);aD("Data must be an object, but it was:",i,r);let o=[],a=vr.empty();ta(r,(l,f)=>{let g=cD(e,l,t);f=It(f);let y=i.gc(g);if(f instanceof Rv)o.push(g);else{let E=Rf(f,y);E!=null&&(o.push(g),a.set(g,E))}});let u=new Lr(o);return new xv(a,u,i.fieldTransforms)}function d9(n,e,t,r,i,o){let a=n.Dc(1,e,t),u=[NC(e,r,t)],l=[i];if(o.length%2!=0)throw new ee(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)u.push(NC(e,o[E])),l.push(o[E+1]);let f=[],g=vr.empty();for(let E=u.length-1;E>=0;--E)if(!QO(f,u[E])){let I=u[E],N=l[E];N=It(N);let q=a.gc(I);if(N instanceof Rv)f.push(I);else{let F=Rf(N,q);F!=null&&(f.push(I),g.set(I,F))}}let y=new Lr(f);return new xv(g,y,a.fieldTransforms)}function h9(n,e,t,r=!1){return Rf(t,n.Dc(r?4:3,e))}function Rf(n,e){if(ZO(n=It(n)))return aD("Unsupported field value:",e,n),KO(n,e);if(n instanceof Tf)return(function(r,i){if(!WO(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],a=0;for(let u of r){let l=Rf(u,i.yc(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z8(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Qt.fromDate(r);return{timestampValue:fv(i.serializer,o)}}if(r instanceof Qt){let o=new Qt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fv(i.serializer,o)}}if(r instanceof Gs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ws)return{bytesValue:_O(i.serializer,r._byteString)};if(r instanceof Xt){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:KC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ks)return(function(a,u){return{mapValue:{fields:{[zC]:{stringValue:$C},[Il]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return GC(u.serializer,f)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Ov(r)}`)})(n,e)}function KO(n,e){let t={};return $k(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(n,(r,i)=>{let o=Rf(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ZO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qt||n instanceof Gs||n instanceof Ws||n instanceof Xt||n instanceof Tf||n instanceof Ks)}function aD(n,e,t){if(!ZO(t)||!Ak(t)){let r=Ov(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function NC(n,e,t){if((e=It(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return cD(n,e);throw Mv("Field path arguments must be of type string or ",n,!1,void 0,t)}var f9=new RegExp("[~\\*/\\[\\]]");function cD(n,e,t){if(e.search(f9)>=0)throw Mv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw Mv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Mv(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new ee(G.INVALID_ARGUMENT,u+n+l)}function QO(n,e){return n.some(t=>t.isEqual(e))}var Pv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new kC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Wv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},kC=class extends Pv{data(){return super.data()}};function Wv(n,e){return typeof e=="string"?cD(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}function YO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ee(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Cf=class{},Nv=class extends Cf{};function JO(n,e,...t){let r=[];e instanceof Cf&&r.push(e),r=r.concat(t),(function(o){let a=o.filter(l=>l instanceof OC).length,u=o.filter(l=>l instanceof kv).length;if(a>1||a>0&&u>0)throw new ee(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var kv=class n extends Nv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return tL(e._query,t),new ea(e.firestore,e.converter,IT(e._query,t))}_parse(e){let t=qv(e.firestore);return(function(o,a,u,l,f,g,y){let E;if(f.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ee(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Tk(y,g);let N=[];for(let q of y)N.push(Ik(l,o,q));E={arrayValue:{values:N}}}else E=Ik(l,o,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Tk(y,g),E=h9(u,a,y,g==="in"||g==="not-in");return Kt.create(f,g,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function XO(n,e,t){let r=e,i=Wv("where",n);return kv._create(i,r,t)}var OC=class n extends Cf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let a=i,u=o.getFlattenedFilters();for(let l of u)tL(a,l),a=IT(a,l)})(e._query,t),new ea(e.firestore,e.converter,IT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var LC=class n extends Nv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,a){if(i.startAt!==null)throw new ee(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ee(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wc(o,a)})(e._query,this._field,this._direction);return new ea(e.firestore,e.converter,(function(i,o){let a=i.explicitOrderBy.concat([o]);return new Ys(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function eL(n,e="asc"){let t=e,r=Wv("orderBy",n);return LC._create(r,t)}function Ik(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new ee(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rO(e)&&t.indexOf("/")!==-1)throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ct.fromString(t));if(!fe.isDocumentKey(r))throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return H1(n,new fe(r))}if(t instanceof Xt)return H1(n,t._key);throw new ee(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ov(t)}.`)}function Tk(n,e){if(!Array.isArray(n)||n.length===0)throw new ee(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tL(n,e){let t=(function(i,o){for(let a of i)for(let u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ee(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ee(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var FC=class{convertValue(e,t="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ta(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Il].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Tt(a.doubleValue));return new Ks(o)}convertGeoPoint(e){return new Gs(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Fv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mf(e));default:return null}}convertTimestamp(e){let t=jo(e);return new Qt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ct.fromString(e);nt(IO(r),9688,{name:e});let i=new av(r.get(1),r.get(3)),o=new fe(r.popFirst(5));return i.isEqual(t)||Uo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function nL(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var mc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gc=class n extends Pv{constructor(e,t,r,i,o,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new El(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Wv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};gc._jsonSchemaVersion="firestore/documentSnapshot/1.0",gc._jsonSchema={type:Zt("string",gc._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};var El=class extends gc{data(e={}){return super.data(e)}},_c=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new El(this._firestore,this._userDataWriter,r.key,r,new mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ee(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{let l=new El(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{let l=new El(i._firestore,i._userDataWriter,u.doc.key,u.doc,new mc(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter),f=-1,g=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),g=a.indexOf(u.doc.key)),{type:p9(u.type),doc:l,oldIndex:f,newIndex:g}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ee(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function p9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:n})}}function rL(n){n=tr(n,Xt);let e=tr(n.firestore,ci);return s9(Hv(e),n._key).then(t=>uL(e,n,t))}_c._jsonSchemaVersion="firestore/querySnapshot/1.0",_c._jsonSchema={type:Zt("string",_c._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};var Df=class extends FC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ws(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,t)}};function iL(n){n=tr(n,ea);let e=tr(n.firestore,ci),t=Hv(e),r=new Df(e);return YO(n._query),a9(t,n._query).then(i=>new _c(e,r,n,i))}function oL(n,e,t){n=tr(n,Xt);let r=tr(n.firestore,ci),i=nL(n.converter,e,t);return Gv(r,[GO(qv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ki.none())])}function sL(n,e,t,...r){n=tr(n,Xt);let i=tr(n.firestore,ci),o=qv(i),a;return a=typeof(e=It(e))=="string"||e instanceof Nl?d9(o,"updateDoc",n._key,e,t,r):l9(o,"updateDoc",n._key,e),Gv(i,[a.toMutation(n._key,Ki.exists(!0))])}function aL(n){return Gv(tr(n.firestore,ci),[new _f(n._key,Ki.none())])}function cL(n,e){let t=tr(n.firestore,ci),r=sD(n),i=nL(n.converter,e);return Gv(t,[GO(qv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ki.exists(!1))]).then(()=>r)}function uD(n,...e){var t,r,i;n=It(n);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||bk(e[a])||(o=e[a++]);let u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(bk(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let l,f,g;if(n instanceof Xt)f=tr(n.firestore,ci),g=Vv(n._key.path),l={next:y=>{e[a]&&e[a](uL(f,n,y))},error:e[a+1],complete:e[a+2]};else{let y=tr(n,ea);f=tr(y.firestore,ci),g=y._query;let E=new Df(f);l={next:I=>{e[a]&&e[a](new _c(f,E,y,I))},error:e[a+1],complete:e[a+2]},YO(n._query)}return(function(E,I,N,q){let F=new If(q),W=new bf(I,F,N);return E.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return tD(yield Dv(E),W)})),()=>{F.Ou(),E.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return nD(yield Dv(E),W)}))}})(Hv(f),g,u,l)}function Gv(n,e){return(function(r,i){let o=new oi;return r.asyncQueue.enqueueAndForget(()=>T(null,null,function*(){return Zq(yield o9(r),i,o)})),o.promise})(Hv(n),e)}function uL(n,e,t){let r=t.docs.get(e._key),i=new Df(n);return new gc(n,i,e._key,r,new mc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){kl=i})(zi),_r(new En("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new ci(new rT(r.getProvider("auth-internal")),new sT(a,r.getProvider("app-check-internal")),(function(f,g){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new av(f.options.projectId,g)})(a,i),a);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),lt(P1,N1,e),lt(P1,N1,"esm2017")})();var Kv=function(){return Kv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Kv.apply(this,arguments)};var _9={includeMetadataChanges:!1};function lL(n,e){return e===void 0&&(e=_9),new Te(function(t){var r=uD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function dL(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Kv(Kv({},r),(t={},t[e.idField]=n.id,t))}function hL(n){return lL(n,{includeMetadataChanges:!0}).pipe(Ce(function(e){return e.docs}))}function fL(n,e){return e===void 0&&(e={}),hL(n).pipe(Ce(function(t){return t.map(function(r){return dL(r,e)})}))}var $n=class{constructor(e){return e}},pL="firestore",lD=class{constructor(){return Us(pL)}};var dD=new X("angularfire2.firestore-instances");function v9(n,e){let t=cc(pL,n,e);return t&&new $n(t)}function y9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $n(r)}}var w9={provide:lD,deps:[[new an,dD]]},E9={provide:$n,useFactory:v9,deps:[[new an,dD],ni]};function mL(n,...e){return lt("angularfire",$i.full,"fst"),Un([E9,w9,{provide:dD,useFactory:y9(n),multi:!0,deps:[Ke,wt,Hi,xo,[new an,dc],[new an,Bs],...e]}])}var Mf=dt(fL,!0);var Vl=dt(cL,!0,2);var ui=dt(HO,!0,2);var Pf=dt(aL,!0,2);var Hn=dt(sD,!0,2);var Nf=dt(rL,!0);var hD=dt(iL,!0);var gL=dt(qO,!0);var Zv=dt(eL,!0,2),na=dt(JO,!0,2);var Dc=dt(oL,!0,2);var fD=dt(sL,!0,2);var pD=dt(XO,!0,2);var Ji=class n{auth=$(Bt);firestore=$($n);constructor(){}registerUser(e,t,r){return T(this,null,function*(){let o=(yield W_(this.auth,e,t)).user.uid;return yield Dc(Hn(this.firestore,"users",o),r),o})}resetPassword(e){return T(this,null,function*(){yield S1(this.auth,e)})}login(e,t){return T(this,null,function*(){return yield H0(this.auth,of),A1(this.auth,e,t)})}loginWithGoogle(){return T(this,null,function*(){yield H0(this.auth,of);let e=new R0,r=(yield x1(this.auth,e)).user,i=Hn(this.firestore,"users",r.uid),o=yield Nf(i);if(!o.exists()){let l="commuter";return yield Dc(i,{email:r.email,role:l,createdAt:new Date}),{user:r,role:l,isNew:!0}}let u=o.data().role||null;return{user:r,role:u,isNew:!1}})}getUserRole(e){return T(this,null,function*(){let t=Hn(this.firestore,"users",e),r=yield Nf(t);return r.exists()?r.data().role:null})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function b9(n,e){if(n&1&&(V(0,"div",21),H(1),U()),n&2){let t=Ee();Y(),Ut(" ",t.error()," ")}}var Jv=class n{constructor(e,t,r){this.authService=e;this.auth=t;this.router=r}email=_t("");password=_t("");error=_t("");login(){return T(this,null,function*(){try{let t=(yield this.authService.login(this.email(),this.password())).user,r=yield this.authService.getUserRole(t.uid);r==="commuter"?this.router.navigate(["/commuter/dashboard"]):r==="driver"?this.router.navigate(["/driver/dashboard"]):r==="admin"?this.router.navigate(["/admin/dashboard"]):this.error.set("Invalid role assigned.")}catch(e){this.error.set(e.message||"Login failed.")}})}loginWithGoogle(){return T(this,null,function*(){try{let{user:e,role:t}=yield this.authService.loginWithGoogle();t==="commuter"?this.router.navigate(["/commuter/dashboard"]):t==="driver"?this.router.navigate(["/driver/dashboard"]):t==="admin"?this.router.navigate(["/admin/dashboard"]):this.router.navigate(["/signup"])}catch(e){this.error.set(e.message||"Google login failed.")}})}forgotPassword(){return T(this,null,function*(){try{let e=this.email().trim();if(!e){this.error.set("Please enter your email first.");return}yield this.authService.resetPassword(e),this.error.set("Password reset email sent. Check your inbox.")}catch(e){this.error.set(e.message||"Failed to send reset email.")}})}static \u0275fac=function(t){return new(t||n)(ue(Ji),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-login"]],decls:31,vars:3,consts:[[1,"otw-login-page"],[1,"otw-login-bg"],[1,"otw-login-content"],[1,"otw-login-card"],[1,"otw-login-header","text-center"],[1,"otw-logo-bg","mb-3"],[1,"otw-login-title"],[1,"otw-login-subtitle"],["class","alert alert-danger mb-3",4,"ngIf"],[1,"form-floating","mb-3"],["type","email","id","email","placeholder","Email",1,"form-control","otw-input",3,"ngModelChange","keydown.enter","ngModel"],["for","email"],[1,"form-floating","mb-4"],["type","password","id","password","placeholder","Password",1,"form-control","otw-input",3,"ngModelChange","keydown.enter","ngModel"],["for","password"],[1,"btn","otw-btn-primary","w-100","mb-3",3,"click"],[1,"text-end","mb-3"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"btn","btn-outline-secondary","w-100","mb-3",3,"click"],[1,"otw-login-footer","text-center"],["routerLink","/signup",1,"otw-link"],[1,"alert","alert-danger","mb-3"]],template:function(t,r){t&1&&(V(0,"div",0),Vt(1,"div",1),V(2,"div",2)(3,"div",3)(4,"div",4),Vt(5,"div",5),V(6,"h2",6),H(7,"Welcome to OTW"),U(),V(8,"p",7),H(9,"Login to your account"),U()(),kt(10,b9,2,1,"div",8),V(11,"div",9)(12,"input",10),Qe("ngModelChange",function(o){return Xe(r.email,o)||(r.email=o),o}),se("keydown.enter",function(){return r.login()}),U(),V(13,"label",11),H(14,"Email"),U()(),V(15,"div",12)(16,"input",13),Qe("ngModelChange",function(o){return Xe(r.password,o)||(r.password=o),o}),se("keydown.enter",function(){return r.login()}),U(),V(17,"label",14),H(18,"Password"),U()(),V(19,"button",15),se("click",function(){return r.login()}),H(20," Login "),U(),V(21,"div",16)(22,"button",17),se("click",function(){return r.forgotPassword()}),H(23," Forgot password? "),U()(),V(24,"button",18),se("click",function(){return r.loginWithGoogle()}),H(25," Continue with Google "),U(),V(26,"div",19)(27,"span"),H(28,"Don't have an account?"),U(),V(29,"a",20),H(30,"Create an account"),U()()()()()),t&2&&(Y(10),st("ngIf",r.error()),Y(2),Ze("ngModel",r.email),Y(4),Ze("ngModel",r.password))},dependencies:[Rn,Ka,er,Xn,Nr,gr,Fi],styles:['.otw-login-page[_ngcontent-%COMP%]{position:relative;min-height:100vh;overflow:hidden}.otw-login-bg[_ngcontent-%COMP%]{position:absolute;inset:0;background-image:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;z-index:0}.otw-login-content[_ngcontent-%COMP%]{position:relative;z-index:1;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1.5rem 1rem}.otw-login-card[_ngcontent-%COMP%]{width:100%;max-width:380px;border-radius:32px;background:#fffffff5;box-shadow:0 22px 55px #180b3c8c;padding:2rem 1.75rem}.otw-logo-bg[_ngcontent-%COMP%]{width:84px;height:84px;border-radius:24px;margin:0 auto;background-image:url("./media/logo-IKMKXBN4.png");background-size:cover;background-position:center;background-repeat:no-repeat;box-shadow:0 18px 40px #180b3c73}.otw-login-title[_ngcontent-%COMP%]{margin-top:1rem;font-weight:800;font-size:1.6rem;color:#1f1f2e;letter-spacing:.02em}.otw-login-subtitle[_ngcontent-%COMP%]{margin:.2rem 0 .6rem;font-size:.9rem;color:#0f0a28b3}.otw-input[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(15,10,40,.18);font-size:.95rem}.otw-input[_ngcontent-%COMP%]:focus{border-color:#ff9b3a;box-shadow:0 0 0 .15rem #ff9b3a59}.otw-btn-primary[_ngcontent-%COMP%]{border-radius:999px;padding:.75rem 1rem;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;font-size:.96rem;letter-spacing:.03em;text-transform:uppercase;box-shadow:0 16px 36px #180b3c80;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease}.otw-btn-primary[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 22px 48px #180b3c99}.otw-btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 12px 26px #180b3c66}.otw-login-footer[_ngcontent-%COMP%]{font-size:.85rem;color:#0f0a28b3}.otw-login-footer[_ngcontent-%COMP%]   .otw-link[_ngcontent-%COMP%]{margin-left:.25rem;color:#ff9b3a;font-weight:600;text-decoration:none}.otw-login-footer[_ngcontent-%COMP%]   .otw-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (min-width: 768px){.otw-login-card[_ngcontent-%COMP%]{padding:2.3rem 2.2rem;max-width:420px}}']})};var Xv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ft({type:n,selectors:[["app-signup-choice"]],decls:13,vars:0,consts:[[1,"signup-bg","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"signup-card"],[1,"text-center","mb-4"],[1,"signup-logo","mb-3"],[1,"signup-title"],[1,"signup-subtitle"],["routerLink","/signup/commuter",1,"btn","signup-btn","w-100","py-2","mb-3"],[1,"text-center","mt-3"],["routerLink","/login",1,"signup-link"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"div",2),Vt(3,"div",3),V(4,"h2",4),H(5,"Create an account"),U(),V(6,"p",5),H(7,"Choose your account type to continue"),U()(),V(8,"button",6),H(9," I am a Commuter "),U(),V(10,"div",7)(11,"a",8),H(12,"Back to Login"),U()()()())},dependencies:[Rn,Fi],styles:['.signup-bg[_ngcontent-%COMP%]{position:relative;min-height:100vh;background-image:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;padding:1.5rem 1rem}.signup-card[_ngcontent-%COMP%]{width:100%;max-width:380px;border-radius:32px;background:#fffffff5;box-shadow:0 22px 55px #180b3c8c;padding:2rem 1.75rem}.signup-title[_ngcontent-%COMP%]{margin-top:1rem;font-weight:800;font-size:1.6rem;color:#1f1f2e;letter-spacing:.02em;text-transform:none}.signup-subtitle[_ngcontent-%COMP%]{margin:.2rem 0 .6rem;font-size:.9rem;color:#0f0a28b3}.signup-btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;font-size:.96rem;letter-spacing:.03em;text-transform:uppercase;box-shadow:0 14px 32px #180b3c80;transition:transform .15s ease,box-shadow .15s ease,filter .15s ease}.signup-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 20px 44px #180b3c99}.signup-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 12px 26px #180b3c66}.signup-link[_ngcontent-%COMP%]{color:#ff9b3a;font-weight:600;text-decoration:none;font-size:.9rem}.signup-link[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (min-width: 768px){.signup-card[_ngcontent-%COMP%]{padding:2.3rem 2.2rem;max-width:420px}}']})};var ey=class n{constructor(e,t){this.authService=e;this.router=t}name=_t("");email=_t("");password=_t("");register(){return T(this,null,function*(){try{console.log("Creating commuter account...");let e={name:this.name(),email:this.email(),role:"commuter",createdAt:new Date},t=yield this.authService.registerUser(this.email(),this.password(),e);console.log("User created with ID:",t),alert("Account created successfully!"),this.router.navigate(["/login"])}catch(e){console.error("SIGNUP ERROR:",e),alert("Error: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(ue(Ji),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-commuter-signup"]],decls:12,vars:3,consts:[[1,"signup-bg"],[1,"signup-card"],[1,"logo-placeholder","mb-3"],[1,"signup-title","text-center"],[1,"signup-subtitle","text-center"],["type","text","placeholder","Full Name",1,"form-control","mb-3",3,"input","value"],["type","email","placeholder","Email",1,"form-control","mb-3",3,"input","value"],["type","password","placeholder","Password",1,"form-control","mb-4",3,"input","value"],["type","button",1,"signup-btn","w-100","mb-3",3,"click"]],template:function(t,r){t&1&&(Yr(0,"div",0)(1,"div",1),ug(2,"div",2),Yr(3,"h2",3),H(4,"Commuter Signup"),Ri(),Yr(5,"p",4),H(6,"Create your commuter account"),Ri(),Yr(7,"input",5),Wa("input",function(o){return r.name.set(o.target.value)}),Ri(),Yr(8,"input",6),Wa("input",function(o){return r.email.set(o.target.value)}),Ri(),Yr(9,"input",7),Wa("input",function(o){return r.password.set(o.target.value)}),Ri(),Yr(10,"button",8),Wa("click",function(){return r.register()}),H(11," Create Account "),Ri()()()),t&2&&(Y(7),Lu("value",r.name()),Y(),Lu("value",r.email()),Y(),Lu("value",r.password()))},dependencies:[Rn,er],styles:['.signup-bg[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;justify-content:center;align-items:center;padding:1rem;box-sizing:border-box}.signup-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background-image:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;z-index:0}.signup-card[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:400px;border-radius:1.5rem;background:#fffffff5;box-shadow:0 10px 25px #180b3c66;padding:2rem;display:flex;flex-direction:column;align-items:center;box-sizing:border-box}.logo-placeholder[_ngcontent-%COMP%]{width:84px;height:84px;border-radius:20px;margin-bottom:1rem;background-image:url("./media/logo-IKMKXBN4.png");background-size:cover;background-position:center;box-shadow:0 4px 12px #180b3c4d}.signup-title[_ngcontent-%COMP%]{font-weight:800;font-size:1.5rem;color:#1f1f2e;text-align:center;margin-bottom:.5rem}.signup-subtitle[_ngcontent-%COMP%]{font-size:.9rem;color:#0f0a28b3;text-align:center;margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%]{width:100%;border-radius:50px;border:1px solid rgba(15,10,40,.18);padding:.65rem 1rem;font-size:.95rem;margin-bottom:1rem;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#ff9b3a;box-shadow:0 0 0 .15rem #ff9b3a59;outline:none}.signup-btn[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border-radius:50px;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;text-transform:uppercase;box-shadow:0 6px 12px #180b3c66;transition:transform .15s,box-shadow .15s,filter .15s;cursor:pointer;margin-bottom:1rem}.signup-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 10px 20px #180b3c80}.signup-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 5px 10px #180b3c4d}@media (max-width: 400px){.signup-card[_ngcontent-%COMP%]{padding:1rem}.logo-placeholder[_ngcontent-%COMP%]{width:60px;height:60px}.signup-title[_ngcontent-%COMP%]{font-size:1.2rem}.signup-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.form-control[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem .8rem}.signup-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.6rem .8rem}}']})};var ty=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";loading=!1;message="";createAdmin(){return T(this,null,function*(){this.loading=!0,this.message="";try{let e={role:"admin",email:this.email,createdAt:new Date};yield this.authService.registerUser(this.email,this.password,e),this.message="Admin account created successfully! Redirecting...",setTimeout(()=>{this.router.navigate(["/admin/dashboard"])},1500)}catch(e){this.message=e.message}this.loading=!1})}static \u0275fac=function(t){return new(t||n)(ue(Ji),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-admin-setup"]],decls:14,vars:5,consts:[[1,"container"],[3,"ngSubmit"],["type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"msg"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"h2"),H(2,"Create Admin Account"),U(),V(3,"form",1),se("ngSubmit",function(){return r.createAdmin()}),V(4,"label"),H(5,"Email"),U(),V(6,"input",2),Qe("ngModelChange",function(o){return Xe(r.email,o)||(r.email=o),o}),U(),V(7,"label"),H(8,"Password"),U(),V(9,"input",3),Qe("ngModelChange",function(o){return Xe(r.password,o)||(r.password=o),o}),U(),V(10,"button",4),H(11),U()(),V(12,"p",5),H(13),U()()),t&2&&(Y(6),Ze("ngModel",r.email),Y(3),Ze("ngModel",r.password),Y(),st("disabled",r.loading),Y(),Ut(" ",r.loading?"Creating...":"Create Admin"," "),Y(2),cn(r.message))},dependencies:[er,$P,Xn,Nr,FP,CI,gr,EI],styles:[".container[_ngcontent-%COMP%]{max-width:400px;margin:60px auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px #0000001a}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;padding:12px;margin:8px 0}button[_ngcontent-%COMP%]{background:#06f;border:none;color:#fff;cursor:pointer;border-radius:8px}button[_ngcontent-%COMP%]:disabled{opacity:.7}.msg[_ngcontent-%COMP%]{text-align:center;margin-top:10px;color:#333}"]})};var Nn=QD(mD());var z=QD(mD(),1);function qn(n,e){return Object.assign(e,n.geocodingQueryParams)}function nr(n,e){return Object.assign(e,n.reverseQueryParams)}var I9=/[&<>"'`]/g,T9=/[&<>"'`]/,C9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function D9(n){return C9[n]}function S9(n){return n==null?"":n?(n=""+n,T9.test(n)?n.replace(I9,D9):n):n+""}function ht(n,e){let t={Accept:"application/json"},r=new URL(n);return Object.entries(e).forEach(([i,o])=>{(Array.isArray(o)?o:[o]).forEach(a=>{r.searchParams.append(i,a)})}),fetch(r.toString(),{headers:t}).then(i=>i.json())}function A9(n,e){return n.replace(/\{ *([\w_]+) *\}/g,(t,r)=>{let i=e[r];return i===void 0?i="":typeof i=="function"&&(i=i(e)),S9(i)})}var ry=class{options={serviceUrl:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",apiKey:""};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=qn(this.options,{token:this.options.apiKey,SingleLine:e,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"});return(yield ht(this.options.serviceUrl+"/findAddressCandidates",t)).candidates.map(r=>{let i=new z.LatLng(r.location.y,r.location.x),o=new z.LatLngBounds(new z.LatLng(r.extent.ymax,r.extent.xmax),new z.LatLng(r.extent.ymin,r.extent.xmin));return{name:r.address,bbox:o,center:i}})})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{location:e.lng+","+e.lat,distance:100,f:"json"}),i=yield ht(this.options.serviceUrl+"/reverseGeocode",r);if(!i||i.error)return[];let o=new z.LatLng(i.location.y,i.location.x),a=new z.LatLngBounds(o,o);return[{name:i.address.Match_addr,center:o,bbox:a}]})}};function x9(n){return new ry(n)}var iy=class{options={serviceUrl:"https://dev.virtualearth.net/REST/v1/Locations/"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=qn(this.options,{query:e,key:this.options.apiKey}),r=yield ht(this.options.serviceUrl,t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey}),i=yield ht(this.options.serviceUrl+e.lat+","+e.lng,r);return this._parseResults(i)})}_parseResults(e){return e.resourceSets[0].resources.map(t=>{let r=t.bbox;return{name:t.name,bbox:new z.LatLngBounds([r[0],r[1]],[r[2],r[3]]),center:new z.LatLng(...t.point.coordinates)}})}};function R9(n){return new iy(n)}var oy=class{options={apiKey:"",serviceUrl:"https://atlas.microsoft.com/search"};constructor(e){if(z.Util.setOptions(this,e),!this.options.apiKey)throw new Error("Azure Maps Geocoder requires an API key.")}geocode(e){return T(this,null,function*(){let t={"api-version":"1.0",query:e,"subscription-key":this.options.apiKey},r=this.options.serviceUrl+"/address/json";return((yield ht(r,t)).results||[]).map(i=>({name:i.address.freeformAddress,bbox:new z.LatLngBounds([i.viewport.topLeftPoint.lat,i.viewport.topLeftPoint.lon],[i.viewport.btmRightPoint.lat,i.viewport.btmRightPoint.lon]),center:new z.LatLng(i.position.lat,i.position.lon)}))})}reverse(e,t){return T(this,null,function*(){let r={"api-version":"1.0",query:e.lat+","+e.lng,"subscription-key":this.options.apiKey},i=this.options.serviceUrl+"/address/reverse/json";return((yield ht(i,r)).addresses||[]).map(o=>({name:o.address.freeformAddress,bbox:new z.LatLngBounds([o.viewport.topLeftPoint.lat,o.viewport.topLeftPoint.lon],[o.viewport.btmRightPoint.lat,o.viewport.btmRightPoint.lon]),center:new z.LatLng(e.lat,e.lng)}))})}};function M9(n){return new oy(n)}var sy=class{options={serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=qn(this.options,{key:this.options.apiKey,address:e}),r=yield ht(this.options.serviceUrl,t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey,latlng:e.lat+","+e.lng}),i=yield ht(this.options.serviceUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.results||[])?.map(t=>{let r=new z.LatLng(t.geometry.location.lat,t.geometry.location.lng),i=new z.LatLngBounds(new z.LatLng(t.geometry.viewport.northeast.lat,t.geometry.viewport.northeast.lng),new z.LatLng(t.geometry.viewport.southwest.lat,t.geometry.viewport.southwest.lng));return{name:t.formatted_address,bbox:i,center:r,properties:t.address_components}})}};function P9(n){return new sy(n)}var ay=class{options={serviceUrl:"https://geocoder.api.here.com/6.2/",app_id:"",app_code:"",apiKey:"",maxResults:5};constructor(e){if(z.Util.setOptions(this,e),e?.apiKey)throw Error("apiKey is not supported, use app_id/app_code instead!")}geocode(e){let t=qn(this.options,{searchtext:e,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"geocode.json",t)}reverse(e,t){let r=e.lat+","+e.lng;this.options.reverseGeocodeProxRadius&&(r+=","+this.options.reverseGeocodeProxRadius);let i=nr(this.options,{prox:r,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1,maxresults:this.options.maxResults});return this.getJSON(this.options.serviceUrl+"reversegeocode.json",i)}getJSON(e,t){return T(this,null,function*(){return((yield ht(e,t)).response.view?.[0]?.result||[]).map(r=>{let i=r.location,o=new z.LatLng(i.displayPosition.latitude,i.displayPosition.longitude),a=new z.LatLngBounds(new z.LatLng(i.mapView.topLeft.latitude,i.mapView.topLeft.longitude),new z.LatLng(i.mapView.bottomRight.latitude,i.mapView.bottomRight.longitude));return{name:i.address.label,properties:i.address,bbox:a,center:o}})})}},cy=class{options={serviceUrl:"https://geocode.search.hereapi.com/v1",apiKey:"",app_id:"",app_code:"",maxResults:10};constructor(e){z.Util.setOptions(this,e)}geocode(e){let t=qn(this.options,{q:e,apiKey:this.options.apiKey,limit:this.options.maxResults});if(!t.at&&!t.in)throw Error("at / in parameters not found. Please define coordinates (at=latitude,longitude) or other (in) in your geocodingQueryParams.");return this.getJSON(this.options.serviceUrl+"/discover",t)}reverse(e,t){let r=nr(this.options,{at:e.lat+","+e.lng,limit:this.options.reverseGeocodeProxRadius,apiKey:this.options.apiKey});return this.getJSON(this.options.serviceUrl+"/revgeocode",r)}getJSON(e,t){return T(this,null,function*(){return((yield ht(e,t)).items||[]).map(r=>{let i=new z.LatLng(r.position.lat,r.position.lng),o;return r.mapView?o=new z.LatLngBounds(new z.LatLng(r.mapView.south,r.mapView.west),new z.LatLng(r.mapView.north,r.mapView.east)):o=new z.LatLngBounds(new z.LatLng(r.position.lat,r.position.lng),new z.LatLng(r.position.lat,r.position.lng)),{name:r.address.label,properties:r.address,bbox:o,center:i}})})}};function N9(n){return n?.apiKey?new cy(n):new ay(n)}function vL(n){let e;if(e=n.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))return new z.LatLng((/N/i.test(e[1])?1:-1)*+e[2],(/E/i.test(e[3])?1:-1)*+e[4]);if(e=n.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))return new z.LatLng((/N/i.test(e[2])?1:-1)*+e[1],(/E/i.test(e[4])?1:-1)*+e[3]);if(e=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\W*([EW])\s*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?$/))return new z.LatLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60),(/E/i.test(e[4])?1:-1)*(+e[5]+ +e[6]/60));if(e=n.match(/^(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([NS])\W*(\d{1,3})?\s*(\d{1,3}(?:\.\d*)?)?[']?\s*([EW])$/))return new z.LatLng((/N/i.test(e[3])?1:-1)*(+e[1]+ +e[2]/60),(/E/i.test(e[6])?1:-1)*(+e[4]+ +e[5]/60));if(e=n.match(/^([NS])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\W*([EW])\s*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?$/))return new z.LatLng((/N/i.test(e[1])?1:-1)*(+e[2]+ +e[3]/60+ +e[4]/3600),(/E/i.test(e[5])?1:-1)*(+e[6]+ +e[7]/60+ +e[8]/3600));if(e=n.match(/^(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]\s*([NS])\W*(\d{1,3})?\s*(\d{1,2})[']?\s*(\d{1,3}(?:\.\d*)?)?["]?\s*([EW])$/))return new z.LatLng((/N/i.test(e[4])?1:-1)*(+e[1]+ +e[2]/60+ +e[3]/3600),(/E/i.test(e[8])?1:-1)*(+e[5]+ +e[6]/60+ +e[7]/3600));if(e=n.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))return new z.LatLng(+e[1],+e[2])}var uy=class{options={next:void 0,sizeInMeters:1e4};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=vL(e);return t?[{name:e,center:t,bbox:t.toBounds(this.options.sizeInMeters)}]:this.options.next?this.options.next.geocode(e):[]})}};function k9(n){return new uy(n)}var ly=class{options={serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/"};constructor(e){z.Util.setOptions(this,e)}_getProperties(e){let t={text:e.text,address:e.address};return(e.context||[]).forEach(r=>{let i=r.id.split(".")[0];t[i]=r.text,r.short_code&&(t.countryShortCode=r.short_code)}),t}geocode(e){return T(this,null,function*(){let t=this.options.serviceUrl+encodeURIComponent(e)+".json",r=qn(this.options,{access_token:this.options.apiKey});r.proximity!==void 0&&r.proximity.lat!==void 0&&r.proximity.lng!==void 0&&(r.proximity=r.proximity.lng+","+r.proximity.lat);let i=yield ht(t,r);return this._parseResults(i)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=this.options.serviceUrl+e.lng+","+e.lat+".json",i=nr(this.options,{access_token:this.options.apiKey}),o=yield ht(r,i);return this._parseResults(o)})}_parseResults(e){return e.features?.length?e.features.map(t=>{let r=new z.LatLng(...t.center.reverse()),i;return t.bbox?i=new z.LatLngBounds(new z.LatLng(...t.bbox.slice(0,2).reverse()),new z.LatLng(...t.bbox.slice(2,4).reverse())):i=new z.LatLngBounds(r,r),{name:t.place_name,bbox:i,center:r,properties:this._getProperties(t)}}):[]}};function O9(n){return new ly(n)}var dy=class{options={serviceUrl:"https://www.mapquestapi.com/geocoding/v1"};constructor(e){z.Util.setOptions(this,e),this.options.apiKey=decodeURIComponent(this.options.apiKey)}_formatName(...e){return e.filter(t=>!!t).join(", ")}geocode(e){return T(this,null,function*(){let t=qn(this.options,{key:this.options.apiKey,location:e,limit:5,outFormat:"json"}),r=yield ht(this.options.serviceUrl+"/address",t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey,location:e.lat+","+e.lng,outputFormat:"json"}),i=yield ht(this.options.serviceUrl+"/reverse",r);return this._parseResults(i)})}_parseResults(e){return(e.results?.[0]?.locations||[]).map(t=>{let r=new z.LatLng(t.latLng.lat,t.latLng.lng);return{name:this._formatName(t.street,t.adminArea4,t.adminArea3,t.adminArea1),bbox:new z.LatLngBounds(r,r),center:r}})}};function L9(n){return new dy(n)}var hy=class{options={userId:"",apiKey:"",serviceUrl:"https://neutrinoapi.com/"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=qn(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,address:e.split(/\s+/).join(".")}),r=yield ht(this.options.serviceUrl+"geocode-address",t);if(!r.locations)return[];r.geometry=r.locations[0];let i=new z.LatLng(r.geometry.latitude,r.geometry.longitude),o=new z.LatLngBounds(i,i);return[{name:r.geometry.address,bbox:o,center:i}]})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{apiKey:this.options.apiKey,userId:this.options.userId,latitude:e.lat,longitude:e.lng}),i=yield ht(this.options.serviceUrl+"geocode-reverse",r);if(i.status.status!==200||!i.found)return[];let o=new z.LatLng(e.lat,e.lng),a=new z.LatLngBounds(o,o);return[{name:i.address,bbox:a,center:o}]})}};function F9(n){return new hy(n)}var kf=class{options={serviceUrl:"https://nominatim.openstreetmap.org/",htmlTemplate(e){let t=e.address,r,i=[];return(t.road||t.building)&&i.push("{building} {road} {house_number}"),(t.city||t.town||t.village||t.hamlet)&&(r=i.length>0?"leaflet-control-geocoder-address-detail":"",i.push('<span class="'+r+'">{postcode} {city} {town} {village} {hamlet}</span>')),(t.state||t.country)&&(r=i.length>0?"leaflet-control-geocoder-address-context":"",i.push('<span class="'+r+'">{state} {country}</span>')),A9(i.join("<br/>"),t)}};constructor(e){z.Util.setOptions(this,e||{})}geocode(e){return T(this,null,function*(){let t=qn(this.options,{q:e,limit:5,format:"json",addressdetails:1});return(yield ht(this.options.serviceUrl+"search",t)).map(r=>{let i=r.boundingbox;return{icon:r.icon,name:r.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(r):void 0,bbox:new z.LatLngBounds([+i[0],+i[2]],[+i[1],+i[3]]),center:new z.LatLng(+r.lat,+r.lon),properties:r}})})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{lat:e.lat,lon:e.lng,zoom:Math.round(Math.log(t/256)/Math.log(2)),addressdetails:1,format:"json"}),i=yield ht(this.options.serviceUrl+"reverse",r);if(!i?.lat||!i?.lon)return[];let o=new z.LatLng(+i.lat,+i.lon),a=new z.LatLngBounds(o,o);return[{name:i.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(i):void 0,center:o,bbox:a,properties:i}]})}};function V9(n){return new kf(n)}var fy=class{options={};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){try{let t=this.options.OpenLocationCode.decode(e);return[{name:e,center:new z.LatLng(t.latitudeCenter,t.longitudeCenter),bbox:new z.LatLngBounds(new z.LatLng(t.latitudeLo,t.longitudeLo),new z.LatLng(t.latitudeHi,t.longitudeHi))}]}catch(t){return console.warn(t),[]}})}reverse(e,t){return T(this,null,function*(){try{return[{name:this.options.OpenLocationCode.encode(e.lat,e.lng,this.options.codeLength),center:new z.LatLng(e.lat,e.lng),bbox:new z.LatLngBounds(new z.LatLng(e.lat,e.lng),new z.LatLng(e.lat,e.lng))}]}catch(r){return console.warn(r),[]}})}};function U9(n){return new fy(n)}var py=class{options={serviceUrl:"https://api.opencagedata.com/geocode/v1/json"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=qn(this.options,{key:this.options.apiKey,q:e}),r=yield ht(this.options.serviceUrl,t);return this._parseResults(r)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{key:this.options.apiKey,q:[e.lat,e.lng].join(",")}),i=yield ht(this.options.serviceUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.results||[]).map(t=>{let r=new z.LatLng(t.geometry.lat,t.geometry.lng),i=t.annotations&&t.annotations.bounds?new z.LatLngBounds(new z.LatLng(t.annotations.bounds.northeast.lat,t.annotations.bounds.northeast.lng),new z.LatLng(t.annotations.bounds.southwest.lat,t.annotations.bounds.southwest.lng)):new z.LatLngBounds(r,r);return{name:t.formatted,bbox:i,center:r,properties:t}})}};function j9(n){return new py(n)}var Sc=class{options={serviceUrl:"https://api.geocode.earth/v1"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=qn(this.options,{api_key:this.options.apiKey,text:e}),r=yield ht(this.options.serviceUrl+"/search",t);return this._parseResults(r)})}suggest(e){return T(this,null,function*(){let t=qn(this.options,{api_key:this.options.apiKey,text:e}),r=yield ht(this.options.serviceUrl+"/autocomplete",t);return this._parseResults(r)})}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{api_key:this.options.apiKey,"point.lat":e.lat,"point.lon":e.lng}),i=yield ht(this.options.serviceUrl+"/reverse",r);return this._parseResults(i)})}_parseResults(e){return(e.features||[]).map(t=>{let r=t.geometry.coordinates,i=new z.LatLng(r[1],r[0]),o=Array.isArray(t.bbox)&&t.bbox.length===4?new z.LatLngBounds([t.bbox[1],t.bbox[0]],[t.bbox[3],t.bbox[2]]):new z.LatLngBounds(i,i);return{name:t.properties.label,center:i,bbox:o,properties:t.properties}})}};function gD(n){return new Sc(n)}var B9=Sc,z9=gD,$9=Sc,H9=gD,my=class extends Sc{constructor(e){super(Object.assign({serviceUrl:"https://api.openrouteservice.org/geocode"},e))}};function q9(n){return new my(n)}var gy=class{options={serviceUrl:"https://photon.komoot.io/api/",reverseUrl:"https://photon.komoot.io/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]};constructor(e){z.Util.setOptions(this,e)}geocode(e,t){return T(this,null,function*(){let r=qn(this.options,{q:e}),i=t?.map?.getCenter?.();i&&(r.lat=i.lat,r.lon=i.lng);let o=t?.map?.getZoom?.();o&&(r.zoom=o);let a=yield ht(this.options.serviceUrl,r);return this._parseResults(a)})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=nr(this.options,{lat:e.lat,lon:e.lng}),i=yield ht(this.options.reverseUrl,r);return this._parseResults(i)})}_parseResults(e){return(e.features||[]).map(t=>{let r=t.geometry.coordinates,i=new z.LatLng(r[1],r[0]),o=t.properties?.extent,a=o?new z.LatLngBounds([o[1],o[0]],[o[3],o[2]]):new z.LatLngBounds(i,i);return{name:this._decodeFeatureName(t),html:this.options.htmlTemplate?this.options.htmlTemplate(t):void 0,center:i,bbox:a,properties:t.properties}})}_decodeFeatureName(e){return(this.options.nameProperties||[]).map(t=>e.properties?.[t]).filter(t=>!!t).join(", ")}};function W9(n){return new gy(n)}var _y=class{options={serviceUrl:"https://api.what3words.com/v2/"};constructor(e){z.Util.setOptions(this,e)}geocode(e){return T(this,null,function*(){let t=yield ht(this.options.serviceUrl+"forward",qn(this.options,{key:this.options.apiKey,addr:e.split(/\s+/).join(".")}));if(!t.geometry)return[];let r=new z.LatLng(t.geometry.lat,t.geometry.lng),i=new z.LatLngBounds(r,r);return[{name:t.words,bbox:i,center:r}]})}suggest(e){return this.geocode(e)}reverse(e,t){return T(this,null,function*(){let r=yield ht(this.options.serviceUrl+"reverse",nr(this.options,{key:this.options.apiKey,coords:[e.lat,e.lng].join(",")}));if(r.status.status!=200)return[];let i=new z.LatLng(r.geometry.lat,r.geometry.lng),o=new z.LatLngBounds(i,i);return[{name:r.words,bbox:o,center:i}]})}};function G9(n){return new _y(n)}var K9=Object.freeze(Object.defineProperty({__proto__:null,ArcGis:ry,AzureMaps:oy,Bing:iy,GeocodeEarth:B9,Google:sy,HERE:ay,HEREv2:cy,LatLng:uy,MapQuest:dy,Mapbox:ly,Mapzen:$9,Neutrino:hy,Nominatim:kf,OpenCage:py,OpenLocationCode:fy,Openrouteservice:my,Pelias:Sc,Photon:gy,What3Words:_y,arcgis:x9,azure:M9,bing:R9,geocodeEarth:z9,geocodingParams:qn,google:P9,here:N9,latLng:k9,mapQuest:L9,mapbox:O9,mapzen:H9,neutrino:F9,nominatim:V9,openLocationCode:U9,opencage:j9,openrouteservice:q9,parseLatLng:vL,pelias:gD,photon:W9,reverseParams:nr,what3words:G9},Symbol.toStringTag,{value:"Module"})),Of=class{constructor(...e){}};Object.getOwnPropertyNames(z.Control.prototype).forEach(n=>Of.prototype[n]=z.Control.prototype[n]);Object.getOwnPropertyNames(z.Evented.prototype).forEach(n=>Of.prototype[n]=z.Evented.prototype[n]);var Lf=class extends Of{options={showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",query:"",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0};_alts;_container;_errorElement;_geocodeMarker;_input;_lastGeocode;_map;_preventBlurCollapse;_requestCount=0;_results;_selection;_suggestTimeout;constructor(e){super(e),z.Util.setOptions(this,e),this.options.geocoder||(this.options.geocoder=new kf)}addThrobberClass(){this._container.classList.add("leaflet-control-geocoder-throbber")}removeThrobberClass(){this._container.classList.remove("leaflet-control-geocoder-throbber")}onAdd(e){let t="leaflet-control-geocoder",r=z.DomUtil.create("div",t+" leaflet-bar"),i=z.DomUtil.create("button",t+"-icon",r),o=z.DomUtil.create("div",t+"-form",r);this._map=e,this._container=r,i.innerHTML="&nbsp;",i.type="button",i.setAttribute("aria-label",this.options.iconLabel);let a=this._input=z.DomUtil.create("input","",o);return a.type="search",a.value=this.options.query,a.placeholder=this.options.placeholder,z.DomEvent.disableClickPropagation(a),this._errorElement=z.DomUtil.create("div",t+"-form-no-error",r),this._errorElement.innerHTML=this.options.errorMessage,this._alts=z.DomUtil.create("ul",t+"-alternatives leaflet-control-geocoder-alternatives-minimized",r),z.DomEvent.disableClickPropagation(this._alts),z.DomEvent.on(a,"keydown",this._keydown,this),this.options.geocoder?.suggest&&z.DomEvent.on(a,"input",this._change,this),z.DomEvent.on(a,"blur",()=>{this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1}),this.options.collapsed?this.options.expand==="click"?z.DomEvent.on(r,"click",u=>{u.button===0&&u.detail!==2&&this._toggle()}):this.options.expand==="touch"?z.DomEvent.on(r,z.Browser.touch?"touchstart mousedown":"mousedown",u=>{this._toggle(),u.preventDefault(),u.stopPropagation()},this):(z.DomEvent.on(r,"mouseover",this._expand,this),z.DomEvent.on(r,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),z.Browser.touch?z.DomEvent.on(r,"touchstart",()=>this._geocode()):z.DomEvent.on(r,"click",()=>this._geocode())),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),z.DomEvent.disableClickPropagation(r),r}setQuery(e){return this._input.value=e,this}_geocodeResult(e,t){!t&&this.options.showUniqueResult&&e.length===1?this._geocodeResultSelected(e[0]):e.length>0?(this._alts.innerHTML="",this._results=e,this._alts.classList.remove("leaflet-control-geocoder-alternatives-minimized"),this._container.classList.add("leaflet-control-geocoder-options-open"),this._results.forEach((r,i)=>this._alts.appendChild(this._createAlt(r,i)))):(this._container.classList.add("leaflet-control-geocoder-options-error"),this._errorElement.classList.add("leaflet-control-geocoder-error"))}markGeocode(e){let t=e.geocode;return this._map.fitBounds(t.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new z.Marker(t.center).bindPopup(t.html||t.name).addTo(this._map).openPopup(),this}_geocode(e=!1){return T(this,null,function*(){let t=this._input.value;if(!e&&t.length<this.options.queryMinLength)return;let r=++this._requestCount;this._lastGeocode=t,e||this._clearResults();let i={input:t};this.fire(e?"startsuggest":"startgeocode",i);let o={map:this._map},a=e?yield this.options.geocoder.suggest(t,o):yield this.options.geocoder.geocode(t,o);if(r===this._requestCount){let u={input:t,results:a};this.fire(e?"finishsuggest":"finishgeocode",u),this._geocodeResult(a,e)}})}_geocodeResultSelected(e){let t={geocode:e};this.fire("markgeocode",t)}_toggle(){this._container.classList.contains("leaflet-control-geocoder-expanded")?this._collapse():this._expand()}_expand(){this._container.classList.add("leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")}_collapse(){this._container.classList.remove("leaflet-control-geocoder-expanded"),this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")}_clearResults(){this._alts.classList.add("leaflet-control-geocoder-alternatives-minimized"),this._selection=null,this._errorElement.classList.remove("leaflet-control-geocoder-error"),this._container.classList.remove("leaflet-control-geocoder-options-open"),this._container.classList.remove("leaflet-control-geocoder-options-error")}_createAlt(e,t){let r=z.DomUtil.create("li",""),i=z.DomUtil.create("a","",r),o=this.options.showResultIcons&&e.icon?z.DomUtil.create("img","",i):null,a=e.html?void 0:document.createTextNode(e.name),u=l=>{this._preventBlurCollapse=!0,z.DomEvent.stop(l),this._geocodeResultSelected(e),z.DomEvent.on(r,"click touchend",()=>{this.options.collapsed?this._collapse():this._clearResults()})};return o&&(o.src=e.icon),r.setAttribute("data-result-index",String(t)),e.html?i.innerHTML=i.innerHTML+e.html:a&&i.appendChild(a),z.DomEvent.on(r,"mousedown touchstart",u,this),r}_keydown(e){let t=r=>{this._selection&&(this._selection.classList.remove("leaflet-control-geocoder-selected"),this._selection=this._selection[r>0?"nextSibling":"previousSibling"]),this._selection||(this._selection=this._alts[r>0?"firstChild":"lastChild"]),this._selection&&this._selection.classList.add("leaflet-control-geocoder-selected")};switch(e.key){case"Escape":this.options.collapsed?this._collapse():this._clearResults();break;case"ArrowUp":t(-1);break;case"ArrowDown":t(1);break;case"Enter":if(this._selection){let r=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[r]),this._clearResults()}else this._geocode();break;default:return}z.DomEvent.preventDefault(e)}_change(){let e=this._input.value;e!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),e.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(()=>this._geocode(!0),this.options.suggestTimeout):this._clearResults())}};function Z9(n){return new Lf(n)}Object.assign(Lf,K9);Object.assign(z.Control,{Geocoder:Lf,geocoder:Z9});function Q9(n,e){if(n&1){let t=Rr();V(0,"div",43)(1,"button",44),se("click",function(){at(t);let i=Ee();return ct(i.openSettings())}),H(2,"Settings"),U(),V(3,"button",44),se("click",function(){at(t);let i=Ee();return ct(i.logout())}),H(4,"Logout"),U()()}}function Y9(n,e){if(n&1&&(V(0,"div",50)(1,"span",51),H(2,"\u2022"),U(),H(3),U()),n&2){let t=e.$implicit;Y(3),lg(" Plate ",t.plate," - ",t.distance," m - ",t.eta," min - Passengers: ",t.passengerCount||0," / ",t.capacity||"N/A"," ")}}function J9(n,e){if(n&1&&(V(0,"div",45)(1,"div",46)(2,"div",47),H(3,"Nearest Jeepneys"),U(),V(4,"div",48),kt(5,Y9,4,5,"div",49),U()()()),n&2){let t=Ee();Y(5),st("ngForOf",t.nearestJeepneys)}}function X9(n,e){if(n&1&&(V(0,"li")(1,"strong"),H(2),U(),H(3),V(4,"span",52),H(5),U()()),n&2){let t=e.$implicit;Y(2),cn(t.user||"Anonymous"),Y(),Ut(": ",t.text," "),Y(2),cn(t.timeDisplay)}}function eW(n,e){if(n&1&&(V(0,"li"),H(1),U()),n&2){let t=e.$implicit;Y(),Ut(" ",t," ")}}function tW(n,e){if(n&1){let t=Rr();V(0,"div",53)(1,"div",54)(2,"h3"),H(3,"Account Settings"),U(),V(4,"label")(5,"strong"),H(6,"Username:"),U()(),V(7,"input",55),Qe("ngModelChange",function(i){at(t);let o=Ee();return Xe(o.customUsername,i)||(o.customUsername=i),ct(i)}),U(),V(8,"button",56),se("click",function(){at(t);let i=Ee();return ct(i.saveUsername())}),H(9,"Save"),U(),V(10,"button",57),se("click",function(){at(t);let i=Ee();return ct(i.closeSettings())}),H(11,"Close"),U()()()}if(n&2){let t=Ee();Y(7),Ze("ngModel",t.customUsername)}}var vy=class n{constructor(e,t,r){this.firestore=e;this.auth=t;this.router=r;Hs(this.auth,i=>{let o=localStorage.getItem("customUsername");o?(this.customUsername=o,this.userName=o):i?(this.userName=i.displayName||i.email||"User",this.customUsername=this.userName):(this.userName="Guest",this.customUsername="Guest")}),this.jeepIcon=Nn.icon({iconUrl:"assets/jterminal.png",iconSize:[40,40],iconAnchor:[18,18],popupAnchor:[0,-12]})}userName=null;customUsername="";showSettings=!1;accountDropdownOpen=!1;toggleAccountDropdown(){this.accountDropdownOpen=!this.accountDropdownOpen}closeAccountDropdown(){this.accountDropdownOpen=!1}showChatDashboard=!1;chatMessages=[];chatText="";toggleChat(){this.showChatDashboard=!this.showChatDashboard}sendChat(){this.chatText.trim()!==""&&(this.chatMessages.push(this.chatText),this.chatText="")}map;marker=null;circle=null;radius=1500;lat="\u2014";lng="\u2014";locationInterval=null;hasInitialFix=!1;jeepMarkers=new Map;jeepIcon;userIcon=Nn.icon({iconUrl:"assets/location.png",iconSize:[40,40],iconAnchor:[20,40],popupAnchor:[0,-36]});terminalMarker=null;terminalIcon=Nn.icon({iconUrl:"assets/jeep.png",iconSize:[33,36],iconAnchor:[17,34],popupAnchor:[0,-30]});stopMarker=null;stopIcon=Nn.icon({iconUrl:"assets/stop.png",iconSize:[45,45],iconAnchor:[30,30],popupAnchor:[0,-28]});showTerminalIcon=!1;showStopIcon=!1;nearestJeepneys=[];newPostText="";communityPosts=[];jeepSub=null;communitySub=null;showTools=!1;toggleTools(){this.showTools=!this.showTools}openSettings(){this.closeAccountDropdown(),this.showSettings=!0}closeSettings(){this.showSettings=!1}logout(){this.auth.signOut().then(()=>{window.location.href="/otw1/#/login"})}ngAfterViewInit(){this.initMap(),this.listenJeepneysRealtime(),this.loadCommunityRealtime(),this.startUserLocationTracking()}ngOnDestroy(){this.jeepSub?.unsubscribe(),this.communitySub?.unsubscribe(),this.locationInterval&&clearInterval(this.locationInterval);try{this.map?.off(),this.map?.remove()}catch{}}initMap(){this.map=Nn.map("map",{center:[16.417644,120.601387],zoom:14,zoomControl:!1}),Nn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map);let e=16.427862459557634,t=120.60728876037099;this.terminalMarker=Nn.marker([e,t],{icon:this.terminalIcon,draggable:!1});let r=16.41410551293782,i=120.59551046905928;this.stopMarker=Nn.marker([r,i],{icon:this.stopIcon,draggable:!1}),this.updateFixedMarkerVisibility()}toggleTerminalIcon(){this.showTerminalIcon?(this.showTerminalIcon=!1,this.showStopIcon=!1):(this.showTerminalIcon=!0,this.showStopIcon=!1),this.updateFixedMarkerVisibility()}toggleStopIcon(){this.showStopIcon?(this.showStopIcon=!1,this.showTerminalIcon=!1):(this.showStopIcon=!0,this.showTerminalIcon=!1),this.updateFixedMarkerVisibility()}updateFixedMarkerVisibility(){if(this.map){if(this.terminalMarker){let e=this.map.hasLayer(this.terminalMarker);this.showTerminalIcon&&!e&&this.terminalMarker.addTo(this.map),!this.showTerminalIcon&&e&&this.map.removeLayer(this.terminalMarker)}if(this.stopMarker){let e=this.map.hasLayer(this.stopMarker);this.showStopIcon&&!e&&this.stopMarker.addTo(this.map),!this.showStopIcon&&e&&this.map.removeLayer(this.stopMarker)}}}focusStop(){if(!this.map||!this.stopMarker)return;let e=this.stopMarker.getLatLng();this.map.flyTo([e.lat,e.lng],this.map.getZoom(),{animate:!0,duration:1}),this.stopMarker.openPopup()}createMarkerAndCircle(e,t,r=500){this.marker&&this.marker.remove(),this.circle&&this.circle.remove(),this.marker=Nn.marker([e,t],{draggable:!1,icon:this.userIcon}).addTo(this.map),this.circle=Nn.circle([e,t],{radius:r}).addTo(this.map),this.updateInfo(e,t,r)}updateInfo(e,t,r){this.lat=e.toFixed(6),this.lng=t.toFixed(6),this.radius=Math.round(r)}updateRadiusFromUI(){if(this.circle){let e=this.circle.getLatLng(),t=this.map.getZoom();this.circle.setRadius(Number(this.radius)),this.map.setView(e,t)}this.evaluateNearest()}fitToCircle(){this.circle&&this.map.fitBounds(this.circle.getBounds())}setMarkerAndCircle(e,t){!this.marker||!this.circle?this.createMarkerAndCircle(e,t,this.radius):(this.marker.setLatLng([e,t]),this.circle.setLatLng([e,t]),this.updateInfo(e,t,this.circle.getRadius()??this.radius))}locateMe(){this.refreshUserLocation(!0)}updateTooltip(){if(!this.marker||!this.circle)return;let e=this.marker.getLatLng(),t=this.circle.getRadius()}startUserLocationTracking(){if(!navigator.geolocation){alert("Geolocation not supported");return}this.locationInterval&&clearInterval(this.locationInterval),this.refreshUserLocation(!0),this.locationInterval=setInterval(()=>this.refreshUserLocation(),1e3)}refreshUserLocation(e=!1){navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{let r=t.coords.latitude,i=t.coords.longitude;this.setMarkerAndCircle(r,i),(e||!this.hasInitialFix)&&(this.map.setView([r,i],15),this.hasInitialFix=!0),this.evaluateNearest()},t=>{console.error("Geolocation error",t)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})}listenJeepneysRealtime(){let e=ui(this.firestore,"jeepneys"),t=na(e);this.jeepSub=Mf(t,{idField:"id"}).subscribe(r=>{this.updateJeepMarkers(r||[]),this.evaluateNearest()})}updateJeepMarkers(e){let t=new Set;for(let r of e){if(!r.id||!r.lat||!r.lng)continue;t.add(r.id);let i=[r.lat,r.lng];if(this.jeepMarkers.has(r.id)){let o=this.jeepMarkers.get(r.id);o.setLatLng(i),o.jeepData=Q({},r),o.setPopupContent(this.jeepPopupContent(r))}else{let o=Nn.marker(i,{icon:this.jeepIcon});o.jeepData=Q({},r),o.bindPopup(this.jeepPopupContent(r)),o.addTo(this.map),this.jeepMarkers.set(r.id,o)}}for(let r of Array.from(this.jeepMarkers.keys()))t.has(r)||(this.jeepMarkers.get(r).remove(),this.jeepMarkers.delete(r))}jeepPopupContent(e){let t=e.speed?(e.speed*3.6).toFixed(1)+" km/h":"\u2014",r=e.updatedAt?new Date(e.updatedAt).toLocaleTimeString():"\u2014",i=e.passengerCount??0,o=e.capacity??"N/A";return`
      <div class="jeep-popup">
        <div class="title">\u{1F6FA} Jeepney ${e.plate||"\u2014"}</div>
        <div><b>Route:</b> ${e.routeId||"\u2014"}</div>
        <div><b>Speed:</b> ${t}</div>
        <div><b>Passengers:</b> ${i} / ${o}</div>
        <div><b>Last update:</b> ${r}</div>
      </div>
    `}evaluateNearest(){if(!this.marker)return;let e=this.marker.getLatLng(),t=[];this.jeepMarkers.forEach((r,i)=>{let o=r,a=o.getLatLng(),u=o.jeepData||{},l=this.distanceMeters({lat:e.lat,lng:e.lng},{lat:a.lat,lng:a.lng}),f=20*1e3/3600,g=Math.ceil(l/f/60);t.push({id:i,plate:u.plate||"\u2014",lat:a.lat,lng:a.lng,distance:Math.round(l),eta:g,passengerCount:u.passengerCount||0,capacity:u.capacity,marker:o})}),t.sort((r,i)=>r.distance-i.distance),this.nearestJeepneys=t.slice(0,3),this.nearestJeepneys.length>0&&this.highlightNearestMarker(this.nearestJeepneys[0].id)}highlightNearestMarker(e){this.jeepMarkers.forEach((t,r)=>{let i=t.getElement();i&&(r===e?(t.setOpacity(1),i.classList.add("nearest-jeep-highlight")):(t.setOpacity(.5),i.classList.remove("nearest-jeep-highlight")))})}focusNearestJeepney(){if(!this.map||!this.nearestJeepneys||this.nearestJeepneys.length===0)return;let e=this.nearestJeepneys[0],t=e.lat,r=e.lng;this.map.flyTo([t,r],this.map.getZoom(),{animate:!0,duration:1}),e.marker&&typeof e.marker.openPopup=="function"&&e.marker.openPopup()}focusTerminal(){if(!this.map||!this.terminalMarker)return;let e=this.terminalMarker.getLatLng();this.map.flyTo([e.lat,e.lng],this.map.getZoom(),{animate:!0,duration:1}),this.terminalMarker.openPopup()}loadCommunityRealtime(){let e=ui(this.firestore,"community"),t=na(e,Zv("time","desc"));this.communitySub=Mf(t,{idField:"id"}).subscribe(r=>{this.communityPosts=(r||[]).map(i=>we(Q({},i),{timeDisplay:i.time?new Date(i.time).toLocaleString():""}))})}sendPost(){return T(this,null,function*(){let e=(this.newPostText||"").trim();if(!e)return;let t=ui(this.firestore,"community");yield Vl(t,{user:this.customUsername||"Anonymous",text:e,time:new Date().toISOString()}),this.newPostText=""})}saveUsername(){let e=(this.customUsername||"").trim();if(!e)return alert("Username cannot be empty.");this.userName=e,localStorage.setItem("customUsername",e),alert("Username updated!")}toRad(e){return e*Math.PI/180}haversineKm(e,t){let i=this.toRad(t.lat-e.lat),o=this.toRad(t.lng-e.lng),a=this.toRad(e.lat),u=this.toRad(t.lat),l=Math.sin(i/2),f=Math.sin(o/2),g=l*l+Math.cos(a)*Math.cos(u)*f*f;return 6371*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}distanceMeters(e,t){return this.haversineKm(e,t)*1e3}searchText="";runSearch(){return T(this,null,function*(){let e=(this.searchText||"").trim();if(!e)return;let t=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}`;try{let i=yield(yield fetch(t)).json();if(!i.length){alert("No results found");return}let o=i[0],a=parseFloat(o.lat),u=parseFloat(o.lon);this.setMarkerAndCircle(a,u),this.map.setView([a,u],15),this.evaluateNearest()}catch(r){console.error("Search error",r),alert("Search failed. Please try again.")}})}static \u0275fac=function(t){return new(t||n)(ue($n),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-commuter-dashboard"]],decls:73,vars:19,consts:[[1,"otw-commuter-shell"],[1,"phone-frame"],["src","assets/iphone-frame.png","alt","iPhone frame",1,"phone-image"],[1,"phone-screen"],[1,"map-frame"],[1,"map-container"],["id","map",1,"map"],[1,"gm-top-nav"],[1,"gm-icon-btn",3,"click"],[1,"gm-search-pill"],[1,"gm-search-icon"],["type","text","placeholder","Search",1,"gm-search-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"gm-icon-btn",2,"margin-left","auto",3,"click"],[1,"gm-avatar-btn",3,"click"],["class","gm-account-menu",4,"ngIf"],[1,"gm-chip-row"],[1,"gm-chip",3,"click"],[1,"gm-right-controls"],["title","My location",1,"gm-round-btn",3,"click"],["class","gm-bottom-bar",4,"ngIf"],[1,"map-sidebar"],[1,"sidebar-header"],[1,"sidebar-header-actions"],[1,"btn","small",3,"click"],[1,"sidebar-close",3,"click"],[1,"control-row"],["for","radiusRange"],["id","radiusRange","type","range","min","50","max","5000","step","10",3,"ngModelChange","input","ngModel"],["id","radiusNumber","type","number","min","50","max","5000","step","10",2,"flex","1","padding","6px",3,"ngModelChange","change","ngModel"],[1,"btn",3,"click"],[1,"coords"],[1,"small"],[1,"right-dashboard"],[1,"community"],[1,"community-header"],[1,"community-close",3,"click"],[1,"community-input"],["placeholder","Share an update\u2026",1,"form-control",3,"ngModelChange","ngModel"],[1,"post-btn","w-100","mt-2",3,"click"],[1,"mt-3","community-list"],[4,"ngFor","ngForOf"],[1,"mt-3","chat-list"],["class","modal",4,"ngIf"],[1,"gm-account-menu"],[3,"click"],[1,"gm-bottom-bar"],[1,"gm-bottom-main"],[1,"gm-bottom-title"],[1,"gm-bottom-list"],["class","gm-bottom-sub",4,"ngFor","ngForOf"],[1,"gm-bottom-sub"],[1,"jeep-bullet"],[1,"time"],[1,"modal"],[1,"modal-content"],["type","text","placeholder","Enter username",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","mt-2",3,"click"],[1,"btn","mt-3",3,"click"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1),Vt(2,"img",2),V(3,"div",3)(4,"div",4)(5,"div",5),Vt(6,"div",6),V(7,"div",7)(8,"button",8),se("click",function(){return r.toggleTools()}),H(9,"\u2630"),U(),V(10,"div",9)(11,"span",10),H(12,"\u{1F50D}"),U(),V(13,"input",11),Qe("ngModelChange",function(o){return Xe(r.searchText,o)||(r.searchText=o),o}),se("keyup.enter",function(){return r.runSearch()}),U()(),V(14,"button",12),se("click",function(){return r.toggleChat()}),H(15," \u{1F4AC} "),U(),V(16,"button",13),se("click",function(){return r.toggleAccountDropdown()}),H(17),ub(18,"uppercase"),U(),kt(19,Q9,5,0,"div",14),U(),V(20,"div",15)(21,"button",16),se("click",function(){return r.focusNearestJeepney()}),H(22,"Jeepneys"),U(),V(23,"button",16),se("click",function(){return r.toggleStopIcon(),r.focusStop()}),H(24," Stop "),U(),V(25,"button",16),se("click",function(){return r.toggleTerminalIcon(),r.focusTerminal()}),H(26," Terminal "),U()(),V(27,"div",17)(28,"button",18),se("click",function(){return r.locateMe()}),H(29," \u{1F4CD} "),U()(),kt(30,J9,6,1,"div",19),U()()()(),V(31,"aside",20)(32,"div",21)(33,"strong"),H(34,"Interactive Map Tool"),U(),V(35,"div",22)(36,"button",23),se("click",function(){return r.locateMe()}),H(37,"\u{1F4CD} My location"),U(),V(38,"button",24),se("click",function(){return r.showTools=!1}),H(39,"\u2715"),U()()(),V(40,"div",25)(41,"label",26),H(42,"Radius (m)"),U(),V(43,"input",27),Qe("ngModelChange",function(o){return Xe(r.radius,o)||(r.radius=o),o}),se("input",function(){return r.updateRadiusFromUI()}),U()(),V(44,"div",25)(45,"input",28),Qe("ngModelChange",function(o){return Xe(r.radius,o)||(r.radius=o),o}),se("change",function(){return r.updateRadiusFromUI()}),U(),V(46,"button",29),se("click",function(){return r.fitToCircle()}),H(47,"Fit"),U()(),V(48,"div",30)(49,"div"),H(50,"Radius: "),V(51,"span"),H(52),U(),H(53," m"),U()(),V(54,"p",31),H(55,"Drag the marker to move the circle."),U()(),V(56,"aside",32)(57,"div",33)(58,"div",34)(59,"h4"),H(60,"Community"),U(),V(61,"button",35),se("click",function(){return r.toggleChat()}),H(62,"\u2715"),U()(),V(63,"div",36)(64,"textarea",37),Qe("ngModelChange",function(o){return Xe(r.newPostText,o)||(r.newPostText=o),o}),U(),V(65,"button",38),se("click",function(){return r.sendPost()}),H(66,"Post"),U()(),V(67,"ul",39),kt(68,X9,6,3,"li",40),U(),Vt(69,"hr"),V(70,"ul",41),kt(71,eW,2,1,"li",40),U()()(),kt(72,tW,12,1,"div",42),U()),t&2&&(jn("panel-open",r.showTools||r.showChatDashboard),Y(13),Ze("ngModel",r.searchText),Y(4),Ut(" ",lb(18,17,(r.userName||"G")[0])," "),Y(2),st("ngIf",r.accountDropdownOpen),Y(11),st("ngIf",r.nearestJeepneys.length),Y(),jn("visible",r.showTools),Y(12),Ze("ngModel",r.radius),Y(2),Ze("ngModel",r.radius),Y(7),cn(r.radius),Y(4),jn("show",r.showChatDashboard),Y(8),Ze("ngModel",r.newPostText),Y(4),st("ngForOf",r.communityPosts),Y(3),st("ngForOf",r.chatMessages),Y(),st("ngIf",r.showSettings))},dependencies:[Rn,xs,Ka,er,Xn,jh,bI,Nr,Bh,TI,gr,rc,bb],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;background:transparent}.otw-commuter-shell[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;background:radial-gradient(circle at top,#201344,#100622 45%,#050112);overflow:hidden}.otw-commuter-shell[_ngcontent-%COMP%]:before, .otw-commuter-shell[_ngcontent-%COMP%]:after{pointer-events:none}.otw-commuter-shell[_ngcontent-%COMP%]:before{content:"";position:absolute;width:900px;height:900px;border-radius:50%;background:radial-gradient(circle,#ffc178,#ff8c5af2,#10062200 70%);filter:blur(130px);opacity:.98;z-index:0}.otw-commuter-shell[_ngcontent-%COMP%]:after{content:"";position:absolute;width:1200px;height:1200px;border-radius:50%;background:radial-gradient(circle,#818cf8e6,#10062200 80%);filter:blur(210px);opacity:.85;z-index:0}.phone-frame[_ngcontent-%COMP%]{position:relative;width:380px;max-width:100vw;z-index:1;pointer-events:none}.phone-image[_ngcontent-%COMP%]{width:100%;display:block;pointer-events:none}.phone-screen[_ngcontent-%COMP%]{position:absolute;top:11px;left:10.5px;width:359px;height:745px;overflow:hidden;border-radius:48px;border:1px solid #000;pointer-events:auto}.map-frame[_ngcontent-%COMP%]{padding:0;background:transparent;width:100%;height:100%}.map-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background:transparent;overflow:hidden;border-radius:0}.map[_ngcontent-%COMP%]{width:100%;height:100%}.gm-top-nav[_ngcontent-%COMP%]{position:absolute;top:18px;left:8px;right:8px;display:flex;align-items:center;gap:6px;z-index:2000}.gm-icon-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:8px;border:none;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer}.gm-search-pill[_ngcontent-%COMP%]{flex:1;height:36px;border-radius:999px;background:#fff;display:flex;align-items:center;padding:0 10px;box-shadow:0 2px 6px #0003;max-width:230px}.gm-search-icon[_ngcontent-%COMP%]{margin-right:6px}.gm-search-input[_ngcontent-%COMP%]{border:none;outline:none;flex:1;font-size:13px;color:#111827;background:transparent}.gm-avatar-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;border:none;background:#751a81;color:#fff;font-weight:600;font-size:14px;cursor:pointer}.gm-account-menu[_ngcontent-%COMP%]{position:absolute;top:44px;right:8px;background:#fff;border-radius:10px;box-shadow:0 10px 20px #0003;display:flex;flex-direction:column;padding:4px 0;z-index:3000;pointer-events:auto}.gm-account-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;padding:6px 10px;text-align:left;font-size:13px;color:#111827;cursor:pointer}.gm-chip-row[_ngcontent-%COMP%]{position:absolute;top:70px;left:8px;right:8px;display:flex;gap:6px;overflow-x:auto;z-index:1000}@media (max-width: 768px){.gm-top-nav[_ngcontent-%COMP%]{top:30px}.gm-chip-row[_ngcontent-%COMP%]{top:88px}}.community-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.community-close[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;border:none;background:#0f172acc;color:#f9fafb;font-size:16px;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer}@media (max-width: 400px){.community-close[_ngcontent-%COMP%]{background:#0f172af2}}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.sidebar-header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.sidebar-close[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:999px;border:none;background:#0f172ae6;color:#f9fafb;font-size:16px;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer}.jeep-bullet[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-right:6px;line-height:1}.gm-chip[_ngcontent-%COMP%]{border-radius:999px;border:1px solid #e5e7eb;background:#fff;font-size:12px;padding:4px 10px;white-space:nowrap}.gm-right-controls[_ngcontent-%COMP%]{position:absolute;right:8px;bottom:120px;display:flex;flex-direction:column;gap:6px;z-index:1000}.gm-round-btn[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;border:none;background:#fff;box-shadow:0 2px 6px #0000004d;display:flex;align-items:center;justify-content:center;cursor:pointer}.gm-bottom-bar[_ngcontent-%COMP%]{position:absolute;left:8px;right:8px;bottom:32px;z-index:1000}@media (max-width: 768px){.gm-bottom-bar[_ngcontent-%COMP%]{bottom:calc(env(safe-area-inset-bottom,0) + 56px)}}.gm-bottom-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:12px;background:#fff;padding:8px 10px;box-shadow:0 2px 6px #00000040;max-height:90px}.gm-bottom-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#111827}.gm-bottom-list[_ngcontent-%COMP%]{max-height:60px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(156,163,175,.7) transparent;margin-top:2px}@media (max-width: 768px){.otw-commuter-shell.panel-open[_ngcontent-%COMP%]   .gm-top-nav[_ngcontent-%COMP%], .otw-commuter-shell.panel-open[_ngcontent-%COMP%]   .gm-chip-row[_ngcontent-%COMP%], .otw-commuter-shell.panel-open[_ngcontent-%COMP%]   .gm-right-controls[_ngcontent-%COMP%]{opacity:0;pointer-events:none}}.gm-bottom-sub[_ngcontent-%COMP%]{font-size:12px;display:flex;align-items:center}.gm-bottom-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.gm-bottom-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.gm-bottom-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#9ca3afb3;border-radius:999px}.nearest-jeep-highlight[_ngcontent-%COMP%]{filter:drop-shadow(0 0 10px yellow) drop-shadow(0 0 14px orange);transition:filter .2s ease-in-out}.map-sidebar[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;width:260px;max-width:75vw;padding:.75rem .75rem 1rem;background:radial-gradient(circle at top,#201344,#120727,#050112);color:#f9fafb;border-right:1px solid rgba(255,193,120,.45);box-shadow:12px 0 30px #000000bf;transform:translate(-100%);transition:transform .2s ease-out;z-index:1500}.map-sidebar.visible[_ngcontent-%COMP%]{transform:translate(0)}.sidebar-header[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:.95rem}.control-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;margin-bottom:.6rem}.coords[_ngcontent-%COMP%], .small[_ngcontent-%COMP%]{font-size:.8rem}.btn.small[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(255,193,120,.7);background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#1f2933;font-size:.8rem;font-weight:600}.right-dashboard[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;width:320px;max-width:85vw;background:radial-gradient(circle at top,#201344,#120727 45%,#050112);color:#f9fafb;box-shadow:-18px 0 40px #000000e6;border-left:1px solid rgba(129,140,248,.4);transform:translate(100%);transition:transform .25s ease-out;z-index:1500;padding:1rem}.right-dashboard.show[_ngcontent-%COMP%]{transform:translate(0)}.community[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px;font-size:.95rem}.community-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:52px;font-size:.85rem;border-radius:12px;border:1px solid rgba(148,163,184,.55);background:#0a0a1ad9;color:#f9fafb}@media (max-width: 480px){.map-sidebar[_ngcontent-%COMP%], .right-dashboard[_ngcontent-%COMP%]{background:#050112;box-shadow:none}}.post-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#171717;font-size:.85rem;font-weight:600;cursor:pointer}.community-list[_ngcontent-%COMP%], .chat-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;font-size:.8rem;max-height:140px;overflow-y:auto}.community-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .chat-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.4rem}.community-list[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#9ca3af}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#050112bf;display:flex;align-items:center;justify-content:center;z-index:2000}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top,#201344,#120727,#050112);color:#f9fafb;border-radius:18px;padding:1.4rem 1.6rem;width:100%;max-width:380px;box-shadow:0 20px 50px #000000d9;border:1px solid rgba(255,193,120,.6)}.modal-content[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{background:#0a0a1ad9;border:1px solid rgba(148,163,184,.6);color:#f9fafb}@media (min-width: 1024px){.otw-commuter-shell[_ngcontent-%COMP%]{background:radial-gradient(circle at top,#201344,#100622 45%,#050112)}.otw-commuter-shell[_ngcontent-%COMP%]:before, .otw-commuter-shell[_ngcontent-%COMP%]:after{display:block}.phone-image[_ngcontent-%COMP%]{display:block}.phone-frame[_ngcontent-%COMP%]{position:relative;width:380px;max-width:100vw;z-index:1;pointer-events:none;opacity:0;transform:translateY(40px) scale(.96);animation:phoneFadeUp .6s ease-out forwards}@keyframes phoneFadeUp{0%{opacity:0;transform:translateY(40px) scale(.96)}60%{opacity:1;transform:translateY(0) scale(1.02)}to{opacity:1;transform:translateY(0) scale(1)}}.phone-screen[_ngcontent-%COMP%]{position:absolute;top:11px;left:10.5px;width:359px;height:745px;border-radius:48px;border:1px solid #000}}@media (max-width: 1000px){.otw-commuter-shell[_ngcontent-%COMP%]{background:#050112}.otw-commuter-shell[_ngcontent-%COMP%]:before, .otw-commuter-shell[_ngcontent-%COMP%]:after{display:none}.phone-image[_ngcontent-%COMP%]{display:none}.phone-frame[_ngcontent-%COMP%]{width:100vw;max-width:100vw;pointer-events:auto}.phone-screen[_ngcontent-%COMP%]{position:static;width:100vw;height:100vh;border-radius:0;border:none}.map-frame[_ngcontent-%COMP%], .map-container[_ngcontent-%COMP%]{width:100%;height:100%;padding:0;border-radius:0;background:transparent}}']})};window.closeLeafletPopup=()=>{let n=window.leafletMapRef;n&&n.closePopup()};function nW(n,e){if(n&1&&(V(0,"li")(1,"strong"),H(2),U(),H(3),V(4,"span",26),H(5),U()()),n&2){let t=e.$implicit;Y(2),cn(t.user||"Driver"),Y(),Ut(": ",t.text," "),Y(2),cn(t.timeDisplay)}}var yy=class n{constructor(e,t){this.firestore=e;this.auth=t;Hs(this.auth,r=>T(this,null,function*(){if(r){this.driverId=r.uid;let i=r.displayName||r.email||"Driver",o=localStorage.getItem("driverCustomUsername");this.driverName=o||i,this.customUsername=this.driverName;let a=Hn(this.firestore,"users",r.uid),u=yield Nf(a);if(u.exists()){let l=u.data();this.plate=l.plate||null,this.capacity=l.capacity||null}console.log("loaded plate:",this.plate)}else this.driverId=null,this.driverName=null,this.customUsername="",this.plate=null})),this.loadDriverCommunity()}isOnline=!1;intervalId=null;driverId=null;driverName=null;customUsername="";showSettings=!1;plate=null;lastLat=null;lastLng=null;lastTimestamp=null;routeId="Aurora Hill";dropdownOpen=!1;driverCommunityOpen=!1;passengerCount=0;capacity=null;toggleDropdown(){this.dropdownOpen=!this.dropdownOpen}closeDropdown(){this.dropdownOpen=!1}toggleDriverCommunity(){this.driverCommunityOpen=!this.driverCommunityOpen}incrementPassengers(){this.capacity!==null&&this.passengerCount>=this.capacity||(this.passengerCount=this.passengerCount+1)}emptyPassengers(){this.passengerCount=0}logout(){this.setDriverOffline(),this.auth.signOut().then(()=>{window.location.href="/otw1/#/login"})}driverNewPostText="";driverCommunityPosts=[];driverCommunitySub=null;ngOnDestroy(){this.driverCommunitySub?.unsubscribe()}startLocationUpdates(){this.intervalId=setInterval(()=>this.sendLocationOnce(),2e3),this.sendLocationOnce()}sendLocationOnce(){return T(this,null,function*(){if(!navigator.geolocation||!this.driverId)return;let e=this.driverId,t=this.driverName||"Driver";navigator.geolocation.getCurrentPosition(r=>T(this,null,function*(){let{latitude:i,longitude:o}=r.coords,a=Date.now(),u=0;if(this.lastLat!==null&&this.lastLng!==null&&this.lastTimestamp!==null){let l=(a-this.lastTimestamp)/1e3;u=this.haversine(this.lastLat,this.lastLng,i,o)/l}this.lastLat=i,this.lastLng=o,this.lastTimestamp=a,yield Dc(Hn(this.firestore,"jeepneys",e),{id:e,plate:this.plate||"unknown",driverName:t,lat:i,lng:o,updatedAt:a,speed:u,routeId:this.routeId,passengerCount:this.passengerCount,capacity:this.capacity},{merge:!0})}),r=>{console.error("Geolocation error",r)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})})}setDriverOnline(){return T(this,null,function*(){if(!this.driverId)return alert("Driver not logged in.");this.isOnline=!0,this.startLocationUpdates()})}setDriverOffline(){return T(this,null,function*(){if(!this.driverId)return;this.isOnline=!1,this.intervalId&&clearInterval(this.intervalId);let e=this.driverId;yield Pf(Hn(this.firestore,"jeepneys",e))})}toggleOnline(){this.isOnline?this.setDriverOffline():this.setDriverOnline()}openSettings(){this.closeDropdown(),this.showSettings=!0}closeSettings(){this.showSettings=!1}saveUsername(){let e=(this.customUsername||"").trim();if(!e)return alert("Username cannot be empty.");this.driverName=e,localStorage.setItem("driverCustomUsername",e),alert("Username updated!")}loadDriverCommunity(){let e=ui(this.firestore,"driverCommunity"),t=na(e,Zv("time","desc"));this.driverCommunitySub=Mf(t,{idField:"id"}).subscribe(r=>{this.driverCommunityPosts=(r||[]).map(i=>we(Q({},i),{timeDisplay:i.time?new Date(i.time).toLocaleString():""}))})}sendDriverPost(){return T(this,null,function*(){let e=(this.driverNewPostText||"").trim();if(!e)return;let t=ui(this.firestore,"driverCommunity");yield Vl(t,{user:this.driverName||this.plate||"Driver",text:e,role:"driver",time:new Date().toISOString()}),this.driverNewPostText=""})}haversine(e,t,r,i){let a=f=>f*Math.PI/180,u=a(r-e),l=a(i-t);return 6371e3*2*Math.asin(Math.sqrt(Math.sin(u/2)**2+Math.cos(a(e))*Math.cos(a(r))*Math.sin(l/2)**2))}static \u0275fac=function(t){return new(t||n)(ue($n),ue(Bt))};static \u0275cmp=Ft({type:n,selectors:[["app-driver"]],decls:52,vars:11,consts:[[1,"top-bar"],[1,"top-bar-left"],[1,"driver-header-horizontal"],[1,"logo-circle"],[1,"app-title"],[1,"top-bar-right"],[1,"chat-btn",3,"click"],[1,"account-dropdown"],[1,"account-btn",3,"click"],[1,"dropdown-menu"],[3,"click"],[1,"main-content-wrapper"],[1,"main-content"],[1,"toggle-tools-btn","center-btn",3,"click"],[1,"passenger-counter","mt-3"],[1,"counter-buttons"],[1,"full-capacity-btn",3,"click"],[1,"right-dashboard"],[1,"community"],[1,"community-header"],[1,"community-close",3,"click"],[1,"community-input"],["placeholder","Share an update\u2026",1,"form-control",3,"ngModelChange","ngModel"],[1,"post-btn","w-100","mt-2",3,"click"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"time"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1)(2,"div",2),Vt(3,"div",3),V(4,"h4",4),H(5,"Driver App"),U()()(),V(6,"div",5)(7,"button",6),se("click",function(){return r.toggleDriverCommunity()}),H(8,"Community"),U(),V(9,"div",7)(10,"button",8),se("click",function(){return r.toggleDropdown()}),H(11),U(),V(12,"ul",9)(13,"li")(14,"button",10),se("click",function(){return r.logout()}),H(15,"\u{1F6AA}Logout"),U()()()()()(),V(16,"div",11)(17,"div",12)(18,"button",13),se("click",function(){return r.toggleOnline()}),H(19),U(),V(20,"p"),H(21,"Status: "),V(22,"strong"),H(23),U()()()(),V(24,"div",14)(25,"h5"),H(26,"Passengers: "),V(27,"span"),H(28),U(),H(29),U(),V(30,"div",15)(31,"button",10),se("click",function(){return r.emptyPassengers()}),H(32,"Empty"),U(),V(33,"button",10),se("click",function(){return r.passengerCount=r.passengerCount>0?r.passengerCount-1:0}),H(34,"-1"),U(),V(35,"button",10),se("click",function(){return r.incrementPassengers()}),H(36,"+1"),U(),V(37,"button",16),se("click",function(){return r.passengerCount=r.capacity||r.passengerCount}),H(38,"Full Capacity"),U()()(),V(39,"div",17)(40,"div",18)(41,"div",19)(42,"h4"),H(43,"Driver Community"),U(),V(44,"button",20),se("click",function(){return r.toggleDriverCommunity()}),H(45,"\u2715"),U()(),V(46,"div",21)(47,"textarea",22),Qe("ngModelChange",function(o){return Xe(r.driverNewPostText,o)||(r.driverNewPostText=o),o}),U(),V(48,"button",23),se("click",function(){return r.sendDriverPost()}),H(49,"Post"),U()(),V(50,"ul",24),kt(51,nW,6,3,"li",25),U()()()),t&2&&(Y(9),jn("open",r.dropdownOpen),Y(2),Ut(" ",r.driverName||"Driver"," "),Y(8),Ut(" ",r.isOnline?"\u{1F534} STOP SHARING":"\u{1F7E2} START SHARING"," "),Y(4),cn(r.isOnline?"ONLINE":"OFFLINE"),Y(5),cn(r.passengerCount),Y(),Ut(" / ",r.capacity||"N/A"),Y(10),jn("show",r.driverCommunityOpen),Y(8),Ze("ngModel",r.driverNewPostText),Y(4),st("ngForOf",r.driverCommunityPosts))},dependencies:[Rn,xs,er,Xn,Nr,gr],styles:['.otw-driver-shell[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;background:radial-gradient(circle at top left,#1d4ed8 0,#020617 55% 100%);color:#e5e7eb;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 18px;-webkit-backdrop-filter:blur(16px);backdrop-filter:blur(16px);background:linear-gradient(to right,#0f172af5,#0f172ae6);border-bottom:1px solid rgba(148,163,184,.25);box-shadow:0 8px 28px #0f172ae6;position:relative;z-index:20}.top-bar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.driver-header-horizontal[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.logo-circle[_ngcontent-%COMP%]{width:34px;height:34px;border-radius:999px;background:radial-gradient(circle at 30% 20%,#facc15,#4f46e5);box-shadow:0 0 0 2px #0f172a,0 10px 24px #000000bf}.app-title[_ngcontent-%COMP%]{margin:0;font-size:17px;font-weight:600;letter-spacing:.06em;text-transform:uppercase;color:#f9fafb}.top-bar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.chat-btn[_ngcontent-%COMP%], .account-btn[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(148,163,184,.55);background:#020617;color:#e5e7eb;font-size:12px;font-weight:500;padding:6px 14px;cursor:pointer;display:inline-flex;align-items:center;gap:4px;transition:background .15s ease,border-color .15s ease,transform .1s ease}.chat-btn[_ngcontent-%COMP%]:before{content:"\\1f4ac"}.chat-btn[_ngcontent-%COMP%]:hover, .account-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4f46e5f2,#facc15f2);border-color:transparent;color:#020617;transform:translateY(-1px)}.account-dropdown[_ngcontent-%COMP%]{position:relative}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:115%;list-style:none;margin:0;padding:4px 0;background:#020617;border-radius:10px;min-width:150px;box-shadow:0 16px 32px #000000d9;border:1px solid rgba(148,163,184,.35);display:none;z-index:30}.account-dropdown.open[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:none;border:none;color:#e5e7eb;font-size:13px;text-align:left;padding:7px 12px;cursor:pointer}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#111827}.main-content-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:24px 16px}.main-content[_ngcontent-%COMP%]{width:100%;max-width:420px;background:#fff;color:#0f172a;border-radius:18px;padding:22px 20px 18px;box-shadow:0 12px 28px #0000001f;text-align:center}.toggle-tools-btn.center-btn[_ngcontent-%COMP%]{width:100%;border-radius:999px;border:none;padding:12px 20px;font-size:15px;font-weight:600;background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#111827;cursor:pointer;box-shadow:0 12px 20px #0000002e;transition:transform .1s ease,box-shadow .1s ease,filter .1s ease}.toggle-tools-btn.center-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 16px 28px #0003}.main-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#475569}.main-content[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#111827}.right-dashboard[_ngcontent-%COMP%]{position:fixed;top:0;right:0;bottom:0;width:320px;max-width:85vw;background:#020617;color:#e5e7eb;box-shadow:-18px 0 40px #000000e6;transform:translate(100%);transition:transform .25s ease-out;z-index:40;padding:1rem;border-left:1px solid rgba(148,163,184,.35)}.right-dashboard.show[_ngcontent-%COMP%]{transform:translate(0)}.community[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:15px;font-weight:600}.community-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}.community-close[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:999px;border:none;background:#0f172acc;color:#f9fafb;font-size:16px;line-height:1;display:flex;align-items:center;justify-content:center;cursor:pointer}@media (max-width: 400px){.community-close[_ngcontent-%COMP%]{background:#0f172af2}}.community-input[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:64px;font-size:.85rem;border-radius:12px;border:1px solid #4b5563;background:#020617;color:#e5e7eb;padding:8px 9px}.post-btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#f97316,#facc15);color:#111827;font-size:.85rem;font-weight:600;cursor:pointer;padding:6px 12px;margin-top:6px}.community[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:12px 0 0;padding:0;font-size:.8rem;max-height:260px;overflow-y:auto}.community[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.6rem}.community[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{display:inline-block;margin-left:.4rem;font-size:.7rem;color:#9ca3af}.counter-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:center;gap:8px}.btn.small[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(255,193,120,.7);background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#1f2933;font-size:.8rem;font-weight:600}.post-btn[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{border-radius:999px;border:none;background:linear-gradient(135deg,#ffc178,#ff8a5c);color:#171717;font-size:.85rem;font-weight:600;cursor:pointer;padding:6px 12px}@media (max-width: 480px){.top-bar[_ngcontent-%COMP%]{padding:8px 10px;flex-wrap:wrap;gap:8px}.app-title[_ngcontent-%COMP%]{font-size:14px}.chat-btn[_ngcontent-%COMP%], .account-btn[_ngcontent-%COMP%]{font-size:11px;padding:4px 9px}.top-bar-right[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}.main-content[_ngcontent-%COMP%]{margin-top:12px;padding:18px 16px 14px;max-width:100%}.right-dashboard[_ngcontent-%COMP%]{width:100vw;max-width:100vw}.passenger-counter[_ngcontent-%COMP%]{max-width:100%}.counter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 45%;min-width:120px}}.passenger-counter[_ngcontent-%COMP%]{background-color:#fff;padding:1rem;border-radius:12px;box-shadow:0 6px 16px #0f172a26;text-align:center;max-width:360px;margin:1rem auto}.passenger-counter[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:600;color:#111827}.counter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:linear-gradient(135deg,#ff9b3a,#ff6fa8,#7b61ff);color:#fff;padding:.35rem .7rem;border-radius:999px;margin:0;font-weight:600;cursor:pointer;transition:transform .1s;min-width:72px}.counter-buttons[_ngcontent-%COMP%]   .full-capacity-btn[_ngcontent-%COMP%]{margin-left:0}.counter-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.modal[_ngcontent-%COMP%]{position:fixed;inset:0;background:#050112bf;display:flex;align-items:center;justify-content:center;z-index:2000}.modal-content[_ngcontent-%COMP%]{background:radial-gradient(circle at top,#201344,#120727,#050112);color:#f9fafb;border-radius:18px;padding:1.4rem 1.6rem;width:100%;max-width:380px;box-shadow:0 20px 50px #000000d9;border:1px solid rgba(255,193,120,.6)}.modal-content[_ngcontent-%COMP%]   input.form-control[_ngcontent-%COMP%]{background:#0a0a1ad9;border:1px solid rgba(148,163,184,.6);color:#f9fafb}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;margin-top:.5rem}']})};function rW(n,e){if(n&1){let t=Rr();V(0,"div",19)(1,"button",20),se("click",function(){at(t);let i=Ee();return ct(i.logout())}),H(2," Logout "),U()()}}function iW(n,e){n&1&&(V(0,"div",28),H(1," No drivers found. "),U())}function oW(n,e){n&1&&(V(0,"div",28),H(1," No drivers found matching your search. "),U())}function sW(n,e){if(n&1){let t=Rr();V(0,"div",32)(1,"div",33)(2,"h4"),H(3),U(),V(4,"p",34)(5,"strong"),H(6,"Email:"),U(),H(7),U(),V(8,"p",34)(9,"strong"),H(10,"License:"),U(),H(11),U(),V(12,"p",35)(13,"strong"),H(14,"Plate:"),U(),H(15),U()(),V(16,"div",36)(17,"button",37),se("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.startDriverEdit(i))}),H(18,"Update"),U(),V(19,"button",38),se("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.deleteDriverAccount(i.id))}),H(20,"Delete"),U()()()}if(n&2){let t=Ee().$implicit;Y(3),cn(t.name),Y(4),Ut(" ",t.email),Y(4),Ut(" ",t.license),Y(4),Ut(" ",t.plate)}}function aW(n,e){if(n&1){let t=Rr();V(0,"div",39)(1,"h5"),H(2,"Edit Driver"),U(),V(3,"input",40),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverName,i)||(o.editDriverName=i),ct(i)}),U(),V(4,"input",41),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverEmail,i)||(o.editDriverEmail=i),ct(i)}),U(),V(5,"input",42),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverLicense,i)||(o.editDriverLicense=i),ct(i)}),U(),V(6,"input",43),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editDriverPlate,i)||(o.editDriverPlate=i),ct(i)}),U(),V(7,"div",44)(8,"button",45),se("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.updateDriver(i.id,{name:o.editDriverName,email:o.editDriverEmail,license:o.editDriverLicense,plate:o.editDriverPlate}))}),H(9," Save "),U(),V(10,"button",46),se("click",function(){at(t);let i=Ee(3);return ct(i.cancelDriverEdit())}),H(11,"Cancel"),U()()()}if(n&2){let t=Ee(3);Y(3),Ze("ngModel",t.editDriverName),Y(),Ze("ngModel",t.editDriverEmail),Y(),Ze("ngModel",t.editDriverLicense),Y(),Ze("ngModel",t.editDriverPlate)}}function cW(n,e){if(n&1&&(V(0,"article",29),kt(1,sW,21,4,"div",30)(2,aW,12,4,"div",31),U()),n&2){let t=e.$implicit,r=Ee(2);Y(),st("ngIf",r.editDriverId!==t.id),Y(),st("ngIf",r.editDriverId===t.id)}}function uW(n,e){if(n&1){let t=Rr();V(0,"section",21)(1,"div",22)(2,"h1"),H(3,"Driver Accounts"),U(),V(4,"div",23)(5,"input",24),Qe("ngModelChange",function(i){at(t);let o=Ee();return Xe(o.driverSearchTerm,i)||(o.driverSearchTerm=i),ct(i)}),se("input",function(){at(t);let i=Ee();return ct(i.filterDrivers())}),U()()(),kt(6,iW,2,0,"div",25),V(7,"div",26),kt(8,oW,2,0,"div",25)(9,cW,3,2,"article",27),U()()}if(n&2){let t=Ee();Y(5),Ze("ngModel",t.driverSearchTerm),Y(),st("ngIf",t.drivers().length===0),Y(2),st("ngIf",t.filteredDrivers().length===0),Y(),st("ngForOf",t.filteredDrivers())}}function lW(n,e){n&1&&(V(0,"div",28),H(1," No commuters found. "),U())}function dW(n,e){n&1&&(V(0,"div",28),H(1," No commuters found matching your search. "),U())}function hW(n,e){if(n&1){let t=Rr();V(0,"div",32)(1,"div",33)(2,"h4"),H(3),U(),V(4,"p",34)(5,"strong"),H(6,"Email:"),U(),H(7),U()(),V(8,"div",36)(9,"button",37),se("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.startEdit(i))}),H(10,"Update"),U(),V(11,"button",38),se("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.deleteCommuter(i.id))}),H(12,"Delete"),U()()()}if(n&2){let t=Ee().$implicit;Y(3),cn(t.name),Y(4),Ut(" ",t.email)}}function fW(n,e){if(n&1){let t=Rr();V(0,"div",39)(1,"h5"),H(2,"Edit Commuter"),U(),V(3,"input",40),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editCommuterName,i)||(o.editCommuterName=i),ct(i)}),U(),V(4,"input",41),Qe("ngModelChange",function(i){at(t);let o=Ee(3);return Xe(o.editCommuterEmail,i)||(o.editCommuterEmail=i),ct(i)}),U(),V(5,"div",44)(6,"button",45),se("click",function(){at(t);let i=Ee().$implicit,o=Ee(2);return ct(o.updateUser(i.id,{name:o.editCommuterName,email:o.editCommuterEmail}))}),H(7," Save "),U(),V(8,"button",46),se("click",function(){at(t);let i=Ee(3);return ct(i.cancelEdit())}),H(9,"Cancel"),U()()()}if(n&2){let t=Ee(3);Y(3),Ze("ngModel",t.editCommuterName),Y(),Ze("ngModel",t.editCommuterEmail)}}function pW(n,e){if(n&1&&(V(0,"article",29),kt(1,hW,13,2,"div",30)(2,fW,10,2,"div",31),U()),n&2){let t=e.$implicit,r=Ee(2);Y(),st("ngIf",r.editId!==t.id),Y(),st("ngIf",r.editId===t.id)}}function mW(n,e){if(n&1){let t=Rr();V(0,"section",21)(1,"div",22)(2,"h1"),H(3,"Commuter Accounts"),U(),V(4,"div",23)(5,"input",47),Qe("ngModelChange",function(i){at(t);let o=Ee();return Xe(o.commuterSearchTerm,i)||(o.commuterSearchTerm=i),ct(i)}),se("input",function(){at(t);let i=Ee();return ct(i.filterCommuters())}),U()()(),kt(6,lW,2,0,"div",25),V(7,"div",26),kt(8,dW,2,0,"div",25)(9,pW,3,2,"article",27),U()()}if(n&2){let t=Ee();Y(5),Ze("ngModel",t.commuterSearchTerm),Y(),st("ngIf",t.commuters().length===0),Y(2),st("ngIf",t.filteredCommuters().length===0),Y(),st("ngForOf",t.filteredCommuters())}}var wy=class n{constructor(e,t,r,i){this.firestore=e;this.http=t;this.auth=r;this.router=i}newDriverName="";newDriverEmail="";newDriverLicense="";newDriverPlate="";userMenuOpen=!1;editId="";editCommuterName="";editCommuterEmail="";editDriverId="";editDriverName="";editDriverEmail="";editDriverLicense="";editDriverPlate="";driverSearchTerm="";filteredDrivers=_t([]);commuterSearchTerm="";filteredCommuters=_t([]);commuters=_t([]);drivers=_t([]);activeSection="drivers";ngOnInit(){return T(this,null,function*(){yield this.loadDrivers(),yield this.loadCommuters()})}showDrivers(){this.activeSection="drivers"}showCommuters(){this.activeSection="commuters"}loadCommuters(){return T(this,null,function*(){let e=ui(this.firestore,"users"),t=na(e,pD("role","==","commuter")),i=(yield hD(t)).docs.map(o=>Q({id:o.id},o.data()));this.commuters.set(i),this.filteredCommuters.set([...i])})}loadDrivers(){return T(this,null,function*(){let e=ui(this.firestore,"users"),t=na(e,pD("role","==","driver")),i=(yield hD(t)).docs.map(o=>Q({id:o.id},o.data()));this.drivers.set(i),this.filteredDrivers.set([...i])})}filterDrivers(){if(!this.driverSearchTerm.trim()){this.filteredDrivers.set([...this.drivers()]);return}let e=this.driverSearchTerm.toLowerCase().trim(),t=this.drivers().filter(r=>r.name?.toLowerCase().includes(e)||r.email?.toLowerCase().includes(e)||r.license&&r.license.toLowerCase().includes(e)||r.plate&&r.plate.toLowerCase().includes(e));this.filteredDrivers.set(t)}filterCommuters(){if(!this.commuterSearchTerm.trim()){this.filteredCommuters.set([...this.commuters()]);return}let e=this.commuterSearchTerm.toLowerCase().trim(),t=this.commuters().filter(r=>r.name?.toLowerCase().includes(e)||r.email?.toLowerCase().includes(e));this.filteredCommuters.set(t)}startEdit(e){this.editId=e.id,this.editCommuterName=e.name,this.editCommuterEmail=e.email}cancelEdit(){this.editId=""}updateUser(e,t){return T(this,null,function*(){let r=Hn(this.firestore,"users",e);yield fD(r,t),alert("Commuter updated."),this.cancelEdit(),yield this.loadCommuters()})}deleteCommuter(e){return T(this,null,function*(){let t=Hn(this.firestore,"users",e);yield Pf(t),alert("Commuter deleted."),yield this.loadCommuters()})}startDriverEdit(e){this.editDriverId=e.id,this.editDriverName=e.name,this.editDriverEmail=e.email,this.editDriverLicense=e.license??"",this.editDriverPlate=e.plate??""}cancelDriverEdit(){this.editDriverId=""}updateDriver(e,t){return T(this,null,function*(){let r=Hn(this.firestore,"users",e);yield fD(r,t),alert("Driver updated."),this.cancelDriverEdit(),yield this.loadDrivers()})}deleteDriverAccount(e){return T(this,null,function*(){let t=Hn(this.firestore,"users",e);yield Pf(t),alert("Driver deleted."),yield this.loadDrivers()})}createDriver(){return T(this,null,function*(){if(!this.newDriverName||!this.newDriverEmail){alert("Name and email are required.");return}let e=ui(this.firestore,"users"),t={name:this.newDriverName,email:this.newDriverEmail,license:this.newDriverLicense,plate:this.newDriverPlate,role:"driver",status:"approved",createdAt:new Date};yield Vl(e,t),alert("Driver account created."),this.newDriverName="",this.newDriverEmail="",this.newDriverLicense="",this.newDriverPlate="",yield this.loadDrivers()})}logout(){this.auth.signOut().then(()=>{window.location.href="/otw1/#/login"})}static \u0275fac=function(t){return new(t||n)(ue($n),ue(xg),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-admin-dashboard"]],decls:36,vars:9,consts:[[1,"otw-admin-shell"],[1,"otw-admin-sidebar"],[1,"otw-admin-brand-row"],[1,"otw-admin-brand"],[1,"otw-admin-logo"],[1,"otw-admin-brand-text"],[1,"otw-admin-user-dropdown",3,"click"],[1,"otw-admin-user-circle"],[1,"otw-admin-user-caret"],["class","otw-admin-user-menu",4,"ngIf"],[1,"otw-admin-toggle"],[1,"otw-toggle-btn",3,"click"],[1,"otw-admin-content"],[1,"otw-admin-summary"],[1,"otw-summary-card"],[1,"otw-summary-label"],[1,"otw-summary-value"],["type","button","routerLink","/admin/dashboard/add-driver",1,"otw-summary-card","otw-summary-cta"],["class","otw-section",4,"ngIf"],[1,"otw-admin-user-menu"],["type","button",1,"otw-user-menu-item",3,"click"],[1,"otw-section"],[1,"otw-section-header"],[1,"otw-search-container"],["type","text","placeholder","Search drivers...",1,"form-control","otw-search-input",3,"ngModelChange","input","ngModel"],["class","otw-empty",4,"ngIf"],[1,"otw-list"],["class","otw-item-card",4,"ngFor","ngForOf"],[1,"otw-empty"],[1,"otw-item-card"],["class","otw-item-row",4,"ngIf"],["class","otw-item-edit",4,"ngIf"],[1,"otw-item-row"],[1,"otw-item-info"],[1,"mb-1"],[1,"mb-0"],[1,"otw-item-actions"],[1,"btn","btn-sm","otw-btn-outline",3,"click"],[1,"btn","btn-sm","otw-btn-danger",3,"click"],[1,"otw-item-edit"],["placeholder","Full Name",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","Email",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","License",1,"form-control","mb-2",3,"ngModelChange","ngModel"],["placeholder","Plate",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"text-end"],[1,"btn","btn-sm","otw-btn-pill","me-2",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"],["type","text","placeholder","Search commuters...",1,"form-control","otw-search-input",3,"ngModelChange","input","ngModel"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"aside",1)(2,"div")(3,"div",2)(4,"div",3),Vt(5,"div",4),V(6,"span",5),H(7,"OTW"),U()(),V(8,"div",6),se("click",function(){return r.userMenuOpen=!r.userMenuOpen}),V(9,"div",7),H(10,"ADMIN"),U(),V(11,"span",8),H(12,"\u25BE"),U(),kt(13,rW,3,0,"div",9),U()(),V(14,"div",10)(15,"button",11),se("click",function(){return r.showDrivers()}),H(16," Driver Accounts "),U(),V(17,"button",11),se("click",function(){return r.showCommuters()}),H(18," Commuter Accounts "),U()()()(),V(19,"main",12)(20,"section",13)(21,"div",14)(22,"span",15),H(23,"Drivers"),U(),V(24,"span",16),H(25),U()(),V(26,"div",14)(27,"span",15),H(28,"Commuters"),U(),V(29,"span",16),H(30),U()(),V(31,"button",17)(32,"span",16),H(33,"+ Add Driver"),U()()(),kt(34,uW,10,4,"section",18)(35,mW,10,4,"section",18),U()()),t&2&&(Y(13),st("ngIf",r.userMenuOpen),Y(2),jn("active",r.activeSection==="drivers"),Y(2),jn("active",r.activeSection==="commuters"),Y(8),cn(r.drivers().length),Y(5),cn(r.commuters().length),Y(4),st("ngIf",r.activeSection==="drivers"),Y(),st("ngIf",r.activeSection==="commuters"))},dependencies:[Rn,xs,Ka,Vb,er,Xn,Nr,gr,rc,Fi],styles:['.otw-admin-shell[_ngcontent-%COMP%]{min-height:100vh;display:grid;grid-template-columns:240px minmax(0,1fr);background:linear-gradient(135deg,#ff9c3a70,#ff6fa96c 40%,#7b61ff49);color:#e5e7eb}.otw-admin-sidebar[_ngcontent-%COMP%]{padding:1.4rem 1.1rem;background:#000;border-right:1px solid rgba(148,163,184,.25);display:flex;flex-direction:column;justify-content:space-between}.otw-admin-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem;margin-bottom:1.4rem}.otw-admin-logo[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:16px;background-image:url("./media/logo-IKMKXBN4.png");background-size:cover;background-position:center;box-shadow:0 10px 22px #0f172ae6}.otw-admin-brand-text[_ngcontent-%COMP%]{font-size:.95rem;font-weight:700;color:#f9fafb}.otw-admin-toggle[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:.4rem}.otw-toggle-btn[_ngcontent-%COMP%]{border-radius:999px;border:1px solid rgba(148,163,184,.6);background-color:#020617;color:#e5e7eb;font-size:.85rem;padding:.45rem .9rem;text-align:left}.otw-toggle-btn.active[_ngcontent-%COMP%]{border-color:transparent;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827}.otw-admin-logout-btn[_ngcontent-%COMP%]{margin-top:2rem;border-radius:999px;border:1px solid rgba(148,163,184,.7);padding:.4rem 1rem;background:#020617;color:#e5e7eb;font-size:.8rem}.otw-admin-content[_ngcontent-%COMP%]{padding:1.6rem 1.8rem 2.3rem}.otw-admin-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:1rem;margin-bottom:1.6rem}.otw-summary-card[_ngcontent-%COMP%]{border-radius:16px;padding:.9rem 1.1rem;background:linear-gradient(180deg,#000000e6,#0f172ad9)}.otw-summary-label[_ngcontent-%COMP%]{font-size:.78rem;letter-spacing:.08em;text-transform:uppercase;color:#9ca3af}.otw-summary-value[_ngcontent-%COMP%]{margin-top:.35rem;font-size:1.35rem;font-weight:700;color:#f9fafb}.otw-summary-cta[_ngcontent-%COMP%]{border:none;cursor:pointer;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827}.otw-section[_ngcontent-%COMP%]{margin-bottom:1.9rem}.otw-section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.7rem;color:#000}.otw-section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;margin:0;color:#f9fafb}.otw-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;width:100%;overflow-y:auto;padding-right:.25rem;margin:0 auto}.otw-item-card[_ngcontent-%COMP%]{position:relative;border-radius:16px;padding:.9rem 1.1rem;background:linear-gradient(120deg,#000000f5,#000000e6,#0f172ae6);color:#f9fafb;z-index:1}.otw-item-row[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;gap:1rem}.otw-item-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin-bottom:.25rem;color:#f9fafb}.otw-item-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.35rem}.otw-btn-pill[_ngcontent-%COMP%]{border-radius:999px;padding:.45rem 1.1rem;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827;font-weight:600;font-size:.85rem;letter-spacing:.03em;text-transform:uppercase}.otw-btn-outline[_ngcontent-%COMP%]{border-radius:999px;padding:.3rem .9rem;border:1px solid rgba(252,211,77,.9);background-color:#0f172a;color:#facc15;font-size:.8rem}.otw-btn-danger[_ngcontent-%COMP%]{border-radius:999px;padding:.3rem .9rem;border:1px solid rgba(248,113,113,.9);background:#7f1d1d;color:#fee2e2;font-size:.8rem}.otw-item-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#020617;border-color:#374151;color:#e5e7eb}.otw-item-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{background-color:#020617;border-color:#ff9b3a;box-shadow:0 0 0 .12rem #ff9b3a66}.otw-empty[_ngcontent-%COMP%]{padding:.85rem 1rem;border-radius:12px;background-color:#111827;color:#9ca3af;font-size:.9rem}@media (max-width: 900px){.otw-admin-shell[_ngcontent-%COMP%]{grid-template-columns:1fr}.otw-admin-sidebar[_ngcontent-%COMP%]{padding:1.4rem 1.1rem;background:#000000e6;border-right:1px solid rgba(148,163,184,.35);display:flex;flex-direction:column;justify-content:space-between}.otw-admin-toggle[_ngcontent-%COMP%]{flex-direction:row;margin-left:.75rem}.otw-admin-content[_ngcontent-%COMP%]{padding:1.2rem 1.1rem 2rem}.otw-admin-summary[_ngcontent-%COMP%]{grid-template-columns:1fr}.otw-item-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.otw-item-actions[_ngcontent-%COMP%]{flex-direction:row;justify-content:flex-end}}.otw-admin-brand-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:1.2rem}.otw-admin-brand[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.7rem}.otw-admin-user-dropdown[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:.25rem;padding:.25rem .5rem;border-radius:999px;background-color:#020617;border:1px solid rgba(148,163,184,.7);cursor:pointer}.otw-admin-user-circle[_ngcontent-%COMP%]{width:60px;height:26px;border-radius:999px;background:linear-gradient(135deg,#ff9b3a,#ffb767);color:#111827;font-size:.7rem;font-weight:700;display:flex;align-items:center;justify-content:center}.otw-admin-user-caret[_ngcontent-%COMP%]{font-size:.7rem;color:#e5e7eb}.otw-admin-user-menu[_ngcontent-%COMP%]{position:absolute;top:120%;right:0;min-width:130px;padding:.35rem 0;background-color:#020617;border-radius:10px;box-shadow:0 12px 26px #0f172ad9;z-index:20}.otw-user-menu-item[_ngcontent-%COMP%]{width:100%;padding:.45rem .9rem;border:none;background:transparent;color:#e5e7eb;font-size:.8rem;text-align:left}.otw-user-menu-item[_ngcontent-%COMP%]:hover{background-color:#111827}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,#ff9b3a,#ffb767);border-radius:999px}.otw-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,#ff8a3c,#ffb14f)}.otw-list[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:#ff9b3a transparent}']})};var Ey=class n{constructor(e,t,r){this.firestore=e;this.auth=t;this.router=r}name="";email="";license="";plate="";password="";capacity=null;createDriver(){return T(this,null,function*(){if(!this.name||!this.email||!this.password){alert("Name, Email, and Password are required.");return}try{let t=(yield W_(this.auth,this.email,this.password)).user.uid,r=Hn(this.firestore,`users/${t}`);yield Dc(r,{uid:t,name:this.name,email:this.email,license:this.license,plate:this.plate,role:"driver",status:"approved",capacity:this.capacity,createdAt:new Date}),alert("Driver account created successfully!"),this.router.navigate(["/admin"])}catch(e){console.error(e),alert("Error: "+e.message)}})}static \u0275fac=function(t){return new(t||n)(ue($n),ue(Bt),ue(bt))};static \u0275cmp=Ft({type:n,selectors:[["app-add-driver"]],decls:18,vars:6,consts:[[1,"add-driver-bg"],[1,"add-driver-card"],[1,"add-driver-logo","mb-3"],[1,"text-orange","text-center","mb-2"],[1,"add-driver-subtitle","text-center","mb-4"],["type","text","placeholder","Full Name",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","email","placeholder","Email",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","text","placeholder","License Number",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","text","placeholder","Plate Number",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","number","placeholder","Jeep Capacity","min","1",1,"form-control","mb-3",3,"ngModelChange","ngModel"],["type","password","placeholder","Password",1,"form-control","mb-4",3,"ngModelChange","ngModel"],[1,"d-flex","justify-content-between","w-100"],["routerLink","/admin/dashboard",1,"add-driver-cancel-btn"],[1,"add-driver-btn",3,"click"]],template:function(t,r){t&1&&(V(0,"div",0)(1,"div",1),Vt(2,"div",2),V(3,"h2",3),H(4,"Create Driver Account"),U(),V(5,"p",4),H(6,"Add a new driver to OTW"),U(),V(7,"input",5),Qe("ngModelChange",function(o){return Xe(r.name,o)||(r.name=o),o}),U(),V(8,"input",6),Qe("ngModelChange",function(o){return Xe(r.email,o)||(r.email=o),o}),U(),V(9,"input",7),Qe("ngModelChange",function(o){return Xe(r.license,o)||(r.license=o),o}),U(),V(10,"input",8),Qe("ngModelChange",function(o){return Xe(r.plate,o)||(r.plate=o),o}),U(),V(11,"input",9),Qe("ngModelChange",function(o){return Xe(r.capacity,o)||(r.capacity=o),o}),U(),V(12,"input",10),Qe("ngModelChange",function(o){return Xe(r.password,o)||(r.password=o),o}),U(),V(13,"div",11)(14,"button",12),H(15,"Cancel"),U(),V(16,"button",13),se("click",function(){return r.createDriver()}),H(17,"Create Driver"),U()()()()),t&2&&(Y(7),Ze("ngModel",r.name),Y(),Ze("ngModel",r.email),Y(),Ze("ngModel",r.license),Y(),Ze("ngModel",r.plate),Y(),Ze("ngModel",r.capacity),Y(),Ze("ngModel",r.password))},dependencies:[Rn,er,Xn,jh,Nr,Bh,gr,Fi],styles:['.add-driver-bg[_ngcontent-%COMP%]{position:relative;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1.5rem 1rem;box-sizing:border-box}.add-driver-bg[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(#0a061ea6,#0a061ed9),url("./media/baguio-philippines-YFQ5Y6WL.jpg");background-size:cover;background-position:center;background-repeat:no-repeat;z-index:0}.add-driver-card[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:420px;border-radius:24px;background:#fffffff5;box-shadow:0 24px 60px #0f172a4d;padding:2rem 1.75rem;display:flex;flex-direction:column;align-items:center;box-sizing:border-box}.add-driver-logo[_ngcontent-%COMP%]{width:84px;height:84px;margin:0 auto;border-radius:24px;background:#fff url("./media/logo-IKMKXBN4.png") no-repeat center center;background-size:cover;background-position:center;background-repeat:no-repeat;box-shadow:0 18px 40px #180b3c73}.add-driver-logo[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.text-orange[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;color:#111827;text-align:center;margin-bottom:.25rem}.add-driver-subtitle[_ngcontent-%COMP%]{font-size:.85rem;color:#6b7280;text-align:center;margin-bottom:1.5rem}.form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;font-size:.95rem;border-radius:50px;border:1px solid #d1d5db;color:#111827;margin-bottom:1rem;box-sizing:border-box}.form-control[_ngcontent-%COMP%]:focus{border-color:#ff4500;box-shadow:0 0 0 .2rem #f603;outline:none}.add-driver-btn[_ngcontent-%COMP%]{border-radius:50px;padding:.55rem 1.2rem;width:50%;border:none;background:linear-gradient(135deg,#ff9b3a,#ffb767 40%,#5a2ea8);color:#fff;font-weight:600;font-size:.96rem;letter-spacing:.03em;text-transform:uppercase;cursor:pointer;transition:transform .15s,box-shadow .15s,filter .15s}.add-driver-btn[_ngcontent-%COMP%]:hover{filter:brightness(1.05);transform:translateY(-1px);box-shadow:0 20px 44px #180b3c99}.add-driver-btn[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 12px 26px #180b3c66}.add-driver-cancel-btn[_ngcontent-%COMP%]{border-radius:50px;padding:.45rem 1.1rem;border:1px solid #FF4500;background-color:transparent;color:#ff4500;font-size:.86rem;cursor:pointer}@media (max-width: 576px){.add-driver-card[_ngcontent-%COMP%]{padding:1.5rem 1.25rem}.add-driver-logo[_ngcontent-%COMP%]{width:80px;height:80px}.text-orange[_ngcontent-%COMP%]{font-size:1.2rem}.add-driver-subtitle[_ngcontent-%COMP%]{font-size:.8rem}.form-control[_ngcontent-%COMP%]{font-size:.85rem;padding:.5rem .9rem}.add-driver-btn[_ngcontent-%COMP%]{font-size:.85rem;padding:.45rem 1rem}}']})};var Ac=class n{constructor(e,t,r){this.auth=e;this.authService=t;this.router=r}canActivate=(e,t)=>T(this,null,function*(){let r=e.data.role,i=yield new Promise(a=>{Hs(this.auth,u=>a(u),()=>a(null))});return i?(yield this.authService.getUserRole(i.uid))===r?!0:(this.router.navigate(["/login"]),!1):(this.router.navigate(["/login"]),!1)});static \u0275fac=function(t){return new(t||n)(de(Bt),de(Ji),de(bt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var yL=[{path:"login",component:Jv},{path:"signup",children:[{path:"",component:Xv},{path:"commuter",component:ey},{path:"admin",component:ty}]},{path:"commuter/dashboard",component:vy,canActivate:[Ac],data:{role:"commuter"}},{path:"driver/dashboard",component:yy,canActivate:[Ac],data:{role:"driver"}},{path:"admin/dashboard",component:wy,canActivate:[Ac],data:{role:"admin"}},{path:"admin/dashboard/add-driver",component:Ey,canActivate:[Ac],data:{role:"admin"}},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",redirectTo:"login"}];var CL="firebasestorage.googleapis.com",gW="storageBucket",_W=120*1e3,vW=600*1e3;var Xi=class n extends zn{constructor(e,t,r=0){super(_D(e),`Firebase Storage: ${t} (${_D(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _D(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},qo=(function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n})(qo||{});function _D(n){return"storage/"+n}function yW(){let n="An unknown error occurred, please check the error payload for server response.";return new Xi(qo.UNKNOWN,n)}function wW(){return new Xi(qo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EW(){return new Xi(qo.CANCELED,"User canceled the upload/download.")}function bW(n){return new Xi(qo.INVALID_URL,"Invalid URL '"+n+"'.")}function IW(n){return new Xi(qo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function wL(n){return new Xi(qo.INVALID_ARGUMENT,n)}function DL(){return new Xi(qo.APP_DELETED,"The Firebase app was deleted.")}function TW(n){return new Xi(qo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Ho=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw IW(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(le){le.path.charAt(le.path.length-1)==="/"&&(le.path_=le.path_.slice(0,-1))}let a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),l={bucket:1,path:3};function f(le){le.path_=decodeURIComponent(le.path)}let g="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",I=new RegExp(`^https?://${y}/${g}/b/${i}/o${E}`,"i"),N={bucket:1,path:3},q=t===CL?"(?:storage.googleapis.com|storage.cloud.google.com)":t,F="([^?#]*)",W=new RegExp(`^https?://${q}/${i}/${F}`,"i"),ae=[{regex:u,indices:l,postModify:o},{regex:I,indices:N,postModify:f},{regex:W,indices:{bucket:1,path:2},postModify:f}];for(let le=0;le<ae.length;le++){let Ye=ae[le],be=Ye.regex.exec(e);if(be){let R=be[Ye.indices.bucket],C=be[Ye.indices.path];C||(C=""),r=new n(R,C),Ye.postModify(r);break}}if(r==null)throw bW(e);return r}},vD=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function CW(n,e,t){let r=1,i=null,o=null,a=!1,u=0;function l(){return u===2}let f=!1;function g(...F){f||(f=!0,e.apply(null,F))}function y(F){i=setTimeout(()=>{i=null,n(I,l())},F)}function E(){o&&clearTimeout(o)}function I(F,...W){if(f){E();return}if(F){E(),g.call(null,F,...W);return}if(l()||a){E(),g.call(null,F,...W);return}r<64&&(r*=2);let ae;u===1?(u=2,ae=0):ae=(r+Math.random())*1e3,y(ae)}let N=!1;function q(F){N||(N=!0,E(),!f&&(i!==null?(F||(u=2),clearTimeout(i),y(0)):F||(u=1)))}return y(0),o=setTimeout(()=>{a=!0,q(!0)},t),q}function DW(n){n(!1)}function SW(n){return n!==void 0}function EL(n,e,t,r){if(r<e)throw wL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw wL(`Invalid value for '${n}'. Expected ${t} or less.`)}function AW(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var yD=(function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n})(yD||{});function xW(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var wD=class{constructor(e,t,r,i,o,a,u,l,f,g,y,E=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=l,this.timeout_=f,this.progressCallback_=g,this.connectionFactory_=y,this.retry=E,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,q)=>{this.resolve_=N,this.reject_=q,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ul(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let a=u=>{let l=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;let u=o.getErrorCode()===yD.NO_ERROR,l=o.getStatus();if(!u||xW(l,this.additionalRetryCodes_)&&this.retry){let g=o.getErrorCode()===yD.ABORT;r(!1,new Ul(!1,null,g));return}let f=this.successCodes_.indexOf(l)!==-1;r(!0,new Ul(f,o))})},t=(r,i)=>{let o=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(u,u.getResponse());SW(l)?o(l):o()}catch(l){a(l)}else if(u!==null){let l=yW();l.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,l)):a(l)}else if(i.canceled){let l=this.appDelete_?DL():EW();a(l)}else{let l=wW();a(l)}};this.canceled_?t(!1,new Ul(!1,null,!0)):this.backoffId_=CW(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DW(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ul=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function RW(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function MW(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function PW(n,e){e&&(n["X-Firebase-GMPID"]=e)}function NW(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function kW(n,e,t,r,i,o,a=!0,u=!1){let l=AW(n.urlParams),f=n.url+l,g=Object.assign({},n.headers);return PW(g,e),RW(g,t),MW(g,o),NW(g,r),new wD(f,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,u)}function OW(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function LW(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Nme=256*1024;var ED=class n{constructor(e,t){this._service=e,t instanceof Ho?this._location=t:this._location=Ho.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Ho(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LW(this._location.path)}get storage(){return this._service}get parent(){let e=OW(this._location.path);if(e===null)return null;let t=new Ho(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw TW(e)}};function bL(n,e){let t=e?.[gW];return t==null?null:Ho.makeFromBucketSpec(t,n)}function FW(n,e,t,r={}){n.host=`${e}:${t}`;let i=Vi(e);i&&(ol(`https://${n.host}/b`),sl("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";let{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:v_(o,n.app.options.projectId))}var bD=class{constructor(e,t,r,i,o,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=CL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_W,this._maxUploadRetryTime=vW,this._requests=new Set,i!=null?this._bucket=Ho.makeFromBucketSpec(i,this._host):this._bucket=bL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ho.makeFromBucketSpec(this._url,e):this._bucket=bL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){EL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){EL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return T(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return T(this,null,function*(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ED(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new vD(DL());{let a=kW(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){return T(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},IL="@firebase/storage",TL="0.13.14";var SL="storage";function AL(n=Ao(),e){n=It(n);let r=Vs(n,SL).getImmediate({identifier:e}),i=__("storage");return i&&xL(r,...i),r}function xL(n,e,t,r={}){FW(n,e,t,r)}function VW(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new bD(t,r,i,e,zi)}function UW(){_r(new En(SL,VW,"PUBLIC").setMultipleInstances(!0)),lt(IL,TL,""),lt(IL,TL,"esm2017")}UW();var Ff=class{constructor(e){return e}},RL="storage",ID=class{constructor(){return Us(RL)}};var TD=new X("angularfire2.storage-instances");function jW(n,e){let t=cc(RL,n,e);return t&&new Ff(t)}function BW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ff(r)}}var zW={provide:ID,deps:[[new an,TD]]},$W={provide:Ff,useFactory:jW,deps:[[new an,TD],ni]};function ML(n,...e){return lt("angularfire",$i.full,"gcs"),Un([$W,zW,{provide:TD,useFactory:BW(n),multi:!0,deps:[Ke,wt,Hi,xo,[new an,dc],[new an,Bs],...e]}])}var PL=dt(AL,!0);var NL={production:!1,firebase:{apiKey:"AIzaSyAQuY-FE7naQBxAe0RXMRDb6sOJSTX2vTQ",authDomain:"fpotw-3328e.firebaseapp.com",projectId:"fpotw-3328e",storageBucket:"fpotw-3328e.appspot.com",messagingSenderId:"1070031116982",appId:"1:1070031116982:web:e532363d7c43e89a3be417"}};var kL={providers:[hI(yL),EN(()=>bN(NL.firebase)),C1(()=>D1()),mL(()=>gL()),ML(()=>PL())]};var by=class n{constructor(e){this.auth=e;Hs(this.auth,t=>{console.log("AUTH STATE (app root):",t?t.uid:"none")})}static \u0275fac=function(t){return new(t||n)(ue(Bt))};static \u0275cmp=Ft({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&Vt(0,"router-outlet")},dependencies:[Ah,rc],encapsulation:2})};Pb(by,kL).catch(n=>console.error(n));
